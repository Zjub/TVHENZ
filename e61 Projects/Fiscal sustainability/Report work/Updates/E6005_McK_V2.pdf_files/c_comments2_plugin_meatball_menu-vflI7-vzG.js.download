!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="31af594b-d98d-38ce-929c-77c3cb21ecb8")}catch(e){}}();
define(["exports","react","./c_core_i18n","./e_file_viewer_static_scl_page_file","./e_core_exception","./c_src_sink_index","./c_chat_chat_constants","./c_spectrum_util_raf_throttle","./c_lodash-es_lodash","./c_react-use_misc_util","metaserver/static/js/langpack","./c_init_data_edison","./c_dotlottie_common_chunk-B7OIQIGJ","./e_edison","./c_bem","./c_api_v2_routes_restorations_provider","./e_data_modules_stormcrow","./c_api_v2_routes_team_insights_provider","./c_api_v2_unauthed_client","./c_hive_schemas_sharing-request_access_user_events","./c_core_notify","react-dom","./c_security_csrf_hmac","./c_react-use_useEffectOnce","./c_pap-events_navigation_select_create_folder_action","react/jsx-runtime"],(function(e,t,s,a,n,o,l,r,c,i,m,u,d,_,f,g,M,v,b,C,E,h,p,S,N,k){"use strict";function I(e){return e&&e.__esModule?e:{default:e}}var w=I(t);const A=s.defineMessage({id:"U75RtN",defaultMessage:"Hide resolved comments"}),O=s.defineMessage({id:"jx0bjP",defaultMessage:"View resolved comments"}),R=s.defineMessage({id:"w904jy",defaultMessage:"Unsubscribe"}),T=s.defineMessage({id:"cnLKs9",defaultMessage:"Subscribe"}),B=s.defineMessage({id:"/XlCxM",defaultMessage:"Disable comments"}),L=s.defineMessage({id:"bppWf8",defaultMessage:"Enable comments"}),U=s.defineMessage({id:"bn8Q7X",defaultMessage:"Download comments"}),x=w.default.memo((({className:e,fileId:n,sharedLinkURL:o,size:l,logEvent:r,fileName:c})=>{const i=a.useDispatch(),m=s.useIntl(),u=a.createStreamFromFileOrSharedLink(n,o),d=a.createCommentFileIdentifier(n,o),[_,f]=a.useAtom(a.shouldShowResolvedCommentsAtom),g=a.useSelector((e=>{var t;return null===(t=e.permissions[d])||void 0===t?void 0:t.can_enable_commenting})),M=a.useSelector((e=>a.areCommentsEnabled(e,d))),v=a.useSelector((e=>{var t;return null===(t=e.permissions[d])||void 0===t?void 0:t.can_subscribe})),b=a.useSelector((e=>a.isUserSubscribed(e,d))),C=a.useSelector((e=>a.getThreads(e,d))),[E,h]=w.default.useState({showResolvedComments:_}),p=t.useCallback((()=>{f(!_),r({event:a.CommentsEventName.SHOW_RESOLVED_COMMENTS})}),[f,_,r]),S=t.useCallback((()=>{i(a.subscribeAction({arg:{stream:u}})),r({event:a.CommentsEventName.SUBSCRIBE_COMMENTS})}),[i,u,r]),N=t.useCallback((()=>{i(a.unsubscribeAction({arg:{stream:u}})),r({event:a.CommentsEventName.UNSUBSCRIBE_COMMENTS})}),[u,i,r]),k=t.useCallback((()=>{i(a.enableCommentingAction({arg:{stream:u}})),r({event:a.CommentsEventName.ENABLE_COMMENTS})}),[u,i,r]),I=t.useCallback((()=>{i(a.disableCommentingAction({arg:{stream:u}})),r({event:a.CommentsEventName.DISABLE_COMMENTS})}),[i,u,r]),x=w.default.useCallback((({isOpen:e})=>{e&&h({showResolvedComments:_})}),[_]);return M||g?w.default.createElement(a.Menu.Wrapper,{className:e,onToggle:x},(({getContentProps:e,getTriggerProps:t})=>w.default.createElement(w.default.Fragment,null,w.default.createElement(a.IconButton,{variant:"transparent",...t(),size:l,"aria-label":m.formatMessage({id:"OD3YF0",defaultMessage:"Other actions"})},w.default.createElement(a.UIIcon,{src:a.MoreHorizontalLine,size:l})),w.default.createElement(a.Menu.Content,{...e()},w.default.createElement(a.Menu.Segment,null,w.default.createElement(a.Menu.ActionItem,{value:E.showResolvedComments?"hide-resolve-comments":"show-resolve-comments",onClick:p,disabled:!M},E.showResolvedComments?m.formatMessage(A):m.formatMessage(O)),v?w.default.createElement(a.Menu.ActionItem,{value:b?"unsubscribe":"subscribe",onClick:b?N:S,disabled:!M},b?m.formatMessage(R):m.formatMessage(T)):null,g?w.default.createElement(a.Menu.ActionItem,{value:b?"enableComments":"disableComments",onClick:M?I:k},M?m.formatMessage(B):m.formatMessage(L)):null,w.default.createElement(a.Menu.ActionItem,{value:"downloadComments",onClick:()=>{a.downloadThreadsAsTxt(C,c)}},m.formatMessage(U))))))):null}));x.displayName="CommentsMeatball",e.CommentsMeatball=x}));
//# sourceMappingURL=c_comments2_plugin_meatball_menu.js-vflWeebzG.map

//# debugId=31af594b-d98d-38ce-929c-77c3cb21ecb8