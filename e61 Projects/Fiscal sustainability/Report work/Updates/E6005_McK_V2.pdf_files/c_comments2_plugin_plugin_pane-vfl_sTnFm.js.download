!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="25aae716-e886-37fb-8767-519b0ba30c0d")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_core_i18n","./c_lodash-es_lodash","./c_comment_editor_components_sticker_component","react-dom","./c_dig-icons_assets_ui-icon_line_restore","./c_dig-components_tabs_index","./c_dig-components_chip_index","./c_api_v2_routes_team_insights_provider","./e_data_modules_stormcrow","./c_dotlottie_common_chunk-B7OIQIGJ","./c_comments2_plugin_meatball_menu","./e_edison","./c_bem","./c_chat_chat_constants","./c_spectrum_util_raf_throttle","./e_core_exception","./c_init_data_edison","./c_src_sink_index","./c_react-use_misc_util","./c_api_v2_routes_restorations_provider","./c_api_v2_unauthed_client","./c_hive_schemas_sharing-request_access_user_events","./c_core_notify","./c_security_csrf_hmac","./c_react-use_useEffectOnce","./c_pap-events_navigation_select_create_folder_action","react/jsx-runtime","metaserver/static/js/langpack"],(function(e,t,n,r,o,i,a,s,c,l,u,d,p,f,m,g,h,v,y,_,b,k,w,C,S,E,x,M,T,A,O){"use strict";function D(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var R=D(t),N=D(a);function P(e){return e.ns("reactions")}const B="reactions:list_reactions_batch",I="reactions:logged_out_list_reactions_batch",K=(e,t)=>R.default.useMemo((()=>{return t=e,d.createGenericMutation({mutationFn:()=>async e=>({apiData:await P(t).rpc("add_reaction",e.apiArg,{}),pkgData:null}),getMutationKey:d.getGenericMutationKey("apiv2","reactions:add_reaction")});var t}),[e]).useMutation({retry:t}),L=(e,t)=>R.default.useMemo((()=>{return t=e,d.createGenericMutation({mutationFn:()=>async e=>({apiData:await P(t).rpc("remove_reaction",e.apiArg,{}),pkgData:null}),getMutationKey:d.getGenericMutationKey("apiv2","reactions:remove_reaction")});var t}),[e]).useMutation({retry:t}),F="file";function j(e,r,o){const[i,a]=n.useAtom(n.reactionsAtom),[,s]=n.useAtom(n.reactionsBoltInfoAtom),[c]=n.useAtom(n.currentUserPidAtom),l=K(e,3),u=L(e,3);return[t.useCallback((async(e,t)=>{if(void 0===c)return Promise.resolve();const u=JSON.parse(JSON.stringify(i[t]||[])),d=u.find((t=>t.reaction===e));if(void 0!==d)d.user_ids.push(c);else{const t={reaction:e,user_ids:[c]};u.push(t)}a({[t]:u}),r({event:n.CommentsEventName.ADD_COMMENT_REACTION,extra:o});try{const i={".tag":"comment_id",comment_id:t},c=await l.mutateAsync({apiArg:{target:i,reaction:e,surface:F}}),u=null==c?void 0:c.apiData.bolt_info,d=null==c?void 0:c.apiData.reactions;void 0!==u&&s({[t]:u}),void 0!==d&&a({[t]:d}),r({event:n.CommentsEventName.ADD_COMMENT_REACTION_SUCCESS,extra:o})}catch(e){a(i)}}),[c,i,a,r,o,l,s]),t.useCallback((async(e,t)=>{if(void 0===c)return Promise.resolve();const l=JSON.parse(JSON.stringify(i[t]||[])),d=l.findIndex((t=>t.reaction===e));-1!==d&&(l[d].user_ids=l[d].user_ids.filter((e=>e!==c))),l[d].user_ids.length<=0&&l.splice(d,1),a({[t]:l}),r({event:n.CommentsEventName.REMOVE_COMMENT_REACTION,extra:o});try{const i={".tag":"comment_id",comment_id:t},c=await u.mutateAsync({apiArg:{target:i,reaction:e,surface:F}}),l=null==c?void 0:c.apiData.bolt_info,d=null==c?void 0:c.apiData.reactions;void 0!==l&&s({[t]:l}),void 0!==d&&a({[t]:d}),r({event:n.CommentsEventName.REMOVE_COMMENT_REACTION_SUCCESS,extra:o})}catch(e){a(i)}}),[c,i,a,r,o,u,s])]}function z(e,r,o,i){const[,a]=n.useAtom(n.reactionsAtom),[s,c]=n.useAtom(n.reactionsBoltInfoAtom),[,l]=n.useAtom(n.reactionsUsersAtom),[,u]=n.useAtom(n.currentUserPidAtom),p=t.useMemo((()=>{return i?(e=r,d.createGenericQuery({queryRouteFilter:["apiv2",I],queryFn:({apiArg:t})=>async()=>({apiData:await P(e).rpc("logged_out_list_reactions_batch",t,{}),pkgData:null}),getQueryKey:d.getGenericQueryKey("apiv2",I)})):(e=>d.createGenericQuery({queryRouteFilter:["apiv2",B],queryFn:({apiArg:t})=>async()=>({apiData:await P(e).rpc("list_reactions_batch",t,{}),pkgData:null}),getQueryKey:d.getGenericQueryKey("apiv2",B)}))(r);var e}),[r,i]),f=t.useMemo((()=>o.map((e=>({".tag":"comment_id",comment_id:e})))),[o]),{data:m,refetch:g}=p.useQuery({apiArg:{targets:f,surface:F},pkgArg:void 0},{retry:3}),h=null==m?void 0:m.apiData;t.useEffect((()=>{var e,t;if(void 0!==h){const n=null!==(e=h.target_reactions)&&void 0!==e?e:{},r={},o={};for(const[e,t]of Object.entries(n))t.reactions&&t.bolt_info&&(r[e]=t.reactions,o[e]=t.bolt_info);a(r),c(o);const i=null!==(t=h.users)&&void 0!==t?t:{};l(i);const s=h.current_user_pid;u(s)}}),[h,u,a,c,l]),t.useEffect((()=>{if(void 0!==e)return Object.keys(s).length&&e.subscribe(Object.values(s),g,g),()=>{e.unsubscribe()}}),[e,s,g])}const U=R.default.createContext(void 0),H=({container:e,scope:t,children:n})=>{const[r,o]=R.default.useState((()=>e.getStatus()));R.default.useEffect((()=>e.subscribe(o).unsubscribe),[e]);const i=R.default.useMemo((()=>({container:e,scope:t,status:r})),[e,t,r]);return R.default.createElement(U.Provider,{value:i},n)},V=()=>R.default.useContext(U),W=(e,t,n)=>{if(!t)return{};const r=t.getBoundingClientRect();let o=t.offsetParent;for(;o&&!o.classList.contains(n);)o=o.offsetParent;if(!o)return{};if(e)return{bottom:"100%"};const i=o.getBoundingClientRect();return{top:r.bottom-i.top}},q=({placeholderMessage:e,scrollClassName:t,onMentionStart:n,onMentionSuccess:r,onMentionCanceled:o,openUpward:a})=>{const{status:s}=V(),{active:c,macroRef:l,isVisible:u}=s.macro;if(!(c&&c.chrome&&l&&u))return R.createElement("div",null);const d=c.chrome;return R.createElement("div",{className:i.classes.activeMacroChrome,style:W(a,l,t)},R.createElement(d,{placeholderMessage:e,onMentionStart:n,onMentionSuccess:r,onMentionCanceled:o}))};q.displayName="ActiveMacroChromeComponentRedesign";const $=({children:e})=>{const{status:t}=V();return""!==t.draft.editorState.getCurrentContent().getPlainText().trim()&&e?R.createElement("div",{className:i.classes.scCommentEditorTagline},e):null};$.displayName="CommentEditorTagline";var G=n.immutableExports.OrderedMap,Q={createFromArray:function(e){return G(e.map((function(e){return[e.getKey(),e]})))}};var J=n.immutableExports,X=J.Map,Y=J.OrderedSet,Z=J.Record,ee=Y(),te={style:ee,entity:null},ne=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getStyle=function(){return this.get("style")},o.getEntity=function(){return this.get("entity")},o.hasStyle=function(e){return this.getStyle().includes(e)},r.applyStyle=function(e,t){var n=e.set("style",e.getStyle().add(t));return r.create(n)},r.removeStyle=function(e,t){var n=e.set("style",e.getStyle().remove(t));return r.create(n)},r.applyEntity=function(e,t){var n=e.getEntity()===t?e:e.set("entity",t);return r.create(n)},r.create=function(e){if(!e)return re;var t=X({style:ee,entity:null}).merge(e),n=oe.get(t);if(n)return n;var o=new r(t);return oe=oe.set(t,o),o},r.fromJS=function(e){var t=e.style,n=e.entity;return new r({style:Array.isArray(t)?Y(t):t,entity:Array.isArray(n)?Y(n):n})},r}(Z(te)),re=new ne,oe=X([[X(te),re]]);ne.EMPTY=re;var ie=ne;var ae=function(e,t,n,r){if(e.size){var o=0;e.reduce((function(e,i,a){return t(e,i)||(n(e)&&r(o,a),o=a),i})),n(e.last())&&r(o,e.count())}};var se=ie,ce=ae,le=n.immutableExports,ue=le.List,de=le.Map,pe=le.OrderedSet,fe=le.Record,me=le.Repeat,ge=pe(),he=fe({key:"",type:"unstyled",text:"",characterList:ue(),depth:0,data:de()}),ve=function(e){var t,n;function r(t){return e.call(this,function(e){if(!e)return e;var t=e.characterList,n=e.text;return n&&!t&&(e.characterList=ue(me(se.EMPTY,n.length))),e}(t))||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getKey=function(){return this.get("key")},o.getType=function(){return this.get("type")},o.getText=function(){return this.get("text")},o.getCharacterList=function(){return this.get("characterList")},o.getLength=function(){return this.getText().length},o.getDepth=function(){return this.get("depth")},o.getData=function(){return this.get("data")},o.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():ge},o.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},o.findStyleRanges=function(e,t){ce(this.getCharacterList(),ye,e,t)},o.findEntityRanges=function(e,t){ce(this.getCharacterList(),_e,e,t)},r}(he);function ye(e,t){return e.getStyle()===t.getStyle()}function _e(e,t){return e.getEntity()===t.getEntity()}var be=ve;var ke=ie,we=ae,Ce=n.immutableExports,Se=Ce.List,Ee=Ce.Map,xe=Ce.OrderedSet,Me=Ce.Record,Te=Ce.Repeat,Ae=xe(),Oe={parent:null,characterList:Se(),data:Ee(),depth:0,key:"",text:"",type:"unstyled",children:Se(),prevSibling:null,nextSibling:null},De=function(e,t){return e.getStyle()===t.getStyle()},Re=function(e,t){return e.getEntity()===t.getEntity()},Ne=function(e){var t,n;function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe;return e.call(this,function(e){if(!e)return e;var t=e.characterList,n=e.text;return n&&!t&&(e.characterList=Se(Te(ke.EMPTY,n.length))),e}(t))||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getKey=function(){return this.get("key")},o.getType=function(){return this.get("type")},o.getText=function(){return this.get("text")},o.getCharacterList=function(){return this.get("characterList")},o.getLength=function(){return this.getText().length},o.getDepth=function(){return this.get("depth")},o.getData=function(){return this.get("data")},o.getInlineStyleAt=function(e){var t=this.getCharacterList().get(e);return t?t.getStyle():Ae},o.getEntityAt=function(e){var t=this.getCharacterList().get(e);return t?t.getEntity():null},o.getChildKeys=function(){return this.get("children")},o.getParentKey=function(){return this.get("parent")},o.getPrevSiblingKey=function(){return this.get("prevSibling")},o.getNextSiblingKey=function(){return this.get("nextSibling")},o.findStyleRanges=function(e,t){we(this.getCharacterList(),De,e,t)},o.findEntityRanges=function(e,t){we(this.getCharacterList(),Re,e,t)},r}(Me(Oe)),Pe=Ne,Be=ie,Ie=n.immutableExports.Map;function Ke(e,t,n,r){var o=e.getBlockMap(),i=t.getStartKey(),a=t.getStartOffset(),s=t.getEndKey(),c=t.getEndOffset(),l=o.skipUntil((function(e,t){return t===i})).takeUntil((function(e,t){return t===s})).concat(Ie([[s,o.get(s)]])).map((function(e,t){var o,l;i===s?(o=a,l=c):(o=t===i?a:0,l=t===s?c:e.getLength());for(var u,d=e.getCharacterList();o<l;)u=d.get(o),d=d.set(o,r?Be.applyStyle(u,n):Be.removeStyle(u,n)),o++;return e.set("characterList",d)}));return e.merge({blockMap:o.merge(l),selectionBefore:t,selectionAfter:t})}var Le={add:function(e,t,n){return Ke(e,t,n,!0)},remove:function(e,t,n){return Ke(e,t,n,!1)}},Fe=ie;var je=function(e,t,n,r){for(var o=t,i=e.getCharacterList();o<n;)i=i.set(o,Fe.applyEntity(i.get(o),r)),o++;return e.set("characterList",i)},ze=n.immutableExports;var Ue=function(e,t,n){var r=e.getBlockMap(),o=t.getStartKey(),i=t.getStartOffset(),a=t.getEndKey(),s=t.getEndOffset(),c=r.skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===a})).toOrderedMap().merge(ze.OrderedMap([[a,r.get(a)]])).map((function(e,t){var r=t===o?i:0,c=t===a?s:e.getLength();return je(e,r,c,n)}));return e.merge({blockMap:r.merge(c),selectionBefore:t,selectionAfter:t})};var He=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(!e){var i;if(void 0===t)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;(i=new Error(t.replace(/%s/g,(function(){return String(r[a++])})))).name="Invariant Violation"}throw i.framesToPop=1,i}},Ve=He;var We={getRemovalRange:function(e,t,n,r,o){var i=n.split(" ");i=i.map((function(e,t){if("forward"===o){if(t>0)return" "+e}else if(t<i.length-1)return e+" ";return e}));for(var a,s=r,c=null,l=null,u=0;u<i.length;u++){if(e<(a=s+i[u].length)&&s<t)null!==c||(c=s),l=a;else if(null!==c)break;s=a}var d=r+n.length,p=c===r,f=l===d;return(!p&&f||p&&!f)&&("forward"===o?l!==d&&l++:c!==r&&c--),{start:c,end:l}}},qe=function(e,t){var n=[];return e.findEntityRanges((function(e){return e.getEntity()===t}),(function(e,t){n.push({start:e,end:t})})),n.length||Ve(!1),n},$e=He;function Ge(e,t,n,r,o,i,a){var s=n.getStartOffset(),c=n.getEndOffset(),l=e.__get(o).getMutability(),u=a?s:c;if("MUTABLE"===l)return n;var d=qe(t,o).filter((function(e){return u<=e.end&&u>=e.start}));1!=d.length&&$e(!1);var p=d[0];if("IMMUTABLE"===l)return n.merge({anchorOffset:p.start,focusOffset:p.end,isBackward:!1});i||(a?c=p.end:s=p.start);var f=We.getRemovalRange(s,c,t.getText().slice(p.start,p.end),p.start,r);return n.merge({anchorOffset:f.start,focusOffset:f.end,isBackward:!1})}var Qe=function(e,t,n,r,o){var i=r.getStartOffset(),a=r.getEndOffset(),s=t.getEntityAt(i),c=n.getEntityAt(a-1);if(!s&&!c)return r;var l=r;if(s&&s===c)l=Ge(e,t,l,o,s,!0,!0);else if(s&&c){var u=Ge(e,t,l,o,s,!1,!0),d=Ge(e,n,l,o,c,!1,!1);l=l.merge({anchorOffset:u.getAnchorOffset(),focusOffset:d.getFocusOffset(),isBackward:!1})}else if(s){var p=Ge(e,t,l,o,s,!1,!0);l=l.merge({anchorOffset:p.getStartOffset(),isBackward:!1})}else if(c){var f=Ge(e,n,l,o,c,!1,!1);l=l.merge({focusOffset:f.getEndOffset(),isBackward:!1})}return l},Je={},Xe=Math.pow(2,24);var Ye=function(){for(var e;void 0===e||Je.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*Xe).toString(32);return Je[e]=!0,e},Ze=Pe,et=Ye,tt=n.immutableExports.OrderedMap,nt=function(e){return e.first()instanceof Ze?function(e){var t,n={};return tt(e.withMutations((function(e){e.forEach((function(r,o){var i=r.getKey(),a=r.getNextSiblingKey(),s=r.getPrevSiblingKey(),c=r.getChildKeys(),l=r.getParentKey(),u=et();if(n[i]=u,a&&(e.get(a)?e.setIn([a,"prevSibling"],u):e.setIn([i,"nextSibling"],null)),s&&(e.get(s)?e.setIn([s,"nextSibling"],u):e.setIn([i,"prevSibling"],null)),l&&e.get(l)){var d=e.get(l).getChildKeys();e.setIn([l,"children"],d.set(d.indexOf(r.getKey()),u))}else e.setIn([i,"parent"],null),t&&(e.setIn([t.getKey(),"nextSibling"],u),e.setIn([i,"prevSibling"],n[t.getKey()])),t=e.get(i);c.forEach((function(t){e.get(t)?e.setIn([t,"parent"],u):e.setIn([i,"children"],r.getChildKeys().filter((function(e){return e!==t})))}))}))})).toArray().map((function(e){return[n[e.getKey()],e.set("key",n[e.getKey()])]})))}(e):function(e){return tt(e.toArray().map((function(e){var t=et();return[t,e.set("key",t)]})))}(e)},rt=ie,ot=ae,it=He;function at(e,t,n){var r=t.getCharacterList(),o=n>0?r.get(n-1):void 0,i=n<r.count()?r.get(n):void 0,a=o?o.getEntity():void 0,s=i?i.getEntity():void 0;if(s&&s===a&&"MUTABLE"!==e.__get(s).getMutability()){for(var c,l=function(e,t,n){var r;return ot(e,(function(e,t){return e.getEntity()===t.getEntity()}),(function(e){return e.getEntity()===t}),(function(e,t){e<=n&&t>=n&&(r={start:e,end:t})})),"object"!=typeof r&&it(!1),r}(r,s,n),u=l.start,d=l.end;u<d;)c=r.get(u),r=r.set(u,rt.applyEntity(c,null)),u++;return t.set("characterList",r)}return t}var st=function(e,t){var n=e.getBlockMap(),r=e.getEntityMap(),o={},i=t.getStartKey(),a=t.getStartOffset(),s=n.get(i),c=at(r,s,a);c!==s&&(o[i]=c);var l=t.getEndKey(),u=t.getEndOffset(),d=n.get(l);i===l&&(d=c);var p=at(r,d,u);return p!==d&&(o[l]=p),Object.keys(o).length?e.merge({blockMap:n.merge(o),selectionAfter:t}):e.set("selectionAfter",t)},ct=nt,lt=st,ut=function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),o=t.getEndKey(),i=t.getEndOffset(),a=lt(e,t).getBlockMap(),s=a.keySeq(),c=s.indexOf(n),l=s.indexOf(o)+1;return ct(a.slice(c,l).map((function(e,t){var a=e.getText(),s=e.getCharacterList();return n===o?e.merge({text:a.slice(r,i),characterList:s.slice(r,i)}):t===n?e.merge({text:a.slice(r),characterList:s.slice(r)}):t===o?e.merge({text:a.slice(0,i),characterList:s.slice(0,i)}):e})))};var dt=function(e,t,n){var r=e;if(n===r.count())t.forEach((function(e){r=r.push(e)}));else if(0===n)t.reverse().forEach((function(e){r=r.unshift(e)}));else{var o=r.slice(0,n),i=r.slice(n);r=o.concat(t,i).toList()}return r},pt=Q,ft=Pe,mt=n.immutableExports,gt=dt,ht=He,vt=nt,yt=mt.List,_t=function(e,t,n,r,o,i){var a=n.first()instanceof ft,s=[],c=r.size,l=n.get(o),u=r.first(),d=r.last(),p=d.getLength(),f=d.getKey(),m=a&&(!l.getChildKeys().isEmpty()||!u.getChildKeys().isEmpty());n.forEach((function(e,t){t===o?(m?s.push(e):s.push(function(e,t,n){var r=e.getText(),o=e.getCharacterList(),i=r.slice(0,t),a=o.slice(0,t),s=n.first();return e.merge({text:i+s.getText(),characterList:a.concat(s.getCharacterList()),type:i?e.getType():s.getType(),data:s.getData()})}(e,i,r)),r.slice(m?0:1,c-1).forEach((function(e){return s.push(e)})),s.push(function(e,t,n){var r=e.getText(),o=e.getCharacterList(),i=r.length,a=r.slice(t,i),s=o.slice(t,i),c=n.last();return c.merge({text:c.getText()+a,characterList:c.getCharacterList().concat(s),data:c.getData()})}(e,i,r))):s.push(e)}));var g=pt.createFromArray(s);return a&&(g=function(e,t,n,r){return e.withMutations((function(t){var o=n.getKey(),i=r.getKey(),a=n.getNextSiblingKey(),s=n.getParentKey(),c=function(e,t){var n=e.getKey(),r=e,o=[];for(t.get(n)&&o.push(n);r&&r.getNextSiblingKey();){var i=r.getNextSiblingKey();if(!i)break;o.push(i),r=t.get(i)}return o}(r,e),l=c[c.length-1];if(t.get(i)?(t.setIn([o,"nextSibling"],i),t.setIn([i,"prevSibling"],o)):(t.setIn([o,"nextSibling"],r.getNextSiblingKey()),t.setIn([r.getNextSiblingKey(),"prevSibling"],o)),t.setIn([l,"nextSibling"],a),a&&t.setIn([a,"prevSibling"],l),c.forEach((function(e){return t.setIn([e,"parent"],s)})),s){var u=e.get(s).getChildKeys(),d=u.indexOf(o)+1,p=u.toArray();p.splice.apply(p,[d,0].concat(c)),t.setIn([s,"children"],yt(p))}}))}(g,0,l,u)),e.merge({blockMap:g,selectionBefore:t,selectionAfter:t.merge({anchorKey:f,anchorOffset:p,focusKey:f,focusOffset:p,isBackward:!1})})},bt=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"REPLACE_WITH_NEW_DATA";t.isCollapsed()||ht(!1);var o=e.getBlockMap(),i=vt(n),a=t.getStartKey(),s=t.getStartOffset(),c=o.get(a);return c instanceof ft&&(c.getChildKeys().isEmpty()||ht(!1)),1===i.size?function(e,t,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"REPLACE_WITH_NEW_DATA",s=n.get(o),c=s.getText(),l=s.getCharacterList(),u=o,d=i+r.getText().length,p=null;switch(a){case"MERGE_OLD_DATA_TO_NEW_DATA":p=r.getData().merge(s.getData());break;case"REPLACE_WITH_NEW_DATA":p=r.getData()}var f=s.getType();c&&"unstyled"===f&&(f=r.getType());var m=s.merge({text:c.slice(0,i)+r.getText()+c.slice(i),characterList:gt(l,r.getCharacterList(),i),type:f,data:p});return e.merge({blockMap:n.set(o,m),selectionBefore:t,selectionAfter:t.merge({anchorKey:u,anchorOffset:d,focusKey:u,focusOffset:d,isBackward:!1})})}(e,t,o,i.first(),a,s,r):_t(e,t,o,i,a,s)},kt=n.immutableExports,wt=dt,Ct=He,St=kt.Repeat;var Et=function(e,t,n,r){t.isCollapsed()||Ct(!1);var o=null;if(null!=n&&(o=n.length),null==o||0===o)return e;var i=e.getBlockMap(),a=t.getStartKey(),s=t.getStartOffset(),c=i.get(a),l=c.getText(),u=c.merge({text:l.slice(0,s)+n+l.slice(s,c.getLength()),characterList:wt(c.getCharacterList(),St(r,o).toList(),s)}),d=s+o;return e.merge({blockMap:i.set(a,u),selectionAfter:t.merge({anchorOffset:d,focusOffset:d})})},xt=n.immutableExports.Map;var Mt=function(e,t,n){var r=t.getStartKey(),o=t.getEndKey(),i=e.getBlockMap(),a=i.toSeq().skipUntil((function(e,t){return t===r})).takeUntil((function(e,t){return t===o})).concat(xt([[o,i.get(o)]])).map(n);return e.merge({blockMap:i.merge(a),selectionBefore:t,selectionAfter:t})},Tt=Pe,At=function(e,t){if(!(e instanceof Tt))return null;var n=e.getNextSiblingKey();if(n)return n;var r=e.getParentKey();if(!r)return null;for(var o=t.get(r);o&&!o.getNextSiblingKey();){var i=o.getParentKey();o=i?t.get(i):null}return o?o.getNextSiblingKey():null},Ot=Pe,Dt=At,Rt=n.immutableExports;Rt.List;var Nt=Rt.Map,Pt=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},Bt=function(e,t){var n=[];if(!e)return n;for(var r=t.get(e);r&&r.getParentKey();){var o=r.getParentKey();o&&n.push(o),r=o?t.get(o):null}return n},It=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getNextSiblingKey();r&&!t.get(r);)r=n.get(r).getNextSiblingKey()||null;return r},Kt=function(e,t,n){if(!e)return null;for(var r=n.get(e.getKey()).getPrevSiblingKey();r&&!t.get(r);)r=n.get(r).getPrevSiblingKey()||null;return r},Lt=function(e,t,n,r){return e.withMutations((function(o){if(Pt(t.getKey(),o,(function(e){return e.merge({nextSibling:It(e,o,r),prevSibling:Kt(e,o,r)})})),Pt(n.getKey(),o,(function(e){return e.merge({nextSibling:It(e,o,r),prevSibling:Kt(e,o,r)})})),Bt(t.getKey(),r).forEach((function(e){return Pt(e,o,(function(e){return e.merge({children:e.getChildKeys().filter((function(e){return o.get(e)})),nextSibling:It(e,o,r),prevSibling:Kt(e,o,r)})}))})),Pt(t.getNextSiblingKey(),o,(function(e){return e.merge({prevSibling:t.getPrevSiblingKey()})})),Pt(t.getPrevSiblingKey(),o,(function(e){return e.merge({nextSibling:It(e,o,r)})})),Pt(n.getNextSiblingKey(),o,(function(e){return e.merge({prevSibling:Kt(e,o,r)})})),Pt(n.getPrevSiblingKey(),o,(function(e){return e.merge({nextSibling:n.getNextSiblingKey()})})),Bt(n.getKey(),r).forEach((function(e){Pt(e,o,(function(e){return e.merge({children:e.getChildKeys().filter((function(e){return o.get(e)})),nextSibling:It(e,o,r),prevSibling:Kt(e,o,r)})}))})),function(e,t){var n=[];if(!e)return n;for(var r=Dt(e,t);r&&t.get(r);){var o=t.get(r);n.push(r),r=o.getParentKey()?Dt(o,t):null}return n}(n,r).forEach((function(e){return Pt(e,o,(function(e){return e.merge({nextSibling:It(e,o,r),prevSibling:Kt(e,o,r)})}))})),null==e.get(t.getKey())&&null!=e.get(n.getKey())&&n.getParentKey()===t.getKey()&&null==n.getPrevSiblingKey()){var i=t.getPrevSiblingKey();Pt(n.getKey(),o,(function(e){return e.merge({prevSibling:i})})),Pt(i,o,(function(e){return e.merge({nextSibling:n.getKey()})}));var a=i?e.get(i):null,s=a?a.getParentKey():null;if(t.getChildKeys().forEach((function(e){Pt(e,o,(function(e){return e.merge({parent:s})}))})),null!=s){var c=e.get(s);Pt(s,o,(function(e){return e.merge({children:c.getChildKeys().concat(t.getChildKeys())})}))}Pt(t.getChildKeys().find((function(t){return null===e.get(t).getNextSiblingKey()})),o,(function(e){return e.merge({nextSibling:t.getNextSiblingKey()})}))}}))},Ft=function(e,t,n){if(0===t)for(;t<n;)e=e.shift(),t++;else if(n===e.count())for(;n>t;)e=e.pop(),n--;else{var r=e.slice(0,t),o=e.slice(n);e=r.concat(o).toList()}return e},jt=function(e,t){if(t.isCollapsed())return e;var n,r=e.getBlockMap(),o=t.getStartKey(),i=t.getStartOffset(),a=t.getEndKey(),s=t.getEndOffset(),c=r.get(o),l=r.get(a),u=c instanceof Ot,d=[];if(u){var p=l.getChildKeys(),f=Bt(a,r);l.getNextSiblingKey()&&(d=d.concat(f)),p.isEmpty()||(d=d.concat(f.concat([a]))),d=d.concat(Bt(Dt(l,r),r))}n=c===l?Ft(c.getCharacterList(),i,s):c.getCharacterList().slice(0,i).concat(l.getCharacterList().slice(s));var m=c.merge({text:c.getText().slice(0,i)+l.getText().slice(s),characterList:n}),g=u&&0===i&&0===s&&l.getParentKey()===o&&null==l.getPrevSiblingKey()?Nt([[o,null]]):r.toSeq().skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===a})).filter((function(e,t){return-1===d.indexOf(t)})).concat(Nt([[a,null]])).map((function(e,t){return t===o?m:null})),h=r.merge(g).filter((function(e){return!!e}));return u&&c!==l&&(h=Lt(h,c,l,r)),e.merge({blockMap:h,selectionBefore:t,selectionAfter:t.merge({anchorKey:o,anchorOffset:i,focusKey:o,focusOffset:i,isBackward:!1})})},zt=Pe,Ut=Ye,Ht=n.immutableExports,Vt=He,Wt=Mt,qt=Ht.List,$t=Ht.Map,Gt=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},Qt=function(e,t){t.isCollapsed()||Vt(!1);var n=t.getAnchorKey(),r=e.getBlockMap(),o=r.get(n),i=o.getText();if(!i){var a=o.getType();if("unordered-list-item"===a||"ordered-list-item"===a)return Wt(e,t,(function(e){return e.merge({type:"unstyled",depth:0})}))}var s=t.getAnchorOffset(),c=o.getCharacterList(),l=Ut(),u=o instanceof zt,d=o.merge({text:i.slice(0,s),characterList:c.slice(0,s)}),p=d.merge({key:l,text:i.slice(s),characterList:c.slice(s),data:$t()}),f=r.toSeq().takeUntil((function(e){return e===o})),m=r.toSeq().skipUntil((function(e){return e===o})).rest(),g=f.concat([[n,d],[l,p]],m).toOrderedMap();return u&&(o.getChildKeys().isEmpty()||Vt(!1),g=function(e,t,n){return e.withMutations((function(e){var r=t.getKey(),o=n.getKey();Gt(t.getParentKey(),e,(function(e){var t=e.getChildKeys(),n=t.indexOf(r)+1,i=t.toArray();return i.splice(n,0,o),e.merge({children:qt(i)})})),Gt(t.getNextSiblingKey(),e,(function(e){return e.merge({prevSibling:o})})),Gt(r,e,(function(e){return e.merge({nextSibling:o})})),Gt(o,e,(function(e){return e.merge({prevSibling:r})}))}))}(g,d,p)),e.merge({blockMap:g,selectionBefore:t,selectionAfter:t.merge({anchorKey:l,anchorOffset:0,focusKey:l,focusOffset:0,isBackward:!1})})},Jt=ie,Xt=Le,Yt=Ue,Zt=Qe,en=ut,tn=n.immutableExports,nn=bt,rn=Et,on=He,an=Mt,sn=st,cn=jt,ln=Qt,un=tn.OrderedSet,dn={replaceText:function(e,t,n,r,o){var i=sn(e,t),a=cn(i,t),s=Jt.create({style:r||un(),entity:o||null});return rn(a,a.getSelectionAfter(),n,s)},insertText:function(e,t,n,r,o){return t.isCollapsed()||on(!1),dn.replaceText(e,t,n,r,o)},moveText:function(e,t,n){var r=en(e,t),o=dn.removeRange(e,t,"backward");return dn.replaceWithFragment(o,n,r)},replaceWithFragment:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"REPLACE_WITH_NEW_DATA",o=sn(e,t),i=cn(o,t);return nn(i,i.getSelectionAfter(),n,r)},removeRange:function(e,t,n){var r,o,i,a;t.getIsBackward()&&(t=t.merge({anchorKey:t.getFocusKey(),anchorOffset:t.getFocusOffset(),focusKey:t.getAnchorKey(),focusOffset:t.getAnchorOffset(),isBackward:!1})),r=t.getAnchorKey(),o=t.getFocusKey(),i=e.getBlockForKey(r),a=e.getBlockForKey(o);var s=t.getStartOffset(),c=t.getEndOffset(),l=i.getEntityAt(s),u=a.getEntityAt(c-1);if(r===o&&l&&l===u){var d=Zt(e.getEntityMap(),i,a,t,n);return cn(e,d)}var p=sn(e,t);return cn(p,t)},splitBlock:function(e,t){var n=sn(e,t),r=cn(n,t);return ln(r,r.getSelectionAfter())},applyInlineStyle:function(e,t,n){return Xt.add(e,t,n)},removeInlineStyle:function(e,t,n){return Xt.remove(e,t,n)},setBlockType:function(e,t,n){return an(e,t,(function(e){return e.merge({type:n,depth:0})}))},setBlockData:function(e,t,n){return an(e,t,(function(e){return e.merge({data:n})}))},mergeBlockData:function(e,t,n){return an(e,t,(function(e){return e.merge({data:e.getData().merge(n)})}))},applyEntity:function(e,t,n){var r=sn(e,t);return Yt(r,t,n)}},pn=dn;var fn=function(e){return Object.keys(e).map((function(t){return e[t]}))};function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gn=ae,hn=fn,vn=n.immutableExports,yn=vn.List,_n=vn.Repeat,bn=vn.Record,kn=function(){return!0},wn=bn({start:null,end:null}),Cn=bn({start:null,end:null,decoratorKey:null,leaves:null}),Sn={generate:function(e,t,n){var r=t.getLength();if(!r)return yn.of(new Cn({start:0,end:0,decoratorKey:null,leaves:yn.of(new wn({start:0,end:0}))}));var o=[],i=n?n.getDecorations(t,e):yn(_n(null,r)),a=t.getCharacterList();return gn(i,xn,kn,(function(e,t){o.push(new Cn({start:e,end:t,decoratorKey:i.get(e),leaves:En(a.slice(e,t).toList(),e)}))})),yn(o)},fromJS:function(e){var t=e.leaves,n=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["leaves"]);return new Cn(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){mn(e,t,n[t])}))}return e}({},n,{leaves:null!=t?yn(Array.isArray(t)?t:hn(t)).map((function(e){return wn(e)})):null}))}};function En(e,t){var n=[],r=e.map((function(e){return e.getStyle()})).toList();return gn(r,xn,kn,(function(e,r){n.push(new wn({start:e+t,end:r+t}))})),yn(n)}function xn(e,t){return e===t}var Mn=Sn;var Tn=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getType=function(){return this.get("type")},o.getMutability=function(){return this.get("mutability")},o.getData=function(){return this.get("data")},r}((0,n.immutableExports.Record)({type:"TOKEN",mutability:"IMMUTABLE",data:Object})),An=Tn;var On=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))};function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rn=An,Nn=n.immutableExports,Pn=He,Bn=On,In=(0,Nn.Map)(),Kn=Bn();function Ln(e,t){console.warn("WARNING: "+e+' will be deprecated soon!\nPlease use "'+t+'" instead.')}var Fn={getLastCreatedEntityKey:function(){return Ln("DraftEntity.getLastCreatedEntityKey","contentState.getLastCreatedEntityKey"),Fn.__getLastCreatedEntityKey()},create:function(e,t,n){return Ln("DraftEntity.create","contentState.createEntity"),Fn.__create(e,t,n)},add:function(e){return Ln("DraftEntity.add","contentState.addEntity"),Fn.__add(e)},get:function(e){return Ln("DraftEntity.get","contentState.getEntity"),Fn.__get(e)},__getAll:function(){return In},__loadWithEntities:function(e){In=e,Kn=Bn()},mergeData:function(e,t){return Ln("DraftEntity.mergeData","contentState.mergeEntityData"),Fn.__mergeData(e,t)},replaceData:function(e,t){return Ln("DraftEntity.replaceData","contentState.replaceEntityData"),Fn.__replaceData(e,t)},__getLastCreatedEntityKey:function(){return Kn},__create:function(e,t,n){return Fn.__add(new Rn({type:e,mutability:t,data:n||{}}))},__add:function(e){return Kn=Bn(),In=In.set(Kn,e),Kn},__get:function(e){var t=In.get(e);return t||Pn(!1),t},__mergeData:function(e,t){var n=Fn.__get(e),r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Dn(e,t,n[t])}))}return e}({},n.getData(),t),o=n.set("data",r);return In=In.set(e,o),o},__replaceData:function(e,t){var n=Fn.__get(e).set("data",t);return In=In.set(e,n),n}},jn=Fn;var zn=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.serialize=function(){return"Anchor: "+this.getAnchorKey()+":"+this.getAnchorOffset()+", Focus: "+this.getFocusKey()+":"+this.getFocusOffset()+", Is Backward: "+String(this.getIsBackward())+", Has Focus: "+String(this.getHasFocus())},o.getAnchorKey=function(){return this.get("anchorKey")},o.getAnchorOffset=function(){return this.get("anchorOffset")},o.getFocusKey=function(){return this.get("focusKey")},o.getFocusOffset=function(){return this.get("focusOffset")},o.getIsBackward=function(){return this.get("isBackward")},o.getHasFocus=function(){return this.get("hasFocus")},o.hasEdgeWithin=function(e,t,n){var r=this.getAnchorKey(),o=this.getFocusKey();if(r===o&&r===e){var i=this.getStartOffset(),a=this.getEndOffset();return t<=i&&i<=n||t<=a&&a<=n}if(e!==r&&e!==o)return!1;var s=e===r?this.getAnchorOffset():this.getFocusOffset();return t<=s&&n>=s},o.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset()},o.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey()},o.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset()},o.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey()},o.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset()},r.createEmpty=function(e){return new r({anchorKey:e,anchorOffset:0,focusKey:e,focusOffset:0,isBackward:!1,hasFocus:!1})},r}((0,n.immutableExports.Record)({anchorKey:"",anchorOffset:0,focusKey:"",focusOffset:0,isBackward:!1,hasFocus:!1})),Un=zn,Hn=function(e){return!("undefined"==typeof window||!window.__DRAFT_GKX)&&!!window.__DRAFT_GKX[e]},Vn=new RegExp("\r","g");var Wn=function(e){return e.replace(Vn,"")};function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$n(e,t,n[t])}))}return e}function $n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gn=Q,Qn=ie,Jn=be,Xn=Pe,Yn=jn,Zn=Un,er=Ye,tr=fn,nr=Hn,rr=n.immutableExports,or=Wn,ir=rr.List,ar=rr.Record,sr=rr.Repeat,cr=rr.Map,lr=rr.OrderedMap,ur=ar({entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null}),dr=nr("draft_tree_data_support")?Xn:Jn,pr=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.getEntityMap=function(){return Yn},o.getBlockMap=function(){return this.get("blockMap")},o.getSelectionBefore=function(){return this.get("selectionBefore")},o.getSelectionAfter=function(){return this.get("selectionAfter")},o.getBlockForKey=function(e){return this.getBlockMap().get(e)},o.getKeyBefore=function(e){return this.getBlockMap().reverse().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},o.getKeyAfter=function(e){return this.getBlockMap().keySeq().skipUntil((function(t){return t===e})).skip(1).first()},o.getBlockAfter=function(e){return this.getBlockMap().skipUntil((function(t,n){return n===e})).skip(1).first()},o.getBlockBefore=function(e){return this.getBlockMap().reverse().skipUntil((function(t,n){return n===e})).skip(1).first()},o.getBlocksAsArray=function(){return this.getBlockMap().toArray()},o.getFirstBlock=function(){return this.getBlockMap().first()},o.getLastBlock=function(){return this.getBlockMap().last()},o.getPlainText=function(e){return this.getBlockMap().map((function(e){return e?e.getText():""})).join(e||"\n")},o.getLastCreatedEntityKey=function(){return Yn.__getLastCreatedEntityKey()},o.hasText=function(){var e=this.getBlockMap();return e.size>1||escape(e.first().getText()).replace(/%u200B/g,"").length>0},o.createEntity=function(e,t,n){return Yn.__create(e,t,n),this},o.mergeEntityData=function(e,t){return Yn.__mergeData(e,t),this},o.replaceEntityData=function(e,t){return Yn.__replaceData(e,t),this},o.addEntity=function(e){return Yn.__add(e),this},o.getEntity=function(e){return Yn.__get(e)},o.getAllEntities=function(){return Yn.__getAll()},o.loadWithEntities=function(e){return Yn.__loadWithEntities(e)},r.createFromBlockArray=function(e,t){var n=Array.isArray(e)?e:e.contentBlocks,o=Gn.createFromArray(n),i=o.isEmpty()?new Zn:Zn.createEmpty(o.first().getKey());return new r({blockMap:o,entityMap:t||Yn,selectionBefore:i,selectionAfter:i})},r.createFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\r\n?|\n/g,n=e.split(t).map((function(e){return e=or(e),new dr({key:er(),text:e,type:"unstyled",characterList:ir(sr(Qn.EMPTY,e.length))})}));return r.createFromBlockArray(n)},r.fromJS=function(e){return new r(qn({},e,{blockMap:lr(e.blockMap).map(r.createContentBlockFromJS),selectionBefore:new Zn(e.selectionBefore),selectionAfter:new Zn(e.selectionAfter)}))},r.createContentBlockFromJS=function(e){var t=e.characterList;return new dr(qn({},e,{data:cr(e.data),characterList:null!=t?ir((Array.isArray(t)?t:tr(t)).map((function(e){return Qn.fromJS(e)}))):void 0}))},r}(ur),fr=pr,mr=He,gr="LTR",hr="RTL",vr=null;function yr(e){return e===gr||e===hr}function _r(e){return yr(e)||mr(!1),e===gr?"ltr":"rtl"}function br(e){vr=e}var kr={NEUTRAL:"NEUTRAL",LTR:gr,RTL:hr,isStrong:yr,getHTMLDir:_r,getHTMLDirIfDifferent:function(e,t){return yr(e)||mr(!1),yr(t)||mr(!1),e===t?null:_r(e)},setGlobalDir:br,initGlobalDir:function(){br(gr)},getGlobalDir:function(){return vr||this.initGlobalDir(),vr||mr(!1),vr}},wr=kr,Cr=He,Sr="֐־׀׃׆׈-׏א-ת׫-ׯװ-ײ׳-״׵-׿߀-߉ߊ-ߪߴ-ߵߺ߻-߿ࠀ-ࠕࠚࠤࠨ࠮-࠯࠰-࠾࠿ࡀ-ࡘ࡜-࡝࡞࡟-࢟‏יִײַ-ﬨשׁ-זּ﬷טּ-לּ﬽מּ﬿נּ-סּ﭂ףּ-פּ﭅צּ-ﭏ",Er="؈؋؍؛؜؝؞-؟ؠ-ؿـف-ي٭ٮ-ٯٱ-ۓ۔ەۥ-ۦۮ-ۯۺ-ۼ۽-۾ۿ܀-܍܎܏ܐܒ-ܯ݋-݌ݍ-ޥޱ޲-޿ࢠ-ࢲࢳ-ࣣﭐ-ﮱ﮲-﯁﯂-﯒ﯓ-ﴽ﵀-﵏ﵐ-ﶏ﶐-﶑ﶒ-ﷇ﷈-﷏ﷰ-ﷻ﷼﷾-﷿ﹰ-ﹴ﹵ﹶ-ﻼ﻽-﻾",xr=new RegExp("["+"A-Za-zªµºÀ-ÖØ-öø-ƺƻƼ-ƿǀ-ǃǄ-ʓʔʕ-ʯʰ-ʸʻ-ˁː-ˑˠ-ˤˮͰ-ͳͶ-ͷͺͻ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҂Ҋ-ԯԱ-Ֆՙ՚-՟ա-և։ःऄ-हऻऽा-ीॉ-ौॎ-ॏॐक़-ॡ।-॥०-९॰ॱॲ-ঀং-ঃঅ-ঌএ-ঐও-নপ-রলশ-হঽা-ীে-ৈো-ৌৎৗড়-ঢ়য়-ৡ০-৯ৰ-ৱ৴-৹৺ਃਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਾ-ੀਖ਼-ੜਫ਼੦-੯ੲ-ੴઃઅ-ઍએ-ઑઓ-નપ-રલ-ળવ-હઽા-ીૉો-ૌૐૠ-ૡ૦-૯૰ଂ-ଃଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଵ-ହଽାୀେ-ୈୋ-ୌୗଡ଼-ଢ଼ୟ-ୡ୦-୯୰ୱ୲-୷ஃஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-ஹா-ிு-ூெ-ைொ-ௌௐௗ௦-௯௰-௲ఁ-ఃఅ-ఌఎ-ఐఒ-నప-హఽు-ౄౘ-ౙౠ-ౡ౦-౯౿ಂ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽಾಿೀ-ೄೆೇ-ೈೊ-ೋೕ-ೖೞೠ-ೡ೦-೯ೱ-ೲം-ഃഅ-ഌഎ-ഐഒ-ഺഽാ-ീെ-ൈൊ-ൌൎൗൠ-ൡ൦-൯൰-൵൹ൺ-ൿං-ඃඅ-ඖක-නඳ-රලව-ෆා-ෑෘ-ෟ෦-෯ෲ-ෳ෴ก-ะา-ำเ-ๅๆ๏๐-๙๚-๛ກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ະາ-ຳຽເ-ໄໆ໐-໙ໜ-ໟༀ༁-༃༄-༒༓༔༕-༗༚-༟༠-༩༪-༳༴༶༸༾-༿ཀ-ཇཉ-ཬཿ྅ྈ-ྌ྾-࿅࿇-࿌࿎-࿏࿐-࿔࿕-࿘࿙-࿚က-ဪါ-ာေးျ-ြဿ၀-၉၊-၏ၐ-ၕၖ-ၗၚ-ၝၡၢ-ၤၥ-ၦၧ-ၭၮ-ၰၵ-ႁႃ-ႄႇ-ႌႎႏ႐-႙ႚ-ႜ႞-႟Ⴀ-ჅჇჍა-ჺ჻ჼჽ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፠-፨፩-፼ᎀ-ᎏᎠ-Ᏼᐁ-ᙬ᙭-᙮ᙯ-ᙿᚁ-ᚚᚠ-ᛪ᛫-᛭ᛮ-ᛰᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱ᜵-᜶ᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳាើ-ៅះ-ៈ។-៖ៗ៘-៚ៜ០-៩᠐-᠙ᠠ-ᡂᡃᡄ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᤣ-ᤦᤩ-ᤫᤰ-ᤱᤳ-ᤸ᥆-᥏ᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧀᧁ-ᧇᧈ-ᧉ᧐-᧙᧚ᨀ-ᨖᨙ-ᨚ᨞-᨟ᨠ-ᩔᩕᩗᩡᩣ-ᩤᩭ-ᩲ᪀-᪉᪐-᪙᪠-᪦ᪧ᪨-᪭ᬄᬅ-ᬳᬵᬻᬽ-ᭁᭃ-᭄ᭅ-ᭋ᭐-᭙᭚-᭠᭡-᭪᭴-᭼ᮂᮃ-ᮠᮡᮦ-ᮧ᮪ᮮ-ᮯ᮰-᮹ᮺ-ᯥᯧᯪ-ᯬᯮ᯲-᯳᯼-᯿ᰀ-ᰣᰤ-ᰫᰴ-ᰵ᰻-᰿᱀-᱉ᱍ-ᱏ᱐-᱙ᱚ-ᱷᱸ-ᱽ᱾-᱿᳀-᳇᳓᳡ᳩ-ᳬᳮ-ᳱᳲ-ᳳᳵ-ᳶᴀ-ᴫᴬ-ᵪᵫ-ᵷᵸᵹ-ᶚᶛ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‎ⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℴℵ-ℸℹℼ-ℿⅅ-ⅉⅎ⅏Ⅰ-ↂↃ-ↄↅ-ↈ⌶-⍺⎕⒜-ⓩ⚬⠀-⣿Ⰰ-Ⱞⰰ-ⱞⱠ-ⱻⱼ-ⱽⱾ-ⳤⳫ-ⳮⳲ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵰ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々〆〇〡-〩〮-〯〱-〵〸-〺〻〼ぁ-ゖゝ-ゞゟァ-ヺー-ヾヿㄅ-ㄭㄱ-ㆎ㆐-㆑㆒-㆕㆖-㆟ㆠ-ㆺㇰ-ㇿ㈀-㈜㈠-㈩㈪-㉇㉈-㉏㉠-㉻㉿㊀-㊉㊊-㊰㋀-㋋㋐-㋾㌀-㍶㍻-㏝㏠-㏾㐀-䶵一-鿌ꀀ-ꀔꀕꀖ-ꒌꓐ-ꓷꓸ-ꓽ꓾-꓿ꔀ-ꘋꘌꘐ-ꘟ꘠-꘩ꘪ-ꘫꙀ-ꙭꙮꚀ-ꚛꚜ-ꚝꚠ-ꛥꛦ-ꛯ꛲-꛷Ꜣ-ꝯꝰꝱ-ꞇ꞉-꞊Ꞌ-ꞎꞐ-ꞭꞰ-Ʇꟷꟸ-ꟹꟺꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꠣ-ꠤꠧ꠰-꠵꠶-꠷ꡀ-ꡳꢀ-ꢁꢂ-ꢳꢴ-ꣃ꣎-꣏꣐-꣙ꣲ-ꣷ꣸-꣺ꣻ꤀-꤉ꤊ-ꤥ꤮-꤯ꤰ-ꥆꥒ-꥓꥟ꥠ-ꥼꦃꦄ-ꦲꦴ-ꦵꦺ-ꦻꦽ-꧀꧁-꧍ꧏ꧐-꧙꧞-꧟ꧠ-ꧤꧦꧧ-ꧯ꧰-꧹ꧺ-ꧾꨀ-ꨨꨯ-ꨰꨳ-ꨴꩀ-ꩂꩄ-ꩋꩍ꩐-꩙꩜-꩟ꩠ-ꩯꩰꩱ-ꩶ꩷-꩹ꩺꩻꩽꩾ-ꪯꪱꪵ-ꪶꪹ-ꪽꫀꫂꫛ-ꫜꫝ꫞-꫟ꫠ-ꫪꫫꫮ-ꫯ꫰-꫱ꫲꫳ-ꫴꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚ꭛ꭜ-ꭟꭤ-ꭥꯀ-ꯢꯣ-ꯤꯦ-ꯧꯩ-ꯪ꯫꯬꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ-豈-舘並-龎ﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚｦ-ｯｰｱ-ﾝﾞ-ﾟﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ"+Sr+Er+"]"),Mr=new RegExp("["+Sr+Er+"]");function Tr(e){var t=xr.exec(e);return null==t?null:t[0]}function Ar(e){var t=Tr(e);return null==t?wr.NEUTRAL:Mr.exec(t)?wr.RTL:wr.LTR}function Or(e,t){if(t=t||wr.NEUTRAL,!e.length)return t;var n=Ar(e);return n===wr.NEUTRAL?t:n}function Dr(e,t){return t||(t=wr.getGlobalDir()),wr.isStrong(t)||Cr(!1),Or(e,t)}var Rr={firstStrongChar:Tr,firstStrongCharDir:Ar,resolveBlockDir:Or,getDirection:Dr,isDirectionLTR:function(e,t){return Dr(e,t)===wr.LTR},isDirectionRTL:function(e,t){return Dr(e,t)===wr.RTL}};function Nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pr,Br=Rr,Ir=kr,Kr=He,Lr=function(){function e(e){Nr(this,"_defaultDir",void 0),Nr(this,"_lastDir",void 0),e?Ir.isStrong(e)||Kr(!1):e=Ir.getGlobalDir(),this._defaultDir=e,this.reset()}var t=e.prototype;return t.reset=function(){this._lastDir=this._defaultDir},t.getDirection=function(e){return this._lastDir=Br.getDirection(e,this._lastDir),this._lastDir},e}(),Fr=function(e){if(null!=e)return e;throw new Error("Got unexpected null or undefined")},jr=Lr,zr=n.immutableExports,Ur=Fr,Hr=zr.OrderedMap;function Vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Wr(e,t,n[t])}))}return e}function Wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qr=Mn,$r=fr,Gr={getDirectionMap:function(e,t){Pr?Pr.reset():Pr=new jr;var n=e.getBlockMap(),r=n.valueSeq().map((function(e){return Ur(Pr).getDirection(e.getText())})),o=Hr(n.keySeq().zip(r));return null!=t&&zr.is(t,o)?t:o}},Qr=Un,Jr=n.immutableExports,Xr=Jr.OrderedSet,Yr=Jr.Record,Zr=Jr.Stack,eo=Jr.OrderedMap,to=Jr.List,no=Yr({allowUndo:!0,currentContent:null,decorator:null,directionMap:null,forceSelection:!1,inCompositionMode:!1,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:Zr(),selection:null,treeMap:null,undoStack:Zr()}),ro=function(){t.createEmpty=function(e){return this.createWithText("",e)},t.createWithText=function(e,n){return t.createWithContent($r.createFromText(e),n)},t.createWithContent=function(e,n){if(0===e.getBlockMap().count())return t.createEmpty(n);var r=e.getBlockMap().first().getKey();return t.create({currentContent:e,undoStack:Zr(),redoStack:Zr(),decorator:n||null,selection:Qr.createEmpty(r)})},t.create=function(e){var n=e.currentContent,r=Vr({},e,{treeMap:io(n,e.decorator),directionMap:Gr.getDirectionMap(n)});return new t(new no(r))},t.fromJS=function(e){return new t(new no(Vr({},e,{directionMap:null!=e.directionMap?eo(e.directionMap):e.directionMap,inlineStyleOverride:null!=e.inlineStyleOverride?Xr(e.inlineStyleOverride):e.inlineStyleOverride,nativelyRenderedContent:null!=e.nativelyRenderedContent?$r.fromJS(e.nativelyRenderedContent):e.nativelyRenderedContent,redoStack:null!=e.redoStack?Zr(e.redoStack.map((function(e){return $r.fromJS(e)}))):e.redoStack,selection:null!=e.selection?new Qr(e.selection):e.selection,treeMap:null!=e.treeMap?eo(e.treeMap).map((function(e){return to(e).map((function(e){return qr.fromJS(e)}))})):e.treeMap,undoStack:null!=e.undoStack?Zr(e.undoStack.map((function(e){return $r.fromJS(e)}))):e.undoStack,currentContent:$r.fromJS(e.currentContent)})))},t.set=function(e,n){return new t(e.getImmutable().withMutations((function(t){var r=t.get("decorator"),o=r;null===n.decorator?o=null:n.decorator&&(o=n.decorator);var i=n.currentContent||e.getCurrentContent();if(o!==r){var a,s=t.get("treeMap");return a=o&&r?function(e,t,n,r,o){return n.merge(t.toSeq().filter((function(t){return r.getDecorations(t,e)!==o.getDecorations(t,e)})).map((function(t){return qr.generate(e,t,r)})))}(i,i.getBlockMap(),s,o,r):io(i,o),void t.merge({decorator:o,treeMap:a,nativelyRenderedContent:null})}i!==e.getCurrentContent()&&t.set("treeMap",function(e,t,n,r){var o=e.getCurrentContent().set("entityMap",n),i=o.getBlockMap(),a=e.getImmutable().get("treeMap");return a.merge(t.toSeq().filter((function(e,t){return e!==i.get(t)})).map((function(e){return qr.generate(o,e,r)})))}(e,i.getBlockMap(),i.getEntityMap(),o)),t.merge(n)})))};var e=t.prototype;function t(e){Wr(this,"_immutable",void 0),this._immutable=e}return e.toJS=function(){return this.getImmutable().toJS()},e.getAllowUndo=function(){return this.getImmutable().get("allowUndo")},e.getCurrentContent=function(){return this.getImmutable().get("currentContent")},e.getUndoStack=function(){return this.getImmutable().get("undoStack")},e.getRedoStack=function(){return this.getImmutable().get("redoStack")},e.getSelection=function(){return this.getImmutable().get("selection")},e.getDecorator=function(){return this.getImmutable().get("decorator")},e.isInCompositionMode=function(){return this.getImmutable().get("inCompositionMode")},e.mustForceSelection=function(){return this.getImmutable().get("forceSelection")},e.getNativelyRenderedContent=function(){return this.getImmutable().get("nativelyRenderedContent")},e.getLastChangeType=function(){return this.getImmutable().get("lastChangeType")},e.getInlineStyleOverride=function(){return this.getImmutable().get("inlineStyleOverride")},t.setInlineStyleOverride=function(e,n){return t.set(e,{inlineStyleOverride:n})},e.getCurrentInlineStyle=function(){var e=this.getInlineStyleOverride();if(null!=e)return e;var t=this.getCurrentContent(),n=this.getSelection();return n.isCollapsed()?function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),o=e.getBlockForKey(n);if(r>0)return o.getInlineStyleAt(r-1);if(o.getLength())return o.getInlineStyleAt(0);return ao(e,n)}(t,n):function(e,t){var n=t.getStartKey(),r=t.getStartOffset(),o=e.getBlockForKey(n);if(r<o.getLength())return o.getInlineStyleAt(r);if(r>0)return o.getInlineStyleAt(r-1);return ao(e,n)}(t,n)},e.getBlockTree=function(e){return this.getImmutable().getIn(["treeMap",e])},e.isSelectionAtStartOfContent=function(){var e=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(e,0,0)},e.isSelectionAtEndOfContent=function(){var e=this.getCurrentContent().getBlockMap().last(),t=e.getLength();return this.getSelection().hasEdgeWithin(e.getKey(),t,t)},e.getDirectionMap=function(){return this.getImmutable().get("directionMap")},t.acceptSelection=function(e,t){return oo(e,t,!1)},t.forceSelection=function(e,t){return t.getHasFocus()||(t=t.set("hasFocus",!0)),oo(e,t,!0)},t.moveSelectionToEnd=function(e){var n=e.getCurrentContent().getLastBlock(),r=n.getKey(),o=n.getLength();return t.acceptSelection(e,new Qr({anchorKey:r,anchorOffset:o,focusKey:r,focusOffset:o,isBackward:!1}))},t.moveFocusToEnd=function(e){var n=t.moveSelectionToEnd(e);return t.forceSelection(n,n.getSelection())},t.push=function(e,n,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.getCurrentContent()===n)return e;var i=Gr.getDirectionMap(n,e.getDirectionMap());if(!e.getAllowUndo())return t.set(e,{currentContent:n,directionMap:i,lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:o,inlineStyleOverride:null});var a=e.getSelection(),s=e.getCurrentContent(),c=e.getUndoStack(),l=n;a!==s.getSelectionAfter()||function(e,t){var n=e.getLastChangeType();return t!==n||"insert-characters"!==t&&"backspace-character"!==t&&"delete-character"!==t}(e,r)?(c=c.push(s),l=l.set("selectionBefore",a)):"insert-characters"!==r&&"backspace-character"!==r&&"delete-character"!==r||(l=l.set("selectionBefore",s.getSelectionBefore()));var u=e.getInlineStyleOverride();-1===["adjust-depth","change-block-type","split-block"].indexOf(r)&&(u=null);var d={currentContent:l,directionMap:i,undoStack:c,redoStack:Zr(),lastChangeType:r,selection:n.getSelectionAfter(),forceSelection:o,inlineStyleOverride:u};return t.set(e,d)},t.undo=function(e){if(!e.getAllowUndo())return e;var n=e.getUndoStack(),r=n.peek();if(!r)return e;var o=e.getCurrentContent(),i=Gr.getDirectionMap(r,e.getDirectionMap());return t.set(e,{currentContent:r,directionMap:i,undoStack:n.shift(),redoStack:e.getRedoStack().push(o),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"undo",nativelyRenderedContent:null,selection:o.getSelectionBefore()})},t.redo=function(e){if(!e.getAllowUndo())return e;var n=e.getRedoStack(),r=n.peek();if(!r)return e;var o=e.getCurrentContent(),i=Gr.getDirectionMap(r,e.getDirectionMap());return t.set(e,{currentContent:r,directionMap:i,undoStack:e.getUndoStack().push(o),redoStack:n.shift(),forceSelection:!0,inlineStyleOverride:null,lastChangeType:"redo",nativelyRenderedContent:null,selection:r.getSelectionAfter()})},e.getImmutable=function(){return this._immutable},t}();function oo(e,t,n){return ro.set(e,{selection:t,forceSelection:n,nativelyRenderedContent:null,inlineStyleOverride:null})}function io(e,t){return e.getBlockMap().map((function(n){return qr.generate(e,n,t)})).toOrderedMap()}function ao(e,t){var n=e.getBlockMap().reverse().skipUntil((function(e,n){return n===t})).skip(1).skipUntil((function(e,t){return e.getLength()})).first();return n?n.getInlineStyleAt(n.getLength()-1):Xr()}var so=ro,co=Pe,lo=At,uo=n.immutableExports,po=He,fo=uo.OrderedMap,mo=uo.List,go=function(e,t,n){if(e){var r=t.get(e);r&&t.set(e,n(r))}},ho=function(e,t,n,r,o){if(!o)return e;var i="after"===r,a=t.getKey(),s=n.getKey(),c=t.getParentKey(),l=t.getNextSiblingKey(),u=t.getPrevSiblingKey(),d=n.getParentKey(),p=i?n.getNextSiblingKey():s,f=i?s:n.getPrevSiblingKey();return e.withMutations((function(e){go(c,e,(function(e){var t=e.getChildKeys();return e.merge({children:t.delete(t.indexOf(a))})})),go(u,e,(function(e){return e.merge({nextSibling:l})})),go(l,e,(function(e){return e.merge({prevSibling:u})})),go(p,e,(function(e){return e.merge({prevSibling:a})})),go(f,e,(function(e){return e.merge({nextSibling:a})})),go(d,e,(function(e){var t=e.getChildKeys(),n=t.indexOf(s),r=i?n+1:0!==n?n-1:0,o=t.toArray();return o.splice(r,0,a),e.merge({children:mo(o)})})),go(a,e,(function(e){return e.merge({nextSibling:p,prevSibling:f,parent:d})}))}))},vo=function(e,t,n,r){"replace"===r&&po(!1);var o=n.getKey(),i=t.getKey();i===o&&po(!1);var a=e.getBlockMap(),s=t instanceof co,c=[t],l=a.delete(i);s&&(c=[],l=a.withMutations((function(e){var n=t.getNextSiblingKey(),r=lo(t,e);e.toSeq().skipUntil((function(e){return e.getKey()===i})).takeWhile((function(e){var t=e.getKey(),o=t===i,a=n&&t!==n,s=!n&&e.getParentKey()&&(!r||t!==r);return!!(o||a||s)})).forEach((function(t){c.push(t),e.delete(t.getKey())}))})));var u=l.toSeq().takeUntil((function(e){return e===n})),d=l.toSeq().skipUntil((function(e){return e===n})).skip(1),p=c.map((function(e){return[e.getKey(),e]})),f=fo();if("before"===r){var m=e.getBlockBefore(o);m&&m.getKey()===t.getKey()&&po(!1),f=u.concat([].concat(p,[[o,n]]),d).toOrderedMap()}else if("after"===r){var g=e.getBlockAfter(o);g&&g.getKey()===i&&po(!1),f=u.concat([[o,n]].concat(p),d).toOrderedMap()}return e.merge({blockMap:ho(f,t,n,r,s),selectionBefore:e.getSelectionAfter(),selectionAfter:e.getSelectionAfter().merge({anchorKey:i,focusKey:i})})};function yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_o(e,t,n[t])}))}return e}function _o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bo=Q,ko=ie,wo=be,Co=Pe,So=pn,Eo=so,xo=Ye,Mo=Hn,To=n.immutableExports,Ao=vo,Oo=Mo("draft_tree_data_support"),Do=Oo?Co:wo,Ro=To.List,No=To.Repeat,Po={insertAtomicBlock:function(e,t,n){var r=e.getCurrentContent(),o=e.getSelection(),i=So.removeRange(r,o,"backward"),a=i.getSelectionAfter(),s=So.splitBlock(i,a),c=s.getSelectionAfter(),l=So.setBlockType(s,c,"atomic"),u=ko.create({entity:t}),d={key:xo(),type:"atomic",text:n,characterList:Ro(No(u,n.length))},p={key:xo(),type:"unstyled"};Oo&&(d=yo({},d,{nextSibling:p.key}),p=yo({},p,{prevSibling:d.key}));var f=[new Do(d),new Do(p)],m=bo.createFromArray(f),g=So.replaceWithFragment(l,c,m),h=g.merge({selectionBefore:o,selectionAfter:g.getSelectionAfter().set("hasFocus",!0)});return Eo.push(e,h,"insert-fragment")},moveAtomicBlock:function(e,t,n,r){var o,i=e.getCurrentContent(),a=e.getSelection();if("before"===r||"after"===r){var s=i.getBlockForKey("before"===r?n.getStartKey():n.getEndKey());o=Ao(i,t,s,r)}else{var c=So.removeRange(i,n,"backward"),l=c.getSelectionAfter(),u=c.getBlockForKey(l.getFocusKey());if(0===l.getStartOffset())o=Ao(c,t,u,"before");else if(l.getEndOffset()===u.getLength())o=Ao(c,t,u,"after");else{var d=So.splitBlock(c,l),p=d.getSelectionAfter(),f=d.getBlockForKey(p.getFocusKey());o=Ao(d,t,f,"before")}}var m=o.merge({selectionBefore:a,selectionAfter:o.getSelectionAfter().set("hasFocus",!0)});return Eo.push(e,m,"move-block")}};var Bo=n.immutableExports.List,Io=function(){function e(e){var t,n,r;r=void 0,(n="_decorators")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this._decorators=e.slice()}var t=e.prototype;return t.getDecorations=function(e,t){var n=Array(e.getText().length).fill(null);return this._decorators.forEach((function(r,o){var i=0;(0,r.strategy)(e,(function(e,t){(function(e,t,n){for(var r=t;r<n;r++)if(null!=e[r])return!1;return!0})(n,e,t)&&(!function(e,t,n,r){for(var o=t;o<n;o++)e[o]=r}(n,e,t,o+"."+i),i++)}),t)})),Bo(n)},t.getComponentForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].component},t.getPropsForKey=function(e){var t=parseInt(e.split(".")[0],10);return this._decorators[t].props},e}();var Ko=Io;function Lo(e){return e.replace(/\//g,"-")}var Fo=function(e){return"object"==typeof e?Object.keys(e).filter((function(t){return e[t]})).map(Lo).join(" "):Array.prototype.map.call(arguments,Lo).join(" ")},jo=R.default,zo=Fo,Uo=(0,n.immutableExports.Map)({"header-one":{element:"h1"},"header-two":{element:"h2"},"header-three":{element:"h3"},"header-four":{element:"h4"},"header-five":{element:"h5"},"header-six":{element:"h6"},section:{element:"section"},article:{element:"article"},"unordered-list-item":{element:"li",wrapper:jo.createElement("ul",{className:zo("public/DraftStyleDefault/ul")})},"ordered-list-item":{element:"li",wrapper:jo.createElement("ol",{className:zo("public/DraftStyleDefault/ol")})},blockquote:{element:"blockquote"},atomic:{element:"figure"},"code-block":{element:"pre",wrapper:jo.createElement("pre",{className:zo("public/DraftStyleDefault/pre")})},unstyled:{element:"div",aliasedElements:["p"]}}),Ho={BOLD:{fontWeight:"bold"},CODE:{fontFamily:"monospace",wordWrap:"break-word"},ITALIC:{fontStyle:"italic"},STRIKETHROUGH:{textDecoration:"line-through"},UNDERLINE:{textDecoration:"underline"}},Vo=Object.getOwnPropertySymbols,Wo=Object.prototype.hasOwnProperty,qo=Object.prototype.propertyIsEnumerable;var $o=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))Wo.call(n,a)&&(o[a]=n[a]);if(Vo){r=Vo(n);for(var s=0;s<r.length;s++)qo.call(n,r[s])&&(o[r[s]]=n[r[s]])}}return o},Go={exports:{}};!function(e,t){!function(n,r){var o="function",i="undefined",a="object",s="string",c="major",l="model",u="name",d="type",p="vendor",f="version",m="architecture",g="console",h="mobile",v="tablet",y="smarttv",_="wearable",b="embedded",k="Amazon",w="Apple",C="ASUS",S="BlackBerry",E="Browser",x="Chrome",M="Firefox",T="Google",A="Huawei",O="LG",D="Microsoft",R="Motorola",N="Opera",P="Samsung",B="Sharp",I="Sony",K="Xiaomi",L="Zebra",F="Facebook",j="Chromium OS",z="Mac OS",U=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},H=function(e,t){return typeof e===s&&-1!==V(t).indexOf(V(e))},V=function(e){return e.toLowerCase()},W=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===i?e:e.substring(0,500)},q=function(e,t){for(var n,i,s,c,l,u,d=0;d<t.length&&!l;){var p=t[d],f=t[d+1];for(n=i=0;n<p.length&&!l&&p[n];)if(l=p[n++].exec(e))for(s=0;s<f.length;s++)u=l[++i],typeof(c=f[s])===a&&c.length>0?2===c.length?typeof c[1]==o?this[c[0]]=c[1].call(this,u):this[c[0]]=c[1]:3===c.length?typeof c[1]!==o||c[1].exec&&c[1].test?this[c[0]]=u?u.replace(c[1],c[2]):r:this[c[0]]=u?c[1].call(this,u,c[2]):r:4===c.length&&(this[c[0]]=u?c[3].call(this,u.replace(c[1],c[2])):r):this[c]=u||r;d+=2}},$=function(e,t){for(var n in t)if(typeof t[n]===a&&t[n].length>0){for(var o=0;o<t[n].length;o++)if(H(t[n][o],e))return"?"===n?r:n}else if(H(t[n],e))return"?"===n?r:n;return e},G={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,f],[/opios[\/ ]+([\w\.]+)/i],[f,[u,N+" Mini"]],[/\bopr\/([\w\.]+)/i],[f,[u,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[u,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[u,f],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[u,"UC"+E]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[u,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[u,"Smart Lenovo "+E]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+E],f],[/\bfocus\/([\w\.]+)/i],[f,[u,M+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[u,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[u,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[u,"MIUI "+E]],[/fxios\/([-\w\.]+)/i],[f,[u,M]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 "+E]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 "+E],f],[/samsungbrowser\/([\w\.]+)/i],[f,[u,P+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[u,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[u,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[u,f],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,F],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[u,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[u,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[u,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[u,x+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,x+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[u,"Android "+E]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[f,$,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[u,M+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[u,f],[/(cobalt)\/([\w\.]+)/i],[u,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,V]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[p,P],[d,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[p,P],[d,h]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[p,w],[d,h]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[p,w],[d,v]],[/(macintosh);/i],[l,[p,w]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[p,B],[d,h]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[p,A],[d,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[p,A],[d,h]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[p,K],[d,h]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[p,K],[d,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[p,"OPPO"],[d,h]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[p,"Vivo"],[d,h]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[p,"Realme"],[d,h]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[p,R],[d,h]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[p,R],[d,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[p,O],[d,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[p,O],[d,h]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[p,"Lenovo"],[d,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[p,"Nokia"],[d,h]],[/(pixel c)\b/i],[l,[p,T],[d,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[p,T],[d,h]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[p,I],[d,h]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[p,I],[d,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[p,"OnePlus"],[d,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[p,k],[d,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[p,k],[d,h]],[/(playbook);[-\w\),; ]+(rim)/i],[l,p,[d,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[p,S],[d,h]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[p,C],[d,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[p,C],[d,h]],[/(nexus 9)/i],[l,[p,"HTC"],[d,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[l,/_/g," "],[d,h]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[p,"Acer"],[d,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[p,"Meizu"],[d,h]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[p,"Ulefone"],[d,h]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,l,[d,h]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,l,[d,v]],[/(surface duo)/i],[l,[p,D],[d,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[p,"Fairphone"],[d,h]],[/(u304aa)/i],[l,[p,"AT&T"],[d,h]],[/\bsie-(\w*)/i],[l,[p,"Siemens"],[d,h]],[/\b(rct\w+) b/i],[l,[p,"RCA"],[d,v]],[/\b(venue[\d ]{2,7}) b/i],[l,[p,"Dell"],[d,v]],[/\b(q(?:mv|ta)\w+) b/i],[l,[p,"Verizon"],[d,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[p,"Barnes & Noble"],[d,v]],[/\b(tm\d{3}\w+) b/i],[l,[p,"NuVision"],[d,v]],[/\b(k88) b/i],[l,[p,"ZTE"],[d,v]],[/\b(nx\d{3}j) b/i],[l,[p,"ZTE"],[d,h]],[/\b(gen\d{3}) b.+49h/i],[l,[p,"Swiss"],[d,h]],[/\b(zur\d{3}) b/i],[l,[p,"Swiss"],[d,v]],[/\b((zeki)?tb.*\b) b/i],[l,[p,"Zeki"],[d,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],l,[d,v]],[/\b(ns-?\w{0,9}) b/i],[l,[p,"Insignia"],[d,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[p,"NextBook"],[d,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],l,[d,h]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],l,[d,h]],[/\b(ph-1) /i],[l,[p,"Essential"],[d,h]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[p,"Envizen"],[d,v]],[/\b(trio[-\w\. ]+) b/i],[l,[p,"MachSpeed"],[d,v]],[/\btu_(1491) b/i],[l,[p,"Rotor"],[d,v]],[/(shield[\w ]+) b/i],[l,[p,"Nvidia"],[d,v]],[/(sprint) (\w+)/i],[p,l,[d,h]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,D],[d,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[p,L],[d,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[p,L],[d,h]],[/smart-tv.+(samsung)/i],[p,[d,y]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[p,P],[d,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,O],[d,y]],[/(apple) ?tv/i],[p,[l,w+" TV"],[d,y]],[/crkey/i],[[l,x+"cast"],[p,T],[d,y]],[/droid.+aft(\w+)( bui|\))/i],[l,[p,k],[d,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[p,B],[d,y]],[/(bravia[\w ]+)( bui|\))/i],[l,[p,I],[d,y]],[/(mitv-\w{5}) bui/i],[l,[p,K],[d,y]],[/Hbbtv.*(technisat) (.*);/i],[p,l,[d,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,W],[l,W],[d,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,l,[d,g]],[/droid.+; (shield) bui/i],[l,[p,"Nvidia"],[d,g]],[/(playstation [345portablevi]+)/i],[l,[p,I],[d,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[p,D],[d,g]],[/((pebble))app/i],[p,l,[d,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[p,w],[d,_]],[/droid.+; (glass) \d/i],[l,[p,T],[d,_]],[/droid.+; (wt63?0{2,3})\)/i],[l,[p,L],[d,_]],[/(quest( 2| pro)?)/i],[l,[p,F],[d,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[d,b]],[/(aeobc)\b/i],[l,[p,k],[d,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[d,h]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[d,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,h]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[u,[f,$,G]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,$,G],[u,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,z],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,f],[/\(bb(10);/i],[f,[u,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[u,M+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[u,x+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,j],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,f],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,f]]},J=function e(t,g){if(typeof t===a&&(g=t,t=r),!(this instanceof e))return new e(t,g).getResult();var y=typeof n!==i&&n.navigator?n.navigator:r,_=t||(y&&y.userAgent?y.userAgent:""),b=y&&y.userAgentData?y.userAgentData:r,k=g?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(Q,g):Q,w=y&&y.userAgent==_;return this.getBrowser=function(){var e,t={};return t[u]=r,t[f]=r,q.call(t,_,k.browser),t[c]=typeof(e=t[f])===s?e.replace(/[^\d\.]/g,"").split(".")[0]:r,w&&y&&y.brave&&typeof y.brave.isBrave==o&&(t[u]="Brave"),t},this.getCPU=function(){var e={};return e[m]=r,q.call(e,_,k.cpu),e},this.getDevice=function(){var e={};return e[p]=r,e[l]=r,e[d]=r,q.call(e,_,k.device),w&&!e[d]&&b&&b.mobile&&(e[d]=h),w&&"Macintosh"==e[l]&&y&&typeof y.standalone!==i&&y.maxTouchPoints&&y.maxTouchPoints>2&&(e[l]="iPad",e[d]=v),e},this.getEngine=function(){var e={};return e[u]=r,e[f]=r,q.call(e,_,k.engine),e},this.getOS=function(){var e={};return e[u]=r,e[f]=r,q.call(e,_,k.os),w&&!e[u]&&b&&"Unknown"!=b.platform&&(e[u]=b.platform.replace(/chrome os/i,j).replace(/macos/i,z)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return _},this.setUA=function(e){return _=typeof e===s&&e.length>500?W(e,500):e,this},this.setUA(_),this};J.VERSION="0.7.37",J.BROWSER=U([u,f,c]),J.CPU=U([m]),J.DEVICE=U([l,p,d,g,h,y,v,_,b]),J.ENGINE=J.OS=U([u,f]),e.exports&&(t=e.exports=J),t.UAParser=J;var X=typeof n!==i&&(n.jQuery||n.Zepto);if(X&&!X.ua){var Y=new J;X.ua=Y.getResult(),X.ua.get=function(){return Y.getUA()},X.ua.set=function(e){Y.setUA(e);var t=Y.getResult();for(var n in t)X.ua[n]=t[n]}}}("object"==typeof window?window:o.commonjsGlobal)}(Go,Go.exports);var Qo="Unknown",Jo={"Mac OS":"Mac OS X"};var Xo,Yo=(new(0,Go.exports)).getResult(),Zo=function(e){if(!e)return{major:"",minor:""};var t=e.split(".");return{major:t[0],minor:t[1]}}(Yo.browser.version),ei={browserArchitecture:Yo.cpu.architecture||Qo,browserFullVersion:Yo.browser.version||Qo,browserMinorVersion:Zo.minor||Qo,browserName:Yo.browser.name||Qo,browserVersion:Yo.browser.major||Qo,deviceName:Yo.device.model||Qo,engineName:Yo.engine.name||Qo,engineVersion:Yo.engine.version||Qo,platformArchitecture:Yo.cpu.architecture||Qo,platformName:(Xo=Yo.os.name,Jo[Xo]||Xo||Qo),platformVersion:Yo.os.version||Qo,platformFullVersion:Yo.os.version||Qo},ti=He,ni=/\./,ri=/\|\|/,oi=/\s+\-\s+/,ii=/^(<=|<|=|>=|~>|~|>|)?\s*(.+)/,ai=/^(\d*)(.*)/;function si(e,t){var n=e.split(ri);return n.length>1?n.some((function(e){return yi.contains(e,t)})):function(e,t){var n=e.split(oi);if(n.length>0&&n.length<=2||ti(!1),1===n.length)return ci(n[0],t);var r=n[0],o=n[1];return fi(r)&&fi(o)||ti(!1),ci(">="+r,t)&&ci("<="+o,t)}(e=n[0].trim(),t)}function ci(e,t){if(""===(e=e.trim()))return!0;var n,r=t.split(ni),o=di(e),i=o.modifier,a=o.rangeComponents;switch(i){case"<":return li(r,a);case"<=":return-1===(n=vi(r,a))||0===n;case">=":return ui(r,a);case">":return function(e,t){return 1===vi(e,t)}(r,a);case"~":case"~>":return function(e,t){var n=t.slice(),r=t.slice();r.length>1&&r.pop();var o=r.length-1,i=parseInt(r[o],10);pi(i)&&(r[o]=i+1+"");return ui(e,n)&&li(e,r)}(r,a);default:return function(e,t){return 0===vi(e,t)}(r,a)}}function li(e,t){return-1===vi(e,t)}function ui(e,t){var n=vi(e,t);return 1===n||0===n}function di(e){var t=e.split(ni),n=t[0].match(ii);return n||ti(!1),{modifier:n[1],rangeComponents:[n[2]].concat(t.slice(1))}}function pi(e){return!isNaN(e)&&isFinite(e)}function fi(e){return!di(e).modifier}function mi(e,t){for(var n=e.length;n<t;n++)e[n]="0"}function gi(e,t){var n=e.match(ai)[1],r=t.match(ai)[1],o=parseInt(n,10),i=parseInt(r,10);return pi(o)&&pi(i)&&o!==i?hi(o,i):hi(e,t)}function hi(e,t){return typeof e!=typeof t&&ti(!1),e>t?1:e<t?-1:0}function vi(e,t){for(var n=function(e,t){mi(e=e.slice(),(t=t.slice()).length);for(var n=0;n<t.length;n++){var r=t[n].match(/^[x*]$/i);if(r&&(t[n]=e[n]="0","*"===r[0]&&n===t.length-1))for(var o=n;o<e.length;o++)e[o]="0"}return mi(t,e.length),[e,t]}(e,t),r=n[0],o=n[1],i=0;i<o.length;i++){var a=gi(r[i],o[i]);if(a)return a}return 0}var yi={contains:function(e,t){return si(e.trim(),t.trim())}},_i=yi,bi=Object.prototype.hasOwnProperty;var ki=function(e,t,n){if(!e)return null;var r={};for(var o in e)bi.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r};var wi=ei,Ci=_i;function Si(e,t,n,r){if(e===n)return!0;if(!n.startsWith(e))return!1;var o=n.slice(e.length);return!!t&&(o=r?r(o):o,Ci.contains(o,t))}function Ei(e){return"Windows"===wi.platformName?e.replace(/^\s*NT/,""):e}var xi=ki({isBrowser:function(e){return Si(wi.browserName,wi.browserFullVersion,e)},isBrowserArchitecture:function(e){return Si(wi.browserArchitecture,null,e)},isDevice:function(e){return Si(wi.deviceName,null,e)},isEngine:function(e){return Si(wi.engineName,wi.engineVersion,e)},isPlatform:function(e){return Si(wi.platformName,wi.platformFullVersion,e,Ei)},isPlatformArchitecture:function(e){return Si(wi.platformArchitecture,null,e)}},(function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}));var Mi=function(e){return e&&e.ownerDocument?e.ownerDocument:document};var Ti=function(e){return!(!e||!e.ownerDocument)&&e.nodeType===Node.ELEMENT_NODE},Ai=Ti;var Oi=function e(t){if(Ai(t)){var n=t,r=n.getAttribute("data-offset-key");if(r)return r;for(var o=0;o<n.childNodes.length;o++){var i=e(n.childNodes[o]);if(i)return i}}return null},Di=Mi,Ri=Oi;var Ni=function(e){for(var t=e;t&&t!==Di(e).documentElement;){var n=Ri(t);if(null!=n)return n;t=t.parentNode}return null};var Pi=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window};function Bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ii=xi,Ki=Ni,Li=Pi,Fi=n.immutableExports,ji=He,zi=Fr,Ui=Fi.Map,Hi={subtree:!0,characterData:!0,childList:!0,characterDataOldValue:!1,attributes:!1},Vi=Ii.isBrowser("IE <= 11"),Wi=function(){function e(e){var t=this;Bi(this,"observer",void 0),Bi(this,"container",void 0),Bi(this,"mutations",void 0),Bi(this,"onCharData",void 0),this.container=e,this.mutations=Ui();var n=Li(e);n.MutationObserver&&!Vi?this.observer=new n.MutationObserver((function(e){return t.registerMutations(e)})):this.onCharData=function(e){e.target instanceof Node||ji(!1),t.registerMutation({type:"characterData",target:e.target})}}var t=e.prototype;return t.start=function(){this.observer?this.observer.observe(this.container,Hi):this.container.addEventListener("DOMCharacterDataModified",this.onCharData)},t.stopAndFlushMutations=function(){var e=this.observer;e?(this.registerMutations(e.takeRecords()),e.disconnect()):this.container.removeEventListener("DOMCharacterDataModified",this.onCharData);var t=this.mutations;return this.mutations=Ui(),t},t.registerMutations=function(e){for(var t=0;t<e.length;t++)this.registerMutation(e[t])},t.getMutationTextContent=function(e){var t=e.type,n=e.target,r=e.removedNodes;if("characterData"===t){if(""!==n.textContent)return Vi?n.textContent.replace("\n",""):n.textContent}else if("childList"===t){if(r&&r.length)return"";if(""!==n.textContent)return n.textContent}return null},t.registerMutation=function(e){var t=this.getMutationTextContent(e);if(null!=t){var n=zi(Ki(e.target));this.mutations=this.mutations.set(n,t)}},e}(),qi="-",$i={encode:function(e,t,n){return e+qi+t+qi+n},decode:function(e){var t=e.split(qi).reverse(),n=t[0],r=t[1];return{blockKey:t.slice(2).reverse().join(qi),decoratorKey:parseInt(r,10),leafKey:parseInt(n,10)}}},Gi={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105},Qi={logBlockedSelectionEvent:function(){return null},logSelectionStateFailure:function(){return null}};var Ji=function(e){return!(!e||!e.ownerDocument)&&(e.ownerDocument.defaultView?e instanceof e.ownerDocument.defaultView.HTMLElement:e instanceof HTMLElement)},Xi=He,Yi=Ji;var Zi=function(e){var t=e.editorContainer;return t||Xi(!1),Yi(t.firstChild)||Xi(!1),t.firstChild},ea=$i,ta=Fr;var na=function(e,t,n,r,o){var i=ta(e.getSelection());if(!t||!r)return i;var a=ea.decode(t),s=a.blockKey,c=e.getBlockTree(s),l=c&&c.getIn([a.decoratorKey,"leaves",a.leafKey]),u=ea.decode(r),d=u.blockKey,p=e.getBlockTree(d),f=p&&p.getIn([u.decoratorKey,"leaves",u.leafKey]);if(!l||!f)return i;var m=l.get("start"),g=f.get("start"),h=l?m+n:null,v=f?g+o:null;if(i.getAnchorKey()===s&&i.getAnchorOffset()===h&&i.getFocusKey()===d&&i.getFocusOffset()===v)return i;var y=!1;if(s===d){var _=l.get("end"),b=f.get("end");y=g===m&&b===_?o<n:g<m}else{y=e.getCurrentContent().getBlockMap().keySeq().skipUntil((function(e){return e===s||e===d})).first()===d}return i.merge({anchorKey:s,anchorOffset:h,focusKey:d,focusOffset:v,isBackward:y})},ra=Ni,oa=Oi,ia=na,aa=He,sa=Ti,ca=Fr;function la(e,t,n){var r=t,o=ra(r);(null!=o||e&&(e===r||e.firstChild===r)||aa(!1),e===r)&&(r=r.firstChild,sa(r)||aa(!1),"true"!==(r=r).getAttribute("data-contents")&&aa(!1),n>0&&(n=r.childNodes.length));if(0===n){var i=null;if(null!=o)i=o;else{var a=function(e){for(;e.firstChild&&(sa(e.firstChild)&&"true"===e.firstChild.getAttribute("data-blocks")||oa(e.firstChild));)e=e.firstChild;return e}(r);i=ca(oa(a))}return{key:i,offset:0}}var s=r.childNodes[n-1],c=null,l=null;if(oa(s)){var u=function(e){for(;e.lastChild&&(sa(e.lastChild)&&"true"===e.lastChild.getAttribute("data-blocks")||oa(e.lastChild));)e=e.lastChild;return e}(s);c=ca(oa(u)),l=ua(u)}else c=ca(o),l=ua(s);return{key:c,offset:l}}function ua(e){var t=e.textContent;return"\n"===t?0:t.length}var da=function(e,t,n,r,o,i){var a=n.nodeType===Node.TEXT_NODE,s=o.nodeType===Node.TEXT_NODE;if(a&&s)return{selectionState:ia(e,ca(ra(n)),r,ca(ra(o)),i),needsRecovery:!1};var c=null,l=null,u=!0;return a?(c={key:ca(ra(n)),offset:r},l=la(t,o,i)):s?(l={key:ca(ra(o)),offset:i},c=la(t,n,r)):(c=la(t,n,r),l=la(t,o,i),n===o&&r===i&&(u=!!n.firstChild&&"BR"!==n.firstChild.nodeName)),{selectionState:ia(e,c.key,c.offset,l.key,l.offset),needsRecovery:u}},pa=da;var fa=function(e,t){var n=t.ownerDocument.defaultView.getSelection(),r=n.anchorNode,o=n.anchorOffset,i=n.focusNode,a=n.focusOffset;return 0===n.rangeCount||null==r||null==i?{selectionState:e.getSelection().set("hasFocus",!1),needsRecovery:!1}:pa(e,t,r,o,i,a)},ma=Qi,ga=so,ha=Zi,va=fa;var ya=function(e){if(e._blockSelectEvents||e._latestEditorState!==e.props.editorState){if(e._blockSelectEvents){var t=e.props.editorState.getSelection();ma.logBlockedSelectionEvent({anonymizedDom:"N/A",extraParams:JSON.stringify({stacktrace:(new Error).stack}),selectionState:JSON.stringify(t.toJS())})}}else{var n=e.props.editorState,r=va(n,ha(e)),o=r.selectionState;o!==n.getSelection()&&(n=r.needsRecovery?ga.forceSelection(n,o):ga.acceptSelection(n,o),e.update(n))}};var _a={notEmptyKey:function(e){return null!=e&&""!=e}},ba=_a.notEmptyKey;function ka(e,t){return ba(t)&&"MUTABLE"===e.__get(t).getMutability()?t:null}var wa=function(e,t){var n;if(t.isCollapsed()){var r=t.getAnchorKey(),o=t.getAnchorOffset();return o>0?(n=e.getBlockForKey(r).getEntityAt(o-1))!==e.getBlockForKey(r).getEntityAt(o)?null:ka(e.getEntityMap(),n):null}var i=t.getStartKey(),a=t.getStartOffset(),s=e.getBlockForKey(i);return n=a===s.getLength()?null:s.getEntityAt(a),ka(e.getEntityMap(),n)},Ca=Wi,Sa=pn,Ea=$i,xa=so,Ma=Gi,Ta=ya,Aa=Zi,Oa=fa,Da=wa,Ra=Fr,Na=xi.isBrowser("IE"),Pa=!1,Ba=!1,Ia=null;var Ka,La,Fa={onCompositionStart:function(e){Ba=!0,function(e){Ia||(Ia=new Ca(Aa(e))).start()}(e)},onCompositionEnd:function(e){Pa=!1,Ba=!1,setTimeout((function(){Pa||Fa.resolveComposition(e)}),20)},onSelect:Ta,onKeyDown:function(e,t){if(!Ba)return Fa.resolveComposition(e),void e._onKeyDown(t);t.which!==Ma.RIGHT&&t.which!==Ma.LEFT||t.preventDefault()},onKeyPress:function(e,t){t.which===Ma.RETURN&&t.preventDefault()},resolveComposition:function(e){if(!Ba){var t=Ra(Ia).stopAndFlushMutations();Ia=null,Pa=!0;var n=xa.set(e._latestEditorState,{inCompositionMode:!1});if(e.exitCurrentMode(),t.size){var r=n.getCurrentContent();t.forEach((function(e,t){var o=Ea.decode(t),i=o.blockKey,a=o.decoratorKey,s=o.leafKey,c=n.getBlockTree(i).getIn([a,"leaves",s]),l=c.start,u=c.end,d=n.getSelection().merge({anchorKey:i,focusKey:i,anchorOffset:l,focusOffset:u,isBackward:!1}),p=Da(r,d),f=r.getBlockForKey(i).getInlineStyleAt(l);r=Sa.replaceText(r,d,e,f,p),n=xa.set(n,{currentContent:r})}));var o=Oa(n,Aa(e)).selectionState;e.restoreEditorDOM();var i=Na?xa.forceSelection(n,o):xa.acceptSelection(n,o);e.update(xa.push(i,r,"insert-characters"))}else e.update(n)}}},ja=Fa;function za(){if(La)return Ka;La=1;var e=$o;function t(){return t=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}var n=$i,r=R.default,o=Rr,i=kr,a=function(e){var a,s;function c(){return e.apply(this,arguments)||this}return s=e,(a=c).prototype=Object.create(s.prototype),a.prototype.constructor=a,a.__proto__=s,c.prototype.render=function(){var e=this.props,a=e.block,s=e.children,c=e.contentState,l=e.decorator,u=e.decoratorKey,d=e.direction,p=e.leafSet,f=e.text,m=a.getKey(),g=p.get("leaves"),h=l.getComponentForKey(u),v=l.getPropsForKey(u),y=n.encode(m,parseInt(u,10),0),_=f.slice(g.first().get("start"),g.last().get("end")),b=i.getHTMLDirIfDifferent(o.getDirection(_),d);return r.createElement(h,t({},v,{contentState:c,decoratedText:_,dir:b,key:y,entityKey:a.getEntityAt(p.get("start")),offsetKey:y}),s)},c}(r.Component);return Ka=a}function Ua(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Va=R.default,Wa=He,qa=Ti,$a=xi.isBrowser("IE <= 11");var Ga=function(e){var t,n;function r(t){var n;return Ha(Ua(n=e.call(this,t)||this),"_forceFlag",void 0),Ha(Ua(n),"_node",void 0),n._forceFlag=!1,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.shouldComponentUpdate=function(e){var t=this._node,n=""===e.children;qa(t)||Wa(!1);var r=t;return n?!function(e){return $a?"\n"===e.textContent:"BR"===e.tagName}(r):r.textContent!==e.children},o.componentDidMount=function(){this._forceFlag=!this._forceFlag},o.componentDidUpdate=function(){this._forceFlag=!this._forceFlag},o.render=function(){var e,t=this;return""===this.props.children?this._forceFlag?(e=function(e){return t._node=e},$a?Va.createElement("span",{key:"A","data-text":"true",ref:e},"\n"):Va.createElement("br",{key:"A","data-text":"true",ref:e})):function(e){return $a?Va.createElement("span",{key:"B","data-text":"true",ref:e},"\n"):Va.createElement("br",{key:"B","data-text":"true",ref:e})}((function(e){return t._node=e})):Va.createElement("span",{key:this._forceFlag?"A":"B","data-text":"true",ref:function(e){return t._node=e}},this.props.children)},r}(Va.Component),Qa=Ga,Ja=Ti;var Xa=function(e){return!(!e||!e.ownerDocument)&&(Ja(e)&&"BR"===e.nodeName)},Ya={initODS:function(){},handleExtensionCausedError:function(){}};var Za=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))};var es=function(e){return Za(e)&&3==e.nodeType};var ts=function e(t,n){return!(!t||!n)&&(t===n||!es(t)&&(es(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))};var ns=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}},rs=Ya,os=Qi,is=ts,as=ns,ss=Mi,cs=He,ls=Ti,us=xi.isBrowser("IE");function ds(e,t){if(!e)return"[empty]";var n=ps(e,t);return n.nodeType===Node.TEXT_NODE?n.textContent:(ls(n)||cs(!1),n.outerHTML)}function ps(e,t){var n=void 0!==t?t(e):[];if(e.nodeType===Node.TEXT_NODE){var r=e.textContent.length;return ss(e).createTextNode("[text "+r+(n.length?" | "+n.join(", "):"")+"]")}var o=e.cloneNode();1===o.nodeType&&n.length&&o.setAttribute("data-labels",n.join(", "));for(var i=e.childNodes,a=0;a<i.length;a++)o.appendChild(ps(i[a],t));return o}function fs(e,t){for(var n=e,r=n;n;){if(ls(n)&&r.hasAttribute("contenteditable"))return ds(n,t);r=n=n.parentNode}return"Could not find contentEditable parent of node"}function ms(e){return null===e.nodeValue?e.childNodes.length:e.nodeValue.length}function gs(e,t,n,r){var o=as();if(e.extend&&null!=t&&is(o,t)){n>ms(t)&&os.logSelectionStateFailure({anonymizedDom:fs(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(r.toJS())});var i=t===e.focusNode;try{e.rangeCount>0&&e.extend&&e.extend(t,n)}catch(a){throw os.logSelectionStateFailure({anonymizedDom:fs(t,(function(t){var n=[];return t===o&&n.push("active element"),t===e.anchorNode&&n.push("selection anchor node"),t===e.focusNode&&n.push("selection focus node"),n})),extraParams:JSON.stringify({activeElementName:o?o.nodeName:null,nodeIsFocus:t===e.focusNode,nodeWasFocus:i,selectionRangeCount:e.rangeCount,selectionAnchorNodeName:e.anchorNode?e.anchorNode.nodeName:null,selectionAnchorOffset:e.anchorOffset,selectionFocusNodeName:e.focusNode?e.focusNode.nodeName:null,selectionFocusOffset:e.focusOffset,message:a?""+a:null,offset:n},null,2),selectionState:JSON.stringify(r.toJS(),null,2)}),a}}else if(t&&e.rangeCount>0){var a=e.getRangeAt(0);a.setEnd(t,n),e.addRange(a.cloneRange())}}function hs(e,t,n,r){var o=ss(t).createRange();if(n>ms(t)&&(os.logSelectionStateFailure({anonymizedDom:fs(t),extraParams:JSON.stringify({offset:n}),selectionState:JSON.stringify(r.toJS())}),rs.handleExtensionCausedError()),o.setStart(t,n),us)try{e.addRange(o)}catch(e){}else e.addRange(o)}var vs=function(e,t,n,r,o){var i=ss(t);if(is(i.documentElement,t)){var a=i.defaultView.getSelection(),s=e.getAnchorKey(),c=e.getAnchorOffset(),l=e.getFocusKey(),u=e.getFocusOffset(),d=e.getIsBackward();if(!a.extend&&d){var p=s,f=c;s=l,c=u,l=p,u=f,d=!1}var m=s===n&&r<=c&&o>=c,g=l===n&&r<=u&&o>=u;if(m&&g)return a.removeAllRanges(),hs(a,t,c-r,e),void gs(a,t,u-r,e);if(d){if(g&&(a.removeAllRanges(),hs(a,t,u-r,e)),m){var h=a.focusNode,v=a.focusOffset;a.removeAllRanges(),hs(a,t,c-r,e),gs(a,h,v,e)}}else m&&(a.removeAllRanges(),hs(a,t,c-r,e)),g&&gs(a,t,u-r,e)}},ys=$o;var _s,bs,ks=Qa,ws=R.default,Cs=He,Ss=Xa,Es=vs,xs=function(e){var t,n;function r(){for(var t,n,r,o,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),o=void 0,(r="leaf")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o._setSelection=function(){var e=this.props.selection;if(null!=e&&e.getHasFocus()){var t=this.props,n=t.block,r=t.start,o=t.text,i=n.getKey(),a=r+o.length;if(e.hasEdgeWithin(i,r,a)){var s=this.leaf;s||Cs(!1);var c,l=s.firstChild;l||Cs(!1),l.nodeType===Node.TEXT_NODE?c=l:Ss(l)?c=s:(c=l.firstChild)||Cs(!1),Es(e,c,i,r,a)}}},o.shouldComponentUpdate=function(e){var t=this.leaf;return t||Cs(!1),t.textContent!==e.text||e.styleSet!==this.props.styleSet||e.forceSelection},o.componentDidUpdate=function(){this._setSelection()},o.componentDidMount=function(){this._setSelection()},o.render=function(){var e=this,t=this.props.block,n=this.props.text;n.endsWith("\n")&&this.props.isLast&&(n+="\n");var r=this.props,o=r.customStyleMap,i=r.customStyleFn,a=r.offsetKey,s=r.styleSet,c=s.reduce((function(e,t){var n={},r=o[t];return void 0!==r&&e.textDecoration!==r.textDecoration&&(n.textDecoration=[e.textDecoration,r.textDecoration].join(" ").trim()),ys(e,r,n)}),{});if(i){var l=i(s,t);c=ys(c,l)}return ws.createElement("span",{"data-offset-key":a,ref:function(t){return e.leaf=t},style:c},ws.createElement(ks,null,n))},r}(ws.Component),Ms=xs;function Ts(){if(bs)return _s;bs=1;var e=za(),t=Ms,r=$i,o=n.immutableExports,i=R.default,a=Fo;o.List;var s=function(n){var o,s;function c(){return n.apply(this,arguments)||this}return s=n,(o=c).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s,c.prototype.render=function(){var n=this.props,o=n.block,s=n.contentState,c=n.customStyleFn,l=n.customStyleMap,u=n.decorator,d=n.direction,p=n.forceSelection,f=n.hasSelection,m=n.selection,g=n.tree,h=o.getKey(),v=o.getText(),y=g.size-1,_=this.props.children||g.map((function(n,a){var g=n.get("decoratorKey"),_=n.get("leaves"),b=_.size-1,k=_.map((function(e,n){var s=r.encode(h,a,n),u=e.get("start"),d=e.get("end");return i.createElement(t,{key:s,offsetKey:s,block:o,start:u,selection:f?m:null,forceSelection:p,text:v.slice(u,d),styleSet:o.getInlineStyleAt(u),customStyleMap:l,customStyleFn:c,isLast:g===y&&n===b})})).toArray();return g&&u?i.createElement(e,{block:o,children:k,contentState:s,decorator:u,decoratorKey:g,direction:d,leafSet:n,text:v,key:a}):k})).toArray();return i.createElement("div",{"data-offset-key":r.encode(h,0,0),className:a({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===d,"public/DraftStyleDefault/rtl":"RTL"===d})},_)},c}(i.Component);return _s=s}function As(e,t){return!!t&&(e===t.documentElement||e===t.body)}var Os={getTop:function(e){var t=e.ownerDocument;return As(e,t)?t.body.scrollTop||t.documentElement.scrollTop:e.scrollTop},setTop:function(e,t){var n=e.ownerDocument;As(e,n)?n.body.scrollTop=n.documentElement.scrollTop=t:e.scrollTop=t},getLeft:function(e){var t=e.ownerDocument;return As(e,t)?t.body.scrollLeft||t.documentElement.scrollLeft:e.scrollLeft},setLeft:function(e,t){var n=e.ownerDocument;As(e,n)?n.body.scrollLeft=n.documentElement.scrollLeft=t:e.scrollLeft=t}},Ds=/-(.)/g;var Rs=/([A-Z])/g;var Ns=function(e){return e.replace(Ds,(function(e,t){return t.toUpperCase()}))},Ps=function(e){return e.replace(Rs,"-$1").toLowerCase()};function Bs(e){return null==e?e:String(e)}var Is=function(e,t){var n;if(window.getComputedStyle&&(n=window.getComputedStyle(e,null)))return Bs(n.getPropertyValue(Ps(t)));if(document.defaultView&&document.defaultView.getComputedStyle){if(n=document.defaultView.getComputedStyle(e,null))return Bs(n.getPropertyValue(Ps(t)));if("display"===t)return"none"}return e.currentStyle?Bs("float"===t?e.currentStyle.cssFloat||e.currentStyle.styleFloat:e.currentStyle[Ns(t)]):Bs(e.style&&e.style[Ns(t)])};function Ks(e,t){var n=Ls.get(e,t);return"auto"===n||"scroll"===n}var Ls={get:Is,getScrollParent:function(e){if(!e)return null;for(var t=e.ownerDocument;e&&e!==t.body;){if(Ks(e,"overflow")||Ks(e,"overflowY")||Ks(e,"overflowX"))return e;e=e.parentNode}return t.defaultView||t.parentWindow}},Fs=Ls,js=ts;var zs=function(e){var t=e.ownerDocument.documentElement;if(!("getBoundingClientRect"in e)||!js(t,e))return{left:0,right:0,top:0,bottom:0};var n=e.getBoundingClientRect();return{left:Math.round(n.left)-t.clientLeft,right:Math.round(n.right)-t.clientLeft,top:Math.round(n.top)-t.clientTop,bottom:Math.round(n.bottom)-t.clientTop}};var Us=function(e){var t=zs(e);return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}},Hs="undefined"!=typeof navigator&&navigator.userAgent.indexOf("AppleWebKit")>-1;var Vs=function(e){return(e=e||document).scrollingElement?e.scrollingElement:Hs||"CSS1Compat"!==e.compatMode?e.body:e.documentElement},Ws=function(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}};var qs=function(e){var t=Vs(e.ownerDocument||e.document);e.Window&&e instanceof e.Window&&(e=t);var n=Ws(e),r=e===t?e.ownerDocument.documentElement:e,o=e.scrollWidth-r.clientWidth,i=e.scrollHeight-r.clientHeight;return n.x=Math.max(0,Math.min(n.x,o)),n.y=Math.max(0,Math.min(n.y,i)),n};function $s(){var e;return document.documentElement&&(e=document.documentElement.clientWidth),!e&&document.body&&(e=document.body.clientWidth),e||0}function Gs(){var e;return document.documentElement&&(e=document.documentElement.clientHeight),!e&&document.body&&(e=document.body.clientHeight),e||0}function Qs(){return{width:window.innerWidth||$s(),height:window.innerHeight||Gs()}}Qs.withoutScrollbars=function(){return{width:$s(),height:Gs()}};var Js,Xs,Ys,Zs,ec=Qs;function tc(){if(Xs)return Js;Xs=1;var e=$o;function t(){return t=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=Ts(),a=$i,s=R.default,c=Os,l=Fs,u=Us,d=qs,p=ec,f=n.immutableExports,m=He,g=Ji;f.List;var h=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},v=function(e,t){var n=t.get(e.getType())||t.get("unstyled"),r=n.wrapper;return{Element:n.element||t.get("unstyled").element,wrapperTemplate:r}},y=function(e,t){var n=t(e);return n?{CustomComponent:n.component,customProps:n.props,customEditable:n.editable}:{}},_=function(e,t,n,o,i,a){var s={"data-block":!0,"data-editor":t,"data-offset-key":n,key:e.getKey(),ref:a},c=o(e);return c&&(s.className=c),void 0!==i.customEditable&&(s=r({},s,{contentEditable:i.customEditable,suppressContentEditableWarning:!0})),s},b=function(e){var n,f;function b(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return o(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t=e.call.apply(e,[this].concat(r))||this),"wrapperRef",s.createRef()),t}f=e,(n=b).prototype=Object.create(f.prototype),n.prototype.constructor=n,n.__proto__=f;var k=b.prototype;return k.shouldComponentUpdate=function(e){var t=this.props,n=t.block,r=t.direction,o=t.tree,i=!n.getChildKeys().isEmpty(),a=n!==e.block||o!==e.tree||r!==e.direction||h(e.selection,e.block.getKey())&&e.forceSelection;return i||a},k.componentDidMount=function(){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var n=this.wrapperRef.current;if(n){var r,o=l.getScrollParent(n),i=d(o);if(o===window){var a=u(n);(r=a.y+a.height-p().height)>0&&window.scrollTo(i.x,i.y+r+10)}else{g(n)||m(!1);var s=n;(r=s.offsetHeight+s.offsetTop-(o.offsetHeight+i.y))>0&&c.setTop(o,c.getTop(o)+r+10)}}}},k.render=function(){var e=this,n=this.props,o=n.block,c=n.blockRenderMap,l=n.blockRendererFn,u=n.blockStyleFn,d=n.contentState,p=n.decorator,f=n.editorKey,m=n.editorState,g=n.customStyleFn,k=n.customStyleMap,w=n.direction,C=n.forceSelection,S=n.selection,E=n.tree,x=null;o.children.size&&(x=o.children.reduce((function(t,n){var o=a.encode(n,0,0),i=d.getBlockForKey(n),p=y(i,l),g=p.CustomComponent||b,h=v(i,c),k=h.Element,w=h.wrapperTemplate,C=_(i,f,o,u,p,null),S=r({},e.props,{tree:m.getBlockTree(n),blockProps:p.customProps,offsetKey:o,block:i});return t.push(s.createElement(k,C,s.createElement(g,S))),!w||function(e,t){var n=e.getNextSiblingKey();return!!n&&t.getBlockForKey(n).getType()===e.getType()}(i,d)||function(e,t,n){var r=[],o=!0,i=!1,c=void 0;try{for(var l,u=n.reverse()[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var d=l.value;if(d.type!==t)break;r.push(d)}}catch(e){i=!0,c=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw c}}n.splice(n.indexOf(r[0]),r.length+1);var p=r.reverse(),f=p[0].key;n.push(s.cloneElement(e,{key:"".concat(f,"-wrap"),"data-offset-key":a.encode(f,0,0)},p))}(w,k,t),t}),[]));var M=o.getKey(),T=a.encode(M,0,0),A=y(o,l),O=A.CustomComponent,D=null!=O?s.createElement(O,t({},this.props,{tree:m.getBlockTree(M),blockProps:A.customProps,offsetKey:T,block:o})):s.createElement(i,{block:o,children:x,contentState:d,customStyleFn:g,customStyleMap:k,decorator:p,direction:w,forceSelection:C,hasSelection:h(S,M),selection:S,tree:E});if(o.getParentKey())return D;var R=v(o,c).Element,N=_(o,f,T,u,A,this.wrapperRef);return s.createElement(R,N,D)},b}(s.Component);return Js=b}var nc=$o;function rc(){return rc=nc||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rc.apply(this,arguments)}var oc,ic,ac,sc,cc=Ms,lc=$i,uc=R.default,dc=Os,pc=Fs,fc=Rr,mc=kr,gc=Fo,hc=Us,vc=qs,yc=ec,_c=He,bc=Ji,kc=Fr,wc=function(e,t){return e.getAnchorKey()===t||e.getFocusKey()===t},Cc=function(e){var t,n;function r(){for(var t,n,r,o,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),o=void 0,(r="_node")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.shouldComponentUpdate=function(e){return this.props.block!==e.block||this.props.tree!==e.tree||this.props.direction!==e.direction||wc(e.selection,e.block.getKey())&&e.forceSelection},o.componentDidMount=function(){if(!this.props.preventScroll){var e=this.props.selection,t=e.getEndKey();if(e.getHasFocus()&&t===this.props.block.getKey()){var n=this._node;if(null!=n){var r,o=pc.getScrollParent(n),i=vc(o);if(o===window){var a=hc(n);(r=a.y+a.height-yc().height)>0&&window.scrollTo(i.x,i.y+r+10)}else{bc(n)||_c(!1),(r=n.offsetHeight+n.offsetTop-(o.offsetTop+o.offsetHeight+i.y))>0&&dc.setTop(o,dc.getTop(o)+r+10)}}}}},o._renderChildren=function(){var e=this,t=this.props.block,n=t.getKey(),r=t.getText(),o=this.props.tree.size-1,i=wc(this.props.selection,n);return this.props.tree.map((function(a,s){var c=a.get("leaves");if(0===c.size)return null;var l=c.size-1,u=c.map((function(a,c){var u=lc.encode(n,s,c),d=a.get("start"),p=a.get("end");return uc.createElement(cc,{key:u,offsetKey:u,block:t,start:d,selection:i?e.props.selection:null,forceSelection:e.props.forceSelection,text:r.slice(d,p),styleSet:t.getInlineStyleAt(d),customStyleMap:e.props.customStyleMap,customStyleFn:e.props.customStyleFn,isLast:s===o&&c===l})})).toArray(),d=a.get("decoratorKey");if(null==d)return u;if(!e.props.decorator)return u;var p=kc(e.props.decorator),f=p.getComponentForKey(d);if(!f)return u;var m=p.getPropsForKey(d),g=lc.encode(n,s,0),h=c.first().get("start"),v=c.last().get("end"),y=r.slice(h,v),_=t.getEntityAt(a.get("start")),b=mc.getHTMLDirIfDifferent(fc.getDirection(y),e.props.direction),k={contentState:e.props.contentState,decoratedText:y,dir:b,start:h,end:v,blockKey:n,entityKey:_,offsetKey:g};return uc.createElement(f,rc({},m,k,{key:g}),u)})).toArray()},o.render=function(){var e=this,t=this.props,n=t.direction,r=t.offsetKey,o=gc({"public/DraftStyleDefault/block":!0,"public/DraftStyleDefault/ltr":"LTR"===n,"public/DraftStyleDefault/rtl":"RTL"===n});return uc.createElement("div",{"data-offset-key":r,className:o,ref:function(t){return e._node=t}},this._renderChildren())},r}(uc.Component),Sc=Cc;var Ec=Hn("draft_tree_data_support")?function(){if(Zs)return Ys;Zs=1;var e=$o;function t(){return t=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}var n=tc(),r=$i,o=R.default,i=Fr,a=function(e){var a,s;function c(){return e.apply(this,arguments)||this}s=e,(a=c).prototype=Object.create(s.prototype),a.prototype.constructor=a,a.__proto__=s;var l=c.prototype;return l.shouldComponentUpdate=function(e){var t=this.props.editorState,n=e.editorState;if(t.getDirectionMap()!==n.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==n.getSelection().getHasFocus())return!0;var r=n.getNativelyRenderedContent(),o=t.isInCompositionMode(),i=n.isInCompositionMode();if(t===n||null!==r&&n.getCurrentContent()===r||o&&i)return!1;var a=t.getCurrentContent(),s=n.getCurrentContent(),c=t.getDecorator(),l=n.getDecorator();return o!==i||a!==s||c!==l||n.mustForceSelection()},l.render=function(){for(var e=this.props,a=e.blockRenderMap,s=e.blockRendererFn,c=e.blockStyleFn,l=e.customStyleMap,u=e.customStyleFn,d=e.editorState,p=e.editorKey,f=e.textDirectionality,m=d.getCurrentContent(),g=d.getSelection(),h=d.mustForceSelection(),v=d.getDecorator(),y=i(d.getDirectionMap()),_=[],b=m.getBlocksAsArray()[0];b;){var k=b.getKey(),w={blockRenderMap:a,blockRendererFn:s,blockStyleFn:c,contentState:m,customStyleFn:u,customStyleMap:l,decorator:v,editorKey:p,editorState:d,forceSelection:h,selection:g,block:b,direction:f||y.get(k),tree:d.getBlockTree(k)},C=(a.get(b.getType())||a.get("unstyled")).wrapper;_.push({block:o.createElement(n,t({key:k},w)),wrapperTemplate:C,key:k,offsetKey:r.encode(k,0,0)});var S=b.getNextSiblingKey();b=S?m.getBlockForKey(S):null}for(var E=[],x=0;x<_.length;){var M=_[x];if(M.wrapperTemplate){var T=[];do{T.push(_[x].block),x++}while(x<_.length&&_[x].wrapperTemplate===M.wrapperTemplate);var A=o.cloneElement(M.wrapperTemplate,{key:M.key+"-wrap","data-offset-key":M.offsetKey},T);E.push(A)}else E.push(M.block),x++}return o.createElement("div",{"data-contents":"true"},E)},c}(o.Component);return Ys=a}():function(){if(sc)return ac;sc=1;var e=$o;function t(){return t=e||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=Sc,i=$i,a=R.default,s=Fo,c=(ic||(ic=1,oc=function(e){var t=e||"",n=arguments.length;if(n>1)for(var r=1;r<n;r++){var o=arguments[r];o&&(t=(t?t+" ":"")+o)}return t}),oc),l=Fr,u=function(e,t,n,r){return s({"public/DraftStyleDefault/unorderedListItem":"unordered-list-item"===e,"public/DraftStyleDefault/orderedListItem":"ordered-list-item"===e,"public/DraftStyleDefault/reset":n,"public/DraftStyleDefault/depth0":0===t,"public/DraftStyleDefault/depth1":1===t,"public/DraftStyleDefault/depth2":2===t,"public/DraftStyleDefault/depth3":3===t,"public/DraftStyleDefault/depth4":t>=4,"public/DraftStyleDefault/listLTR":"LTR"===r,"public/DraftStyleDefault/listRTL":"RTL"===r})},d=function(e){var r,s;function d(){return e.apply(this,arguments)||this}s=e,(r=d).prototype=Object.create(s.prototype),r.prototype.constructor=r,r.__proto__=s;var p=d.prototype;return p.shouldComponentUpdate=function(e){var t=this.props.editorState,n=e.editorState;if(t.getDirectionMap()!==n.getDirectionMap())return!0;if(t.getSelection().getHasFocus()!==n.getSelection().getHasFocus())return!0;var r=n.getNativelyRenderedContent(),o=t.isInCompositionMode(),i=n.isInCompositionMode();if(t===n||null!==r&&n.getCurrentContent()===r||o&&i)return!1;var a=t.getCurrentContent(),s=n.getCurrentContent(),c=t.getDecorator(),l=n.getDecorator();return o!==i||a!==s||c!==l||n.mustForceSelection()},p.render=function(){for(var e=this.props,r=e.blockRenderMap,s=e.blockRendererFn,d=e.blockStyleFn,p=e.customStyleMap,f=e.customStyleFn,m=e.editorState,g=e.editorKey,h=e.preventScroll,v=e.textDirectionality,y=m.getCurrentContent(),_=m.getSelection(),b=m.mustForceSelection(),k=m.getDecorator(),w=l(m.getDirectionMap()),C=y.getBlocksAsArray(),S=[],E=null,x=null,M=0;M<C.length;M++){var T=C[M],A=T.getKey(),O=T.getType(),D=s(T),R=void 0,N=void 0,P=void 0;D&&(R=D.component,N=D.props,P=D.editable);var B=v||w.get(A),I=i.encode(A,0,0),K={contentState:y,block:T,blockProps:N,blockStyleFn:d,customStyleMap:p,customStyleFn:f,decorator:k,direction:B,forceSelection:b,offsetKey:I,preventScroll:h,selection:_,tree:m.getBlockTree(A)},L=r.get(O)||r.get("unstyled"),F=L.wrapper,j=L.element||r.get("unstyled").element,z=T.getDepth(),U="";if(d&&(U=d(T)),"li"===j)U=c(U,u(O,z,x!==F||null===E||z>E,B));var H=R||o,V={className:U,"data-block":!0,"data-editor":g,"data-offset-key":I,key:A};void 0!==P&&(V=n({},V,{contentEditable:P,suppressContentEditableWarning:!0}));var W=a.createElement(j,V,a.createElement(H,t({},K,{key:A})));S.push({block:W,wrapperTemplate:F,key:A,offsetKey:I}),E=F?T.getDepth():null,x=F}for(var q=[],$=0;$<S.length;){var G=S[$];if(G.wrapperTemplate){var Q=[];do{Q.push(S[$].block),$++}while($<S.length&&S[$].wrapperTemplate===G.wrapperTemplate);var J=a.cloneElement(G.wrapperTemplate,{key:G.key+"-wrap","data-offset-key":G.offsetKey},Q);q.push(J)}else q.push(G.block),$++}return a.createElement("div",{"data-contents":"true"},q)},d}(a.Component);return ac=d}(),xc={isImage:function(e){return"image"===Mc(e)[0]},isJpeg:function(e){var t=Mc(e);return xc.isImage(e)&&("jpeg"===t[1]||"pjpeg"===t[1])}};function Mc(e){return e.split("/")}var Tc=xc,Ac=He;var Oc=function(e){return function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}(e)?Array.isArray(e)?e.slice():function(e){var t=e.length;if((Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e)&&Ac(!1),"number"!=typeof t&&Ac(!1),0===t||t-1 in e||Ac(!1),"function"==typeof e.callee&&Ac(!1),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}(e):[e]};function Dc(e){return function(){return e}}var Rc=function(){};Rc.thatReturns=Dc,Rc.thatReturnsFalse=Dc(!1),Rc.thatReturnsTrue=Dc(!0),Rc.thatReturnsNull=Dc(null),Rc.thatReturnsThis=function(){return this},Rc.thatReturnsArgument=function(e){return e};var Nc=Tc,Pc=Oc,Bc=Rc,Ic=new RegExp("\r\n","g"),Kc={"text/rtf":1,"text/html":1};function Lc(e){if("file"==e.kind)return e.getAsFile()}var Fc=function(){function e(e){this.data=e,this.types=e.types?Pc(e.types):[]}var t=e.prototype;return t.isRichText=function(){return!(!this.getHTML()||!this.getText())||!this.isImage()&&this.types.some((function(e){return Kc[e]}))},t.getText=function(){var e;return this.data.getData&&(this.types.length?-1!=this.types.indexOf("text/plain")&&(e=this.data.getData("text/plain")):e=this.data.getData("Text")),e?e.replace(Ic,"\n"):null},t.getHTML=function(){if(this.data.getData){if(!this.types.length)return this.data.getData("Text");if(-1!=this.types.indexOf("text/html"))return this.data.getData("text/html")}},t.isLink=function(){return this.types.some((function(e){return-1!=e.indexOf("Url")||-1!=e.indexOf("text/uri-list")||e.indexOf("text/x-moz-url")}))},t.getLink=function(){return this.data.getData?-1!=this.types.indexOf("text/x-moz-url")?this.data.getData("text/x-moz-url").split("\n")[0]:-1!=this.types.indexOf("text/uri-list")?this.data.getData("text/uri-list"):this.data.getData("url"):null},t.isImage=function(){var e=this.types.some((function(e){return-1!=e.indexOf("application/x-moz-file")}));if(e)return!0;for(var t=this.getFiles(),n=0;n<t.length;n++){var r=t[n].type;if(!Nc.isImage(r))return!1}return!0},t.getCount=function(){return this.data.hasOwnProperty("items")?this.data.items.length:this.data.hasOwnProperty("mozItemCount")?this.data.mozItemCount:this.data.files?this.data.files.length:null},t.getFiles=function(){return this.data.items?Array.prototype.slice.call(this.data.items).map(Lc).filter(Bc.thatReturnsArgument):this.data.files?Array.prototype.slice.call(this.data.files):[]},t.hasFiles=function(){return this.getFiles().length>0},e}(),jc=Fc,zc=He,Uc=/\.textClipping$/,Hc={"text/plain":!0,"text/html":!0,"text/rtf":!0};var Vc=function(e,t){var n=0,r=[];e.forEach((function(i){!function(e,t){if(!o.commonjsGlobal.FileReader||e.type&&!(e.type in Hc))return void t("");if(""===e.type){var n="";return Uc.test(e.name)&&(n=e.name.replace(Uc,"")),void t(n)}var r=new FileReader;r.onload=function(){var e=r.result;"string"!=typeof e&&zc(!1),t(e)},r.onerror=function(){t("")},r.readAsText(e)}(i,(function(o){n++,o&&r.push(o.slice(0,5e3)),n==e.length&&t(r.join("\r"))}))}))};var Wc=function(e){return"handled"===e||!0===e},qc=jc,$c=pn,Gc=so,Qc=Ni,Jc=Mi,Xc=Vc,Yc=na,Zc=Pi,el=Wc,tl=Fr;function nl(e){e._internalDrag=!1;var t=e.editorContainer;if(t){var n=new MouseEvent("mouseup",{view:Zc(t),bubbles:!0,cancelable:!0});t.dispatchEvent(n)}}function rl(e,t,n){var r=$c.insertText(e.getCurrentContent(),t,n,e.getCurrentInlineStyle());return Gc.push(e,r,"insert-fragment")}var ol={onDragEnd:function(e){e.exitCurrentMode(),nl(e)},onDrop:function(e,t){var n=new qc(t.nativeEvent.dataTransfer),r=e._latestEditorState,o=function(e,t){var n=null,r=null,o=Jc(e.currentTarget);if("function"==typeof o.caretRangeFromPoint){var i=o.caretRangeFromPoint(e.x,e.y);n=i.startContainer,r=i.startOffset}else{if(!e.rangeParent)return null;n=e.rangeParent,r=e.rangeOffset}n=tl(n),r=tl(r);var a=tl(Qc(n));return Yc(t,a,r,a,r)}(t.nativeEvent,r);if(t.preventDefault(),e._dragCount=0,e.exitCurrentMode(),null!=o){var i=n.getFiles();if(i.length>0){if(e.props.handleDroppedFiles&&el(e.props.handleDroppedFiles(o,i)))return;Xc(i,(function(t){t&&e.update(rl(r,o,t))}))}else{var a=e._internalDrag?"internal":"external";e.props.handleDrop&&el(e.props.handleDrop(o,n,a))||(e._internalDrag?e.update(function(e,t){var n=$c.moveText(e.getCurrentContent(),e.getSelection(),t);return Gc.push(e,n,"insert-fragment")}(r,o)):e.update(rl(r,o,n.getText()))),nl(e)}}}};var il=function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=e.getBlockTree(n),o=t.getStartOffset(),i=!1;return r.some((function(e){return o===e.get("start")?(i=!0,!0):o<e.get("end")&&e.get("leaves").some((function(e){var t=e.get("start");return o===t&&(i=!0,!0)}))})),i};!function(e,t){if(!e.setImmediate){var n,r,o,i,a,s=1,c={},l=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){f(e.data)},n=function(e){o.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,n=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):n=function(e){setTimeout(f,0,e)}:(i="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&f(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(t){e.postMessage(i+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return c[s]=o,n(s),s++},d.clearImmediate=p}function p(e){delete c[e]}function f(e){if(l)setTimeout(f,0,e);else{var n=c[e];if(n){l=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{p(e),l=!1}}}}}("undefined"==typeof self?(o.commonjsGlobal,o.commonjsGlobal):self);var al=o.commonjsGlobal.setImmediate,sl=pn,cl=so,ll=wa,ul=Wc,dl=il,pl=Fr,fl=al,ml="'",gl="/",hl=xi.isBrowser("Firefox");function vl(e,t,n,r,o){var i=sl.replaceText(e.getCurrentContent(),e.getSelection(),t,n,r);return cl.push(e,i,"insert-characters",o)}var yl=function(e,t){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var n=e._latestEditorState,r=t.data;if(r)if(e.props.handleBeforeInput&&ul(e.props.handleBeforeInput(r,n,t.timeStamp)))t.preventDefault();else{var o=n.getSelection(),i=o.getStartOffset(),a=o.getAnchorKey();if(!o.isCollapsed())return t.preventDefault(),void e.update(vl(n,r,n.getCurrentInlineStyle(),ll(n.getCurrentContent(),n.getSelection()),!0));var s,c=vl(n,r,n.getCurrentInlineStyle(),ll(n.getCurrentContent(),n.getSelection()),!1),l=!1;if(l||(l=dl(e._latestCommittedEditorState)),!l){var u=n.getBlockTree(a),d=c.getBlockTree(a);l=u.size!==d.size||u.zip(d).some((function(e){var t=e[0],n=e[1],o=t.get("start"),a=o+(o>=i?r.length:0),s=t.get("end"),c=s+(s>=i?r.length:0),l=n.get("start"),u=n.get("end"),d=n.get("decoratorKey");return t.get("decoratorKey")!==d||t.get("leaves").size!==n.get("leaves").size||a!==l||c!==u||null!=d&&u-l!=s-o}))}if(l||(s=r,l=hl&&(s==ml||s==gl)),l||(l=pl(c.getDirectionMap()).get(a)!==pl(n.getDirectionMap()).get(a)),l)return t.preventDefault(),c=cl.set(c,{forceSelection:!0}),void e.update(c);c=cl.set(c,{nativelyRenderedContent:c.getCurrentContent()}),e._pendingStateFromBeforeInput=c,fl((function(){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0)}))}},_l=so,bl=ts,kl=ns;var wl=function(e,t){var n=t.currentTarget.ownerDocument;if(!Boolean(e.props.preserveSelectionOnBlur)&&kl(n)===n.body){var r=n.defaultView.getSelection(),o=e.editor;1===r.rangeCount&&bl(o,r.anchorNode)&&bl(o,r.focusNode)&&r.removeAllRanges()}var i=e._latestEditorState,a=i.getSelection();if(a.getHasFocus()){var s=a.set("hasFocus",!1);e.props.onBlur&&e.props.onBlur(t),e.update(_l.acceptSelection(i,s))}},Cl=so;var Sl=function(e,t){e.setMode("composite"),e.update(Cl.set(e._latestEditorState,{inCompositionMode:!0})),e._onCompositionStart(t)},El=ut;var xl=function(e){var t=e.getSelection();return t.isCollapsed()?null:El(e.getCurrentContent(),t)},Ml=xl;var Tl=function(e,t){e._latestEditorState.getSelection().isCollapsed()?t.preventDefault():e.setClipboard(Ml(e._latestEditorState))};var Al=pn,Ol=so,Dl=Fs,Rl=xl,Nl=qs,Pl=function(e){if(!e||!("ownerDocument"in e))return!1;if("ownerDocument"in e){var t=e;if(!t.ownerDocument.defaultView)return t instanceof Node;if(t instanceof t.ownerDocument.defaultView.Node)return!0}return!1};var Bl=function(e,t){var n,r=e._latestEditorState,o=r.getSelection(),i=t.target;if(o.isCollapsed())t.preventDefault();else{if(Pl(i)){var a=i;n=Nl(Dl.getScrollParent(a))}var s=Rl(r);e.setClipboard(s),e.setMode("cut"),setTimeout((function(){e.restoreEditorDOM(n),e.exitCurrentMode(),e.update(function(e){var t=Al.removeRange(e.getCurrentContent(),e.getSelection(),"forward");return Ol.push(e,t,"remove-range")}(r))}),0)}};var Il=function(e,t){e.setMode("drag"),t.preventDefault()};var Kl=function(e){e._internalDrag=!0,e.setMode("drag")},Ll=so,Fl=xi;var jl=function(e,t){var n=e._latestEditorState,r=n.getSelection();if(!r.getHasFocus()){var o=r.set("hasFocus",!0);e.props.onFocus&&e.props.onFocus(t),Fl.isBrowser("Chrome < 60.0.3081.0")?e.update(Ll.forceSelection(n,o)):e.update(Ll.acceptSelection(n,o))}},zl=He,Ul=55296,Hl=57343,Vl=/[\uD800-\uDFFF]/;function Wl(e){return Ul<=e&&e<=Hl}function ql(e){return Vl.test(e)}function $l(e,t){return 1+Wl(e.charCodeAt(t))}function Gl(e,t,n){if(t=t||0,n=void 0===n?1/0:n||0,!ql(e))return e.substr(t,n);var r=e.length;if(r<=0||t>r||n<=0)return"";var o=0;if(t>0){for(;t>0&&o<r;t--)o+=$l(e,o);if(o>=r)return""}else if(t<0){for(o=r;t<0&&0<o;t++)o-=$l(e,o-1);o<0&&(o=0)}var i=r;if(n<r)for(i=o;n>0&&i<r;n--)i+=$l(e,i);return e.substring(o,i)}var Ql={getCodePoints:function(e){for(var t=[],n=0;n<e.length;n+=$l(e,n))t.push(e.codePointAt(n));return t},getUTF16Length:$l,hasSurrogateUnit:ql,isCodeUnitInSurrogateRange:Wl,isSurrogatePair:function(e,t){if(0<=t&&t<e.length||zl(!1),t+1===e.length)return!1;var n=e.charCodeAt(t),r=e.charCodeAt(t+1);return Ul<=n&&n<=56319&&56320<=r&&r<=Hl},strlen:function(e){if(!ql(e))return e.length;for(var t=0,n=0;n<e.length;n+=$l(e,n))t++;return t},substring:function(e,t,n){(t=t||0)<0&&(t=0),(n=void 0===n?1/0:n||0)<0&&(n=0);var r=Math.abs(n-t);return Gl(e,t=t<n?t:n,r)},substr:Gl};var Jl=function(e,t){var n=e.getSelection(),r=e.getCurrentContent(),o=n.getStartKey(),i=n.getStartOffset(),a=o,s=0;if(t>i){var c=r.getKeyBefore(o);if(null==c)a=o;else a=c,s=r.getBlockForKey(c).getText().length}else s=i-t;return n.merge({focusKey:a,focusOffset:s,isBackward:!0})},Xl=pn,Yl=Hn("draft_tree_data_support");var Zl=function(e,t,n){var r=e.getSelection(),o=e.getCurrentContent(),i=r,a=r.getAnchorKey(),s=r.getFocusKey(),c=o.getBlockForKey(a);if(Yl&&"forward"===n&&a!==s)return o;if(r.isCollapsed()){if("forward"===n){if(e.isSelectionAtEndOfContent())return o;if(Yl)if(r.getAnchorOffset()===o.getBlockForKey(a).getLength()){var l=o.getBlockForKey(c.nextSibling);if(!l||0===l.getLength())return o}}else if(e.isSelectionAtStartOfContent())return o;if((i=t(e))===r)return o}return Xl.removeRange(o,i,n)},eu=so,tu=Ql,nu=Jl,ru=Zl;var ou=function(e){var t=ru(e,(function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),o=t.getAnchorOffset(),i=n.getBlockForKey(r).getText()[o-1];return nu(e,i?tu.getUTF16Length(i,0):1)}),"backward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return eu.push(e,t.set("selectionBefore",n),n.isCollapsed()?"backspace-character":"remove-range")},iu=pn,au=$i,su=so,cu=_a.notEmptyKey,lu=Ni,uu=ou,du=Fr,pu=xi.isEngine("Gecko");var fu=function(e,t){void 0!==e._pendingStateFromBeforeInput&&(e.update(e._pendingStateFromBeforeInput),e._pendingStateFromBeforeInput=void 0);var n=e.editor.ownerDocument.defaultView.getSelection(),r=n.anchorNode,o=n.isCollapsed,i=(null==r?void 0:r.nodeType)!==Node.TEXT_NODE&&(null==r?void 0:r.nodeType)!==Node.ELEMENT_NODE;if(null!=r&&!i){if(r.nodeType===Node.TEXT_NODE&&(null!==r.previousSibling||null!==r.nextSibling)){var a=r.parentNode;if(null==a)return;r.nodeValue=a.textContent;for(var s=a.firstChild;null!=s;s=s.nextSibling)s!==r&&a.removeChild(s)}var c=r.textContent,l=e._latestEditorState,u=du(lu(r)),d=au.decode(u),p=d.blockKey,f=d.decoratorKey,m=d.leafKey,g=l.getBlockTree(p).getIn([f,"leaves",m]),h=g.start,v=g.end,y=l.getCurrentContent(),_=y.getBlockForKey(p),b=_.getText().slice(h,v);if(c.endsWith("\n\n")&&(c=c.slice(0,-1)),c!==b){var k,w,C,S,E=l.getSelection(),x=E.merge({anchorOffset:h,focusOffset:v,isBackward:!1}),M=_.getEntityAt(h),T=cu(M)?y.getEntity(M):null,A="MUTABLE"===(null!=T?T.getMutability():null),O=A?"spellcheck-change":"apply-entity",D=iu.replaceText(y,x,c,_.getInlineStyleAt(h),A?_.getEntityAt(h):null);if(pu)k=n.anchorOffset,w=n.focusOffset,S=(C=h+Math.min(k,w))+Math.abs(k-w),k=C,w=S;else{var R=c.length-b.length;C=E.getStartOffset(),S=E.getEndOffset(),k=o?S+R:C,w=S+R}var N=D.merge({selectionBefore:y.getSelectionAfter(),selectionAfter:E.merge({anchorOffset:k,focusOffset:w})});e.update(su.push(l,N,O))}else{var P=t.nativeEvent.inputType;if(P){var B=function(e,t){return"deleteContentBackward"===e?uu(t):t}(P,l);if(B!==l)return e.restoreEditorDOM(),void e.update(B)}}}},mu=Gi;var gu=function(e){return e.which===mu.RETURN&&(e.getModifierState("Shift")||e.getModifierState("Alt")||e.getModifierState("Control"))},hu=xi.isPlatform("Mac OS X"),vu={isCtrlKeyCommand:function(e){return!!e.ctrlKey&&!e.altKey},isOptionKeyCommand:function(e){return hu&&e.altKey},usesMacOSHeuristics:function(){return hu},hasCommandModifier:function(e){return hu?!!e.metaKey&&!e.altKey:vu.isCtrlKeyCommand(e)},isSoftNewlineEvent:gu},yu=vu,_u=pn,bu=so,ku=ut,wu=Fr,Cu=null,Su={cut:function(e){var t=e.getCurrentContent(),n=e.getSelection(),r=null;if(n.isCollapsed()){var o=n.getAnchorKey(),i=t.getBlockForKey(o).getLength();if(i===n.getAnchorOffset()){var a=t.getKeyAfter(o);if(null==a)return e;r=n.set("focusKey",a).set("focusOffset",0)}else r=n.set("focusOffset",i)}else r=n;r=wu(r),Cu=ku(t,r);var s=_u.removeRange(t,r,"forward");return s===t?e:bu.push(e,s,"remove-range")},paste:function(e){if(!Cu)return e;var t=_u.replaceWithFragment(e.getCurrentContent(),e.getSelection(),Cu);return bu.push(e,t,"insert-fragment")}},Eu=He;var xu=xi.isBrowser("Chrome")?function(e){for(var t=e.cloneRange(),n=[],r=e.endContainer;null!=r;r=r.parentNode){var o=r===e.commonAncestorContainer;o?t.setStart(e.startContainer,e.startOffset):t.setStart(t.endContainer,0);var i,a=Array.from(t.getClientRects());if(n.push(a),o)return n.reverse(),(i=[]).concat.apply(i,n);t.setEndBefore(r)}Eu(!1)}:function(e){return Array.from(e.getClientRects())},Mu=Ql,Tu=Mi,Au=xu,Ou=He;function Du(e,t){for(var n=1/0,r=1/0,o=-1/0,i=-1/0,a=0;a<e.length;a++){var s=e[a];0!==s.width&&1!==s.width&&(n=Math.min(n,s.top),r=Math.min(r,s.bottom),o=Math.max(o,s.top),i=Math.max(i,s.bottom))}return o<=r&&o-n<t&&i-r<t}function Ru(e){switch(e.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return e.length;default:return e.childNodes.length}}var Nu=so,Pu=function(e){e.collapsed||Ou(!1);var t=(e=e.cloneRange()).startContainer;1!==t.nodeType&&(t=t.parentNode);var n=function(e){var t=getComputedStyle(e),n=Tu(e),r=n.createElement("div");r.style.fontFamily=t.fontFamily,r.style.fontSize=t.fontSize,r.style.fontStyle=t.fontStyle,r.style.fontWeight=t.fontWeight,r.style.lineHeight=t.lineHeight,r.style.position="absolute",r.textContent="M";var o=n.body;o||Ou(!1),o.appendChild(r);var i=r.getBoundingClientRect();return o.removeChild(r),i.height}(t),r=e.endContainer,o=e.endOffset;for(e.setStart(e.startContainer,0);Du(Au(e),n)&&(r=e.startContainer,o=e.startOffset,r.parentNode||Ou(!1),e.setStartBefore(r),1!==r.nodeType||"inline"===getComputedStyle(r).display););for(var i=r,a=o-1;;){for(var s=i.nodeValue,c=a;c>=0;c--)if(!(null!=s&&c>0&&Mu.isSurrogatePair(s,c-1))){if(e.setStart(i,c),!Du(Au(e),n))break;r=i,o=c}if(-1===c||0===i.childNodes.length)break;a=Ru(i=i.childNodes[c])}return e.setStart(r,o),e},Bu=da,Iu=Jl,Ku=Zl;var Lu=function(e,t){var n=Ku(e,(function(e){var n=e.getSelection();if(n.isCollapsed()&&0===n.getAnchorOffset())return Iu(e,1);var r=t.currentTarget.ownerDocument.defaultView.getSelection().getRangeAt(0);return r=Pu(r),Bu(e,null,r.endContainer,r.endOffset,r.startContainer,r.startOffset).selectionState}),"backward");return n===e.getCurrentContent()?e:Nu.push(e,n,"remove-range")},Fu="['‘’]",ju="\\s|(?![_])"+{getPunctuation:function(){return"[.,+*?$|#{}()'\\^\\-\\[\\]\\\\\\/!@%\"~=<>_:;・、。〈-】〔-〟：-？！-／［-｀｛-･⸮؟٪-٬؛،؍﴾﴿᠁।၊။‐-‧‰-⁞¡-±´-¸º»¿]"}}.getPunctuation(),zu=new RegExp("^(?:"+ju+")*(?:"+Fu+"|(?!"+ju+").)*(?:(?!"+ju+").)"),Uu=new RegExp("(?:(?!"+ju+").)(?:"+Fu+"|(?!"+ju+").)*(?:"+ju+")*$");function Hu(e,t){var n=t?Uu.exec(e):zu.exec(e);return n?n[0]:e}var Vu={getBackward:function(e){return Hu(e,!0)},getForward:function(e){return Hu(e,!1)}},Wu=Vu,qu=so,$u=Jl,Gu=Zl;var Qu=function(e,t){var n,r=e.getSelection(),o=r.getStartKey(),i=r.getStartOffset(),a=e.getCurrentContent(),s=o;return t>a.getBlockForKey(o).getText().length-i?(s=a.getKeyAfter(o),n=0):n=i+t,r.merge({focusKey:s,focusOffset:n})},Ju=Vu,Xu=so,Yu=Qu,Zu=Zl;var ed=pn,td=so;var nd=so;var rd=so;var od=so,id=Ql,ad=Qu,sd=Zl;var cd=pn,ld=so,ud=ut;var dd=so;var pd=pn,fd=so,md=Gi,gd=Su,hd=xi,vd=Wc,yd=Lu,_d=function(e){var t=Gu(e,(function(e){var t=e.getSelection(),n=t.getStartOffset();if(0===n)return $u(e,1);var r=t.getStartKey(),o=e.getCurrentContent().getBlockForKey(r).getText().slice(0,n),i=Wu.getBackward(o);return $u(e,i.length||1)}),"backward");return t===e.getCurrentContent()?e:qu.push(e,t,"remove-range")},bd=function(e){var t=Zu(e,(function(e){var t=e.getSelection(),n=t.getStartOffset(),r=t.getStartKey(),o=e.getCurrentContent().getBlockForKey(r).getText().slice(n),i=Ju.getForward(o);return Yu(e,i.length||1)}),"forward");return t===e.getCurrentContent()?e:Xu.push(e,t,"remove-range")},kd=function(e){var t=ed.splitBlock(e.getCurrentContent(),e.getSelection());return td.push(e,t,"split-block")},wd=function(e){var t=e.getSelection(),n=t.getEndKey(),r=e.getCurrentContent().getBlockForKey(n).getLength();return nd.set(e,{selection:t.merge({anchorKey:n,anchorOffset:r,focusKey:n,focusOffset:r,isBackward:!1}),forceSelection:!0})},Cd=function(e){var t=e.getSelection(),n=t.getStartKey();return rd.set(e,{selection:t.merge({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:!1}),forceSelection:!0})},Sd=ou,Ed=function(e){var t=sd(e,(function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=t.getAnchorKey(),o=t.getAnchorOffset(),i=n.getBlockForKey(r).getText()[o];return ad(e,i?id.getUTF16Length(i,0):1)}),"forward");if(t===e.getCurrentContent())return e;var n=e.getSelection();return od.push(e,t.set("selectionBefore",n),n.isCollapsed()?"delete-character":"remove-range")},xd=function(e){var t=e.getSelection();if(!t.isCollapsed())return e;var n=t.getAnchorOffset();if(0===n)return e;var r,o,i=t.getAnchorKey(),a=e.getCurrentContent(),s=a.getBlockForKey(i).getLength();if(s<=1)return e;n===s?(r=t.set("anchorOffset",n-1),o=t):o=(r=t.set("focusOffset",n+1)).set("anchorOffset",n+1);var c=ud(a,r),l=cd.removeRange(a,r,"backward"),u=l.getSelectionAfter(),d=u.getAnchorOffset()-1,p=u.merge({anchorOffset:d,focusOffset:d}),f=cd.replaceWithFragment(l,p,c),m=ld.push(e,f,"insert-fragment");return ld.acceptSelection(m,o)},Md=function(e,t,n){var r=dd.undo(t);if("spellcheck-change"!==t.getLastChangeType())e.preventDefault(),t.getNativelyRenderedContent()?(n(dd.set(t,{nativelyRenderedContent:null})),setTimeout((function(){n(r)}),0)):n(r);else{var o=r.getCurrentContent();n(dd.set(r,{nativelyRenderedContent:o}))}},Td=yu.isOptionKeyCommand,Ad=hd.isBrowser("Chrome");var Od=function(e,t){var n=t.which,r=e._latestEditorState;function o(n){var r=e.props[n];return!!r&&(r(t),!0)}switch(n){case md.RETURN:if(t.preventDefault(),e.props.handleReturn&&vd(e.props.handleReturn(t,r)))return;break;case md.ESC:if(t.preventDefault(),o("onEscape"))return;break;case md.TAB:if(o("onTab"))return;break;case md.UP:if(o("onUpArrow"))return;break;case md.RIGHT:if(o("onRightArrow"))return;break;case md.DOWN:if(o("onDownArrow"))return;break;case md.LEFT:if(o("onLeftArrow"))return;break;case md.SPACE:Ad&&Td(t)&&t.preventDefault()}var i=e.props.keyBindingFn(t);if(null!=i&&""!==i)if("undo"!==i){if(t.preventDefault(),!e.props.handleKeyCommand||!vd(e.props.handleKeyCommand(i,r,t.timeStamp))){var a=function(e,t,n){switch(e){case"redo":return fd.redo(t);case"delete":return Ed(t);case"delete-word":return bd(t);case"backspace":return Sd(t);case"backspace-word":return _d(t);case"backspace-to-start-of-line":return yd(t,n);case"split-block":return kd(t);case"transpose-characters":return xd(t);case"move-selection-to-start-of-block":return Cd(t);case"move-selection-to-end-of-block":return wd(t);case"secondary-cut":return gd.cut(t);case"secondary-paste":return gd.paste(t);default:return t}}(i,r,t);a!==r&&e.update(a)}}else Md(t,r,e.update);else if(n===md.SPACE&&Ad&&Td(t)){var s=pd.replaceText(r.getCurrentContent(),r.getSelection()," ");e.update(fd.push(r,s,"insert-characters"))}};var Dd=function(){function e(e){var t,n,r;r=void 0,(n="_uri")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this._uri=e}return e.prototype.toString=function(){return this._uri},e}(),Rd=Dd,Nd=He,Pd=xi.isBrowser("IE <= 9");var Bd=function(e){var t,n=null;return!Pd&&document.implementation&&document.implementation.createHTMLDocument&&((t=document.implementation.createHTMLDocument("foo")).documentElement||Nd(!1),t.documentElement.innerHTML=e,n=t.getElementsByTagName("body")[0]),n},Id=Ti;var Kd=function(e){return!(!e||!e.ownerDocument)&&(Id(e)&&"A"===e.nodeName)},Ld=Ti;var Fd,jd=function(e){return!(!e||!e.ownerDocument)&&(Ld(e)&&"IMG"===e.nodeName)};function zd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ud(e,t,n[t])}))}return e}function Ud(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hd=ie,Vd=be,Wd=Pe,qd=Uo,$d=jn,Gd=Rd,Qd=Fo,Jd=Ye,Xd=Bd,Yd=Hn,Zd=n.immutableExports,ep=Zd.List,tp=Zd.Map,np=Zd.OrderedSet,rp=Kd,op=Xa,ip=Ji,ap=jd,sp=Yd("draft_tree_data_support"),cp=new RegExp("\r","g"),lp=new RegExp("\n","g"),up=new RegExp("^\n","g"),dp=new RegExp("&nbsp;","g"),pp=new RegExp("&#13;?","g"),fp=new RegExp("&#8203;?","g"),mp=["bold","bolder","500","600","700","800","900"],gp=["light","lighter","normal","100","200","300","400"],hp=["className","href","rel","target","title"],vp=["alt","className","height","src","width"],yp=(Ud(Fd={},Qd("public/DraftStyleDefault/depth0"),0),Ud(Fd,Qd("public/DraftStyleDefault/depth1"),1),Ud(Fd,Qd("public/DraftStyleDefault/depth2"),2),Ud(Fd,Qd("public/DraftStyleDefault/depth3"),3),Ud(Fd,Qd("public/DraftStyleDefault/depth4"),4),Fd),_p=tp({b:"BOLD",code:"CODE",del:"STRIKETHROUGH",em:"ITALIC",i:"ITALIC",s:"STRIKETHROUGH",strike:"STRIKETHROUGH",strong:"BOLD",u:"UNDERLINE",mark:"HIGHLIGHT"}),bp=function(e){if(ip(e)&&e.style.fontFamily.includes("monospace"))return"CODE";return null},kp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object.keys(yp).some((function(n){e.classList.contains(n)&&(t=yp[n])})),t},wp=function(e){if(!rp(e))return!1;var t=e;if(!t.href||"http:"!==t.protocol&&"https:"!==t.protocol&&"mailto:"!==t.protocol&&"tel:"!==t.protocol)return!1;try{new Gd(t.href);return!0}catch(e){return!1}},Cp=function(e){if(!ap(e))return!1;var t=e;return!(!t.attributes.getNamedItem("src")||!t.attributes.getNamedItem("src").value)},Sp=function(e,t){if(!ip(e))return t;var n=e,r=n.style.fontWeight,o=n.style.fontStyle,i=n.style.textDecoration;return t.withMutations((function(e){mp.indexOf(r)>=0?e.add("BOLD"):gp.indexOf(r)>=0&&e.remove("BOLD"),"italic"===o?e.add("ITALIC"):"normal"===o&&e.remove("ITALIC"),"underline"===i&&e.add("UNDERLINE"),"line-through"===i&&e.add("STRIKETHROUGH"),"none"===i&&(e.remove("UNDERLINE"),e.remove("STRIKETHROUGH"))}))},Ep=function(e){return"ul"===e||"ol"===e},xp=function(){function e(e,t){Ud(this,"characterList",ep()),Ud(this,"currentBlockType","unstyled"),Ud(this,"currentDepth",0),Ud(this,"currentEntity",null),Ud(this,"currentText",""),Ud(this,"wrapper",null),Ud(this,"blockConfigs",[]),Ud(this,"contentBlocks",[]),Ud(this,"entityMap",$d),Ud(this,"blockTypeMap",void 0),Ud(this,"disambiguate",void 0),this.clear(),this.blockTypeMap=e,this.disambiguate=t}var t=e.prototype;return t.clear=function(){this.characterList=ep(),this.blockConfigs=[],this.currentBlockType="unstyled",this.currentDepth=0,this.currentEntity=null,this.currentText="",this.entityMap=$d,this.wrapper=null,this.contentBlocks=[]},t.addDOMNode=function(e){var t;return this.contentBlocks=[],this.currentDepth=0,(t=this.blockConfigs).push.apply(t,this._toBlockConfigs([e],np())),this._trimCurrentText(),""!==this.currentText&&this.blockConfigs.push(this._makeBlockConfig()),this},t.getContentBlocks=function(){return 0===this.contentBlocks.length&&(sp?this._toContentBlocks(this.blockConfigs):this._toFlatContentBlocks(this.blockConfigs)),{contentBlocks:this.contentBlocks,entityMap:this.entityMap}},t._makeBlockConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=zd({key:e.key||Jd(),type:this.currentBlockType,text:this.currentText,characterList:this.characterList,depth:this.currentDepth,parent:null,children:ep(),prevSibling:null,nextSibling:null,childConfigs:[]},e);return this.characterList=ep(),this.currentBlockType="unstyled",this.currentText="",t},t._toBlockConfigs=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=o.nodeName.toLowerCase();if("body"===i||Ep(i)){this._trimCurrentText(),""!==this.currentText&&n.push(this._makeBlockConfig());var a=this.currentDepth,s=this.wrapper;Ep(i)&&(this.wrapper=i,Ep(s)&&this.currentDepth++),n.push.apply(n,this._toBlockConfigs(Array.from(o.childNodes),t)),this.currentDepth=a,this.wrapper=s}else{var c=this.blockTypeMap.get(i);if(void 0===c)if("#text"!==i)if("br"!==i)if(Cp(o))this._addImgNode(o,t);else if(wp(o))this._addAnchorNode(o,n,t);else{var l=t;_p.has(i)&&(l=l.add(_p.get(i))),l=Sp(o,l);var u=bp(o);null!=u&&(l=l.add(u)),n.push.apply(n,this._toBlockConfigs(Array.from(o.childNodes),l))}else this._addBreakNode(o,t);else this._addTextNode(o,t);else{this._trimCurrentText(),""!==this.currentText&&n.push(this._makeBlockConfig());var d=this.currentDepth,p=this.wrapper;if(this.wrapper="pre"===i?"pre":this.wrapper,"string"!=typeof c&&(c=this.disambiguate(i,this.wrapper)||c[0]||"unstyled"),!sp&&ip(o)&&("unordered-list-item"===c||"ordered-list-item"===c)){var f=o;this.currentDepth=kp(f,this.currentDepth)}var m=Jd(),g=this._toBlockConfigs(Array.from(o.childNodes),t);this._trimCurrentText(),n.push(this._makeBlockConfig({key:m,childConfigs:g,type:c})),this.currentDepth=d,this.wrapper=p}}}return n},t._appendText=function(e,t){var n;this.currentText+=e;var r=Hd.create({style:t,entity:this.currentEntity});this.characterList=(n=this.characterList).push.apply(n,Array(e.length).fill(r))},t._trimCurrentText=function(){var e=this.currentText.length,t=e-this.currentText.trimLeft().length,n=this.currentText.trimRight().length,r=this.characterList.findEntry((function(e){return null!==e.getEntity()}));(t=void 0!==r?Math.min(t,r[0]):t)>(n=void 0!==(r=this.characterList.reverse().findEntry((function(e){return null!==e.getEntity()})))?Math.max(n,e-r[0]):n)?(this.currentText="",this.characterList=ep()):(this.currentText=this.currentText.slice(t,n),this.characterList=this.characterList.slice(t,n))},t._addTextNode=function(e,t){var n=e.textContent;""===n.trim()&&"pre"!==this.wrapper&&(n=" "),"pre"!==this.wrapper&&(n=(n=n.replace(up,"")).replace(lp," ")),this._appendText(n,t)},t._addBreakNode=function(e,t){op(e)&&this._appendText("\n",t)},t._addImgNode=function(e,t){if(ap(e)){var n=e,r={};vp.forEach((function(e){var t=n.getAttribute(e);t&&(r[e]=t)})),this.currentEntity=this.entityMap.__create("IMAGE","IMMUTABLE",r),Yd("draftjs_fix_paste_for_img")?"presentation"!==n.getAttribute("role")&&this._appendText("📷",t):this._appendText("📷",t),this.currentEntity=null}},t._addAnchorNode=function(e,t,n){if(rp(e)){var r=e,o={};hp.forEach((function(e){var t=r.getAttribute(e);t&&(o[e]=t)})),o.url=new Gd(r.href).toString(),this.currentEntity=this.entityMap.__create("LINK","MUTABLE",o||{}),t.push.apply(t,this._toBlockConfigs(Array.from(e.childNodes),n)),this.currentEntity=null}},t._toContentBlocks=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.length-1,r=0;r<=n;r++){var o=e[r];o.parent=t,o.prevSibling=r>0?e[r-1].key:null,o.nextSibling=r<n?e[r+1].key:null,o.children=ep(o.childConfigs.map((function(e){return e.key}))),this.contentBlocks.push(new Wd(zd({},o))),this._toContentBlocks(o.childConfigs,o.key)}},t._hoistContainersInBlockConfigs=function(e){var t=this;return ep(e).flatMap((function(e){return"unstyled"!==e.type||""!==e.text?[e]:t._hoistContainersInBlockConfigs(e.childConfigs)}))},t._toFlatContentBlocks=function(e){var t=this;this._hoistContainersInBlockConfigs(e).forEach((function(e){var n=t._extractTextFromBlockConfigs(e.childConfigs),r=n.text,o=n.characterList;t.contentBlocks.push(new Vd(zd({},e,{text:e.text+r,characterList:e.characterList.concat(o)})))}))},t._extractTextFromBlockConfigs=function(e){for(var t=e.length-1,n="",r=ep(),o=0;o<=t;o++){var i=e[o];n+=i.text,r=r.concat(i.characterList),""!==n&&"unstyled"!==i.type&&(n+="\n",r=r.push(r.last()));var a=this._extractTextFromBlockConfigs(i.childConfigs);n+=a.text,r=r.concat(a.characterList)}return{text:n,characterList:r}},e}(),Mp=function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qd,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xd)(e=e.trim().replace(cp,"").replace(dp," ").replace(pp,"").replace(fp,""));if(!n)return null;var r=function(e){var t={};return e.mapKeys((function(e,n){var r=[n.element];void 0!==n.aliasedElements&&r.push.apply(r,n.aliasedElements),r.forEach((function(n){void 0===t[n]?t[n]=e:"string"==typeof t[n]?t[n]=[t[n],e]:t[n].push(e)}))})),tp(t)}(t);return new xp(r,(function(e,t){return"li"===e?"ol"===t?"ordered-list-item":"unordered-list-item":null})).addDOMNode(n).getContentBlocks()};function Tp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ap=be,Op=Pe,Dp=Mp,Rp=Ye,Np=Bd,Pp=Hn,Bp=n.immutableExports,Ip=Wn,Kp=Bp.List,Lp=Bp.Repeat,Fp=Pp("draft_tree_data_support"),jp=Fp?Op:Ap,zp={processHTML:function(e,t){return Dp(e,Np,t)},processText:function(e,t,n){return e.reduce((function(e,r,o){r=Ip(r);var i=Rp(),a={key:i,type:n,text:r,characterList:Kp(Lp(t,r.length))};if(Fp&&0!==o){var s=o-1;a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Tp(e,t,n[t])}))}return e}({},a,{prevSibling:(e[s]=e[s].merge({nextSibling:i})).getKey()})}return e.push(new jp(a)),e}),[])}};var Up=pn,Hp=so,Vp=function(e,t,n,r){var o=t.getStartKey(),i=t.getEndKey(),a=e.getBlockMap(),s=a.toSeq().skipUntil((function(e,t){return t===o})).takeUntil((function(e,t){return t===i})).concat([[i,a.get(i)]]).map((function(e){var t=e.getDepth()+n;return t=Math.max(0,Math.min(t,r)),e.set("depth",t)}));return a=a.merge(s),e.merge({blockMap:a,selectionBefore:t,selectionAfter:t})},Wp=Fr,qp={currentBlockContainsLink:function(e){var t=e.getSelection(),n=e.getCurrentContent(),r=n.getEntityMap();return n.getBlockForKey(t.getAnchorKey()).getCharacterList().slice(t.getStartOffset(),t.getEndOffset()).some((function(e){var t=e.getEntity();return!!t&&"LINK"===r.__get(t).getType()}))},getCurrentBlockType:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey()).getType()},getDataObjectForLinkURL:function(e){return{url:e.toString()}},handleKeyCommand:function(e,t,n){switch(t){case"bold":return qp.toggleInlineStyle(e,"BOLD");case"italic":return qp.toggleInlineStyle(e,"ITALIC");case"underline":return qp.toggleInlineStyle(e,"UNDERLINE");case"code":return qp.toggleCode(e);case"backspace":case"backspace-word":case"backspace-to-start-of-line":return qp.onBackspace(e);case"delete":case"delete-word":case"delete-to-end-of-block":return qp.onDelete(e);default:return null}},insertSoftNewline:function(e){var t=Up.insertText(e.getCurrentContent(),e.getSelection(),"\n",e.getCurrentInlineStyle(),null),n=Hp.push(e,t,"insert-characters");return Hp.forceSelection(n,t.getSelectionAfter())},onBackspace:function(e){var t=e.getSelection();if(!t.isCollapsed()||t.getAnchorOffset()||t.getFocusOffset())return null;var n=e.getCurrentContent(),r=t.getStartKey(),o=n.getBlockBefore(r);if(o&&"atomic"===o.getType()){var i=n.getBlockMap().delete(o.getKey()),a=n.merge({blockMap:i,selectionAfter:t});if(a!==n)return Hp.push(e,a,"remove-range")}var s=qp.tryToRemoveBlockStyle(e);return s?Hp.push(e,s,"change-block-type"):null},onDelete:function(e){var t=e.getSelection();if(!t.isCollapsed())return null;var n=e.getCurrentContent(),r=t.getStartKey(),o=n.getBlockForKey(r).getLength();if(t.getStartOffset()<o)return null;var i=n.getBlockAfter(r);if(!i||"atomic"!==i.getType())return null;var a=t.merge({focusKey:i.getKey(),focusOffset:i.getLength()}),s=Up.removeRange(n,a,"forward");return s!==n?Hp.push(e,s,"remove-range"):null},onTab:function(e,t,n){var r=t.getSelection(),o=r.getAnchorKey();if(o!==r.getFocusKey())return t;var i=t.getCurrentContent(),a=i.getBlockForKey(o),s=a.getType();if("unordered-list-item"!==s&&"ordered-list-item"!==s)return t;e.preventDefault();var c=a.getDepth();if(!e.shiftKey&&c===n)return t;var l=Vp(i,r,e.shiftKey?-1:1,n);return Hp.push(t,l,"adjust-depth")},toggleBlockType:function(e,t){var n=e.getSelection(),r=n.getStartKey(),o=n.getEndKey(),i=e.getCurrentContent(),a=n;if(r!==o&&0===n.getEndOffset()){var s=Wp(i.getBlockBefore(o));o=s.getKey(),a=a.merge({anchorKey:r,anchorOffset:n.getStartOffset(),focusKey:o,focusOffset:s.getLength(),isBackward:!1})}if(i.getBlockMap().skipWhile((function(e,t){return t!==r})).reverse().skipWhile((function(e,t){return t!==o})).some((function(e){return"atomic"===e.getType()})))return e;var c=i.getBlockForKey(r).getType()===t?"unstyled":t;return Hp.push(e,Up.setBlockType(i,a,c),"change-block-type")},toggleCode:function(e){var t=e.getSelection(),n=t.getAnchorKey(),r=t.getFocusKey();return t.isCollapsed()||n!==r?qp.toggleBlockType(e,"code-block"):qp.toggleInlineStyle(e,"CODE")},toggleInlineStyle:function(e,t){var n=e.getSelection(),r=e.getCurrentInlineStyle();if(n.isCollapsed())return Hp.setInlineStyleOverride(e,r.has(t)?r.remove(t):r.add(t));var o,i=e.getCurrentContent();return o=r.has(t)?Up.removeInlineStyle(i,n,t):Up.applyInlineStyle(i,n,t),Hp.push(e,o,"change-inline-style")},toggleLink:function(e,t,n){var r=Up.applyEntity(e.getCurrentContent(),t,n);return Hp.push(e,r,"apply-entity")},tryToRemoveBlockStyle:function(e){var t=e.getSelection(),n=t.getAnchorOffset();if(t.isCollapsed()&&0===n){var r=t.getAnchorKey(),o=e.getCurrentContent(),i=o.getBlockForKey(r).getType(),a=o.getBlockBefore(r);if("code-block"===i&&a&&"code-block"===a.getType()&&0!==a.getLength())return null;if("unstyled"!==i)return Up.setBlockType(o,t,"unstyled")}return null}},$p=qp,Gp=/\r\n?|\n/g;var Qp=Q,Jp=ie,Xp=jc,Yp=pn,Zp=zp,ef=so,tf=$p,nf=wa,rf=Vc,of=Wc,af=function(e){return e.split(Gp)};function sf(e,t,n){var r=Yp.replaceWithFragment(e.getCurrentContent(),e.getSelection(),t);return ef.push(e,r.set("entityMap",n),"insert-fragment")}var cf=xi,lf=yl,uf=wl,df=Sl,pf=Tl,ff=Bl,mf=Il,gf=Kl,hf=jl,vf=fu,yf=Od,_f=function(e,t){t.preventDefault();var n=new Xp(t.clipboardData);if(!n.isRichText()){var r=n.getFiles(),o=n.getText();if(r.length>0){if(e.props.handlePastedFiles&&of(e.props.handlePastedFiles(r)))return;return void rf(r,(function(t){if(t=t||o){var n=e._latestEditorState,r=af(t),i=Jp.create({style:n.getCurrentInlineStyle(),entity:nf(n.getCurrentContent(),n.getSelection())}),a=tf.getCurrentBlockType(n),s=Zp.processText(r,i,a),c=Qp.createFromArray(s),l=Yp.replaceWithFragment(n.getCurrentContent(),n.getSelection(),c);e.update(ef.push(n,l,"insert-fragment"))}}))}}var i=[],a=n.getText(),s=n.getHTML(),c=e._latestEditorState;if(e.props.formatPastedText){var l=e.props.formatPastedText(a,s);a=l.text,s=l.html}if(!e.props.handlePastedText||!of(e.props.handlePastedText(a,s,c))){if(a&&(i=af(a)),!e.props.stripPastedStyles){var u,d=e.getClipboard();if(!e.props.formatPastedText&&n.isRichText()&&d){if(-1!==(null===(u=s)||void 0===u?void 0:u.indexOf(e.getEditorKey()))||1===i.length&&1===d.size&&d.first().getText()===a)return void e.update(sf(e._latestEditorState,d))}else if(d&&n.types.includes("com.apple.webarchive")&&!n.types.includes("text/html")&&function(e,t){return e.length===t.size&&t.valueSeq().every((function(t,n){return t.getText()===e[n]}))}(i,d))return void e.update(sf(e._latestEditorState,d));if(s){var p=Zp.processHTML(s,e.props.blockRenderMap);if(p){var f=p.contentBlocks,m=p.entityMap;if(f){var g=Qp.createFromArray(f);return void e.update(sf(e._latestEditorState,g,m))}}}e.setClipboard(null)}if(i.length){var h=Jp.create({style:c.getCurrentInlineStyle(),entity:nf(c.getCurrentContent(),c.getSelection())}),v=tf.getCurrentBlockType(c),y=Zp.processText(i,h,v),_=Qp.createFromArray(y);e.update(sf(e._latestEditorState,_))}}},bf=ya,kf=cf.isBrowser("Chrome"),wf=cf.isBrowser("Firefox"),Cf=kf||wf?bf:function(e){},Sf={onBeforeInput:lf,onBlur:uf,onCompositionStart:df,onCopy:pf,onCut:ff,onDragOver:mf,onDragStart:gf,onFocus:hf,onInput:vf,onKeyDown:yf,onPaste:_f,onSelect:bf,onMouseUp:Cf,onKeyUp:Cf},Ef=N.default.unstable_flushControlled;var xf=R.default,Mf=Fo,Tf=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.shouldComponentUpdate=function(e){return this.props.text!==e.text||this.props.editorState.getSelection().getHasFocus()!==e.editorState.getSelection().getHasFocus()},o.render=function(){var e=this.props.editorState.getSelection().getHasFocus(),t=Mf({"public/DraftEditorPlaceholder/root":!0,"public/DraftEditorPlaceholder/hasFocus":e});return xf.createElement("div",{className:t},xf.createElement("div",{className:Mf("public/DraftEditorPlaceholder/inner"),id:this.props.accessibilityID,style:{whiteSpace:"pre-wrap"}},this.props.text))},r}(xf.Component),Af=Tf,Of=yu,Df=Gi,Rf=xi,Nf=Rf.isPlatform("Mac OS X"),Pf=Nf&&Rf.isBrowser("Firefox < 29"),Bf=Of.hasCommandModifier,If=Of.isCtrlKeyCommand;function Kf(e){return Nf&&e.altKey||If(e)}var Lf=function(e){switch(e.keyCode){case 66:return Bf(e)?"bold":null;case 68:return If(e)?"delete":null;case 72:return If(e)?"backspace":null;case 73:return Bf(e)?"italic":null;case 74:return Bf(e)?"code":null;case 75:return Nf&&If(e)?"secondary-cut":null;case 77:case 79:return If(e)?"split-block":null;case 84:return Nf&&If(e)?"transpose-characters":null;case 85:return Bf(e)?"underline":null;case 87:return Nf&&If(e)?"backspace-word":null;case 89:return If(e)?Nf?"secondary-paste":"redo":null;case 90:return function(e){return Bf(e)?e.shiftKey?"redo":"undo":null}(e)||null;case Df.RETURN:return"split-block";case Df.DELETE:return function(e){return!Nf&&e.shiftKey?null:Kf(e)?"delete-word":"delete"}(e);case Df.BACKSPACE:return function(e){return Bf(e)&&Nf?"backspace-to-start-of-line":Kf(e)?"backspace-word":"backspace"}(e);case Df.LEFT:return Pf&&Bf(e)?"move-selection-to-start-of-block":null;case Df.RIGHT:return Pf&&Bf(e)?"move-selection-to-end-of-block":null;default:return null}},Ff=$o;function jf(){return jf=Ff||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jf.apply(this,arguments)}function zf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Hf(e,t,n[t])}))}return e}function Uf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vf(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Wf=Uo,qf=Ho,$f=ja,Gf=Ec,Qf=ol,Jf=Sf,Xf=Ef,Yf=Af,Zf=Ya,em=so,tm=R.default,nm=Os,rm=Fs,om=Fo,im=Ye,am=Lf,sm=qs,cm=Hn,lm=He,um=Ji,dm=Fr,pm=xi.isBrowser("IE"),fm=!pm,mm={edit:Jf,composite:$f,drag:Qf,cut:null,render:null},gm=!1,hm=function(e){function t(){return e.apply(this,arguments)||this}Vf(t,e);var n=t.prototype;return n.render=function(){return null},n.componentDidMount=function(){this._update()},n.componentDidUpdate=function(){this._update()},n._update=function(){var e=this.props.editor;e._latestEditorState=this.props.editorState,e._blockSelectEvents=!0},t}(tm.Component),vm=function(e){function t(t){var n;return Hf(Uf(n=e.call(this,t)||this),"_blockSelectEvents",void 0),Hf(Uf(n),"_clipboard",void 0),Hf(Uf(n),"_handler",void 0),Hf(Uf(n),"_dragCount",void 0),Hf(Uf(n),"_internalDrag",void 0),Hf(Uf(n),"_editorKey",void 0),Hf(Uf(n),"_placeholderAccessibilityID",void 0),Hf(Uf(n),"_latestEditorState",void 0),Hf(Uf(n),"_latestCommittedEditorState",void 0),Hf(Uf(n),"_pendingStateFromBeforeInput",void 0),Hf(Uf(n),"_onBeforeInput",void 0),Hf(Uf(n),"_onBlur",void 0),Hf(Uf(n),"_onCharacterData",void 0),Hf(Uf(n),"_onCompositionEnd",void 0),Hf(Uf(n),"_onCompositionStart",void 0),Hf(Uf(n),"_onCopy",void 0),Hf(Uf(n),"_onCut",void 0),Hf(Uf(n),"_onDragEnd",void 0),Hf(Uf(n),"_onDragOver",void 0),Hf(Uf(n),"_onDragStart",void 0),Hf(Uf(n),"_onDrop",void 0),Hf(Uf(n),"_onInput",void 0),Hf(Uf(n),"_onFocus",void 0),Hf(Uf(n),"_onKeyDown",void 0),Hf(Uf(n),"_onKeyPress",void 0),Hf(Uf(n),"_onKeyUp",void 0),Hf(Uf(n),"_onMouseDown",void 0),Hf(Uf(n),"_onMouseUp",void 0),Hf(Uf(n),"_onPaste",void 0),Hf(Uf(n),"_onSelect",void 0),Hf(Uf(n),"editor",void 0),Hf(Uf(n),"editorContainer",void 0),Hf(Uf(n),"focus",void 0),Hf(Uf(n),"blur",void 0),Hf(Uf(n),"setMode",void 0),Hf(Uf(n),"exitCurrentMode",void 0),Hf(Uf(n),"restoreEditorDOM",void 0),Hf(Uf(n),"setClipboard",void 0),Hf(Uf(n),"getClipboard",void 0),Hf(Uf(n),"getEditorKey",void 0),Hf(Uf(n),"update",void 0),Hf(Uf(n),"onDragEnter",void 0),Hf(Uf(n),"onDragLeave",void 0),Hf(Uf(n),"_handleEditorContainerRef",(function(e){n.editorContainer=e,n.editor=null!==e?e.firstChild:null})),Hf(Uf(n),"focus",(function(e){var t=n.props.editorState,r=t.getSelection().getHasFocus(),o=n.editor;if(o){var i=rm.getScrollParent(o),a=e||sm(i),s=a.x,c=a.y;um(o)||lm(!1),o.focus(),i===window?window.scrollTo(s,c):nm.setTop(i,c),r||n.update(em.forceSelection(t,t.getSelection()))}})),Hf(Uf(n),"blur",(function(){var e=n.editor;e&&(um(e)||lm(!1),e.blur())})),Hf(Uf(n),"setMode",(function(e){var t=n.props,r=t.onPaste,o=t.onCut,i=t.onCopy,a=zf({},mm.edit);r&&(a.onPaste=r),o&&(a.onCut=o),i&&(a.onCopy=i);var s=zf({},mm,{edit:a});n._handler=s[e]})),Hf(Uf(n),"exitCurrentMode",(function(){n.setMode("edit")})),Hf(Uf(n),"restoreEditorDOM",(function(e){n.setState({contentsKey:n.state.contentsKey+1},(function(){n.focus(e)}))})),Hf(Uf(n),"setClipboard",(function(e){n._clipboard=e})),Hf(Uf(n),"getClipboard",(function(){return n._clipboard})),Hf(Uf(n),"update",(function(e){n._latestEditorState=e,n.props.onChange(e)})),Hf(Uf(n),"onDragEnter",(function(){n._dragCount++})),Hf(Uf(n),"onDragLeave",(function(){n._dragCount--,0===n._dragCount&&n.exitCurrentMode()})),n._blockSelectEvents=!1,n._clipboard=null,n._handler=null,n._dragCount=0,n._editorKey=t.editorKey||im(),n._placeholderAccessibilityID="placeholder-"+n._editorKey,n._latestEditorState=t.editorState,n._latestCommittedEditorState=t.editorState,n._onBeforeInput=n._buildHandler("onBeforeInput"),n._onBlur=n._buildHandler("onBlur"),n._onCharacterData=n._buildHandler("onCharacterData"),n._onCompositionEnd=n._buildHandler("onCompositionEnd"),n._onCompositionStart=n._buildHandler("onCompositionStart"),n._onCopy=n._buildHandler("onCopy"),n._onCut=n._buildHandler("onCut"),n._onDragEnd=n._buildHandler("onDragEnd"),n._onDragOver=n._buildHandler("onDragOver"),n._onDragStart=n._buildHandler("onDragStart"),n._onDrop=n._buildHandler("onDrop"),n._onInput=n._buildHandler("onInput"),n._onFocus=n._buildHandler("onFocus"),n._onKeyDown=n._buildHandler("onKeyDown"),n._onKeyPress=n._buildHandler("onKeyPress"),n._onKeyUp=n._buildHandler("onKeyUp"),n._onMouseDown=n._buildHandler("onMouseDown"),n._onMouseUp=n._buildHandler("onMouseUp"),n._onPaste=n._buildHandler("onPaste"),n._onSelect=n._buildHandler("onSelect"),n.getEditorKey=function(){return n._editorKey},n.state={contentsKey:0},n}Vf(t,e);var n=t.prototype;return n._buildHandler=function(e){var t=this;return function(n){if(!t.props.readOnly){var r=t._handler&&t._handler[e];r&&(Xf?Xf((function(){return r(t,n)})):r(t,n))}}},n._showPlaceholder=function(){return!!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText()},n._renderPlaceholder=function(){if(this._showPlaceholder()){var e={text:dm(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID};return tm.createElement(Yf,e)}return null},n._renderARIADescribedBy=function(){var e=this.props.ariaDescribedBy||"",t=this._showPlaceholder()?this._placeholderAccessibilityID:"";return e.replace("{{editor_id_placeholder}}",t)||void 0},n.render=function(){var e=this.props,t=e.blockRenderMap,n=e.blockRendererFn,r=e.blockStyleFn,o=e.customStyleFn,i=e.customStyleMap,a=e.editorState,s=e.preventScroll,c=e.readOnly,l=e.textAlignment,u=e.textDirectionality,d=om({"DraftEditor/root":!0,"DraftEditor/alignLeft":"left"===l,"DraftEditor/alignRight":"right"===l,"DraftEditor/alignCenter":"center"===l}),p=this.props.role||"textbox",f="combobox"===p?!!this.props.ariaExpanded:null,m={blockRenderMap:t,blockRendererFn:n,blockStyleFn:r,customStyleMap:zf({},qf,i),customStyleFn:o,editorKey:this._editorKey,editorState:a,preventScroll:s,textDirectionality:u};return tm.createElement("div",{className:d},this._renderPlaceholder(),tm.createElement("div",{className:om("DraftEditor/editorContainer"),ref:this._handleEditorContainerRef},tm.createElement("div",{"aria-activedescendant":c?null:this.props.ariaActiveDescendantID,"aria-autocomplete":c?null:this.props.ariaAutoComplete,"aria-controls":c?null:this.props.ariaControls,"aria-describedby":this._renderARIADescribedBy(),"aria-expanded":c?null:f,"aria-label":this.props.ariaLabel,"aria-labelledby":this.props.ariaLabelledBy,"aria-multiline":this.props.ariaMultiline,"aria-owns":c?null:this.props.ariaOwneeID,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:om({notranslate:!c,"public/DraftEditor/content":!0}),contentEditable:!c,"data-testid":this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:this.props.editorRef,role:c?null:p,spellCheck:fm&&this.props.spellCheck,style:{outline:"none",userSelect:"text",WebkitUserSelect:"text",whiteSpace:"pre-wrap",wordWrap:"break-word"},suppressContentEditableWarning:!0,tabIndex:this.props.tabIndex},tm.createElement(hm,{editor:this,editorState:a}),tm.createElement(Gf,jf({},m,{key:"contents"+this.state.contentsKey})))))},n.componentDidMount=function(){this._blockSelectEvents=!1,!gm&&cm("draft_ods_enabled")&&(gm=!0,Zf.initODS()),this.setMode("edit"),pm&&(this.editor?this.editor.ownerDocument.execCommand("AutoUrlDetect",!1,!1):o.commonjsGlobal.execCommand("AutoUrlDetect",!1,!1))},n.componentDidUpdate=function(){this._blockSelectEvents=!1,this._latestEditorState=this.props.editorState,this._latestCommittedEditorState=this.props.editorState},t}(tm.Component);Hf(vm,"defaultProps",{ariaDescribedBy:"{{editor_id_placeholder}}",blockRenderMap:Wf,blockRendererFn:function(){return null},blockStyleFn:function(){return""},keyBindingFn:am,readOnly:!1,spellCheck:!1,stripPastedStyles:!1});var ym=vm,_m={stringify:function(e){return"_"+String(e)},unstringify:function(e){return e.slice(1)}},bm=_m,km=Ql.strlen;var wm=Ql,Cm=ae,Sm=function(e,t){return e===t},Em=function(e){return!!e},xm=[];function Mm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tm=be,Am=Pe,Om=_m,Dm=function(e,t){var n=[];return e.findEntityRanges((function(e){return!!e.getEntity()}),(function(r,o){var i=e.getText(),a=e.getEntityAt(r);n.push({offset:km(i.slice(0,r)),length:km(i.slice(r,o)),key:Number(t[bm.stringify(a)])})})),n},Rm=function(e){var t=e.getCharacterList().map((function(e){return e.getStyle()})).toList(),n=t.flatten().toSet().map((function(n){return function(e,t,n){var r=[],o=t.map((function(e){return e.has(n)})).toList();return Cm(o,Sm,Em,(function(t,o){var i=e.getText();r.push({offset:wm.strlen(i.slice(0,t)),length:wm.strlen(i.slice(t,o)),style:n})})),r}(e,t,n)}));return Array.prototype.concat.apply(xm,n.toJS())},Nm=He,Pm=function(e,t){return{key:e.getKey(),text:e.getText(),type:e.getType(),depth:e.getDepth(),inlineStyleRanges:Rm(e),entityRanges:Dm(e,t),data:e.getData().toObject()}},Bm=function(e,t,n,r){if(e instanceof Tm)n.push(Pm(e,t));else{e instanceof Am||Nm(!1);var o=e.getParentKey(),i=r[e.getKey()]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Mm(e,t,n[t])}))}return e}({},Pm(e,t),{children:[]});o?r[o].children.push(i):n.push(i)}},Im=function(e){var t={entityMap:{},blocks:[]};return t=function(e,t){var n=t.entityMap,r=[],o={},i={},a=0;return e.getBlockMap().forEach((function(e){e.findEntityRanges((function(e){return null!==e.getEntity()}),(function(t){var r=e.getEntityAt(t),o=Om.stringify(r);i[o]||(i[o]=r,n[o]="".concat(a),a++)})),Bm(e,n,r,o)})),{blocks:r,entityMap:n}}(e,t),t=function(e,t){var n=t.blocks,r=t.entityMap,o={};return Object.keys(r).forEach((function(t,n){var r=e.getEntity(Om.unstringify(t));o[n]={type:r.getType(),mutability:r.getMutability(),data:r.getData()}})),{blocks:n,entityMap:o}}(e,t),t};function Km(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Lm(e,t,n[t])}))}return e}function Lm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fm=Ye,jm=He,zm=function(e){if(!e||!e.type)return!1;var t=e.type;return"unordered-list-item"===t||"ordered-list-item"===t},Um={fromRawTreeStateToRawState:function(e){var t=e.blocks,n=[];return Array.isArray(t)||jm(!1),Array.isArray(t)&&t.length?(function(e,t){for(var n=[].concat(e).reverse();n.length;){var r=n.pop();t(r);var o=r.children;Array.isArray(o)||jm(!1),n=n.concat([].concat(o.reverse()))}}(t,(function(e){var t=Km({},e);zm(e)&&(t.depth=t.depth||0,function(e){Array.isArray(e.children)&&(e.children=e.children.map((function(t){return t.type===e.type?Km({},t,{depth:(e.depth||0)+1}):t})))}(e),null!=e.children&&e.children.length>0)||(delete t.children,n.push(t))})),e.blocks=n,Km({},e,{blocks:n})):e},fromRawStateToRawTreeState:function(e){var t=[],n=[];return e.blocks.forEach((function(e){var r=zm(e),o=e.depth||0,i=Km({},e,{children:[]});if(r){var a=n[0];if(null==a&&0===o)t.push(i);else if(null==a||a.depth<o-1){var s={key:Fm(),text:"",depth:o-1,type:e.type,children:[],entityRanges:[],inlineStyleRanges:[]};n.unshift(s),1===o?t.push(s):null!=a&&a.children.push(s),s.children.push(i)}else if(a.depth===o-1)a.children.push(i);else{for(;null!=a&&a.depth>=o;)n.shift(),a=n[0];o>0?a.children.push(i):t.push(i)}}else t.push(i)})),Km({},e,{blocks:t})}},Hm=ie,Vm=n.immutableExports.List;var Wm=function(e,t){var n=e.map((function(e,n){var r=t[n];return Hm.create({style:e,entity:r})}));return Vm(n)},qm=Ql.substr;var $m=function(e,t){var n=Array(e.length).fill(null);return t&&t.forEach((function(t){for(var r=qm(e,0,t.offset).length,o=r+qm(e,t.offset,t.length).length,i=r;i<o;i++)n[i]=t.key})),n},Gm=Ql,Qm=n.immutableExports.OrderedSet,Jm=Gm.substr,Xm=Qm();function Ym(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Zm(e,t,n[t])}))}return e}function Zm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eg=be,tg=Pe,ng=fr,rg=jn,og=Um,ig=Un,ag=Wm,sg=$m,cg=function(e,t){var n=Array(e.length).fill(Xm);return t&&t.forEach((function(t){for(var r=Jm(e,0,t.offset).length,o=r+Jm(e,t.offset,t.length).length;r<o;)n[r]=n[r].add(t.style),r++})),n},lg=Ye,ug=Hn,dg=n.immutableExports,pg=He,fg=ug("draft_tree_data_support"),mg=dg.List,gg=dg.Map,hg=dg.OrderedMap,vg=function(e,t){var n=e.key,r=e.type,o=e.data;return{text:e.text,depth:e.depth||0,type:r||"unstyled",key:n||lg(),data:gg(o),characterList:yg(e,t)}},yg=function(e,t){var n=e.text,r=e.entityRanges,o=e.inlineStyleRanges,i=r||[];return ag(cg(n,o||[]),sg(n,i.filter((function(e){return t.hasOwnProperty(e.key)})).map((function(e){return Ym({},e,{key:t[e.key]})}))))},_g=function(e){return Ym({},e,{key:e.key||lg()})},bg=function(e,t,n){var r=t.map((function(e){return Ym({},e,{parentRef:n})}));return e.concat(r.reverse())},kg=function(e,t){var n=e.blocks.find((function(e){return Array.isArray(e.children)&&e.children.length>0})),r=fg&&!n?og.fromRawStateToRawTreeState(e).blocks:e.blocks;if(!fg)return function(e,t){return hg(e.map((function(e){var n=new eg(vg(e,t));return[n.getKey(),n]})))}(n?og.fromRawTreeStateToRawState(e).blocks:r,t);var o=function(e,t){return e.map(_g).reduce((function(n,r,o){Array.isArray(r.children)||pg(!1);var i=r.children.map(_g),a=new tg(Ym({},vg(r,t),{prevSibling:0===o?null:e[o-1].key,nextSibling:o===e.length-1?null:e[o+1].key,children:mg(i.map((function(e){return e.key})))}));n=n.set(a.getKey(),a);for(var s=bg([],i,a);s.length>0;){var c=s.pop(),l=c.parentRef,u=l.getChildKeys(),d=u.indexOf(c.key),p=Array.isArray(c.children);if(!p){p||pg(!1);break}var f=c.children.map(_g),m=new tg(Ym({},vg(c,t),{parent:l.getKey(),children:mg(f.map((function(e){return e.key}))),prevSibling:0===d?null:u.get(d-1),nextSibling:d===u.size-1?null:u.get(d+1)}));n=n.set(m.getKey(),m),s=bg(s,f,m)}return n}),hg())}(r,t);return o},wg=xu;var Cg=function(e){var t=wg(e),n=0,r=0,o=0,i=0;if(t.length){if(t.length>1&&0===t[0].width){var a=t[1];n=a.top,r=a.right,o=a.bottom,i=a.left}else{var s=t[0];n=s.top,r=s.right,o=s.bottom,i=s.left}for(var c=1;c<t.length;c++){var l=t[c];0!==l.height&&0!==l.width&&(n=Math.min(n,l.top),r=Math.max(r,l.right),o=Math.max(o,l.bottom),i=Math.min(i,l.left))}}return{top:n,right:r,bottom:o,left:i,width:r-i,height:o-n}};var Sg={Editor:ym,EditorBlock:Sc,EditorState:so,CompositeDecorator:Ko,Entity:jn,EntityInstance:An,BlockMapBuilder:Q,CharacterMetadata:ie,ContentBlock:be,ContentState:fr,RawDraftContentState:{},SelectionState:Un,AtomicBlockUtils:Po,KeyBindingUtil:yu,Modifier:pn,RichUtils:$p,DefaultDraftBlockRenderMap:Uo,DefaultDraftInlineStyle:Ho,convertFromHTML:Mp,convertFromRaw:function(e){Array.isArray(e.blocks)||pg(!1);var t=function(e){var t=e.entityMap,n={};return Object.keys(t).forEach((function(e){var r=t[e],o=r.type,i=r.mutability,a=r.data;n[e]=rg.__create(o,i,a||{})})),n}(e),n=kg(e,t),r=n.isEmpty()?new ig:ig.createEmpty(n.first().getKey());return new ng({blockMap:n,entityMap:t,selectionBefore:r,selectionAfter:r})},convertToRaw:Im,genKey:Ye,getDefaultKeyBinding:Lf,getVisibleSelectionRect:function(e){var t=e.getSelection();if(!t.rangeCount)return null;var n=t.getRangeAt(0),r=Cg(n),o=r.top,i=r.right,a=r.bottom,s=r.left;return 0===o&&0===i&&0===a&&0===s?null:r}};const Eg=()=>R.createElement("span",{className:i.classes$1.scCommentActionsSeparator},"•"),xg=({block:e,contentState:t})=>{const n=t.getEntity(e.getEntityAt(0)).getData();return"sticker"===n.type?R.createElement(i.StickerComponent,{sticker:n}):null};xg.displayName="AtomicBlockComponent";const Mg=R.memo((({annotation:e})=>R.createElement("div",{className:i.classes.scCommentEditorPrefix},e,e&&R.createElement(Eg,null))));Mg.displayName="EditorPrefix";const Tg=()=>{},Ag=e=>"atomic"===e.getType()?{component:xg,editable:!1}:void 0,Og=e=>"atomic"===e.getType()?i.classes.scCommentEditorAtomicBlock:"",Dg=({annotation:e,editorPlaceholder:t,setEditorRef:n,...r})=>{const{status:o}=V(),{editorKey:i,editorState:a,readOnly:s}=o.draft,c={editorKey:i};return R.createElement("div",null,R.createElement(Mg,{annotation:e}),t,R.createElement(Sg.Editor,{editorState:a,readOnly:s,onChange:Tg,blockRendererFn:Ag,blockStyleFn:Og,...c,...r,ref:e=>{null==n||n(e)}}))};Dg.displayName="ReadonlyDraftComponent";var Rg={exports:{}};!function(e,t){!function(n){var r=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,a="object"==typeof o.commonjsGlobal&&o.commonjsGlobal;a.global!==a&&a.window!==a&&a.self!==a||(n=a);var s,c,l=2147483647,u=36,d=1,p=26,f=38,m=700,g=72,h=128,v="-",y=/^xn--/,_=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=u-d,C=Math.floor,S=String.fromCharCode;function E(e){throw new RangeError(k[e])}function x(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function M(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+x((e=e.replace(b,".")).split("."),t).join(".")}function T(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function A(e){return x(e,(function(e){var t="";return e>65535&&(t+=S((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=S(e)})).join("")}function O(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function D(e,t,n){var r=0;for(e=n?C(e/m):e>>1,e+=C(e/t);e>w*p>>1;r+=u)e=C(e/w);return C(r+(w+1)*e/(e+f))}function R(e){var t,n,r,o,i,a,s,c,f,m,y,_=[],b=e.length,k=0,w=h,S=g;for((n=e.lastIndexOf(v))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&E("not-basic"),_.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<b;){for(i=k,a=1,s=u;o>=b&&E("invalid-input"),((c=(y=e.charCodeAt(o++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:u)>=u||c>C((l-k)/a))&&E("overflow"),k+=c*a,!(c<(f=s<=S?d:s>=S+p?p:s-S));s+=u)a>C(l/(m=u-f))&&E("overflow"),a*=m;S=D(k-i,t=_.length+1,0==i),C(k/t)>l-w&&E("overflow"),w+=C(k/t),k%=t,_.splice(k++,0,w)}return A(_)}function N(e){var t,n,r,o,i,a,s,c,f,m,y,_,b,k,w,x=[];for(_=(e=T(e)).length,t=h,n=0,i=g,a=0;a<_;++a)(y=e[a])<128&&x.push(S(y));for(r=o=x.length,o&&x.push(v);r<_;){for(s=l,a=0;a<_;++a)(y=e[a])>=t&&y<s&&(s=y);for(s-t>C((l-n)/(b=r+1))&&E("overflow"),n+=(s-t)*b,t=s,a=0;a<_;++a)if((y=e[a])<t&&++n>l&&E("overflow"),y==t){for(c=n,f=u;!(c<(m=f<=i?d:f>=i+p?p:f-i));f+=u)w=c-m,k=u-m,x.push(S(O(m+w%k,0))),c=C(w/k);x.push(S(O(c,0))),i=D(n,b,r==o),n=0,++r}++n,++t}return x.join("")}if(s={version:"1.4.1",ucs2:{decode:T,encode:A},decode:R,encode:N,toASCII:function(e){return M(e,(function(e){return _.test(e)?"xn--"+N(e):e}))},toUnicode:function(e){return M(e,(function(e){return y.test(e)?R(e.slice(4).toLowerCase()):e}))}},r&&i)if(e.exports==r)i.exports=s;else for(c in s)s.hasOwnProperty(c)&&(r[c]=s[c]);else n.punycode=s}(o.commonjsGlobal)}(Rg,Rg.exports);var Ng=Rg.exports;function Pg(e){return 0===e.getCurrentContent().getPlainText().length}function Bg(e,t){return Sg.EditorState.forceSelection(Sg.EditorState.push(e,t,"insert-fragment"),t.getSelectionAfter())}function Ig(e,t,n,r,o,i){return Sg.Modifier.replaceText(e,Sg.SelectionState.createEmpty(t).merge({anchorOffset:n,focusOffset:r}),o,void 0,i)}function Kg(e,t){let n=null,r=null;const o=e.start,i=e.end;let a,s,c=0;if(t.getBlockMap().forEach(((e,t)=>{if(e&&"atomic"!==e.getType()){const l=Fg(e.getText());if(t&&null===n&&o<c+l.length){n=t;const e=o-c;a=jg(l.slice(0,e)).length}if(t&&null===r&&i<=c+l.length){r=t;const e=i-c;s=jg(l.slice(0,e)).length}c+=l.length}return n&&r})),!n||!r)throw new Error("Bad range");return Sg.SelectionState.createEmpty(n).merge({anchorKey:n,anchorOffset:a,focusKey:r,focusOffset:s})}function Lg(e){return e.match(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}const Fg=e=>Ng.ucs2.decode(e),jg=e=>Ng.ucs2.encode(e);function zg(e){if("img"===e.tagName.toLowerCase()){const t=e.getAttribute("data-emoji-ch");if(t){const e=document.createElement("span");return e.textContent=t,e}}return e}function Ug(e){const t=e.style,n=e.tagName.toLowerCase();let r=[];return(parseInt(t.fontWeight||"0",10)>=600||"bold"===t.fontWeight||"b"===n||"strong"===n)&&(r=[...r,"BOLD"]),"underline"!==t.textDecoration&&"u"!==n||(r=[...r,"UNDERLINE"]),"strikethrough"!==t.textDecoration&&"s"!==n&&"strike"!==n||(r=[...r,"STRIKETHROUGH"]),"italic"!==t.fontStyle&&"i"!==n&&"em"!==n||(r=[...r,"ITALIC"]),r}var Hg;!function(e){e[e.ENTER=13]="ENTER",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN"}(Hg||(Hg={}));const Vg=[Hg.ESC,Hg.SPACE,Hg.UP,Hg.RIGHT,Hg.DOWN],Wg=i.classes.scCommentEditorDraft,qg=({submitModifierKeyCodes:e=["metaKey","ctrlKey"],lineBreakModifierKeyCodes:t=[],customKeyBinding:r,handleFocus:o,handleBlur:a,shouldFocus:s,spellCheck:c,a11yEditorLabel:l,disabled:u,placeholder:d,setRef:p,className:f,clearCommentStates:m})=>{const{container:g,scope:h,status:v}=V(),y=R.useRef(),_=R.useCallback((e=>{g.getTriggers(h).draft.change(e)}),[g,h]),b=R.useCallback((()=>{var e;null===(e=y.current)||void 0===e||e.blur()}),[]),k=R.useCallback(((n,r)=>{const o=((e,t)=>{if(0===t.length)return!0;for(const n of t)if(e[n])return!0;return!1})(n,e),i=((e,t)=>{if(0===t.length)return!0;for(const n of t)if(e[n])return!0;return!1})(n,t);if(0===e.length&&t.length>0&&!i&&!g.getStatus().macro.active||e.length>0&&o){return!(""===r.getCurrentContent().getPlainText().trim())&&g.getTriggers(h).comment&&(b(),g.getStatus().draft.containerPostOnBlur||g.getTriggers(h).comment.post(r)),"handled"}const a=g.getTriggers(h).draft.returnKey(n).editorState;return!i||a!==r||g.getStatus().macro.active?(n.preventDefault(),"handled"):"not-handled"}),[g,h,t,e,b]),w=R.useCallback((()=>{y.current&&window.setTimeout((()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.focus()}))}),[]),C=R.useCallback((e=>{var t;if(!g.getStatus().macro.macroRef)return!1;const n=e.getBoundingClientRect(),r=null===(t=g.getStatus().macro.macroRef)||void 0===t?void 0:t.getBoundingClientRect();return!!r&&(r.bottom<n.bottom&&r.top>n.top)}),[g]),S=R.useCallback((e=>{if(null===e)throw new Error("Unable to find scroll element");return e.classList.contains(Wg)?e:S(e.parentElement)}),[]),E=R.useCallback((e=>{if(!g.getStatus().macro.macroRef)return;const{updateVisibility:t}=g.getTriggers(h).macro,n=e.target;t(C(n))}),[g,h,C]),x=R.useCallback((e=>{if((({which:e})=>Vg.indexOf(e)>-1)(e)){const{suggestion:t}=g.getStatus();if(!(({totalSuggestions:e})=>0===e)(t)&&(g.getTriggers(h).draft.key(e),t!==g.getStatus().suggestion))return e.preventDefault(),null}return r?r(e):Sg.getDefaultKeyBinding(e)}),[g,h,r]),M=R.useCallback(((e,t)=>g.getTriggers(h).draft.keyCommand(e).editorState===t?"not-handled":"handled"),[g,h]),T=R.useCallback(((e,t)=>{if(". "===e){const e=(e=>{const t=e.getCurrentContent(),n=e.getSelection().getStartKey(),r=e.getSelection().getStartOffset(),o=e.getSelection().getEndOffset(),i=t.getBlockForKey(n),a=Ig(t,n,r-1,o,". ",i.getEntityAt(r-1));return Sg.EditorState.set(e,{currentContent:a})})(t);return _(e),"handled"}return g.getTriggers(h).draft.input(e).editorState===t?"not-handled":"handled"}),[g,_,h]),A=R.useCallback(((e,t,n)=>{let r=g.getTriggers(h).draft.pasteText(e).editorState;return t&&r===n&&(r=g.getTriggers(h).draft.pasteHTML({text:e,html:t}).editorState),r===n?"not-handled":"handled"}),[g,h]),O=R.useCallback((e=>{g.getTriggers(h).draft.compositionStart(e)}),[g,h]),D=R.useCallback((e=>{g.getTriggers(h).draft.compositionEnd(e)}),[g,h]),N=R.useCallback((e=>{e.which===Hg.SPACE?g.getTriggers(h).draft.key(e):e.which===Hg.ENTER&&g.getStatus().macro.active?e.preventDefault():e.which===Hg.ESC&&(null==m||m())}),[m,g,h]),P=R.useCallback((e=>{null==o||o(e),e.stopPropagation()}),[o]),B=R.useCallback((e=>{if(o&&!o(e))return e.preventDefault(),void e.stopPropagation();g.getTriggers(h).macro.updateVisibility(C(S(e.target))),g.getTriggers(h).draft.focus(e)}),[g,h,o,C,S]),I=R.useCallback((e=>{(null==o?void 0:o(e))&&B(e)}),[o,B]),K=R.useCallback((e=>{g.getTriggers(h).macro.updateVisibility(!1),null==a||a(g.getStatus().draft.editorState,g.getTriggers(h).comment),g.getTriggers(h).draft.blur(e)}),[g,h,a]);R.useEffect((()=>{s&&y.current&&w()}),[s]);const L=R.useCallback((e=>{const t=e.getType();return t&&g.getStatus().draft.blockRenderers[t]?g.getStatus().draft.blockRenderers[t](e):void 0}),[g]),F=R.useCallback((e=>{y.current=e,null==p||p(e)}),[p]),{macro:{active:j,isVisible:z},draft:{editorState:U,readOnly:H,isComposing:W},suggestion:{selectedIndex:q}}=v,$=!(!j||!j.chrome)&&z,G=-1!==q&&$?`mentions-option-${q}`:"",Q=""===U.getCurrentContent().getPlainText()&&!W?R.createElement(n.Text,{className:i.classes.scCommentEditorPlaceholder,tabIndex:-1,"aria-hidden":!0,size:"small",color:"faint"},R.createElement(n.Truncate,{tooltipControlProps:{auto:!0,placement:"top"}},d||"")):void 0;return R.createElement("div",{className:n.cx(Wg,f),onScroll:E,onKeyDown:N,onCompositionStart:O,onCompositionEnd:D,onMouseDown:P,onMouseUp:I},R.createElement(Dg,{setEditorRef:F,ariaLabel:l,readOnly:H||!!u,onFocus:B,onBlur:K,onChange:_,handleReturn:k,keyBindingFn:x,handleKeyCommand:M,handleBeforeInput:T,handlePastedText:A,blockRendererFn:L,ariaAutoComplete:"list",ariaExpanded:$,ariaActiveDescendantID:G,annotation:void 0,editorPlaceholder:Q,spellCheck:c}))};qg.displayName="DraftComponent";n.injectInternalStyle("/static/js/comments2/components/comment_stream/index.module.out-vflrY3Wgw.css",(e=>'._sc-comment-stream_12v0k_1{box-sizing:border-box;display:flex;flex-direction:column;height:100%;width:328px}._sc-comment-stream_12v0k_1._sc-comment-stream--right-rail_12v0k_9{width:100%}._sc-unread-pill-wrapper_12v0k_15>div{flex:0 1 auto}._sc-comment-stream-threads_12v0k_19{flex:1 1 auto;list-style-type:none;margin:0;overflow:auto;padding:0;z-index:0}._sc-comment-stream--right-rail_12v0k_9 ._sc-comment-stream-threads_12v0k_19{margin-top:8px}._sc-comment-stream-open_12v0k_32{width:15em}._sc-comment-stream-closed_12v0k_36{width:1em}._sc-annotation-toggle_12v0k_40{font-feature-settings:"tnum";box-sizing:border-box;display:inline-block}._sc-annotation-toggle-inner_12v0k_46{cursor:default;display:flex}._sc-unread-pill-wrapper_12v0k_15{display:flex;flex:1 1 auto;flex-direction:column;min-height:0;overflow:hidden}._sc-unread-pill-wrapper_12v0k_15 ._unread-pill_12v0k_60{display:block;height:0;margin:auto;z-index:1}._unread-pill_12v0k_60 ._unread-pill-text_12v0k_67{background:#d2e6fa;border:2px solid #f7f9fa;color:#0070e0;cursor:pointer;padding:5px 10px}._unread-pill_12v0k_60 ._unread-pill-text_12v0k_67:hover{background:#bfdbf7}._unread-pill_12v0k_60._up_12v0k_83 ._unread-pill-text_12v0k_67{margin-top:15px;position:relative}._comments-sort-menu_12v0k_88{background-color:var(--dig-color__background__raised);margin:var(--spacing__unit--2) var(--spacing__unit--2);position:sticky;top:0;z-index:2}._sc-unread-pill-wrapper_12v0k_15 ._unread-pill_12v0k_60._down_12v0k_96{position:relative;top:-42px}._unread-pill_12v0k_60 span._arrow-indicator_12v0k_101{margin-right:5px}._sc-suggested-comments_12v0k_105{margin:4px 10px}._sc-suggested-comments-button_12v0k_109{background:var(--dig-color__primary__on-base);border-radius:20px;cursor:pointer;margin:4px;padding:8px 10px}._sc-suggested-comments-button_12v0k_109:hover{background:var(--dig-color__primary__surface)}._sc-comment-stream_12v0k_1{position:relative}._sc-annotation-toggle_12v0k_40{font-weight:500}@keyframes _comment-button-fade-in_12v0k_1{0%{opacity:0}70%{opacity:0}to{opacity:1}}._sc-comment-stream-error-container_12v0k_143{align-items:center;display:flex;flex-direction:column;height:100%;justify-content:center;min-height:100%;text-align:center;width:100%}._sc-comment-stream-error-title_12v0k_154{font-weight:var(--unified_font_weight_semibold)}._sc-comment-stream-error-subtext_12v0k_160,._sc-comment-stream-error-title_12v0k_154{font-size:var(--unified_font_size_normal);line-height:var(--web_comment_line_height)}._sc-comment-stream-error-subtext_12v0k_160{color:var(--unified_color_text_subtext);width:240px}._sc-comment-stream-error-button-container_12v0k_167{margin-top:20px}._sc-comment-stream-editor-container_12v0k_171{display:flex}._sc-comment-stream-editor-bundle_12v0k_175{flex:1}._sc-comment-stream-meatball-icon_12v0k_179{align-self:center;padding:var(--spacing__unit--2) var(--spacing__unit--1) 0 0}._sc-comment-empty-container_12v0k_184{padding:var(--spacing__unit--2)}._sc-comment-stream-wrapper_12v0k_188{display:flex;flex-direction:column;height:100%;overflow:auto}._sc-comment-stream-editor_12v0k_171{flex:0 0 auto}._sc-comment-stream-editor_12v0k_171 ._sc-comment-editor-focus-container_12v0k_199{background-color:var(--dig-color__secondary__on-base);border-top:1px solid var(--dig-color__border__subtle);padding:var(--spacing__unit--2)}._sc-comment-stream-editor_12v0k_171 ._sc-comment-editor-focus-container-is-focused_12v0k_205{border-color:transparent;box-shadow:inset var(--dig-utilities__boxshadow__focus-ring)}._hover-menu_12v0k_210{background-color:var(--dig-color__background__base);border-radius:12px;max-width:104px;padding:var(--dig-spacing__micro__xsmall);position:absolute;right:var(--dig-spacing__micro__small);top:var(--dig-spacing__micro__small);z-index:1}._hover-menu-button_12v0k_221{color:var(--dig-color__text__subtle)}._copy-link-snackbar_12v0k_225{display:flex;white-space:pre}'));const $g="_sc-comment-stream_12v0k_1",Gg="_sc-comment-stream--right-rail_12v0k_9",Qg="_sc-unread-pill-wrapper_12v0k_15",Jg="_sc-comment-stream-threads_12v0k_19",Xg="_unread-pill_12v0k_60",Yg="_unread-pill-text_12v0k_67",Zg="_up_12v0k_83",eh="_comments-sort-menu_12v0k_88",th="_down_12v0k_96",nh="_arrow-indicator_12v0k_101",rh="_sc-comment-stream-editor-container_12v0k_171",oh="_sc-comment-stream-editor-bundle_12v0k_175",ih="_sc-comment-empty-container_12v0k_184",ah="_sc-comment-stream-wrapper_12v0k_188",sh="_sc-comment-stream-editor_12v0k_171",ch="_sc-comment-editor-focus-container_12v0k_199",lh="_sc-comment-editor-focus-container-is-focused_12v0k_205",uh="_hover-menu_12v0k_210",dh="_hover-menu-button_12v0k_221",ph="_copy-link-snackbar_12v0k_225",fh=(e,t)=>!!t&&e.current&&e.current.contains(t),mh=({children:e,disabled:t})=>{const{container:r,scope:o,status:i}=V(),a=R.useRef(null),s=n.cx(ch,{[lh]:i.container.isFocused&&!t}),c=R.useCallback((e=>{fh(a,e.relatedTarget)||r.getTriggers(o).container.focus(e)}),[r,o]),l=R.useCallback((e=>{fh(a,e.relatedTarget)||r.getTriggers(o).container.blur(e)}),[r,o]),u=R.useCallback((e=>{r.getStatus().container.isFocused&&(e.stopPropagation(),e.preventDefault())}),[r]);return R.createElement("div",{className:s,ref:a,onFocus:c,onBlur:l,onMouseDown:u},e)};function gh(e,t,n){const r=e.getCurrentContent().mergeEntityData(t,{pending:n}),o=Sg.EditorState.push(e,r,"apply-entity"),i=r.getSelectionAfter(),a=i.merge({focusOffset:i.getFocusOffset()+1}),s=Bg(o,Sg.Modifier.removeRange(Sg.Modifier.insertText(r,i," "),a,"backward"));return Sg.EditorState.forceSelection(s,o.getSelection())}mh.displayName="FocusContainerComponent";const hh=e=>({scope:()=>e}),vh={onShare:()=>{},onMention:()=>new Promise((e=>e({mentionedUserHasAccess:!0,shouldShowSharePopup:!1})))},yh=({onMention:e,onShare:t})=>hh({reducers:{mentionSuggestions:{evts:{onApplyMentionToRange:t=>{const{editorState:n}=t.status.draft,{mentionKey:r,mentionData:o,user:i}=t.innerProps.evt,a=e(o,r),s=gh(n,r,!0);t.triggers.draft.change(s),a.then((e=>{if(e.shouldShowSharePopup)t.triggers.mentionShareFlow.updatePopupProps({mentionKey:r,mentionData:o,user:i});else if(e.mentionedUserHasAccess){const e=gh(n,r,!1);t.triggers.draft.change(e)}}))}}},mentionShareFlow:{evts:{onShare:e=>{const{mentionKey:n,mentionData:r,user:o}=e.innerProps.evt;t(r,n,(()=>{e.triggers.mentionShareFlow.onShareCompleted({mentionKey:n,mentionData:r,user:o})}))},onShareCompleted:e=>{const{mentionKey:t}=e.innerProps.evt,{editorState:n}=e.status.draft,r=function(e,t){const n=t.getCurrentContent();let r;try{r=n.getEntity(e)}catch(e){}return r&&"mention"===r.getType()?gh(t,e,!1):t}(t,n),o=Sg.EditorState.forceSelection(r,r.getSelection());e.triggers.draft.change(o)}},values:{popupProps:{updatePopupProps:e=>(e.triggers.draft.readOnly(!!e.innerProps.evt),e.innerProps.evt)}}},draft:{values:{readOnly:{readOnly:e=>e.innerProps.evt}}}},composers:{draft:e=>{var t;(null===(t=e.innerProps.prevStatus)||void 0===t?void 0:t.draft.editorState.getCurrentContent())!==e.status.draft.editorState.getCurrentContent()&&e.status.mentionShareFlow.popupProps&&e.triggers.mentionShareFlow.updatePopupProps(null)}}});class _h{constructor(e){this.listeners=[],this.status=e}setStatus(e,t=!1){this.status={...this.status,...e},t||this.listeners.forEach((e=>e(this.getStatus())))}getStatus(){return this.status}subscribe(e){return this.listeners.push(e),{unsubscribe:()=>this.listeners=this.listeners.filter((t=>t!==e))}}}function bh(e){const{value:t}=e.innerProps;return t}class kh{static reducePartialReducers(e,t,n,r,o){return r.reduce((function(r,o){return function(i){const{innerProps:{evt:a,value:s},kernel:c}=i,l=o[n];if(void 0!==l){const n=l;let o=c.compose(r,{evt:a,value:s});o=void 0!==o?c.compose((function(n){return{...n.status[e],[t]:o}}))[t]:s;const i=c.compose(n,{evt:a,value:o});return void 0!==i?i:o}const u=c.compose(r,{evt:a,value:s});return void 0!==u?u:s}}),o)}static reduceValue(e,t,n,r,o,i,a){return t.reduce((function(t,s){const c=o[s],l=a.compose(c[n],{evt:r,value:i[s]});return void 0!==l?a.compose((function(n){return n.featureTriggers[e]({...t,[s]:l})})):a.compose((function(t){return t.status[e]}))}),i)}constructor(e,t,n){this.evts={},this.values={};for(const r of t.evts)this.evts[r]=n=>kh.reduceValue(e,t.values,r,n.innerProps.evt,this.values,n.innerProps.value,n.kernel),this.evts[r]=n.reduce((function(e,t){return function(n){const{innerProps:{evt:o,value:i},kernel:a}=n,s=t.evts&&t.evts[r],c=a.compose(e,{evt:o,value:i});if(void 0!==s){const e=a.compose(s,{evt:o,value:void 0!==c?c:i});if(void 0!==e)return e}return c}}),this.evts[r]);for(const r of t.values){const o=n.reduce((function(e,t){const n=t.values&&t.values[r];return void 0!==n?[...e,n]:e}),[]);this.values[r]={};for(const n in t.evts){const i=t.evts[n];this.values[r][i]=kh.reducePartialReducers(e,r,i,o,bh)}}}}class wh{static create(e,t,n){return new wh(e,t,n)}constructor(e,t,n){this.composers={};for(const t in e)this.composers[t]=function(e){var r,o;null===(o=(r=e.innerProps).initial)||void 0===o||o.call(r),n.forEach((function(n){void 0!==n[t]&&e.kernel.compose(n[t],{prevStatus:e.status})}))};this.reducers=wh.completeScopeReducers(e,t)}static completeScopeReducers(e,t){const n={};for(const r in e)n[r]={evts:{},values:{}},n[r]=new kh(r,e[r],t.reduce((function(e,t){const n=t[r];return void 0!==n&&e.push(n),e}),[]));return n}}function Ch(e,t,n,r,o){const i={};for(const a of e)i[a]=function(e){return o.compose((function(i){const s=i.status[r],c=o.compose(t[a],{evt:e,value:s});return n(c)}))};return i}class Sh extends _h{constructor({scopeNames:e,defaultStatus:t}){super(t),this.scopeNames=e,this.memoizedCreateKernelAndTriggers=this.makeMemoizedCreateKernelAndTriggers()}makeMemoizedCreateKernelAndTriggers(){let e,t,n,r;return o=>(r!==o&&(e=this.createKernel(o),n=this.createFeatureTriggers(o),t=this.createTriggers(o,e,n),r=o),{kernel:e,triggers:t,featureTriggers:n})}createTriggers(e,t,n){return function(e,t,n,r){let o={};for(const i in t.reducers)o={...o,[i]:Ch(e[i].evts,t.reducers[i].evts,n[i],i,r)};return o}(this.scopeNames,e,n||this.createFeatureTriggers(e),t||this.createKernel(e))}getTriggers(e){return this.memoizedCreateKernelAndTriggers(e).triggers}compose(e,t,n){const r=this.getStatus(),{kernel:o,featureTriggers:i,triggers:a}=this.memoizedCreateKernelAndTriggers(t);return e({status:r,triggers:a,innerProps:n,kernel:o,featureTriggers:i})}updateStatus(e,t){const n=this.createFeatureTriggers(t),r=this.getStatus();for(const t in e){const o=e[t];r[t]!==o&&n[t](o)}return this.getStatus()}createKernel(e){return{compose:(t,n)=>this.compose(t,e,n)}}createFeatureTriggers(e){const t={};for(const n in this.scopeNames)t[n]=t=>{const r=this.getStatus();return this.compose(e.composers[n],e,{prevStatus:r,initial:()=>{this.setStatus({...r,[n]:t})}}),t};return t}}function Eh(e,t){for(const n in e)if(e[n]!==t[n])return!1;return!0}class xh extends R.Component{constructor(){super(...arguments),this._container=new Sh({scopeNames:this.scopeNames,defaultStatus:this.createDefaultStatus()})}getLayerProps(e){return{}}UNSAFE_componentWillMount(){this.updateContainerStatus(this.props)}UNSAFE_componentWillReceiveProps(e){Eh(this.getLayerProps(this.props),this.getLayerProps(e))||(this.cachedScope=void 0),this.updateContainerStatus(e)}updateContainerStatus(e){this.container.updateStatus(this.mapPropsToUpdates(e,this.container.getStatus()),this.scope)}reloadCachedScope(){return function(e,t){const n=[],r=[];return t.forEach((e=>{const t=e.scope();t.reducers&&n.push(t.reducers),t.composers&&r.push(t.composers)})),wh.create(e,n,r)}(this.scopeNames,this.mapPropsToLayers(this.props))}get container(){return this._container}get scope(){return this.cachedScope||(this.cachedScope=this.reloadCachedScope()),this.cachedScope}render(){return R.createElement(H,{scope:this.scope,container:this.container},this.props.children)}}xh.displayName="EditorContainer";const Mh=hh({reducers:{container:{values:{isFocused:{focus:()=>!0,blur:()=>!1,updateFocus:e=>e.innerProps.evt}}}}});n.injectInternalStyle("/static/js/comments2/components/comment_editor/layers/index.module.out-vfl25HRFd.css",(e=>':root{--folder-overview-padding-left:6px;--folder-overview-padding-top:8px;--fixed-toolbar-height:40px}._sc-folder-overview-interaction-container_e2wyy_9{padding-top:0;position:relative}._sc-folder-overview-editor_e2wyy_14 ._sc-folder-overview-draft_e2wyy_14{max-height:none;overflow-x:hidden;overflow-y:auto;padding:0}._sc-folder-overview-editor_e2wyy_14 .public-DraftEditor-content{overflow:hidden}._sc-toolbar-component_e2wyy_27{display:flex;height:32px;padding-left:5px;padding-right:9px;pointer-events:auto;z-index:10}._sc-toolbar-component_e2wyy_27 ._toolbar-divider_e2wyy_36{background-color:var(--color_white);height:100%;margin:0 6px 0 8px;opacity:.1;width:1px}._sc-toolbar-component_e2wyy_27 ._toolbar-spacer_e2wyy_44{flex:1}._sc-toolbar-component_e2wyy_27 ._toolbar-button_e2wyy_48{color:var(--color_white);cursor:pointer;padding:4px}._sc-toolbar-component_e2wyy_27 ._toolbar-button_e2wyy_48 svg{width:20px}._sc-contextual-toolbar-popover_e2wyy_60{margin-top:-40px;transition:opacity .2s,transform .2s}._sc-contextual-toolbar-popover_e2wyy_60 ._toolbar-button_e2wyy_48{opacity:.4}._sc-contextual-toolbar-popover_e2wyy_60 ._toolbar-button_e2wyy_48:hover{opacity:1}._sc-contextual-toolbar-popover_e2wyy_60 ._sc-toolbar-component_e2wyy_27{background-color:var(--color_ink_100);border-radius:5px}._sc-contextual-toolbar-popover_e2wyy_60._popover-enter_e2wyy_81,._sc-contextual-toolbar-popover_e2wyy_60._popover-leave_e2wyy_82{opacity:0;transform:translate(-50%,12px) scale(.8)}._sc-contextual-toolbar-popover_e2wyy_60._popover-enter-active_e2wyy_87._popover-enter_e2wyy_81{opacity:1;pointer-events:auto;transform:translate(-50%) scale(1)}._sc-link-prompt_e2wyy_95{background-color:var(--color_white);border-radius:0;box-shadow:0 5px 15px rgba(0,0,0,.2);display:flex;height:32px;margin-top:-48px;min-width:250px;padding:4px;position:absolute;transform:translate(-50%);width:250px;z-index:10}._sc-link-prompt_e2wyy_95 ._submit-button_e2wyy_114{margin-left:8px}._sc-link-prompt_e2wyy_95 ._link-prompt-input_e2wyy_118{background-color:transparent;background-image:none;border:0;border-radius:0;font-size:12px;height:100%;padding:4px 8px;width:100%}._sc-link-prompt_e2wyy_95 ._link-prompt-input_e2wyy_118:focus{outline:none}._sc-folder-overview-editor_e2wyy_14 .DraftEditor-root{font-size:14px;line-height:22px}._sc-folder-overview-editor_e2wyy_14 .public-DraftStyleDefault-ol,._sc-folder-overview-editor_e2wyy_14 .public-DraftStyleDefault-ul{margin-bottom:0;margin-top:0}._sc-folder-overview-editor_e2wyy_14 .public-DraftStyleDefault-ul li{font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight)}._sc-folder-overview-editor_e2wyy_14 .public-DraftStyleDefault-ul li span{font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight)}._sc-folder-overview-editor_e2wyy_14 .public-DraftStyleDefault-depth0.public-DraftStyleDefault-listLTR{margin-left:2.2em}._sc-folder-overview-editor_e2wyy_14 ._sc-editor-href_e2wyy_173{color:var(--color__core__accent);cursor:pointer}._sc-toolbar-tooltip_e2wyy_179 ._sc-toolbar-button-tooltip-content_e2wyy_179{font-size:10px;font-weight:200;line-height:12px;text-align:center}._sc-toolbar-button-tooltip-content__message_e2wyy_186{font-weight:700;line-height:12px}._sc-toolbar-button-tooltip-content__shortcut_e2wyy_191{font-style:italic;line-height:12px;padding:0 2px 1px}._sc-folder-overview-editor_e2wyy_14 ._task-block_e2wyy_199{margin-bottom:6px;margin-top:6px;padding-left:22px;position:relative}._sc-folder-overview-editor_e2wyy_14 ._task-block_e2wyy_199._checked_e2wyy_206{color:var(--color__faint__text);text-decoration:line-through}._sc-folder-overview-editor_e2wyy_14 ._task-block-checkbox_e2wyy_211,._task-block-clickable-div_e2wyy_217{left:0;position:absolute;top:0}._task-block-clickable-div_e2wyy_217{cursor:default;height:24px;width:24px;z-index:1}._sc-folder-overview-editor_e2wyy_14 ._task-block_e2wyy_199._empty-block_e2wyy_228 ._task-placeholder_e2wyy_228{display:block;left:0;margin-left:22px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;width:100%}._sc-folder-overview-editor_e2wyy_14 ._task-block_e2wyy_199._empty-block_e2wyy_228._readonly_e2wyy_241 ._task-placeholder_e2wyy_228{display:none}._sc-folder-overview-editor_e2wyy_14 ._task-block_e2wyy_199:after{background-color:var(--color_ink_5);border-radius:5px;content:"";display:block;height:calc(100% + 6px);left:-8px;opacity:0;position:absolute;top:-3px;transition:opacity .2s;width:calc(100% + 16px);z-index:-1}._sc-folder-overview-editor_e2wyy_14 ._task-block_e2wyy_199._focused_e2wyy_261:after,._sc-folder-overview-editor_e2wyy_14 ._task-block_e2wyy_199:not(._readonly_e2wyy_241):hover:after{opacity:1}._sc-popover_e2wyy_267{border-radius:5px;box-shadow:0 5px 10px rgba(0,0,0,.29);position:absolute;transform:translate(-50%);z-index:11}._sc-folder-overview-fixed-toolbar_e2wyy_279{box-sizing:border-box;margin-top:-48px;padding:0;pointer-events:none;position:absolute;width:100%;z-index:42}._sc-folder-overview-fixed-toolbar_e2wyy_279 ._sc-toolbar-component_e2wyy_27{background-color:var(--color__inverse__standard__background);border-radius:0;box-shadow:var(--boxshadow__elevation1);display:flex;height:var(--fixed-toolbar-height);justify-content:center;margin-left:auto;margin-right:auto;max-width:100%;min-width:0;pointer-events:auto;position:relative}._sc-folder-overview-fixed-toolbar_e2wyy_279 ._toolbar-button-done_e2wyy_304{font-size:14px;line-height:24px;margin-left:2px}._sc-folder-overview-fixed-toolbar_e2wyy_279 ._sc-link-prompt_e2wyy_95{box-sizing:border-box;margin-top:0;transform:none;width:100%}._sc-folder-overview-fixed-toolbar_e2wyy_279 ._sc-link-prompt_e2wyy_95 ._link-prompt-input_e2wyy_118{padding-top:0}._sc-folder-overview-fixed-toolbar_e2wyy_279 ._toolbar-button_e2wyy_48{fill:var(--color_ink_40);color:var(--color_ink_40);padding:8px 6px}._sc-folder-overview-fixed-toolbar_e2wyy_279 ._toolbar-button--active_e2wyy_329,._sc-folder-overview-fixed-toolbar_e2wyy_279 ._toolbar-button_e2wyy_48:hover{fill:var(--color__inverse__standard__text);color:var(--color__inverse__standard__text)}._sc-folder-overview-editor_e2wyy_14 ._sc-folder-overview-fixed-toolbar_e2wyy_279 ._sc-link-prompt_e2wyy_95,._sc-folder-overview-fixed-toolbar_e2wyy_279._docked_e2wyy_337 ._sc-link-prompt_e2wyy_95{height:100%}._sc-folder-overview-editor_e2wyy_14 ._sc-folder-overview-fixed-toolbar_e2wyy_279 ._sc-link-prompt_e2wyy_95 ._link-prompt-input_e2wyy_118{box-sizing:border-box;height:100%}._sc-folder-overview-fixed-toolbar_e2wyy_279 ._sc-link-prompt_e2wyy_95 ._submit-button_e2wyy_114{margin-right:4px;margin-top:4px}._sc-folder-overview-editor_e2wyy_14 ._sc-contextual-toolbar-popover_e2wyy_60{z-index:200}._sc-folder-overview-editor_e2wyy_14 ._sc-editor-href_e2wyy_173{color:var(--dig-color__primary__base)}._sc-folder-overview-editor_e2wyy_14 ._sc-link-prompt_e2wyy_95 ._submit-button_e2wyy_114,._sc-folder-overview-fixed-toolbar_e2wyy_279 ._sc-link-prompt_e2wyy_95 ._submit-button_e2wyy_114{display:none}._sc-folder-overview-editor_e2wyy_14 ._sc-link-prompt_e2wyy_95{background-color:var(--color_white);border:0;height:auto;padding:0;z-index:200}._sc-folder-overview-editor_e2wyy_14 ._sc-link-prompt_e2wyy_95 ._link-prompt-input_e2wyy_118{color:var(--color__core__accent);padding:12px}._sc-folder-overview-editor_e2wyy_14 .DraftEditor-root{color:var(--dig-color__text__base);font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);line-height:var(--type__body__small--lineheight)}._sc-folder-overview-editor_e2wyy_14 ._task-block-clickable-div_e2wyy_217{cursor:pointer}._sc-folder-overview-editor_e2wyy_14 ._task-block-checkbox_e2wyy_211,._sc-folder-overview-editor_e2wyy_14 ._task-block-clickable-div_e2wyy_217{height:12px;left:2px;min-width:12px;top:4px;width:12px}._sc-folder-overview-editor_e2wyy_14 .public-DraftStyleDefault-orderedListItem.public-DraftStyleDefault-depth0.public-DraftStyleDefault-listLTR,._sc-folder-overview-editor_e2wyy_14 .public-DraftStyleDefault-unorderedListItem.public-DraftStyleDefault-depth0.public-DraftStyleDefault-listLTR{margin-left:28px}._sc-read-only-folder-overview-editor_e2wyy_409{pointer-events:none}'));const Th="_sc-editor-href_e2wyy_173",Ah=["mailto:","webcal:","tel:"];class Oh extends R.Component{constructor(){super(...arguments),this.onClick=e=>{const t=e.currentTarget.href;t&&(e=>{if(!e||!e.trim().length)return!1;try{const t=new URL(e);return!!t.host||Ah.includes(t.protocol)}catch(e){return!1}})(t)&&(this.props.onOpenLink(t),e.preventDefault(),e.stopPropagation())},this.onMouseUp=e=>{e.preventDefault(),e.stopPropagation()},this.onMouseDown=e=>{e.preventDefault(),e.stopPropagation()}}getUrl(){const{url:e}=this.props.contentState.getEntity(this.props.entityKey).getData();return(e=>(e&&Ah.filter((t=>e.trim().startsWith(t))).length||e.match(/^[a-zA-Z0-9\+\-\.]+:\/\//)||(e="http://"+e),e))(e)}render(){const e=this.getUrl();return R.createElement("a",{className:Th,href:e,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,title:e},this.props.children)}}Oh.displayName="LinkSpanComponent";const Dh=e=>{!function(e,t=!0,n="_blank"){const r=window.open("",n);r&&(function(e,t){-1===["_self","_top","_parent"].indexOf(t)&&(e.opener=null)}(r,n),function(e,t){e.location&&e.location.replace?e.location.replace(t):e.location=t}(r,e),t&&r.focus())}(e,!0)},Rh=e=>{const{blocks:t}=e,{metadata:n}=t.reduce(((t,n)=>{const{metadata:r,pos:o}=t;return{metadata:[...r,...n.entityRanges.filter((function(t){return"hyperlink"===e.entityMap[t.key].type})).map((function(t){return{type:"hyperlink",url:e.entityMap[t.key].data.url,location:{start:o+t.offset,end:o+t.offset+t.length}}}))],pos:o+Fg(n.text).length}}),{metadata:[],pos:0});return n},Nh=e=>e.reduce(((e,t)=>"hyperlink"===t.type?{hyperlinks:[...e.hyperlinks,t],other:e.other}:{hyperlinks:e.hyperlinks,other:[...e.other,t]}),{hyperlinks:[],other:[]}),Ph=hh({reducers:{draft:{values:{decorators:{init:e=>[...e.innerProps.value,{strategy:function(e,t,n){e.findEntityRanges((function(e){const t=e.getEntity();return null!==t&&"hyperlink"===n.getEntity(t).getType()}),t)},props:{readOnly:e.status.draft.readOnly,onOpenLink:Dh},component:Oh}]},editorState:{populateWithComment:e=>{const{value:t,evt:n}=e.innerProps,{hyperlinks:r}=Nh(n.metadata);return Sg.EditorState.createWithContent(r.reduce(((e,t)=>{const n=e.createEntity("hyperlink","MUTABLE",{url:t.url}),r=n.getLastCreatedEntityKey(),o=Kg(t.location,n);return Sg.Modifier.applyEntity(e,o,r)}),t.getCurrentContent()))}}}},comment:{values:{content:{post:e=>{const{evt:t,value:n}=e.innerProps,r=Rh(Sg.convertToRaw(t.getCurrentContent())),{other:o}=Nh(n.metadata);return{...n,metadata:[...o,...r]}}}}}}}),Bh=hh({reducers:{draft:{values:{editorState:{change:e=>e.innerProps.evt,keyCommand:e=>{const{evt:t,value:n}=e.innerProps,r=Sg.RichUtils.handleKeyCommand(n,t);return r||n}},isComposing:{compositionStart:()=>!0,compositionEnd:()=>!1},isFocused:{focus:()=>!0,blur:()=>!1}}}}});function Ih(e){const t=e.contentState.getEntity(e.entityKey),r=t&&t.getData().pending,o=n.cx(i.classes.scCommentEditorMention,{[i.classes.pending]:r});return R.createElement("span",{className:o,"data-entity-key":e.entityKey,"data-editor":e.editorKey},e.children)}const Kh=e=>e.reduce(((e,t)=>"mention"===t.type?{mentions:[...e.mentions,t],other:e.other}:{mentions:e.mentions,other:[...e.other,t]}),{mentions:[],other:[]}),Lh=(e,t)=>{if(!t)return[];let n=0;const r=[];for(let o=0;o<e.length&&r.length<t.length;o++){const i=t[r.length];o-n===i.location.start&&jh(e,o)?r.push(i):o===i.location.start&&jh(e,o)&&!Fh(e,o,n)&&r.push({...i,location:{start:i.location.start-n,end:i.location.end-n}}),"\n"===e[o]&&n++}return r},Fh=(e,t,n)=>{let r=t;for(;n>0&&r<e.length;)"\n"!==e[r]&&n--,r++;return jh(e,r)},jh=(e,t)=>t<e.length-1&&"@"===e[t]&&!!e[t+1].match(/\S/),zh=hh({reducers:{draft:{values:{decorators:{init:e=>[...e.innerProps.value,{strategy:function(e,t,n){e.findEntityRanges((function(e){const t=e.getEntity();return null!==t&&"mention"===n.getEntity(t).getType()}),t)},props:{editorKey:e.status.draft.editorKey},component:Ih}]},editorState:{populateWithComment:e=>{const{value:t,evt:n}=e.innerProps,{mentions:r}=Kh(n.metadata);return Sg.EditorState.createWithContent(Lh(n.text,r).reduce(((e,t)=>{const n=e.createEntity("mention","IMMUTABLE",{identifier:t.user.identifier,type:t.user.type}),r=n.getLastCreatedEntityKey(),o=Kg(t.location,n);return Sg.Modifier.applyEntity(e,o,r)}),t.getCurrentContent()))}}}},comment:{values:{content:{post:e=>{const{evt:t,value:n}=e.innerProps,r=(e=>{const{blocks:t}=e,{metadata:n}=t.reduce(((t,n)=>{const{metadata:r,pos:o}=t;return{metadata:[...r,...n.entityRanges.filter((function(t){return"mention"===e.entityMap[t.key].type})).map((function(t){const n=e.entityMap[t.key].data;return{type:"mention",user:{type:n.type,identifier:n.identifier},location:{start:o+t.offset,end:o+t.offset+t.length}}}))],pos:o+Fg(n.text).length}}),{metadata:[],pos:0});return n})(Sg.convertToRaw(t.getCurrentContent())),{other:o}=Kh(n.metadata);return{...n,metadata:[...o,...r]}}}}}}}),Uh=({style:e,className:t,children:n})=>{const{container:r,scope:o}=V(),i=r.getTriggers(o);return R.createElement("span",{className:"active-macro",ref:i.macro.updateMacroRef},R.createElement("span",{className:t,style:e},n))};Uh.displayName="ActiveMacroSpanComponent";n.injectInternalStyle("/static/js/comments2/components/comment_editor/components/mention_suggestions_list_component.module.out-vflbsx3Va.css",(e=>"._sc-comment-editor-mentions-list-container_1fy2i_1{background:var(--dig-color__background__base);font-size:var(--dig-spacing__micro__medium);max-height:180px;overflow-x:hidden;overflow-y:auto;width:calc(100% - 10px);z-index:1000}._sc-comment-editor-mentions-list_1fy2i_1{list-style:none;margin:0;padding:0}._sc-comment-editor-mentions-suggestion_1fy2i_17{background:inherit;border:none;padding:var(--dig-spacing__micro__small);width:100%}._sc-comment-editor-mentions-suggestion_1fy2i_17>div{align-items:center;display:flex;text-align:left}._sc-comment-editor-mentions-suggestion_1fy2i_17 .mc-avatar,._sc-comment-editor-mentions-suggestion_1fy2i_17 .mc-avatar-text{margin-right:var(--dig-spacing__micro__small)}._sc-comment-editor-mentions-email_1fy2i_36,._sc-comment-editor-mentions-name_1fy2i_35{overflow:hidden;text-overflow:ellipsis}._sc-comment-editor-mentions-user_1fy2i_41{overflow:hidden;white-space:nowrap}._sc-comment-editor-mentions-list-container_1fy2i_1{-webkit-font-smoothing:antialiased;border:1px solid var(--dig-color__border__base)}._sc-comment-editor-mentions-suggestion_1fy2i_17{border-top:1px solid var(--dig-color__border__subtle)}._sc-comment-editor-mentions-list-header_1fy2i_55{padding:var(--dig-spacing__micro__small)}._sc-comment-editor-mentions-suggestion_1fy2i_17._sc-comment-editor-mentions-suggestion-selected_1fy2i_59,._sc-comment-editor-mentions-suggestion_1fy2i_17:hover{background-color:var(--dig-color__highlight__blue)}"));const Hh="_sc-comment-editor-mentions-list-container_1fy2i_1",Vh="_sc-comment-editor-mentions-list_1fy2i_1",Wh="_sc-comment-editor-mentions-suggestion_1fy2i_17",qh="_sc-comment-editor-mentions-email_1fy2i_36",$h="_sc-comment-editor-mentions-user_1fy2i_41",Gh="_sc-comment-editor-mentions-list-header_1fy2i_55",Qh="_sc-comment-editor-mentions-suggestion-selected_1fy2i_59",Jh=R.forwardRef((({className:e,index:t,onClick:r,children:o,selected:i},a)=>{const s=n.cx(Wh,e);return R.createElement("li",{role:"option","aria-selected":i?"true":void 0,id:`mentions-option-${t}`,ref:a},R.createElement("button",{className:s,onClick:r,onMouseDown:e=>e.preventDefault()},R.createElement("div",null,o)))}));Jh.displayName="MentionsListItem";const Xh=({children:e})=>R.createElement(n.Text,{tagName:"div",color:"faint",className:Gh},e);Xh.displayName="ListHeader";const Yh=({placeholderMessage:e})=>{const t=r.useIntl();return R.createElement("div",{className:Hh},R.createElement(Xh,null,e?t.formatMessage(e):t.formatMessage({id:"FBlHqR",defaultMessage:"@mention someone to share this file."})))};Yh.displayName="NoResults";const Zh=({active:e,onEmailClick:t})=>{const n=r.useIntl(),o=Lg(e.content.substring(1));return R.createElement("div",{className:Hh},R.createElement(Xh,null,n.formatMessage({id:"vdBwOw",defaultMessage:"No Users Found"})),o&&R.createElement("ul",{className:Vh},R.createElement(Jh,{className:Qh,index:-1,onClick:t},n.formatMessage({id:"l08JFQ",defaultMessage:"Invite {user_name}"},{user_name:o[0]}))))};Zh.displayName="EmptyResults";const ev=({placeholderMessage:e,onMentionStart:t,onMentionSuccess:o,onMentionCanceled:a})=>{const{container:s,scope:c,status:l}=V(),u=r.useIntl(),d=R.useRef(null),p=R.useRef({}),f=R.useCallback((e=>{null==o||o(),s.getTriggers(c).suggestion.updateSelectedIndex(e),s.getTriggers(c).macro.apply(null)}),[s,o,c]),m=R.useCallback((()=>{s.getTriggers(c).macro.apply(null)}),[s,c]);R.useEffect((()=>(null==t||t(),()=>{null==a||a()})),[]),R.useEffect((()=>{const e=l.suggestion.selectedIndex,t=p.current[e];if(t&&d.current){const e=t.getBoundingClientRect(),n=d.current.getBoundingClientRect();e.top<n.top?t.scrollIntoView({behavior:"smooth",block:"start"}):e.bottom>n.bottom&&t.scrollIntoView({behavior:"smooth",block:"end"})}}),[l.suggestion.selectedIndex]);const{macro:{active:g},mentionSuggestions:{users:h},suggestion:{selectedIndex:v}}=l;return g?null===h?R.createElement(Yh,{placeholderMessage:e}):h.length?R.createElement("div",{className:Hh,contentEditable:!1,ref:d},R.createElement(Xh,null,u.formatMessage({id:"e6Shp6",defaultMessage:"Searching contacts…"})),R.createElement("ul",{className:Vh,role:"listbox",id:"mentions-listbox"},h.map(((e,t)=>{const r=v===t,o=n.cx({[Qh]:r});return R.createElement(Jh,{key:t,index:t,className:o,onClick:()=>f(t),ref:e=>p.current[t]=e,selected:r},R.createElement(i.BasicCommentAvatar,{user:e}),R.createElement("div",{className:$h},R.createElement(n.Text,{tagName:"div",title:e.name.display},e.name.display),R.createElement(n.Text,{tagName:"div",size:"small",color:"faint",className:qh,title:e.email},e.email)))})))):R.createElement(Zh,{active:g,onEmailClick:m}):R.createElement("span",null)};ev.displayName="MentionSuggestionsListComponent";const tv={type:"macro: @",delimiter:"@",spanProps:{className:"active-mention"}},nv=e=>{const{delimiter:t}=tv,{text:n,startOffset:r,endOffset:o,input:i}=e.innerProps,a=r-t.length+i.length;if(n.substring(a,r)+i===t&&(0===a||" "===n.substr(a-1,1)))return{start:a,end:o,text:n.substring(a,r)+i}},rv=e=>{const{delimiter:t}=tv,{status:n,innerProps:{value:r}}=e;if(n.macro.active)return r;const o=r.getSelection(),i=r.getCurrentContent().getBlockForKey(o.getAnchorKey()).getText(),a=o.getStartOffset();function s(e,t,n){const r=e.getSelection();return Bg(e,Ig(e.getCurrentContent(),r.getFocusKey(),r.getStartOffset(),r.getEndOffset(),t,n))}let c=r;0!==a&&" "!==i.substr(a-1,1)&&(c=s(r," "));const l=c.getCurrentContent().createEntity(tv.type,"MUTABLE");return s(c,t,l.getLastCreatedEntityKey())},ov=e=>{const t=t=>{const{content:n,entityKey:r,blockKey:i,macroEndOffset:a,macroStartOffset:s}=t.innerProps,{type:c}=tv,l=o(n);return t.triggers.suggestion.updateTotalSuggestions(0),t.triggers.suggestion.updateSelectedIndex(-1),e(l),{blockKey:i,entityKey:r,content:n,type:c,endOffset:a,startOffset:s,chrome:ev}},n=e=>{window.setTimeout((()=>{r(e)}),0)},r=e=>{const{status:t,triggers:n}=e,r=t.draft,o=t.macro,i=r.editorState.getCurrentContent();if(!o.active)return;const s=i.getBlockForKey(o.active.blockKey);function c(e,t){return e.entityKey===t.getEntity()}const l=e.kernel.compose(a);if(l){const e=l.name.public||l.email,t=l.email,i=function(e){return!!o.active&&c(o.active,e)},a=function(i,a){return o.active&&iv({editorState:r.editorState,blockKey:o.active.blockKey,identifier:t,text:e,start:i,end:a},n,l)};s.findEntityRanges(i,a)}else{const e=o.active.content.substring(tv.delimiter.length);if(Lg(e)){const t=function(e){return!!o.active&&c(o.active,e)},i=function(t,i){return o.active&&iv({editorState:r.editorState,blockKey:o.active.blockKey,identifier:e,text:e,start:t,end:i},n,l)};s.findEntityRanges(t,i)}}},o=e=>{const{delimiter:t}=tv;return 0===e.indexOf(t)?e.substring(t.length):e},i=e=>{const t=e.status.macro;if(!t.active)return;const n=e.status.mentionSuggestions,{content:r,type:i}=t.active;if(i===tv.type){const e=o(r);return n.userMap[e]}},a=e=>{const{status:t}=e,n=t.suggestion,{users:r}=t.mentionSuggestions;if(-1!==n.selectedIndex&&null!==r)return r[n.selectedIndex]},s=e=>{const{delimiter:t}=tv,{evt:n,value:r}=e.innerProps,o=r.getSelection(),i=r.getCurrentContent(),a=i.getBlockForKey(o.getAnchorKey());if(t.lastIndexOf(n)===t.length-1){const s=a.getText(),c=o.getStartOffset(),l=o.getEndOffset(),u=a.getEntityAt(c)||a.getEntityAt(c-1);if(null!==u&&0===i.getEntity(u).getType().indexOf("macro: ")){return Bg(r,Sg.Modifier.replaceText(i,o,n,void 0,u))}{const o=e.kernel.compose(nv,{text:s,startOffset:c,endOffset:l,input:n,delimiter:t});if(void 0!==o){const e=i.createEntity(tv.type,"MUTABLE").getLastCreatedEntityKey();return Bg(r,Ig(i,a.getKey(),o.start,o.end,o.text,e))}}}const s=o.getAnchorOffset(),c=a.getEntityAt(s)||a.getEntityAt(s-1);if(null!==c&&i.getEntity(c).getType()===tv.type){if(" "===n){let e=i;if(a.findEntityRanges((function(e){return e.getEntity()===c}),(function(t,r){const s=a.getText().substring(t,r);s.match(/\s/)&&(e=Ig(i,o.getAnchorKey(),t,r,s+n))})),e!==i)return Bg(r,e)}return Bg(r,Sg.Modifier.replaceText(i,o,n,void 0,c))}return r},c=(e,t,n)=>{e.findEntityRanges((function(e){const t=e.getEntity();return null!==t&&n.getEntity(t).getType()===tv.type}),t)};return hh({reducers:{draft:{values:{decorators:{init:e=>{const{value:t}=e.innerProps;return[...t,{strategy:c,component:Uh,props:tv.spanProps}]}},editorState:{change:e=>{const{kernel:n,triggers:r}=e,{delimiter:o,type:i}=tv,a=e.status.draft.editorState,s=a.getSelection();if(s.isCollapsed()){const c=a.getCurrentContent(),l=s.getAnchorKey(),u=c.getBlockForKey(l),d=s.getAnchorOffset(),p=u.getEntityAt(d)||u.getEntityAt(d-1);if(null!==p&&c.getEntity(p).getType()===i){let a="",s=-1,c=-1;u.findEntityRanges((function(e){return e.getEntity()===p}),(function(e,t){s=e,c=t,a=u.getText().substring(e,t)}));const d=e.status.macro.active;(d&&d.entityKey!==p||a.length&&(!d||d.content!==a))&&r.macro.update(n.compose(t,{delimiter:o,content:a,entityKey:p,blockKey:l,macroStartOffset:s,macroEndOffset:c,type:i})||null)}else r.macro.update(null),r.macro.updateVisibility(!0)}},key:e=>{const{status:t,innerProps:{evt:n}}=e,r=t.macro;if(r.active&&39===n.which&&r.active.type===tv.type){e.innerProps.value.getSelection().getAnchorOffset()>=r.active.endOffset&&(e.triggers.macro.apply(null),n.preventDefault())}},returnKey:e=>{const{triggers:t,status:n}=e,r=n.macro;r.active&&r.active.type===tv.type&&t.macro.apply(null)},insertMacro:rv,input:s,pasteText:s}}},macro:{values:{active:{update:e=>{const{evt:t}=e.innerProps;return null===t?null:t&&t.type===tv.type?t:void 0}},macroRef:{updateMacroRef:e=>{const{active:t}=e.status.macro,{evt:n}=e.innerProps;return t&&t.type===tv.type?n:void 0}},isVisible:{updateVisibility:e=>{const{active:t}=e.status.macro,{evt:n}=e.innerProps;return t&&t.type!==tv.type?void 0:n}}},evts:{apply:e=>{const t=e.status.macro;t.active&&t.active.type===tv.type&&e.kernel.compose(n)},update:e=>{e.triggers.mentionSuggestions.queryUpdate(null)}}},mentionSuggestions:{values:{users:{queryUpdate:e=>e.kernel.compose(i)||null}}}},composers:{mentionSuggestions:e=>{var t,n;const{userMap:r,users:o}=null!==(n=null===(t=e.innerProps.prevStatus)||void 0===t?void 0:t.mentionSuggestions)&&void 0!==n?n:{},{userMap:i,users:a}=e.status.mentionSuggestions;r!==i&&e.triggers.mentionSuggestions.queryUpdate(null),o!==a&&a&&e.triggers.suggestion.updateTotalSuggestions(a.length)}}})};function iv(e,t,n){const{editorState:r,mentionKey:o,mentionData:i}=function(e){const{editorState:t,identifier:n,blockKey:r,start:o,end:i,text:a}=e,s={identifier:n,type:"email"},c=t.getCurrentContent().createEntity("mention","IMMUTABLE",s),l=c.getLastCreatedEntityKey(),u=Ig(c,r,o,i,`@${a}`,l);return{editorState:Bg(t,Sg.Modifier.insertText(u,u.getSelectionAfter()," ")),mentionKey:l,mentionData:s}}(e);t.draft.change(r),t.mentionSuggestions.onApplyMentionToRange({mentionKey:o,mentionData:i,user:n})}const av=hh({reducers:{draft:{values:{editorState:{pasteHTML:e=>{const t=e.innerProps.value,r=t.getCurrentContent(),o=t.getSelection(),i=function({html:e,contentState:t,editorKey:r,elementMappers:o=[]}){const i=document.createElement("body");i.innerHTML=e;let a=[];const s=i.textContent||"",c=Array(s.length);let l=[0,0],u="";const d=(e="unstyled")=>{const t=c.slice(l[0],l[1]);a=[...a,(new Sg.ContentBlock).merge({type:e,key:Sg.genKey(),text:u,characterList:n.immutableExports.List(t)})],u="",l=[l[1],l[1]]},p=e=>i=>{switch(i.nodeType){case Node.TEXT_NODE:if(i.textContent){const t=Sg.CharacterMetadata.create(e),n=i.textContent;u+=n;for(let e=0;e<n.length;e++,l[1]++)c[l[1]]=t}break;case Node.ELEMENT_NODE:const a=o.reduce(((e,t)=>t(e)),i);if(a.childNodes.length){let o=e?e.style.toArray():[],i=e?e.entity:null;const s=a.tagName.toLowerCase(),c="true"===a.getAttribute("data-block")||-1!==["p","li","blockquote","pre",...[1,2,3,4,5,6].map((e=>`h${e}`))].indexOf(s);o=[...o,...Ug(a)],i=function(e,t,n){if(e.hasAttribute("data-entity-key")&&e.getAttribute("data-editor")===n){const n=e.getAttribute("data-entity-key");try{return t.getEntity(n),n}catch{}}return null}(a,t,r)||i;const l={style:n.immutableExports.OrderedSet(o)};i&&(l.entity=i),Array.from(a.childNodes).forEach(p(l)),c&&d()}}};return Array.from(i.childNodes).forEach(p()),0===a.length&&d(),n.immutableExports.OrderedMap(a.map((e=>[e.getKey(),e])))}({html:e.innerProps.evt.html,contentState:r,editorKey:e.status.draft.editorKey,elementMappers:[zg]});return Bg(t,Sg.Modifier.replaceWithFragment(r,o,i))}}}}}}),sv=({onEditorStateChange:e,onPost:t,onCancel:n,onFocus:r,onBlur:o,postOnBlur:i})=>hh({reducers:{draft:{values:{editorState:{change:t=>{const n=t.innerProps.value;e(n)}}}},comment:{evts:{post:e=>{const{content:n}=e.innerProps.value;t(n)},cancel:n}},container:{evts:{focus:e=>{r(e.innerProps.evt)},blur:e=>{i&&e.triggers.comment.post(e.status.draft.editorState),o(e.innerProps.evt)}}}}});function cv(e){return function(e,t){return Object.keys(t).reduce((function(t,n){if(!(n in e)||!e[n])throw new TypeError(`${n} is an unsupported feature`);return{...t,[n]:e[n]}}),{})}({draft:{editorKey:Sg.genKey(),editorState:Sg.EditorState.createEmpty(),decorators:[],blockRenderers:{},readOnly:!1,isComposing:!1,isFocused:!1,containerPostOnBlur:!1},comment:{content:{text:"",metadata:[]}},macro:{active:null,macroRef:null,isVisible:!0},suggestion:{selectedIndex:-1,totalSuggestions:0},mentionShareFlow:{popupProps:null},mentionSuggestions:{userMap:{},users:null},container:{isFocused:!1},hyperlink:{linkPromptProps:null}},e)}const lv=e=>{const{blocks:t}=e,{metadata:n}=t.reduce(((t,n)=>{const{metadata:r,pos:o}=t;return{metadata:[...r,...n.entityRanges.filter((function(t){return"sticker"===e.entityMap[t.key].type})).map((function(t){return{...e.entityMap[t.key].data.metadata[0],type:"sticker"}}))],pos:o+n.text.length}}),{metadata:[],pos:0});return n},uv=e=>e.reduce(((e,t)=>"sticker"===t.type?{stickers:[...e.stickers,t],other:e.other}:{stickers:e.stickers,other:[...e.other,t]}),{stickers:[],other:[]}),dv=hh({reducers:{draft:{values:{editorState:{populateWithComment:e=>{const{evt:t}=e.innerProps,{stickers:n}=uv(t.metadata);if(n.length){const e=n[0],t=Sg.ContentState.createFromText("").createEntity("sticker","IMMUTABLE",e),r=t.getLastCreatedEntityKey(),o=Sg.AtomicBlockUtils.insertAtomicBlock(Sg.EditorState.createWithContent(t),r,"*").getCurrentContent().getBlockMap().skip(1).first(),i=Sg.ContentState.createFromBlockArray([o]);return Sg.EditorState.createWithContent(i)}}}}},comment:{values:{content:{post:e=>{const{evt:t,value:n}=e.innerProps,r=lv(Sg.convertToRaw(t.getCurrentContent())),{other:o}=uv(n.metadata);return{...n,metadata:[...o,...r]}}}}}}}),pv=e=>{const{blocks:t}=e,{metadata:n}=t.reduce(((e,t)=>{const{metadata:n,pos:r}=e;return{metadata:[...n,...t.inlineStyleRanges.map((function(e){return{type:"style",style:e.style.toLowerCase(),location:{start:r+e.offset,end:r+e.offset+e.length}}}))],pos:r+Fg(t.text).length}}),{metadata:[],pos:0});return n},fv=e=>e.reduce(((e,t)=>"style"===t.type?{styles:[...e.styles,t],other:e.other}:{styles:e.styles,other:[...e.other,t]}),{styles:[],other:[]}),mv=hh({reducers:{draft:{values:{editorState:{populateWithComment:e=>{const{value:t,evt:n}=e.innerProps,{styles:r}=fv(n.metadata);return Sg.EditorState.createWithContent(r.reduce(((e,t)=>{const n=Kg(t.location,e);return Sg.Modifier.applyInlineStyle(e,n,t.style.toUpperCase())}),t.getCurrentContent()))}}}},comment:{values:{content:{post:e=>{const{evt:t,value:n}=e.innerProps,r=pv(Sg.convertToRaw(t.getCurrentContent())),{other:o}=fv(n.metadata);return{...n,metadata:[...o,...r]}}}}}}}),gv=hh({reducers:{draft:{evts:{key:e=>{const{triggers:t,status:n,innerProps:{evt:r}}=e;if(n.macro.active)switch(r.which){case 38:t.suggestion.up(1);break;case 40:t.suggestion.down(1);break;case 27:t.macro.update(null),t.macro.updateVisibility(!1)}}}},suggestion:{values:{selectedIndex:{up:e=>{const{totalSuggestions:t}=e.status.suggestion,{evt:n,value:r}=e.innerProps;return((Math.max(r,0)-n)%t+t)%t},down:e=>{const{totalSuggestions:t}=e.status.suggestion,{evt:n,value:r}=e.innerProps;return(r+n)%t},updateSelectedIndex:e=>{const{evt:t}=e.innerProps;return t}},totalSuggestions:{updateTotalSuggestions:e=>{const{evt:t}=e.innerProps;if(t!==e.status.suggestion.totalSuggestions)return e.triggers.suggestion.updateSelectedIndex(-1),t}}}}},composers:{mentionSuggestions:({status:e,triggers:t})=>{const{users:n}=e.mentionSuggestions;n&&t.suggestion.updateTotalSuggestions(n.length)}}}),hv=hh({reducers:{draft:{values:{editorState:{populateWithComment:e=>{const{evt:t}=e.innerProps;return Sg.EditorState.createWithContent(Sg.ContentState.createFromText(t.text))}}}},comment:{values:{content:{post:e=>{const{evt:t}=e.innerProps;return{metadata:[],text:t.getCurrentContent().getPlainText()}}}}}}}),vv=(e,t)=>Sg.EditorState.set(e,{decorator:new Sg.CompositeDecorator(t)}),yv=hh({composers:{comment:e=>{var t;const n=e.status.comment.content;if((null===(t=e.innerProps.prevStatus)||void 0===t?void 0:t.comment.content)!==n){e.triggers.draft.init(null);const{editorState:t}=e.triggers.draft.populateWithComment(n);e.triggers.draft.change(t)}},draft:e=>{var t;const{editorState:n}=e.status.draft;(null===(t=e.innerProps.prevStatus)||void 0===t?void 0:t.draft.editorState)!==n&&e.triggers.draft.change(n)}},reducers:{draft:{values:{editorState:{change:e=>{const{value:t}=e.innerProps,{decorators:n}=e.status.draft;return null===t.getDecorator()?vv(t,n):void 0}}}}}}),_v={evts:["init","populateWithComment","change","key","keyCommand","returnKey","input","pasteText","pasteHTML","insertMacro","focus","blur","compositionStart","compositionEnd","readOnly"],values:["editorKey","editorState","readOnly","decorators","isComposing","isFocused","blockRenderers"]},bv={evts:["cancel","post"],values:["content"]},kv={draft:_v,comment:bv,macro:{evts:["update","apply","updateMacroRef","updateVisibility"],values:["active","macroRef","isVisible"]},mentionShareFlow:{evts:["updatePopupProps","onShare","onShareCompleted"],values:["popupProps"]},mentionSuggestions:{evts:["queryUpdate","onApplyMentionToRange"],values:["userMap","users"]},suggestion:{evts:["updateSelectedIndex","updateTotalSuggestions","up","down"],values:["selectedIndex","totalSuggestions"]},container:{evts:["focus","blur","updateFocus"],values:["isFocused"]}},wv=()=>{};class Cv extends xh{get scopeNames(){return kv}getLayerProps(e){const{mentionShareFlowHandlers:t=vh,onMentionsQueryUpdated:n=wv,onPost:r=wv,onCancel:o=wv,onEditorStateChange:i=wv,onFocus:a=wv,onBlur:s=wv,postOnBlur:c,readOnly:l,mentionsDisabled:u}=e;return{mentionShareFlowHandlers:t,onMentionsQueryUpdated:n,onPost:r,onCancel:o,onEditorStateChange:i,onFocus:a,onBlur:s,postOnBlur:c,readOnly:l,mentionsDisabled:u}}mapPropsToLayers(e){const{mentionShareFlowHandlers:t,onMentionsQueryUpdated:n,onPost:r,onCancel:o,onEditorStateChange:i,onFocus:a,onBlur:s,postOnBlur:c,mentionsDisabled:l}=this.getLayerProps(e),u=[Mh,Bh,av,hv,Ph,mv,dv,sv({onEditorStateChange:i,onPost:r,onCancel:o,onFocus:a,onBlur:s,postOnBlur:c}),gv,yv];return l?u:u.concat([zh,ov(n),yh(t)])}createDefaultStatus(){const e=cv(this.scopeNames);return{...e,draft:{...e.draft,containerPostOnBlur:!!this.props.postOnBlur}}}mapPropsToUpdates(e,t){let r={};const o=!!t.mentionShareFlow.popupProps||!!e.readOnly;e.content!==t.comment.content&&(r={...r,comment:{...t.comment,content:e.content}}),o!==t.draft.readOnly&&(r={...r,draft:{...t.draft,editorState:t.draft.editorState,readOnly:o}});const i=n.defaultMemoize(((e,t)=>({[e]:t}))),a=e.mentionsSearchResults?i(e.mentionsSearchResults.currentQuery,e.mentionsSearchResults.result):void 0;return a!==t.mentionSuggestions.userMap&&(r={...r,mentionSuggestions:{...t.mentionSuggestions,userMap:a||{}}}),r}}const Sv=({signalComponent:e,forceCancelEnabled:t,annotationElement:n})=>{const{container:r,scope:o,status:i}=V(),a=R.useMemo((()=>({cancel:()=>{const e=r.getTriggers(o);e.comment.cancel(null),e.container.updateFocus(!1)},insertMention:()=>{r.getTriggers(o).draft.insertMacro("")},post:()=>{const e=r.getTriggers(o);e.comment.post(r.getStatus().draft.editorState),e.container.updateFocus(!1)}})),[r,o]),{draft:{editorState:s,isFocused:c},container:{isFocused:l}}=i,u=""===s.getCurrentContent().getPlainText().trim(),d=!u,p=!u||!!t||l;return R.createElement(e,{postEnabled:d,cancelEnabled:p,signals:a,isEmpty:u,isEditorFocused:c,isContainerFocused:l,annotationElement:n})};Sv.displayName="PostComponent";n.injectInternalStyle("/static/js/comments2/components/sticker_component/index.module.out-vfljPLNfx.css",(e=>"._sc-sticker-component_3negs_1{align-self:center;display:inline;margin-right:var(--spacing__unit--0_5);position:relative}._sticker-container_3negs_8{background:var(--dig-color__background__base);box-shadow:var(--boxshadow__elevation1);height:244px;position:absolute;width:285px}._sc-sticker-nav_3negs_17{height:40px;overflow:hidden;position:relative;white-space:nowrap}._sc-sticker-nav-item_3negs_24{background:transparent;cursor:pointer;height:40px;opacity:.7;padding:2px 7px;text-align:center;width:48px}._sc-sticker-inner_3negs_34{overflow:hidden;width:268px}._sc-sticker-pane-scroll_3negs_39{float:left;height:203px;overflow-y:scroll;padding:0 2px}._sc-sticker-pane-scroll-upward_3negs_46{float:left;height:204px;overflow-y:scroll;padding:0 2px}._sc-sticker-option_3negs_53{background:transparent;cursor:pointer;margin:5px;padding:0}._sc-sticker-option_3negs_53,._sc-sticker-option-sticker_3negs_62{height:56px;width:56px}._sc-sticker-pack_3negs_67{display:none}._sc-sticker-pack-is-selected_3negs_71{display:block}._sc-sticker-option-sticker-gif_3negs_75{height:56px;width:56px}._sc-sticker-option-sticker-gif-invisible_3negs_80{display:none}"));const Ev="_sc-sticker-component_3negs_1",xv="_sticker-container_3negs_8",Mv="_sc-sticker-pane-scroll_3negs_39",Tv="_sc-sticker-pane-scroll-upward_3negs_46",Av="_sc-sticker-option_3negs_53",Ov="_sc-sticker-option-sticker_3negs_62",Dv="_sc-sticker-pack_3negs_67",Rv="_sc-sticker-pack-is-selected_3negs_71",Nv="_sc-sticker-option-sticker-gif_3negs_75",Pv="_sc-sticker-option-sticker-gif-invisible_3negs_80";class Bv extends R.Component{constructor(){super(...arguments),this.preventDefault=e=>e.preventDefault()}render(){const{label:e,onClick:t,isActive:r,buttonRef:o}=this.props;return R.createElement(n.IconButton,{className:i.classes.scCommentEditorControlBtn,onClick:t,"aria-label":e,"aria-haspopup":"true","aria-expanded":r,variant:"transparent",size:"small",shape:"standard",onMouseDown:this.preventDefault,ref:o,"data-testid":"right-accessory-sticker-button"},R.createElement(n.UIIcon,{src:s.EmojiSmileLine}))}}Bv.displayName="StickerButton";const Iv=({sticker:e,onClick:o})=>{const[i,a]=t.useState(!1),s=r.useIntl().formatMessage({id:"rnb7YE",defaultMessage:"Insert {description}"},{description:e.description});return R.createElement(n.StylelessButton,{className:Av,"aria-label":s,onClick:()=>{const t=e.is_live_sticker?`${e.base_url}?type=gif`:`${e.base_url}?type=png`;o(e.id,t,e.name)}},e.is_live_sticker&&R.createElement("img",{className:i?Nv:Pv,src:`${e.base_url}?type=gif`,alt:e.description,title:e.description,onLoad:()=>{a(!0)}}),!i&&R.createElement("img",{className:Ov,alt:e.description,title:e.description,src:`${e.base_url}?type=png`}))};Iv.displayName="StickerOption";class Kv extends R.Component{get className(){return n.cx(Dv,{[Rv]:this.props.isSelected})}render(){const{stickerPack:e}=this.props;return R.createElement("div",{className:this.className},e.stickers.map((e=>R.createElement(Iv,{sticker:e,onClick:this.props.onStickerSelected,key:e.id}))))}}Kv.displayName="StickerPaneComponent";n.injectInternalStyle("/static/js/comments2/components/sticker_component/sticker_tab.module.out-vflkmBpH8.css",(e=>"li._sticker-tab_6as9v_1{align-items:center;display:flex;flex:0 0 40px;justify-content:center;padding-left:0;padding-right:0}"));const Lv=({stickerPacks:e})=>{const t=r.useIntl();return R.createElement(c.Tabs.Group,{justified:!0},e.map((e=>R.createElement(c.Tabs.Tab,{key:e.id,id:e.id.toString(),"aria-label":t.formatMessage({id:"u842ND",defaultMessage:"Select {description}"},{description:e.description}),className:"_sticker-tab_6as9v_1"},R.createElement("img",{src:e.url,alt:e.description})))))};Lv.displayName="StickerTabs";const Fv=({stickerPacks:e,openUpward:t,onStickerSelected:r,anchorRef:o})=>{const[i,a]=R.useState(e[0].id.toString()),s=e.map((e=>R.createElement(c.Tabs.Panel,{tabId:e.id.toString(),key:e.id},R.createElement(Kv,{stickerPack:e,isSelected:e.id.toString()===i,onStickerSelected:r}))));return R.createElement(n.Overlay,{placement:t?"top-end":"bottom-end",anchorRef:o,auto:!0,className:xv,offsetDistance:10},R.createElement(c.Tabs,{selectedTab:i,onSelection:a},R.createElement(Lv,{stickerPacks:e}),R.createElement("div",{className:t?Tv:Mv},s)))};Fv.displayName="Stickers";const jv=({stickerPacks:e,onStickerStart:t,onStickerSuccess:o,onStickerCanceled:i,openUpward:a})=>{const{container:s,scope:c,status:l}=V(),u=R.useRef(null),[d,p]=R.useState(!1),f=r.useIntl(),m=R.useCallback(((e,t,n)=>{p(!1),null==o||o();const r={metadata:[{type:"sticker",id:e,url:t,name:n}],text:n},i=Sg.ContentState.createFromText("").createEntity("sticker","IMMUTABLE",r),a=i.getLastCreatedEntityKey(),l=Sg.AtomicBlockUtils.insertAtomicBlock(Sg.EditorState.createWithContent(i),a,"*"),u=s.getTriggers(c);u.comment.post(l),u.container.updateFocus(!1),document.activeElement&&document.activeElement.blur()}),[s,c,o]),g=R.useCallback((()=>{d||null==t||t(),p((e=>!e))}),[t,d]),h=R.useCallback((()=>{null==i||i(),p(!1)}),[i]),v=""===l.draft.editorState.getCurrentContent().getPlainText().trim(),y=e&&e.length>0;return y&&v?R.createElement("div",{className:Ev},R.createElement(Bv,{label:f.formatMessage({id:"Bg2T2/",defaultMessage:"Sticker menu"}),isActive:d,onClick:g,buttonRef:u}),y&&R.createElement(n.ClickOutside,{isActive:d,onClickOutside:h},d&&R.createElement(Fv,{stickerPacks:e,openUpward:a,onStickerSelected:m,anchorRef:u}))):null};jv.displayName="StickerComponent";const zv=n.atom(void 0),Uv=n.atom(!1),Hv=({annotation:e,tagline:r,forceCancelEnabled:o,postSignalComponent:a,author:s,renderBare:c,className:l,stickerPacks:u,rightAccessory:d,disabled:p,placeholder:f,content:m,onEditorStateChange:g,onPost:h,onCancel:v,onFocus:y,onBlur:_,onMentionsQueryUpdated:b,postOnBlur:k,mentionShareFlowHandlers:w,readOnly:C,mentionsDisabled:S,setEditorRef:E,shouldFocus:x,a11yEditorLabel:M,editorRef:T,hideRightAccessory:A,onStickerStart:O,onStickerSuccess:D,onStickerCanceled:N,onMentionStart:P,onMentionSuccess:B,onMentionCanceled:I,openUpward:K,isLoggedOut:L,onlyShowReactionBar:F})=>{const j=i.classes.scCommentEditorInteractionContainer,z=n.useSelector(n.getMentionsSearchResult),U=n.useDispatch(),{commentsBladeId:H}=n.useCommentsContext(),[,V]=n.useAtom(zv),W=t.useRef(null),G=n.useSetAtom(n.focusedThreadIdAtom),Q=R.useCallback((()=>{V(void 0),U(n.cancelAnnotating(H)),U(n.deactivateAllThreads({fileViewerId:H})),G(void 0)}),[H,U,V,G]),J=R.useCallback((async(e,t)=>{null==h||h(e,t)}),[h]),X=R.createElement(R.Fragment,null,R.createElement(Cv,{content:m,onEditorStateChange:g,onPost:J,onCancel:v,onFocus:y,onBlur:_,onMentionsQueryUpdated:b,mentionsSearchResults:z,postOnBlur:k,mentionShareFlowHandlers:w,readOnly:C,mentionsDisabled:L||S},!F&&R.createElement(mh,{disabled:p},R.createElement("div",{className:n.cx(i.classes.scCommentEditorInner,i.classes.scCommentEditorInnerRightRail,{[i.classes.scCommentEditorInnerDisabled]:!!p})},R.createElement("div",{className:i.classes.scCommentEditorAvatarWrapper,ref:W},R.createElement(i.DIGCommentAvatar,{user:s})),R.createElement("div",{className:j},R.createElement(qg,{setRef:E,shouldFocus:x,a11yEditorLabel:M,disabled:p,placeholder:f,spellCheck:!0,clearCommentStates:Q}),R.createElement(q,{scrollClassName:j,onMentionStart:P,onMentionSuccess:B,onMentionCanceled:I,openUpward:K})),R.createElement(Wv,{stickerPacks:u,rightAccessory:d,hideRightAccessory:A,editorRef:T,disabled:p,mentionsDisabled:L||S,onStickerStart:O,onStickerSuccess:D,onStickerCanceled:N,openUpward:K})),R.createElement(Sv,{forceCancelEnabled:o,signalComponent:a,annotationElement:e})),!F&&R.createElement($,null,r)));if(c)return X;{const e=n.cx(l,i.classes.scCommentEditor);return R.createElement("div",{className:e},X)}};function Vv(e){const{onClick:t,label:r,size:o,className:a}=e;return R.createElement(n.Tooltip,{title:r,placement:"top"},R.createElement(n.IconButton,{"aria-label":r,className:n.cx(i.classes.scCommentEditorControlBtn,a),onClick:t,variant:"transparent",size:o,onMouseDown:e=>e.preventDefault()},R.createElement(n.UIIcon,{src:s.MentionLine})))}Hv.displayName="CommentEditor";const Wv=({stickerPacks:e,rightAccessory:t,editorRef:n,disabled:o,mentionsDisabled:a,hideRightAccessory:s,onStickerStart:c,onStickerSuccess:l,onStickerCanceled:u,openUpward:d})=>{const p=r.useIntl(),{container:f,scope:m,status:g}=V(),{draft:{editorState:h},container:{isFocused:v}}=g,y=""===h.getCurrentContent().getPlainText().trim();return R.createElement(R.Fragment,null,!!t&&!(null==s?void 0:s(v,y))&&R.createElement("div",{className:i.classes.scCommentEditorRightAccessory},t),!(o||a)&&R.createElement("div",{className:i.classes.scCommentEditorRightAccessory},R.createElement(Vv,{label:p.formatMessage({id:"b57X9o",defaultMessage:"Tag someone"}),onClick:()=>{null==n||n.focus(),f.getTriggers(m).draft.insertMacro("")},size:"small"})),!o&&e&&R.createElement(jv,{stickerPacks:e,onStickerStart:c,onStickerSuccess:l,onStickerCanceled:u,openUpward:null!=d&&d}))};function qv(){return{text:"",metadata:[],timestamp:new Date}}Wv.displayName="EditorRightAccessories";const $v=R.memo((({label:e,disabled:t,onClick:r,size:o,className:i})=>R.createElement(n.Button,{className:i,disabled:t,onClick:r,variant:"transparent",size:o},e)));$v.displayName="CancelButton";const Gv=R.memo((({label:e,disabled:t,onClick:r,size:o,className:i})=>R.createElement(n.Button,{className:i,disabled:t,onClick:r,variant:"primary",size:o},e)));Gv.displayName="PostButton";const Qv=R.memo((e=>{const{children:t,cancelEnabled:r,cancelLabel:o,postEnabled:a,postLabel:s,signals:c}=e;return R.createElement("div",{className:i.classes.scCommentEditorControlsContainer},R.createElement("div",{className:i.classes.scCommentEditorControls},R.createElement("div",{className:"sc-comment-editor-controls-left"},t),R.createElement("div",{className:i.classes.scCommentEditorControlsRight},R.createElement($v,{label:o,disabled:!r,onClick:c.cancel,size:"small",className:n.cx(i.classes.scCommentEditorControlsCancelRightRail)}),R.createElement(Gv,{label:s,disabled:!a,onClick:c.post,size:"small",className:n.cx(i.classes.scCommentEditorControlsPostRightRail)}))))}));function Jv(e){return R.createElement("div",{className:i.classes.scCommentEditorInlineControls},e.children)}Qv.displayName="PostBar";const Xv=e=>{const{postEnabled:t,cancelEnabled:n,isEmpty:o,annotationElement:a,isContainerFocused:s}=e,c=r.useIntl(),l=R.createElement("div",{className:i.classes.scCommentEditorPostBarLeftWrapper},a&&R.createElement("div",{className:i.classes.scCommentEditorPostBarAnnotation},a)),u=!o||s,d=u?l:void 0;return u||t||n?R.createElement(Qv,{...e,postLabel:c.formatMessage({id:"7Oex9C",defaultMessage:"Post"}),cancelLabel:c.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})},d):R.createElement(Jv,null,d)};Xv.displayName="CommentStreamPostBarImpl";const Yv=R.memo(Xv);Yv.displayName="CommentStreamPostBar";const Zv=({thirdPartySource:e,intl:t})=>e?R.createElement(R.Fragment,null,t.formatMessage({id:"62pp19",defaultMessage:"Comment will only post to Dropbox."})):null;Zv.displayName="FirstPartyCommentAdvisory";const ey={oldest:r.defineMessage({id:"kLxqWH",defaultMessage:"Oldest"}),unread:r.defineMessage({id:"HUZzUG",defaultMessage:"Unread"}),timestamp:r.defineMessage({id:"EUJjNP",defaultMessage:"Timestamp"}),newest:r.defineMessage({id:"P7IQMf",defaultMessage:"Most recent"}),page:r.defineMessage({id:"Xet9GR",defaultMessage:"By page"})},ty=({sortType:e,label:t,isChecked:r})=>R.default.createElement(n.Menu.SelectItem,{key:e,value:e,role:"menuitemcheckbox",selected:r,"aria-checked":r,"aria-label":t},t);ty.displayName="SortMenuItem";const ny=({currentSort:e,setSort:t,availableSortOpts:o})=>{const i=R.default.useRef(n.DefaultSortType),a=r.useIntl(),s=R.default.useCallback((e=>t(e)),[t]),c=R.default.useCallback((({isOpen:e})=>{e&&(i.current=o)}),[o]);return R.default.createElement("div",{className:eh},R.default.createElement(n.Menu.Wrapper,{isPortaled:!1,onSelection:s,onToggle:c},(({getContentProps:t,getTriggerProps:r})=>R.default.createElement(R.default.Fragment,null,R.default.createElement(l.Chip,{withDropdownIcon:!0,...r(),selectedStyle:"stroke"},R.default.createElement(l.Chip.Content,null,a.formatMessage({id:"eca0uz",defaultMessage:"Sort by"}))),R.default.createElement(n.Menu.Content,{...t(),style:{width:296}},R.default.createElement(n.Menu.Segment,null,i.current.map((t=>R.default.createElement(ty,{key:t,sortType:t,label:a.formatMessage(ey[t]),isChecked:e===t})))))))))};var ry;function oy({countMsg:e,onClick:t,direction:n},{}){const r=n===ry.UP?"↑":"↓",o=`${Xg} ${n===ry.UP?Zg:th}}`;return R.createElement("div",{className:o,onClick:t},R.createElement("div",{className:Yg},R.createElement("span",{className:nh},r),R.createElement("span",{className:"unread-count"},e)))}ny.displayName="SortChip",function(e){e.DOWN="DOWN",e.UP="UP"}(ry||(ry={}));class iy extends R.PureComponent{constructor(){super(...arguments),this.maybeRenderUnreadPill=(e,t,n)=>this.props.showUnreadPill&&e&&t?R.createElement(oy,{countMsg:this.props.countMsgFn(e),onClick:()=>this.props.onItemActivated(t),direction:n}):null}render(){const{visibilityData:e,children:t}=this.props;return R.createElement("div",{className:Qg},this.maybeRenderUnreadPill(e.countAbove,e.nearestAbove,ry.UP),t,this.maybeRenderUnreadPill(e.countBelow,e.nearestBelow,ry.DOWN))}}function ay(e){return e&&e.__esModule?e.default:e}function sy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}iy.displayName="UnreadPillWrapper";var cy,ly,uy,dy,py,fy,my={},gy=[],hy=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function vy(e,t){for(var n in t)e[n]=t[n];return e}function yy(e){var t=e.parentNode;t&&t.removeChild(e)}function _y(e,t,n){var r,o,i,a={};for(i in t)"key"==i?r=t[i]:"ref"==i?o=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?cy.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return by(e,a,r,o,null)}function by(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++uy:o};return null==o&&null!=ly.vnode&&ly.vnode(i),i}function ky(e){return e.children}function wy(e,t){this.props=e,this.context=t}function Cy(e,t){if(null==t)return e.__?Cy(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?Cy(e):null}function Sy(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Sy(e)}}function Ey(e){(!e.__d&&(e.__d=!0)&&dy.push(e)&&!xy.__r++||fy!==ly.debounceRendering)&&((fy=ly.debounceRendering)||py)(xy)}function xy(){for(var e;xy.__r=dy.length;)e=dy.sort((function(e,t){return e.__v.__b-t.__v.__b})),dy=[],e.some((function(e){var t,n,r,o,i,a;e.__d&&(i=(o=(t=e).__v).__e,(a=t.__P)&&(n=[],(r=vy({},o)).__v=o.__v+1,By(a,o,r,t.__n,void 0!==a.ownerSVGElement,null!=o.__h?[i]:null,n,null==i?Cy(o):i,o.__h),Iy(n,o),o.__e!=i&&Sy(o)))}))}function My(e,t,n,r,o,i,a,s,c,l){var u,d,p,f,m,g,h,v=r&&r.__k||gy,y=v.length;for(n.__k=[],u=0;u<t.length;u++)if(null!=(f=n.__k[u]=null==(f=t[u])||"boolean"==typeof f?null:"string"==typeof f||"number"==typeof f||"bigint"==typeof f?by(null,f,null,null,f):Array.isArray(f)?by(ky,{children:f},null,null,null):f.__b>0?by(f.type,f.props,f.key,null,f.__v):f)){if(f.__=n,f.__b=n.__b+1,null===(p=v[u])||p&&f.key==p.key&&f.type===p.type)v[u]=void 0;else for(d=0;d<y;d++){if((p=v[d])&&f.key==p.key&&f.type===p.type){v[d]=void 0;break}p=null}By(e,f,p=p||my,o,i,a,s,c,l),m=f.__e,(d=f.ref)&&p.ref!=d&&(h||(h=[]),p.ref&&h.push(p.ref,null,f),h.push(d,f.__c||m,f)),null!=m?(null==g&&(g=m),"function"==typeof f.type&&f.__k===p.__k?f.__d=c=Ty(f,c,e):c=Oy(e,f,p,v,m,c),"function"==typeof n.type&&(n.__d=c)):c&&p.__e==c&&c.parentNode!=e&&(c=Cy(p))}for(n.__e=g,u=y;u--;)null!=v[u]&&("function"==typeof n.type&&null!=v[u].__e&&v[u].__e==n.__d&&(n.__d=Cy(r,u+1)),Ly(v[u],v[u]));if(h)for(u=0;u<h.length;u++)Ky(h[u],h[++u],h[++u])}function Ty(e,t,n){for(var r,o=e.__k,i=0;o&&i<o.length;i++)(r=o[i])&&(r.__=e,t="function"==typeof r.type?Ty(r,t,n):Oy(n,r,r,o,r.__e,t));return t}function Ay(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){Ay(e,t)})):t.push(e)),t}function Oy(e,t,n,r,o,i){var a,s,c;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),a=null;else{for(s=i,c=0;(s=s.nextSibling)&&c<r.length;c+=2)if(s==o)break e;e.insertBefore(o,i),a=i}return void 0!==a?a:o.nextSibling}function Dy(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||hy.test(t)?n:n+"px"}function Ry(e,t,n,r,o){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Dy(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Dy(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?Py:Ny,i):e.removeEventListener(t,i?Py:Ny,i);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function Ny(e){this.l[e.type+!1](ly.event?ly.event(e):e)}function Py(e){this.l[e.type+!0](ly.event?ly.event(e):e)}function By(e,t,n,r,o,i,a,s,c){var l,u,d,p,f,m,g,h,v,y,_,b=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(c=n.__h,s=t.__e=n.__e,t.__h=null,i=[s]),(l=ly.__b)&&l(t);try{e:if("function"==typeof b){if(h=t.props,v=(l=b.contextType)&&r[l.__c],y=l?v?v.props.value:l.__:r,n.__c?g=(u=t.__c=n.__c).__=u.__E:("prototype"in b&&b.prototype.render?t.__c=u=new b(h,y):(t.__c=u=new wy(h,y),u.constructor=b,u.render=Fy),v&&v.sub(u),u.props=h,u.state||(u.state={}),u.context=y,u.__n=r,d=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=b.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=vy({},u.__s)),vy(u.__s,b.getDerivedStateFromProps(h,u.__s))),p=u.props,f=u.state,d)null==b.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(null==b.getDerivedStateFromProps&&h!==p&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(h,y),!u.__e&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(h,u.__s,y)||t.__v===n.__v){u.props=h,u.state=u.__s,t.__v!==n.__v&&(u.__d=!1),u.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),u.__h.length&&a.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(h,u.__s,y),null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(p,f,m)}))}u.context=y,u.props=h,u.state=u.__s,(l=ly.__r)&&l(t),u.__d=!1,u.__v=t,u.__P=e,l=u.render(u.props,u.state,u.context),u.state=u.__s,null!=u.getChildContext&&(r=vy(vy({},r),u.getChildContext())),d||null==u.getSnapshotBeforeUpdate||(m=u.getSnapshotBeforeUpdate(p,f)),_=null!=l&&l.type===ky&&null==l.key?l.props.children:l,My(e,Array.isArray(_)?_:[_],t,n,r,o,i,a,s,c),u.base=t.__e,t.__h=null,u.__h.length&&a.push(u),g&&(u.__E=u.__=null),u.__e=!1}else null==i&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=function(e,t,n,r,o,i,a,s){var c,l,u,d=n.props,p=t.props,f=t.type,m=0;if("svg"===f&&(o=!0),null!=i)for(;m<i.length;m++)if((c=i[m])&&"setAttribute"in c==!!f&&(f?c.localName===f:3===c.nodeType)){e=c,i[m]=null;break}if(null==e){if(null===f)return document.createTextNode(p);e=o?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,p.is&&p),i=null,s=!1}if(null===f)d===p||s&&e.data===p||(e.data=p);else{if(i=i&&cy.call(e.childNodes),l=(d=n.props||my).dangerouslySetInnerHTML,u=p.dangerouslySetInnerHTML,!s){if(null!=i)for(d={},m=0;m<e.attributes.length;m++)d[e.attributes[m].name]=e.attributes[m].value;(u||l)&&(u&&(l&&u.__html==l.__html||u.__html===e.innerHTML)||(e.innerHTML=u&&u.__html||""))}if(function(e,t,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in t||Ry(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||Ry(e,i,t[i],n[i],r)}(e,p,d,o,s),u)t.__k=[];else if(m=t.props.children,My(e,Array.isArray(m)?m:[m],t,n,r,o&&"foreignObject"!==f,i,a,i?i[0]:n.__k&&Cy(n,0),s),null!=i)for(m=i.length;m--;)null!=i[m]&&yy(i[m]);s||("value"in p&&void 0!==(m=p.value)&&(m!==d.value||m!==e.value||"progress"===f&&!m)&&Ry(e,"value",m,d.value,!1),"checked"in p&&void 0!==(m=p.checked)&&m!==e.checked&&Ry(e,"checked",m,d.checked,!1))}return e}(n.__e,t,n,r,o,i,a,c);(l=ly.diffed)&&l(t)}catch(e){t.__v=null,(c||null!=i)&&(t.__e=s,t.__h=!!c,i[i.indexOf(s)]=null),ly.__e(e,t,n)}}function Iy(e,t){ly.__c&&ly.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){ly.__e(e,t.__v)}}))}function Ky(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){ly.__e(e,n)}}function Ly(e,t,n){var r,o;if(ly.unmount&&ly.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Ky(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){ly.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Ly(r[o],t,"function"!=typeof e.type);n||null==e.__e||yy(e.__e),e.__e=e.__d=void 0}function Fy(e,t,n){return this.constructor(e,n)}function jy(e,t,n){var r,o,i;ly.__&&ly.__(e,t),o=(r="function"==typeof n)?null:n&&n.__k||t.__k,i=[],By(t,e=(!r&&n||t).__k=_y(ky,null,[e]),o||my,my,void 0!==t.ownerSVGElement,!r&&n?[n]:o?null:t.firstChild?cy.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r),Iy(i,e)}cy=gy.slice,ly={__e:function(e,t){for(var n,r,o;t=t.__;)if((n=t.__c)&&!n.__)try{if((r=n.constructor)&&null!=r.getDerivedStateFromError&&(n.setState(r.getDerivedStateFromError(e)),o=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),o=n.__d),o)return n.__E=n}catch(t){e=t}throw e}},uy=0,wy.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=vy({},this.state),"function"==typeof e&&(e=e(vy({},n),this.props)),e&&vy(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),Ey(this))},wy.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ey(this))},wy.prototype.render=ky,dy=[],py="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,xy.__r=0;var zy=0;function Uy(e,t,n,r,o){var i,a,s={};for(a in t)"ref"==a?i=t[a]:s[a]=t[a];var c={type:e,props:s,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--zy,__source:r,__self:o};if("function"==typeof e&&(i=e.defaultProps))for(a in i)void 0===s[a]&&(s[a]=i[a]);return ly.vnode&&ly.vnode(c),c}var Hy={set:function(e,t){try{window.localStorage[`emoji-mart.${e}`]=JSON.stringify(t)}catch(e){}},get:function(e){try{const t=window.localStorage[`emoji-mart.${e}`];if(t)return JSON.parse(t)}catch(e){}}};const Vy=new Map,Wy=[{v:14,emoji:"🫠"},{v:13.1,emoji:"😶‍🌫️"},{v:13,emoji:"🥸"},{v:12.1,emoji:"🧑‍🦰"},{v:12,emoji:"🥱"},{v:11,emoji:"🥰"},{v:5,emoji:"🤩"},{v:4,emoji:"👱‍♀️"},{v:3,emoji:"🤣"},{v:2,emoji:"👋🏻"},{v:1,emoji:"🙃"}];function qy(e){if(Vy.has(e))return Vy.get(e);const t=$y(e);return Vy.set(e,t),t}const $y=(()=>{let e=null;try{navigator.userAgent.includes("jsdom")||(e=document.createElement("canvas").getContext("2d",{willReadFrequently:!0}))}catch(e){}if(!e)return()=>!1;const t=20,n=Math.floor(12.5);return e.font=n+"px Arial, Sans-Serif",e.textBaseline="top",e.canvas.width=40,e.canvas.height=25,n=>{e.clearRect(0,0,40,25),e.fillStyle="#FF0000",e.fillText(n,0,22),e.fillStyle="#0000FF",e.fillText(n,t,22);const r=e.getImageData(0,0,t,25).data,o=r.length;let i=0;for(;i<o&&!r[i+3];i+=4);if(i>=o)return!1;const a=t+i/4%t,s=Math.floor(i/4/t),c=e.getImageData(a,s,1,1).data;return r[i]===c[0]&&r[i+2]===c[2]&&!(e.measureText(n).width>=t)}})();var Gy={latestVersion:function(){for(const{v:e,emoji:t}of Wy)if(qy(t))return e},noCountryFlags:function(){return!qy("🇨🇦")}};const Qy=["+1","grinning","kissing_heart","heart_eyes","laughing","stuck_out_tongue_winking_eye","sweat_smile","joy","scream","disappointed","unamused","weary","sob","sunglasses","heart"];let Jy=null;var Xy={add:function(e){Jy||(Jy=Hy.get("frequently")||{});const t=e.id||e;t&&(Jy[t]||(Jy[t]=0),Jy[t]+=1,Hy.set("last",t),Hy.set("frequently",Jy))},get:function(e){let{maxFrequentRows:t,perLine:n}=e;if(!t)return[];Jy||(Jy=Hy.get("frequently"));let r=[];if(!Jy){Jy={};for(let e in Qy.slice(0,n)){const t=Qy[e];Jy[t]=n-e,r.push(t)}return r}const o=t*n,i=Hy.get("last");for(let e in Jy)r.push(e);if(r.sort(((e,t)=>{const n=Jy[t],r=Jy[e];return n==r?e.localeCompare(t):n-r})),r.length>o){const e=r.slice(o);r=r.slice(0,o);for(let t of e)t!=i&&delete Jy[t];i&&-1==r.indexOf(i)&&(delete Jy[r[r.length-1]],r.splice(-1,1,i)),Hy.set("frequently",Jy)}return r},DEFAULTS:Qy},Yy={};Yy=JSON.parse('{"search":"Search","search_no_results_1":"Oh no!","search_no_results_2":"That emoji couldn’t be found","pick":"Pick an emoji…","add_custom":"Add custom emoji","categories":{"activity":"Activity","custom":"Custom","flags":"Flags","foods":"Food & Drink","frequent":"Frequently used","nature":"Animals & Nature","objects":"Objects","people":"Smileys & People","places":"Travel & Places","search":"Search Results","symbols":"Symbols"},"skins":{"1":"Default","2":"Light","3":"Medium-Light","4":"Medium","5":"Medium-Dark","6":"Dark","choose":"Choose default skin tone"}}');var Zy={autoFocus:{value:!1},dynamicWidth:{value:!1},emojiButtonColors:{value:null},emojiButtonRadius:{value:"100%"},emojiButtonSize:{value:36},emojiSize:{value:24},emojiVersion:{value:14,choices:[1,2,3,4,5,11,12,12.1,13,13.1,14]},exceptEmojis:{value:[]},icons:{value:"auto",choices:["auto","outline","solid"]},locale:{value:"en",choices:["en","ar","be","cs","de","es","fa","fi","fr","hi","it","ja","kr","nl","pl","pt","ru","sa","tr","uk","vi","zh"]},maxFrequentRows:{value:4},navPosition:{value:"top",choices:["top","bottom","none"]},noCountryFlags:{value:!1},noResultsEmoji:{value:null},perLine:{value:9},previewEmoji:{value:null},previewPosition:{value:"bottom",choices:["top","bottom","none"]},searchPosition:{value:"sticky",choices:["sticky","static","none"]},set:{value:"native",choices:["native","apple","facebook","google","twitter"]},skin:{value:1,choices:[1,2,3,4,5,6]},skinTonePosition:{value:"preview",choices:["preview","search","none"]},theme:{value:"auto",choices:["auto","light","dark"]},categories:null,categoryIcons:null,custom:null,data:null,i18n:null,getImageURL:null,getSpritesheetURL:null,onAddCustomEmoji:null,onClickOutside:null,onEmojiSelect:null,stickySearch:{deprecated:!0,value:!0}};let e_=null,t_=null;const n_={};async function r_(e){if(n_[e])return n_[e];const t=await fetch(e),n=await t.json();return n_[e]=n,n}let o_=null,i_=null,a_=!1;function s_(e){let{caller:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o_||(o_=new Promise((e=>{i_=e}))),e?async function(e){a_=!0;let{emojiVersion:t,set:n,locale:r}=e;if(t||(t=Zy.emojiVersion.value),n||(n=Zy.set.value),r||(r=Zy.locale.value),t_)t_.categories=t_.categories.filter((e=>!!!e.name));else{t_=("function"==typeof e.data?await e.data():e.data)||await r_(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/sets/${t}/${n}.json`),t_.emoticons={},t_.natives={},t_.categories.unshift({id:"frequent",emojis:[]});for(const e in t_.aliases){const t=t_.aliases[e],n=t_.emojis[t];n&&(n.aliases||(n.aliases=[]),n.aliases.push(e))}t_.originalCategories=t_.categories}if(e_=("function"==typeof e.i18n?await e.i18n():e.i18n)||("en"==r?ay(Yy):await r_(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/i18n/${r}.json`)),e.custom)for(let t in e.custom){t=parseInt(t);const n=e.custom[t],r=e.custom[t-1];if(n.emojis&&n.emojis.length){n.id||(n.id=`custom_${t+1}`),n.name||(n.name=e_.categories.custom),r&&!n.icon&&(n.target=r.target||r),t_.categories.push(n);for(const e of n.emojis)t_.emojis[e.id]=e}}e.categories&&(t_.categories=t_.originalCategories.filter((t=>-1!=e.categories.indexOf(t.id))).sort(((t,n)=>e.categories.indexOf(t.id)-e.categories.indexOf(n.id))));let o=null,i=null;"native"==n&&(o=Gy.latestVersion(),i=e.noCountryFlags||Gy.noCountryFlags());let a=t_.categories.length,s=!1;for(;a--;){const t=t_.categories[a];if("frequent"==t.id){let{maxFrequentRows:n,perLine:r}=e;n=n>=0?n:Zy.maxFrequentRows.value,r||(r=Zy.perLine.value),t.emojis=Xy.get({maxFrequentRows:n,perLine:r})}if(!t.emojis||!t.emojis.length){t_.categories.splice(a,1);continue}const{categoryIcons:n}=e;if(n){const e=n[t.id];e&&!t.icon&&(t.icon=e)}let r=t.emojis.length;for(;r--;){const n=t.emojis[r],a=n.id?n:t_.emojis[n],c=()=>{t.emojis.splice(r,1)};if(!a||e.exceptEmojis&&e.exceptEmojis.includes(a.id))c();else if(o&&a.version>o)c();else if(!i||"flags"!=t.id||p_.includes(a.id)){if(!a.search){if(s=!0,a.search=","+[[a.id,!1],[a.name,!0],[a.keywords,!1],[a.emoticons,!1]].map((e=>{let[t,n]=e;if(t)return(Array.isArray(t)?t:[t]).map((e=>(n?e.split(/[-|_|\s]+/):[e]).map((e=>e.toLowerCase())))).flat()})).flat().filter((e=>e&&e.trim())).join(","),a.emoticons)for(const e of a.emoticons)t_.emoticons[e]||(t_.emoticons[e]=a.id);let e=0;for(const t of a.skins){if(!t)continue;e++;const{native:n}=t;n&&(t_.natives[n]=a.id,a.search+=`,${n}`);const r=1==e?"":`:skin-tone-${e}:`;t.shortcodes=`:${a.id}:${r}`}}}else c()}}s&&d_.reset();i_()}(e):t&&!a_&&console.warn(`\`${t}\` requires data to be initialized first. Promise will be pending until \`init\` is called.`),o_}function c_(e,t,n){e||(e={});const r={};for(let o in t)r[o]=l_(o,e,t,n);return r}function l_(e,t,n,r){const o=n[e];let i=r&&r.getAttribute(e)||(null!=t[e]&&null!=t[e]?t[e]:null);return o?(null!=i&&o.value&&typeof o.value!=typeof i&&(i="boolean"==typeof o.value?"false"!=i:o.value.constructor(i)),o.transform&&i&&(i=o.transform(i)),(null==i||o.choices&&-1==o.choices.indexOf(i))&&(i=o.value),i):i}let u_=null;var d_={search:async function(e){let{maxResults:t,caller:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.trim().length)return null;t||(t=90),await s_(null,{caller:n||"SearchIndex.search"});const r=e.toLowerCase().replace(/(\w)-/,"$1 ").split(/[\s|,]+/).filter(((e,t,n)=>e.trim()&&n.indexOf(e)==t));if(!r.length)return;let o,i,a=u_||(u_=Object.values(t_.emojis));for(const e of r){if(!a.length)break;o=[],i={};for(const t of a){if(!t.search)continue;const n=t.search.indexOf(`,${e}`);-1!=n&&(o.push(t),i[t.id]||(i[t.id]=0),i[t.id]+=t.id==e?0:n+1)}a=o}return o.length<2||(o.sort(((e,t)=>{const n=i[e.id],r=i[t.id];return n==r?e.id.localeCompare(t.id):n-r})),o.length>t&&(o=o.slice(0,t))),o},get:function(e){return e.id?e:t_.emojis[e]||t_.emojis[t_.aliases[e]]||t_.emojis[t_.natives[e]]},reset:function(){u_=null},SHORTCODES_REGEX:/^(?:\:([^\:]+)\:)(?:\:skin-tone-(\d)\:)?$/};const p_=["checkered_flag","crossed_flags","pirate_flag","rainbow-flag","transgender_flag","triangular_flag_on_post","waving_black_flag","waving_white_flag"];var f_={categories:{activity:{outline:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Uy("path",{d:"M12 0C5.373 0 0 5.372 0 12c0 6.627 5.373 12 12 12 6.628 0 12-5.373 12-12 0-6.628-5.372-12-12-12m9.949 11H17.05c.224-2.527 1.232-4.773 1.968-6.113A9.966 9.966 0 0 1 21.949 11M13 11V2.051a9.945 9.945 0 0 1 4.432 1.564c-.858 1.491-2.156 4.22-2.392 7.385H13zm-2 0H8.961c-.238-3.165-1.536-5.894-2.393-7.385A9.95 9.95 0 0 1 11 2.051V11zm0 2v8.949a9.937 9.937 0 0 1-4.432-1.564c.857-1.492 2.155-4.221 2.393-7.385H11zm4.04 0c.236 3.164 1.534 5.893 2.392 7.385A9.92 9.92 0 0 1 13 21.949V13h2.04zM4.982 4.887C5.718 6.227 6.726 8.473 6.951 11h-4.9a9.977 9.977 0 0 1 2.931-6.113M2.051 13h4.9c-.226 2.527-1.233 4.771-1.969 6.113A9.972 9.972 0 0 1 2.051 13m16.967 6.113c-.735-1.342-1.744-3.586-1.968-6.113h4.899a9.961 9.961 0 0 1-2.931 6.113"})}),solid:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Uy("path",{d:"M16.17 337.5c0 44.98 7.565 83.54 13.98 107.9C35.22 464.3 50.46 496 174.9 496c9.566 0 19.59-.4707 29.84-1.271L17.33 307.3C16.53 317.6 16.17 327.7 16.17 337.5zM495.8 174.5c0-44.98-7.565-83.53-13.98-107.9c-4.688-17.54-18.34-31.23-36.04-35.95C435.5 27.91 392.9 16 337 16c-9.564 0-19.59 .4707-29.84 1.271l187.5 187.5C495.5 194.4 495.8 184.3 495.8 174.5zM26.77 248.8l236.3 236.3c142-36.1 203.9-150.4 222.2-221.1L248.9 26.87C106.9 62.96 45.07 177.2 26.77 248.8zM256 335.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L164.7 283.3C161.6 280.2 160 276.1 160 271.1c0-8.529 6.865-16 16-16c4.095 0 8.189 1.562 11.31 4.688l64.01 64C254.4 327.8 256 331.9 256 335.1zM304 287.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L212.7 235.3C209.6 232.2 208 228.1 208 223.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01C302.5 279.8 304 283.9 304 287.1zM256 175.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01c3.125 3.125 4.688 7.219 4.688 11.31c0 9.133-7.468 16-16 16c-4.094 0-8.189-1.562-11.31-4.688l-64.01-64.01C257.6 184.2 256 180.1 256 175.1z"})})},custom:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:Uy("path",{d:"M417.1 368c-5.937 10.27-16.69 16-27.75 16c-5.422 0-10.92-1.375-15.97-4.281L256 311.4V448c0 17.67-14.33 32-31.1 32S192 465.7 192 448V311.4l-118.3 68.29C68.67 382.6 63.17 384 57.75 384c-11.06 0-21.81-5.734-27.75-16c-8.828-15.31-3.594-34.88 11.72-43.72L159.1 256L41.72 187.7C26.41 178.9 21.17 159.3 29.1 144C36.63 132.5 49.26 126.7 61.65 128.2C65.78 128.7 69.88 130.1 73.72 132.3L192 200.6V64c0-17.67 14.33-32 32-32S256 46.33 256 64v136.6l118.3-68.29c3.838-2.213 7.939-3.539 12.07-4.051C398.7 126.7 411.4 132.5 417.1 144c8.828 15.31 3.594 34.88-11.72 43.72L288 256l118.3 68.28C421.6 333.1 426.8 352.7 417.1 368z"})}),flags:{outline:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Uy("path",{d:"M0 0l6.084 24H8L1.916 0zM21 5h-4l-1-4H4l3 12h3l1 4h13L21 5zM6.563 3h7.875l2 8H8.563l-2-8zm8.832 10l-2.856 1.904L12.063 13h3.332zM19 13l-1.5-6h1.938l2 8H16l3-2z"})}),solid:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Uy("path",{d:"M64 496C64 504.8 56.75 512 48 512h-32C7.25 512 0 504.8 0 496V32c0-17.75 14.25-32 32-32s32 14.25 32 32V496zM476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87C160.9 .3055 131.6 4.867 96 15.75v350.5c32-9.984 59.87-14.1 84.85-14.1c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0z"})})},foods:{outline:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Uy("path",{d:"M17 4.978c-1.838 0-2.876.396-3.68.934.513-1.172 1.768-2.934 4.68-2.934a1 1 0 0 0 0-2c-2.921 0-4.629 1.365-5.547 2.512-.064.078-.119.162-.18.244C11.73 1.838 10.798.023 9.207.023 8.579.022 7.85.306 7 .978 5.027 2.54 5.329 3.902 6.492 4.999 3.609 5.222 0 7.352 0 12.969c0 4.582 4.961 11.009 9 11.009 1.975 0 2.371-.486 3-1 .629.514 1.025 1 3 1 4.039 0 9-6.418 9-11 0-5.953-4.055-8-7-8M8.242 2.546c.641-.508.943-.523.965-.523.426.169.975 1.405 1.357 3.055-1.527-.629-2.741-1.352-2.98-1.846.059-.112.241-.356.658-.686M15 21.978c-1.08 0-1.21-.109-1.559-.402l-.176-.146c-.367-.302-.816-.452-1.266-.452s-.898.15-1.266.452l-.176.146c-.347.292-.477.402-1.557.402-2.813 0-7-5.389-7-9.009 0-5.823 4.488-5.991 5-5.991 1.939 0 2.484.471 3.387 1.251l.323.276a1.995 1.995 0 0 0 2.58 0l.323-.276c.902-.78 1.447-1.251 3.387-1.251.512 0 5 .168 5 6 0 3.617-4.187 9-7 9"})}),solid:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Uy("path",{d:"M481.9 270.1C490.9 279.1 496 291.3 496 304C496 316.7 490.9 328.9 481.9 337.9C472.9 346.9 460.7 352 448 352H64C51.27 352 39.06 346.9 30.06 337.9C21.06 328.9 16 316.7 16 304C16 291.3 21.06 279.1 30.06 270.1C39.06 261.1 51.27 256 64 256H448C460.7 256 472.9 261.1 481.9 270.1zM475.3 388.7C478.3 391.7 480 395.8 480 400V416C480 432.1 473.3 449.3 461.3 461.3C449.3 473.3 432.1 480 416 480H96C79.03 480 62.75 473.3 50.75 461.3C38.74 449.3 32 432.1 32 416V400C32 395.8 33.69 391.7 36.69 388.7C39.69 385.7 43.76 384 48 384H464C468.2 384 472.3 385.7 475.3 388.7zM50.39 220.8C45.93 218.6 42.03 215.5 38.97 211.6C35.91 207.7 33.79 203.2 32.75 198.4C31.71 193.5 31.8 188.5 32.99 183.7C54.98 97.02 146.5 32 256 32C365.5 32 457 97.02 479 183.7C480.2 188.5 480.3 193.5 479.2 198.4C478.2 203.2 476.1 207.7 473 211.6C469.1 215.5 466.1 218.6 461.6 220.8C457.2 222.9 452.3 224 447.3 224H64.67C59.73 224 54.84 222.9 50.39 220.8zM372.7 116.7C369.7 119.7 368 123.8 368 128C368 131.2 368.9 134.3 370.7 136.9C372.5 139.5 374.1 141.6 377.9 142.8C380.8 143.1 384 144.3 387.1 143.7C390.2 143.1 393.1 141.6 395.3 139.3C397.6 137.1 399.1 134.2 399.7 131.1C400.3 128 399.1 124.8 398.8 121.9C397.6 118.1 395.5 116.5 392.9 114.7C390.3 112.9 387.2 111.1 384 111.1C379.8 111.1 375.7 113.7 372.7 116.7V116.7zM244.7 84.69C241.7 87.69 240 91.76 240 96C240 99.16 240.9 102.3 242.7 104.9C244.5 107.5 246.1 109.6 249.9 110.8C252.8 111.1 256 112.3 259.1 111.7C262.2 111.1 265.1 109.6 267.3 107.3C269.6 105.1 271.1 102.2 271.7 99.12C272.3 96.02 271.1 92.8 270.8 89.88C269.6 86.95 267.5 84.45 264.9 82.7C262.3 80.94 259.2 79.1 256 79.1C251.8 79.1 247.7 81.69 244.7 84.69V84.69zM116.7 116.7C113.7 119.7 112 123.8 112 128C112 131.2 112.9 134.3 114.7 136.9C116.5 139.5 118.1 141.6 121.9 142.8C124.8 143.1 128 144.3 131.1 143.7C134.2 143.1 137.1 141.6 139.3 139.3C141.6 137.1 143.1 134.2 143.7 131.1C144.3 128 143.1 124.8 142.8 121.9C141.6 118.1 139.5 116.5 136.9 114.7C134.3 112.9 131.2 111.1 128 111.1C123.8 111.1 119.7 113.7 116.7 116.7L116.7 116.7z"})})},frequent:{outline:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Uy("path",{d:"M13 4h-2l-.001 7H9v2h2v2h2v-2h4v-2h-4z"}),Uy("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10"})]}),solid:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Uy("path",{d:"M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"})})},nature:{outline:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Uy("path",{d:"M15.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 15.5 8M8.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 8.5 8"}),Uy("path",{d:"M18.933 0h-.027c-.97 0-2.138.787-3.018 1.497-1.274-.374-2.612-.51-3.887-.51-1.285 0-2.616.133-3.874.517C7.245.79 6.069 0 5.093 0h-.027C3.352 0 .07 2.67.002 7.026c-.039 2.479.276 4.238 1.04 5.013.254.258.882.677 1.295.882.191 3.177.922 5.238 2.536 6.38.897.637 2.187.949 3.2 1.102C8.04 20.6 8 20.795 8 21c0 1.773 2.35 3 4 3 1.648 0 4-1.227 4-3 0-.201-.038-.393-.072-.586 2.573-.385 5.435-1.877 5.925-7.587.396-.22.887-.568 1.104-.788.763-.774 1.079-2.534 1.04-5.013C23.929 2.67 20.646 0 18.933 0M3.223 9.135c-.237.281-.837 1.155-.884 1.238-.15-.41-.368-1.349-.337-3.291.051-3.281 2.478-4.972 3.091-5.031.256.015.731.27 1.265.646-1.11 1.171-2.275 2.915-2.352 5.125-.133.546-.398.858-.783 1.313M12 22c-.901 0-1.954-.693-2-1 0-.654.475-1.236 1-1.602V20a1 1 0 1 0 2 0v-.602c.524.365 1 .947 1 1.602-.046.307-1.099 1-2 1m3-3.48v.02a4.752 4.752 0 0 0-1.262-1.02c1.092-.516 2.239-1.334 2.239-2.217 0-1.842-1.781-2.195-3.977-2.195-2.196 0-3.978.354-3.978 2.195 0 .883 1.148 1.701 2.238 2.217A4.8 4.8 0 0 0 9 18.539v-.025c-1-.076-2.182-.281-2.973-.842-1.301-.92-1.838-3.045-1.853-6.478l.023-.041c.496-.826 1.49-1.45 1.804-3.102 0-2.047 1.357-3.631 2.362-4.522C9.37 3.178 10.555 3 11.948 3c1.447 0 2.685.192 3.733.57 1 .9 2.316 2.465 2.316 4.48.313 1.651 1.307 2.275 1.803 3.102.035.058.068.117.102.178-.059 5.967-1.949 7.01-4.902 7.19m6.628-8.202c-.037-.065-.074-.13-.113-.195a7.587 7.587 0 0 0-.739-.987c-.385-.455-.648-.768-.782-1.313-.076-2.209-1.241-3.954-2.353-5.124.531-.376 1.004-.63 1.261-.647.636.071 3.044 1.764 3.096 5.031.027 1.81-.347 3.218-.37 3.235"})]}),solid:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:Uy("path",{d:"M332.7 19.85C334.6 8.395 344.5 0 356.1 0C363.6 0 370.6 3.52 375.1 9.502L392 32H444.1C456.8 32 469.1 37.06 478.1 46.06L496 64H552C565.3 64 576 74.75 576 88V112C576 156.2 540.2 192 496 192H426.7L421.6 222.5L309.6 158.5L332.7 19.85zM448 64C439.2 64 432 71.16 432 80C432 88.84 439.2 96 448 96C456.8 96 464 88.84 464 80C464 71.16 456.8 64 448 64zM416 256.1V480C416 497.7 401.7 512 384 512H352C334.3 512 320 497.7 320 480V364.8C295.1 377.1 268.8 384 240 384C211.2 384 184 377.1 160 364.8V480C160 497.7 145.7 512 128 512H96C78.33 512 64 497.7 64 480V249.8C35.23 238.9 12.64 214.5 4.836 183.3L.9558 167.8C-3.331 150.6 7.094 133.2 24.24 128.1C41.38 124.7 58.76 135.1 63.05 152.2L66.93 167.8C70.49 182 83.29 191.1 97.97 191.1H303.8L416 256.1z"})})},objects:{outline:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Uy("path",{d:"M12 0a9 9 0 0 0-5 16.482V21s2.035 3 5 3 5-3 5-3v-4.518A9 9 0 0 0 12 0zm0 2c3.86 0 7 3.141 7 7s-3.14 7-7 7-7-3.141-7-7 3.14-7 7-7zM9 17.477c.94.332 1.946.523 3 .523s2.06-.19 3-.523v.834c-.91.436-1.925.689-3 .689a6.924 6.924 0 0 1-3-.69v-.833zm.236 3.07A8.854 8.854 0 0 0 12 21c.965 0 1.888-.167 2.758-.451C14.155 21.173 13.153 22 12 22c-1.102 0-2.117-.789-2.764-1.453z"}),Uy("path",{d:"M14.745 12.449h-.004c-.852-.024-1.188-.858-1.577-1.824-.421-1.061-.703-1.561-1.182-1.566h-.009c-.481 0-.783.497-1.235 1.537-.436.982-.801 1.811-1.636 1.791l-.276-.043c-.565-.171-.853-.691-1.284-1.794-.125-.313-.202-.632-.27-.913-.051-.213-.127-.53-.195-.634C7.067 9.004 7.039 9 6.99 9A1 1 0 0 1 7 7h.01c1.662.017 2.015 1.373 2.198 2.134.486-.981 1.304-2.058 2.797-2.075 1.531.018 2.28 1.153 2.731 2.141l.002-.008C14.944 8.424 15.327 7 16.979 7h.032A1 1 0 1 1 17 9h-.011c-.149.076-.256.474-.319.709a6.484 6.484 0 0 1-.311.951c-.429.973-.79 1.789-1.614 1.789"})]}),solid:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",children:Uy("path",{d:"M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"})})},people:{outline:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Uy("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10"}),Uy("path",{d:"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0"})]}),solid:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Uy("path",{d:"M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256 432C332.1 432 396.2 382 415.2 314.1C419.1 300.4 407.8 288 393.6 288H118.4C104.2 288 92.92 300.4 96.76 314.1C115.8 382 179.9 432 256 432V432zM176.4 160C158.7 160 144.4 174.3 144.4 192C144.4 209.7 158.7 224 176.4 224C194 224 208.4 209.7 208.4 192C208.4 174.3 194 160 176.4 160zM336.4 224C354 224 368.4 209.7 368.4 192C368.4 174.3 354 160 336.4 160C318.7 160 304.4 174.3 304.4 192C304.4 209.7 318.7 224 336.4 224z"})})},places:{outline:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[Uy("path",{d:"M6.5 12C5.122 12 4 13.121 4 14.5S5.122 17 6.5 17 9 15.879 9 14.5 7.878 12 6.5 12m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5M17.5 12c-1.378 0-2.5 1.121-2.5 2.5s1.122 2.5 2.5 2.5 2.5-1.121 2.5-2.5-1.122-2.5-2.5-2.5m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5"}),Uy("path",{d:"M22.482 9.494l-1.039-.346L21.4 9h.6c.552 0 1-.439 1-.992 0-.006-.003-.008-.003-.008H23c0-1-.889-2-1.984-2h-.642l-.731-1.717C19.262 3.012 18.091 2 16.764 2H7.236C5.909 2 4.738 3.012 4.357 4.283L3.626 6h-.642C1.889 6 1 7 1 8h.003S1 8.002 1 8.008C1 8.561 1.448 9 2 9h.6l-.043.148-1.039.346a2.001 2.001 0 0 0-1.359 2.097l.751 7.508a1 1 0 0 0 .994.901H3v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h6v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h1.096a.999.999 0 0 0 .994-.901l.751-7.508a2.001 2.001 0 0 0-1.359-2.097M6.273 4.857C6.402 4.43 6.788 4 7.236 4h9.527c.448 0 .834.43.963.857L19.313 9H4.688l1.585-4.143zM7 21H5v-1h2v1zm12 0h-2v-1h2v1zm2.189-3H2.811l-.662-6.607L3 11h18l.852.393L21.189 18z"})]}),solid:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Uy("path",{d:"M39.61 196.8L74.8 96.29C88.27 57.78 124.6 32 165.4 32H346.6C387.4 32 423.7 57.78 437.2 96.29L472.4 196.8C495.6 206.4 512 229.3 512 256V448C512 465.7 497.7 480 480 480H448C430.3 480 416 465.7 416 448V400H96V448C96 465.7 81.67 480 64 480H32C14.33 480 0 465.7 0 448V256C0 229.3 16.36 206.4 39.61 196.8V196.8zM109.1 192H402.9L376.8 117.4C372.3 104.6 360.2 96 346.6 96H165.4C151.8 96 139.7 104.6 135.2 117.4L109.1 192zM96 256C78.33 256 64 270.3 64 288C64 305.7 78.33 320 96 320C113.7 320 128 305.7 128 288C128 270.3 113.7 256 96 256zM416 320C433.7 320 448 305.7 448 288C448 270.3 433.7 256 416 256C398.3 256 384 270.3 384 288C384 305.7 398.3 320 416 320z"})})},symbols:{outline:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Uy("path",{d:"M0 0h11v2H0zM4 11h3V6h4V4H0v2h4zM15.5 17c1.381 0 2.5-1.116 2.5-2.493s-1.119-2.493-2.5-2.493S13 13.13 13 14.507 14.119 17 15.5 17m0-2.986c.276 0 .5.222.5.493 0 .272-.224.493-.5.493s-.5-.221-.5-.493.224-.493.5-.493M21.5 19.014c-1.381 0-2.5 1.116-2.5 2.493S20.119 24 21.5 24s2.5-1.116 2.5-2.493-1.119-2.493-2.5-2.493m0 2.986a.497.497 0 0 1-.5-.493c0-.271.224-.493.5-.493s.5.222.5.493a.497.497 0 0 1-.5.493M22 13l-9 9 1.513 1.5 8.99-9.009zM17 11c2.209 0 4-1.119 4-2.5V2s.985-.161 1.498.949C23.01 4.055 23 6 23 6s1-1.119 1-3.135C24-.02 21 0 21 0h-2v6.347A5.853 5.853 0 0 0 17 6c-2.209 0-4 1.119-4 2.5s1.791 2.5 4 2.5M10.297 20.482l-1.475-1.585a47.54 47.54 0 0 1-1.442 1.129c-.307-.288-.989-1.016-2.045-2.183.902-.836 1.479-1.466 1.729-1.892s.376-.871.376-1.336c0-.592-.273-1.178-.818-1.759-.546-.581-1.329-.871-2.349-.871-1.008 0-1.79.293-2.344.879-.556.587-.832 1.181-.832 1.784 0 .813.419 1.748 1.256 2.805-.847.614-1.444 1.208-1.794 1.784a3.465 3.465 0 0 0-.523 1.833c0 .857.308 1.56.924 2.107.616.549 1.423.823 2.42.823 1.173 0 2.444-.379 3.813-1.137L8.235 24h2.819l-2.09-2.383 1.333-1.135zm-6.736-6.389a1.02 1.02 0 0 1 .73-.286c.31 0 .559.085.747.254a.849.849 0 0 1 .283.659c0 .518-.419 1.112-1.257 1.784-.536-.651-.805-1.231-.805-1.742a.901.901 0 0 1 .302-.669M3.74 22c-.427 0-.778-.116-1.057-.349-.279-.232-.418-.487-.418-.766 0-.594.509-1.288 1.527-2.083.968 1.134 1.717 1.946 2.248 2.438-.921.507-1.686.76-2.3.76"})}),solid:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Uy("path",{d:"M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z"})})}},search:{loupe:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:Uy("path",{d:"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"})}),delete:Uy("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:Uy("path",{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"})})}};function m_(e){let{id:t,skin:n,emoji:r}=e;if(e.shortcodes){const r=e.shortcodes.match(d_.SHORTCODES_REGEX);r&&(t=r[1],r[2]&&(n=r[2]))}if(r||(r=d_.get(t||e.native)),!r)return e.fallback;const o=r.skins[n-1]||r.skins[0],i=o.src||("native"==e.set||e.spritesheet?void 0:"function"==typeof e.getImageURL?e.getImageURL(e.set,o.unified):`https://cdn.jsdelivr.net/npm/emoji-datasource-${e.set}@14.0.0/img/${e.set}/64/${o.unified}.png`),a="function"==typeof e.getSpritesheetURL?e.getSpritesheetURL(e.set):`https://cdn.jsdelivr.net/npm/emoji-datasource-${e.set}@14.0.0/img/${e.set}/sheets-256/64.png`;return Uy("span",{class:"emoji-mart-emoji","data-emoji-set":e.set,children:i?Uy("img",{style:{maxWidth:e.size||"1em",maxHeight:e.size||"1em",display:"inline-block"},alt:o.native||o.shortcodes,src:i}):"native"==e.set?Uy("span",{style:{fontSize:e.size,fontFamily:'"EmojiMart", "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "Android Emoji"'},children:o.native}):Uy("span",{style:{display:"block",width:e.size,height:e.size,backgroundImage:`url(${a})`,backgroundSize:`${100*t_.sheet.cols}% ${100*t_.sheet.rows}%`,backgroundPosition:`${100/(t_.sheet.cols-1)*o.x}% ${100/(t_.sheet.rows-1)*o.y}%`}})})}const g_="undefined"!=typeof window&&window.HTMLElement?window.HTMLElement:Object;class h_ extends g_{static get observedAttributes(){return Object.keys(this.Props)}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(let t in e)this.attributeChangedCallback(t,null,e[t])}attributeChangedCallback(e,t,n){if(!this.component)return;const r=l_(e,{[e]:n},this.constructor.Props,this);this.component.componentWillReceiveProps?this.component.componentWillReceiveProps({[e]:r}):(this.component.props[e]=r,this.component.forceUpdate())}disconnectedCallback(){this.disconnected=!0,this.component&&this.component.unregister&&this.component.unregister()}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(),this.props=e,e.parent||e.ref){let t=null;const n=e.parent||(t=e.ref&&e.ref.current);t&&(t.innerHTML=""),n&&n.appendChild(this)}}}class v_ extends h_{setShadow(){this.attachShadow({mode:"open"})}injectStyles(e){if(!e)return;const t=document.createElement("style");t.textContent=e,this.shadowRoot.insertBefore(t,this.shadowRoot.firstChild)}constructor(e){let{styles:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.setShadow(),this.injectStyles(t)}}var y_={fallback:"",id:"",native:"",shortcodes:"",size:{value:"",transform:e=>/\D/.test(e)?e:`${e}px`},set:Zy.set,skin:Zy.skin};class __ extends h_{async connectedCallback(){const e=c_(this.props,y_,this);e.element=this,e.ref=e=>{this.component=e},await s_(),this.disconnected||jy(Uy(m_,u._objectSpread2({},e)),this)}constructor(e){super(e)}}sy(__,"Props",y_),"undefined"==typeof customElements||customElements.get("em-emoji")||customElements.define("em-emoji",__);var b_,k_=[],w_=ly.__b,C_=ly.__r,S_=ly.diffed,E_=ly.__c,x_=ly.unmount;function M_(){var e;for(k_.sort((function(e,t){return e.__v.__b-t.__v.__b}));e=k_.pop();)if(e.__P)try{e.__H.__h.forEach(A_),e.__H.__h.forEach(O_),e.__H.__h=[]}catch(t){e.__H.__h=[],ly.__e(t,e.__v)}}ly.__b=function(e){w_&&w_(e)},ly.__r=function(e){C_&&C_(e);var t=e.__c.__H;t&&(t.__h.forEach(A_),t.__h.forEach(O_),t.__h=[])},ly.diffed=function(e){S_&&S_(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==k_.push(t)&&b_===ly.requestAnimationFrame||((b_=ly.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(r),T_&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);T_&&(t=requestAnimationFrame(n))})(M_))},ly.__c=function(e,t){t.some((function(e){try{e.__h.forEach(A_),e.__h=e.__h.filter((function(e){return!e.__||O_(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],ly.__e(n,e.__v)}})),E_&&E_(e,t)},ly.unmount=function(e){x_&&x_(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{A_(e)}catch(e){t=e}})),t&&ly.__e(t,n.__v))};var T_="function"==typeof requestAnimationFrame;function A_(e){var t=e.__c;"function"==typeof t&&(e.__c=void 0,t())}function O_(e){e.__c=e.__()}function D_(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function R_(e){this.props=e}(R_.prototype=new wy).isPureReactComponent=!0,R_.prototype.shouldComponentUpdate=function(e,t){return D_(this.props,e)||D_(this.state,t)};var N_=ly.__b;ly.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),N_&&N_(e)};var P_=ly.__e;ly.__e=function(e,t,n){if(e.then)for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t);P_(e,t,n)};var B_=ly.unmount;function I_(){this.__u=0,this.t=null,this.__b=null}function K_(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function L_(){this.u=null,this.o=null}ly.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),B_&&B_(e)},(I_.prototype=new wy).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var o=K_(r.__v),i=!1,a=function(){i||(i=!0,n.__R=null,o?o(s):s())};n.__R=a;var s=function(){if(! --r.__u){if(r.state.__e){var e=r.state.__e;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)})),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},c=!0===t.__h;r.__u++||c||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(a,a)},I_.prototype.componentWillUnmount=function(){this.t=[]},I_.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=function(e,t){for(var n in t)e[n]=t[n];return e}({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)}))),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var o=t.__e&&_y(ky,null,e.fallback);return o&&(o.__h=null),[_y(ky,null,t.__e?null:e.children),o]};var F_=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(L_.prototype=new wy).__e=function(e){var t=this,n=K_(t.__v),r=t.o.get(e);return r[0]++,function(o){var i=function(){t.props.revealOrder?(r.push(o),F_(t,e,r)):o()};n?n(i):i()}},L_.prototype.render=function(e){this.u=null,this.o=new Map;var t=Ay(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},L_.prototype.componentDidUpdate=L_.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){F_(e,n,t)}))};var j_="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,z_=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,U_="undefined"!=typeof document;wy.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(wy.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var H_=ly.event;function V_(){}function W_(){return this.cancelBubble}function q_(){return this.defaultPrevented}ly.event=function(e){return H_&&(e=H_(e)),e.persist=V_,e.isPropagationStopped=W_,e.isDefaultPrevented=q_,e.nativeEvent=e};var $_={configurable:!0,get:function(){return this.class}},G_=ly.vnode;ly.vnode=function(e){var t,n=e.type,r=e.props,o=r;if("string"==typeof n){var i=-1===n.indexOf("-");for(var a in o={},r){var s=r[a];U_&&"children"===a&&"noscript"===n||"value"===a&&"defaultValue"in r&&null==s||("defaultValue"===a&&"value"in r&&null==r.value?a="value":"download"===a&&!0===s?s="":/ondoubleclick/i.test(a)?a="ondblclick":/^onchange(textarea|input)/i.test(a+n)&&(t=r.type,!("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(t))?a="oninput":/^onfocus$/i.test(a)?a="onfocusin":/^onblur$/i.test(a)?a="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(a)?a=a.toLowerCase():i&&z_.test(a)?a=a.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===s&&(s=void 0),o[a]=s)}"select"==n&&o.multiple&&Array.isArray(o.value)&&(o.value=Ay(r.children).forEach((function(e){e.props.selected=-1!=o.value.indexOf(e.props.value)}))),"select"==n&&null!=o.defaultValue&&(o.value=Ay(r.children).forEach((function(e){e.props.selected=o.multiple?-1!=o.defaultValue.indexOf(e.props.value):o.defaultValue==e.props.value}))),e.props=o,r.class!=r.className&&($_.enumerable="className"in r,null!=r.className&&(o.class=r.className),Object.defineProperty(o,"className",$_))}e.$$typeof=j_,G_&&G_(e)};var Q_=ly.__r;ly.__r=function(e){Q_&&Q_(e),e.__c};const J_={light:"outline",dark:"solid"};class X_ extends R_{renderIcon(e){const{icon:t}=e;if(t){if(t.svg)return Uy("span",{class:"flex",dangerouslySetInnerHTML:{__html:t.svg}});if(t.src)return Uy("img",{src:t.src})}const n=f_.categories[e.id]||f_.categories.custom;return n["auto"==this.props.icons?J_[this.props.theme]:this.props.icons]||n}render(){let e=null;return Uy("nav",{id:"nav",class:"padding","data-position":this.props.position,dir:this.props.dir,children:Uy("div",{class:"flex relative",children:[this.categories.map(((t,n)=>{const r=t.name||e_.categories[t.id],o=!this.props.unfocused&&t.id==this.state.categoryId;return o&&(e=n),Uy("button",{"aria-label":r,"aria-selected":o||void 0,title:r,type:"button",class:"flex flex-grow flex-center",onMouseDown:e=>e.preventDefault(),onClick:()=>{this.props.onClick({category:t,i:n})},children:this.renderIcon(t)})})),Uy("div",{class:"bar",style:{width:100/this.categories.length+"%",opacity:null==e?0:1,transform:"rtl"===this.props.dir?`scaleX(-1) translateX(${100*e}%)`:`translateX(${100*e}%)`}})]})})}constructor(){super(),this.categories=t_.categories.filter((e=>!e.target)),this.state={categoryId:this.categories[0].id}}}class Y_ extends R_{shouldComponentUpdate(e){for(let t in e)if("children"!=t&&e[t]!=this.props[t])return!0;return!1}render(){return this.props.children}}const Z_=10;class eb extends wy{getInitialState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{skin:Hy.get("skin")||e.skin,theme:this.initTheme(e.theme)}}componentWillMount(){this.dir=e_.rtl?"rtl":"ltr",this.refs={menu:{current:null},navigation:{current:null},scroll:{current:null},search:{current:null},searchInput:{current:null},skinToneButton:{current:null},skinToneRadio:{current:null}},this.initGrid(),0==this.props.stickySearch&&"sticky"==this.props.searchPosition&&(console.warn("[EmojiMart] Deprecation warning: `stickySearch` has been renamed `searchPosition`."),this.props.searchPosition="static")}componentDidMount(){if(this.register(),this.shadowRoot=this.base.parentNode,this.props.autoFocus){const{searchInput:e}=this.refs;e.current&&e.current.focus()}}componentWillReceiveProps(e){this.nextState||(this.nextState={});for(const t in e)this.nextState[t]=e[t];clearTimeout(this.nextStateTimer),this.nextStateTimer=setTimeout((()=>{let e=!1;for(const t in this.nextState)this.props[t]=this.nextState[t],"custom"!==t&&"categories"!==t||(e=!0);delete this.nextState;const t=this.getInitialState();if(e)return this.reset(t);this.setState(t)}))}componentWillUnmount(){this.unregister()}async reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await s_(this.props),this.initGrid(),this.unobserve(),this.setState(e,(()=>{this.observeCategories(),this.observeRows()}))}register(){document.addEventListener("click",this.handleClickOutside),this.observe()}unregister(){document.removeEventListener("click",this.handleClickOutside),this.unobserve()}observe(){this.observeCategories(),this.observeRows()}unobserve(){let{except:e=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(e)||(e=[e]);for(const t of this.observers)e.includes(t)||t.disconnect();this.observers=[].concat(e)}initGrid(){const{categories:e}=t_;this.refs.categories=new Map;const t=t_.categories.map((e=>e.id)).join(",");this.navKey&&this.navKey!=t&&this.refs.scroll.current&&(this.refs.scroll.current.scrollTop=0),this.navKey=t,this.grid=[],this.grid.setsize=0;const n=(e,t)=>{const n=[];n.__categoryId=t.id,n.__index=e.length,this.grid.push(n);const r=this.grid.length-1,o=r%Z_?{}:{current:null};return o.index=r,o.posinset=this.grid.setsize+1,e.push(o),n};for(let t of e){const e=[];let r=n(e,t);for(let o of t.emojis)r.length==this.getPerLine()&&(r=n(e,t)),this.grid.setsize+=1,r.push(o);this.refs.categories.set(t.id,{root:{current:null},rows:e})}}initTheme(e){if("auto"!=e)return e;if(!this.darkMedia){if(this.darkMedia=matchMedia("(prefers-color-scheme: dark)"),this.darkMedia.media.match(/^not/))return"light";this.darkMedia.addListener((()=>{"auto"==this.props.theme&&this.setState({theme:this.darkMedia.matches?"dark":"light"})}))}return this.darkMedia.matches?"dark":"light"}initDynamicPerLine(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(!e.dynamicWidth)return;const{element:t,emojiButtonSize:n}=e,r=()=>{const{width:e}=t.getBoundingClientRect();return Math.floor(e/n)},o=new ResizeObserver((()=>{this.unobserve({except:o}),this.setState({perLine:r()},(()=>{this.initGrid(),this.forceUpdate((()=>{this.observeCategories(),this.observeRows()}))}))}));return o.observe(t),this.observers.push(o),r()}getPerLine(){return this.state.perLine||this.props.perLine}getEmojiByPos(e){let[t,n]=e;const r=this.state.searchResults||this.grid,o=r[t]&&r[t][n];if(o)return d_.get(o)}observeCategories(){const e=this.refs.navigation.current;if(!e)return;const t=new Map,n={root:this.refs.scroll.current,threshold:[0,1]},r=new IntersectionObserver((n=>{for(const e of n){const n=e.target.dataset.id;t.set(n,e.intersectionRatio)}const r=[...t];for(const[t,n]of r)if(n){(o=t)!=e.state.categoryId&&e.setState({categoryId:o});break}var o}),n);for(const{root:e}of this.refs.categories.values())r.observe(e.current);this.observers.push(r)}observeRows(){const e=u._objectSpread2({},this.state.visibleRows),t=new IntersectionObserver((t=>{for(const n of t){const t=parseInt(n.target.dataset.index);n.isIntersecting?e[t]=!0:delete e[t]}this.setState({visibleRows:e})}),{root:this.refs.scroll.current,rootMargin:`${this.props.emojiButtonSize*(Z_+5)}px 0px ${this.props.emojiButtonSize*Z_}px`});for(const{rows:e}of this.refs.categories.values())for(const n of e)n.current&&t.observe(n.current);this.observers.push(t)}preventDefault(e){e.preventDefault()}unfocusSearch(){const e=this.refs.searchInput.current;e&&e.blur()}navigate(e){let{e:t,input:n,left:r,right:o,up:i,down:a}=e;const s=this.state.searchResults||this.grid;if(!s.length)return;let[c,l]=this.state.pos;const u=(()=>{if(0==c&&0==l&&!t.repeat&&(r||i))return null;if(-1==c)return t.repeat||!o&&!a||n.selectionStart!=n.value.length?null:[0,0];if(r||o){let e=s[c];const t=r?-1:1;if(l+=t,!e[l]){if(c+=t,e=s[c],!e)return c=r?0:s.length-1,l=r?0:s[c].length-1,[c,l];l=r?e.length-1:0}return[c,l]}if(i||a){c+=i?-1:1;const e=s[c];return e?(e[l]||(l=e.length-1),[c,l]):(c=i?0:s.length-1,l=i?0:s[c].length-1,[c,l])}})();u?(t.preventDefault(),this.setState({pos:u,keyboard:!0},(()=>{this.scrollTo({row:u[0]})}))):this.state.pos[0]>-1&&this.setState({pos:[-1,-1]})}scrollTo(e){let{categoryId:t,row:n}=e;const r=this.state.searchResults||this.grid;if(!r.length)return;const o=this.refs.scroll.current,i=o.getBoundingClientRect();let a=0;if(n>=0&&(t=r[n].__categoryId),t){a=(this.refs[t]||this.refs.categories.get(t).root).current.getBoundingClientRect().top-(i.top-o.scrollTop)+1}if(n>=0)if(n){const e=a+r[n].__index*this.props.emojiButtonSize,t=e+this.props.emojiButtonSize+.88*this.props.emojiButtonSize;if(e<o.scrollTop)a=e;else{if(!(t>o.scrollTop+i.height))return;a=t-i.height}}else a=0;this.ignoreMouse(),o.scrollTop=a}ignoreMouse(){this.mouseIsIgnored=!0,clearTimeout(this.ignoreMouseTimer),this.ignoreMouseTimer=setTimeout((()=>{delete this.mouseIsIgnored}),100)}handleEmojiOver(e){this.mouseIsIgnored||this.state.showSkins||this.setState({pos:e||[-1,-1],keyboard:!1})}handleEmojiClick(e){let{e:t,emoji:n,pos:r}=e;if(this.props.onEmojiSelect&&(!n&&r&&(n=this.getEmojiByPos(r)),n)){const e=function(e){let{skinIndex:t=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.skins[t]||(t=0,e.skins[t]),r={id:e.id,name:e.name,native:n.native,unified:n.unified,keywords:e.keywords,shortcodes:n.shortcodes||e.shortcodes};return e.skins.length>1&&(r.skin=t+1),n.src&&(r.src=n.src),e.aliases&&e.aliases.length&&(r.aliases=e.aliases),e.emoticons&&e.emoticons.length&&(r.emoticons=e.emoticons),r}(n,{skinIndex:this.state.skin-1});this.props.maxFrequentRows&&Xy.add(e,this.props),this.props.onEmojiSelect(e,t)}}closeSkins(){this.state.showSkins&&(this.setState({showSkins:null,tempSkin:null}),this.base.removeEventListener("click",this.handleBaseClick),this.base.removeEventListener("keydown",this.handleBaseKeydown))}handleSkinMouseOver(e){this.setState({tempSkin:e})}handleSkinClick(e){this.ignoreMouse(),this.closeSkins(),this.setState({skin:e,tempSkin:null}),Hy.set("skin",e)}renderNav(){return Uy(X_,{ref:this.refs.navigation,icons:this.props.icons,theme:this.state.theme,dir:this.dir,unfocused:!!this.state.searchResults,position:this.props.navPosition,onClick:this.handleCategoryClick},this.navKey)}renderPreview(){const e=this.getEmojiByPos(this.state.pos),t=this.state.searchResults&&!this.state.searchResults.length;return Uy("div",{id:"preview",class:"flex flex-middle",dir:this.dir,"data-position":this.props.previewPosition,children:[Uy("div",{class:"flex flex-middle flex-grow",children:[Uy("div",{class:"flex flex-auto flex-middle flex-center",style:{height:this.props.emojiButtonSize,fontSize:this.props.emojiButtonSize},children:Uy(m_,{emoji:e,id:t?this.props.noResultsEmoji||"cry":this.props.previewEmoji||("top"==this.props.previewPosition?"point_down":"point_up"),set:this.props.set,size:this.props.emojiButtonSize,skin:this.state.tempSkin||this.state.skin,spritesheet:!0,getSpritesheetURL:this.props.getSpritesheetURL})}),Uy("div",{class:`margin-${this.dir[0]}`,children:Uy("div",e||t?{class:`padding-${this.dir[2]} align-${this.dir[0]}`,children:[Uy("div",{class:"preview-title ellipsis",children:e?e.name:e_.search_no_results_1}),Uy("div",{class:"preview-subtitle ellipsis color-c",children:e?e.skins[0].shortcodes:e_.search_no_results_2})]}:{class:"preview-placeholder color-c",children:e_.pick})})]}),!e&&"preview"==this.props.skinTonePosition&&this.renderSkinToneButton()]})}renderEmojiButton(e,t){let{pos:n,posinset:r,grid:o}=t;const i=this.props.emojiButtonSize,a=this.state.tempSkin||this.state.skin,s=(e.skins[a-1]||e.skins[0]).native,c=(l=this.state.pos,u=n,Array.isArray(l)&&Array.isArray(u)&&l.length===u.length&&l.every(((e,t)=>e==u[t])));var l,u;const d=n.concat(e.id).join("");return Uy(Y_,{selected:c,skin:a,size:i,children:Uy("button",{"aria-label":s,"aria-selected":c||void 0,"aria-posinset":r,"aria-setsize":o.setsize,"data-keyboard":this.state.keyboard,title:"none"==this.props.previewPosition?e.name:void 0,type:"button",class:"flex flex-center flex-middle",tabindex:"-1",onClick:t=>this.handleEmojiClick({e:t,emoji:e}),onMouseEnter:()=>this.handleEmojiOver(n),onMouseLeave:()=>this.handleEmojiOver(),style:{width:this.props.emojiButtonSize,height:this.props.emojiButtonSize,fontSize:this.props.emojiSize,lineHeight:0},children:[Uy("div",{"aria-hidden":"true",class:"background",style:{borderRadius:this.props.emojiButtonRadius,backgroundColor:this.props.emojiButtonColors?this.props.emojiButtonColors[(r-1)%this.props.emojiButtonColors.length]:void 0}}),Uy(m_,{emoji:e,set:this.props.set,size:this.props.emojiSize,skin:a,spritesheet:!0,getSpritesheetURL:this.props.getSpritesheetURL})]})},d)}renderSearch(){const e="none"==this.props.previewPosition||"search"==this.props.skinTonePosition;return Uy("div",{children:[Uy("div",{class:"spacer"}),Uy("div",{class:"flex flex-middle",children:[Uy("div",{class:"search relative flex-grow",children:[Uy("input",{type:"search",ref:this.refs.searchInput,placeholder:e_.search,onClick:this.handleSearchClick,onInput:this.handleSearchInput,onKeyDown:this.handleSearchKeyDown,autoComplete:"off"}),Uy("span",{class:"icon loupe flex",children:f_.search.loupe}),this.state.searchResults&&Uy("button",{title:"Clear","aria-label":"Clear",type:"button",class:"icon delete flex",onClick:this.clearSearch,onMouseDown:this.preventDefault,children:f_.search.delete})]}),e&&this.renderSkinToneButton()]})]})}renderSearchResults(){const{searchResults:e}=this.state;return e?Uy("div",{class:"category",ref:this.refs.search,children:[Uy("div",{class:`sticky padding-small align-${this.dir[0]}`,children:e_.categories.search}),Uy("div",{children:e.length?e.map(((t,n)=>Uy("div",{class:"flex",children:t.map(((t,r)=>this.renderEmojiButton(t,{pos:[n,r],posinset:n*this.props.perLine+r+1,grid:e})))}))):Uy("div",{class:`padding-small align-${this.dir[0]}`,children:this.props.onAddCustomEmoji&&Uy("a",{onClick:this.props.onAddCustomEmoji,children:e_.add_custom})})})]}):null}renderCategories(){const{categories:e}=t_,t=!!this.state.searchResults,n=this.getPerLine();return Uy("div",{style:{visibility:t?"hidden":void 0,display:t?"none":void 0,height:"100%"},children:e.map((e=>{const{root:t,rows:r}=this.refs.categories.get(e.id);return Uy("div",{"data-id":e.target?e.target.id:e.id,class:"category",ref:t,children:[Uy("div",{class:`sticky padding-small align-${this.dir[0]}`,children:e.name||e_.categories[e.id]}),Uy("div",{class:"relative",style:{height:r.length*this.props.emojiButtonSize},children:r.map(((t,r)=>{const o=t.index-t.index%Z_,i=this.state.visibleRows[o],a="current"in t?t:void 0;if(!i&&!a)return null;const s=r*n,c=s+n,l=e.emojis.slice(s,c);return l.length<n&&l.push(...new Array(n-l.length)),Uy("div",{"data-index":t.index,ref:a,class:"flex row",style:{top:r*this.props.emojiButtonSize},children:i&&l.map(((e,n)=>{if(!e)return Uy("div",{style:{width:this.props.emojiButtonSize,height:this.props.emojiButtonSize}});const r=d_.get(e);return this.renderEmojiButton(r,{pos:[t.index,n],posinset:t.posinset+n,grid:this.grid})}))},t.index)}))})]})}))})}renderSkinToneButton(){return"none"==this.props.skinTonePosition?null:Uy("div",{class:"flex flex-auto flex-center flex-middle",style:{position:"relative",width:this.props.emojiButtonSize,height:this.props.emojiButtonSize},children:Uy("button",{type:"button",ref:this.refs.skinToneButton,class:"skin-tone-button flex flex-auto flex-center flex-middle","aria-selected":this.state.showSkins?"":void 0,"aria-label":e_.skins.choose,title:e_.skins.choose,onClick:this.openSkins,style:{width:this.props.emojiSize,height:this.props.emojiSize},children:Uy("span",{class:`skin-tone skin-tone-${this.state.skin}`})})})}renderLiveRegion(){const e=this.getEmojiByPos(this.state.pos);return Uy("div",{"aria-live":"polite",class:"sr-only",children:e?e.name:""})}renderSkins(){const e=this.refs.skinToneButton.current.getBoundingClientRect(),t=this.base.getBoundingClientRect(),n={};return"ltr"==this.dir?n.right=t.right-e.right-3:n.left=e.left-t.left-3,"bottom"==this.props.previewPosition&&"preview"==this.props.skinTonePosition?n.bottom=t.bottom-e.top+6:(n.top=e.bottom-t.top+3,n.bottom="auto"),Uy("div",{ref:this.refs.menu,role:"radiogroup",dir:this.dir,"aria-label":e_.skins.choose,class:"menu hidden","data-position":n.top?"top":"bottom",style:n,children:[...Array(6).keys()].map((e=>{const t=e+1,n=this.state.skin==t;return Uy("div",{children:[Uy("input",{type:"radio",name:"skin-tone",value:t,"aria-label":e_.skins[t],ref:n?this.refs.skinToneRadio:null,defaultChecked:n,onChange:()=>this.handleSkinMouseOver(t),onKeyDown:e=>{"Enter"!=e.code&&"Space"!=e.code&&"Tab"!=e.code||(e.preventDefault(),this.handleSkinClick(t))}}),Uy("button",{"aria-hidden":"true",tabindex:"-1",onClick:()=>this.handleSkinClick(t),onMouseEnter:()=>this.handleSkinMouseOver(t),onMouseLeave:()=>this.handleSkinMouseOver(),class:"option flex flex-grow flex-middle",children:[Uy("span",{class:`skin-tone skin-tone-${t}`}),Uy("span",{class:"margin-small-lr",children:e_.skins[t]})]})]})}))})}render(){const e=this.props.perLine*this.props.emojiButtonSize;return Uy("section",{id:"root",class:"flex flex-column",dir:this.dir,style:{width:this.props.dynamicWidth?"100%":`calc(${e}px + (var(--padding) + var(--sidebar-width)))`},"data-emoji-set":this.props.set,"data-theme":this.state.theme,"data-menu":this.state.showSkins?"":void 0,children:["top"==this.props.previewPosition&&this.renderPreview(),"top"==this.props.navPosition&&this.renderNav(),"sticky"==this.props.searchPosition&&Uy("div",{class:"padding-lr",children:this.renderSearch()}),Uy("div",{ref:this.refs.scroll,class:"scroll flex-grow padding-lr",children:Uy("div",{style:{width:this.props.dynamicWidth?"100%":e,height:"100%"},children:["static"==this.props.searchPosition&&this.renderSearch(),this.renderSearchResults(),this.renderCategories()]})}),"bottom"==this.props.navPosition&&this.renderNav(),"bottom"==this.props.previewPosition&&this.renderPreview(),this.state.showSkins&&this.renderSkins(),this.renderLiveRegion()]})}constructor(e){super(),sy(this,"handleClickOutside",(e=>{const{element:t}=this.props;e.target!=t&&(this.state.showSkins&&this.closeSkins(),this.props.onClickOutside&&this.props.onClickOutside(e))})),sy(this,"handleBaseClick",(e=>{this.state.showSkins&&(e.target.closest(".menu")||(e.preventDefault(),e.stopImmediatePropagation(),this.closeSkins()))})),sy(this,"handleBaseKeydown",(e=>{this.state.showSkins&&"Escape"==e.key&&(e.preventDefault(),e.stopImmediatePropagation(),this.closeSkins())})),sy(this,"handleSearchClick",(()=>{this.getEmojiByPos(this.state.pos)&&this.setState({pos:[-1,-1]})})),sy(this,"handleSearchInput",(async()=>{const e=this.refs.searchInput.current;if(!e)return;const{value:t}=e,n=await d_.search(t),r=()=>{this.refs.scroll.current&&(this.refs.scroll.current.scrollTop=0)};if(!n)return this.setState({searchResults:n,pos:[-1,-1]},r);const o=e.selectionStart==e.value.length?[0,0]:[-1,-1],i=[];i.setsize=n.length;let a=null;for(let e of n)i.length&&a.length!=this.getPerLine()||(a=[],a.__categoryId="search",a.__index=i.length,i.push(a)),a.push(e);this.ignoreMouse(),this.setState({searchResults:i,pos:o},r)})),sy(this,"handleSearchKeyDown",(e=>{const t=e.currentTarget;switch(e.stopImmediatePropagation(),e.key){case"ArrowLeft":this.navigate({e:e,input:t,left:!0});break;case"ArrowRight":this.navigate({e:e,input:t,right:!0});break;case"ArrowUp":this.navigate({e:e,input:t,up:!0});break;case"ArrowDown":this.navigate({e:e,input:t,down:!0});break;case"Enter":e.preventDefault(),this.handleEmojiClick({e:e,pos:this.state.pos});break;case"Escape":e.preventDefault(),this.state.searchResults?this.clearSearch():this.unfocusSearch()}})),sy(this,"clearSearch",(()=>{const e=this.refs.searchInput.current;e&&(e.value="",e.focus(),this.handleSearchInput())})),sy(this,"handleCategoryClick",(e=>{let{category:t,i:n}=e;this.scrollTo(0==n?{row:-1}:{categoryId:t.id})})),sy(this,"openSkins",(e=>{const{currentTarget:t}=e,n=t.getBoundingClientRect();this.setState({showSkins:n},(async()=>{await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(let t in[...Array(e).keys()])await new Promise(requestAnimationFrame)}(2);const e=this.refs.menu.current;e&&(e.classList.remove("hidden"),this.refs.skinToneRadio.current.focus(),this.base.addEventListener("click",this.handleBaseClick,!0),this.base.addEventListener("keydown",this.handleBaseKeydown,!0))}))})),this.observers=[],this.state=u._objectSpread2({pos:[-1,-1],perLine:this.initDynamicPerLine(e),visibleRows:{0:!0}},this.getInitialState(e))}}class tb extends v_{async connectedCallback(){const e=c_(this.props,Zy,this);e.element=this,e.ref=e=>{this.component=e},await s_(e),this.disconnected||jy(Uy(eb,u._objectSpread2({},e)),this.shadowRoot)}constructor(e){super(e,{styles:ay(nb)})}}sy(tb,"Props",Zy),"undefined"==typeof customElements||customElements.get("em-emoji-picker")||customElements.define("em-emoji-picker",tb);var nb={};function rb(e){const n=t.useRef(null),r=t.useRef(null);return r.current&&r.current.update(e),t.useEffect((()=>(r.current=new tb(u._objectSpread2(u._objectSpread2({},e),{},{ref:n})),()=>{r.current=null})),[]),R.default.createElement("div",{ref:n})}nb=':host {\n  width: min-content;\n  height: 435px;\n  min-height: 230px;\n  border-radius: var(--border-radius);\n  box-shadow: var(--shadow);\n  --border-radius: 10px;\n  --category-icon-size: 18px;\n  --font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;\n  --font-size: 15px;\n  --preview-placeholder-size: 21px;\n  --preview-title-size: 1.1em;\n  --preview-subtitle-size: .9em;\n  --shadow-color: 0deg 0% 0%;\n  --shadow: .3px .5px 2.7px hsl(var(--shadow-color) / .14), .4px .8px 1px -3.2px hsl(var(--shadow-color) / .14), 1px 2px 2.5px -4.5px hsl(var(--shadow-color) / .14);\n  display: flex;\n}\n\n[data-theme="light"] {\n  --em-rgb-color: var(--rgb-color, 34, 36, 39);\n  --em-rgb-accent: var(--rgb-accent, 34, 102, 237);\n  --em-rgb-background: var(--rgb-background, 255, 255, 255);\n  --em-rgb-input: var(--rgb-input, 255, 255, 255);\n  --em-color-border: var(--color-border, rgba(0, 0, 0, .05));\n  --em-color-border-over: var(--color-border-over, rgba(0, 0, 0, .1));\n}\n\n[data-theme="dark"] {\n  --em-rgb-color: var(--rgb-color, 222, 222, 221);\n  --em-rgb-accent: var(--rgb-accent, 58, 130, 247);\n  --em-rgb-background: var(--rgb-background, 21, 22, 23);\n  --em-rgb-input: var(--rgb-input, 0, 0, 0);\n  --em-color-border: var(--color-border, rgba(255, 255, 255, .1));\n  --em-color-border-over: var(--color-border-over, rgba(255, 255, 255, .2));\n}\n\n#root {\n  --color-a: rgb(var(--em-rgb-color));\n  --color-b: rgba(var(--em-rgb-color), .65);\n  --color-c: rgba(var(--em-rgb-color), .45);\n  --padding: 12px;\n  --padding-small: calc(var(--padding) / 2);\n  --sidebar-width: 16px;\n  --duration: 225ms;\n  --duration-fast: 125ms;\n  --duration-instant: 50ms;\n  --easing: cubic-bezier(.4, 0, .2, 1);\n  width: 100%;\n  text-align: left;\n  border-radius: var(--border-radius);\n  background-color: rgb(var(--em-rgb-background));\n  position: relative;\n}\n\n@media (prefers-reduced-motion) {\n  #root {\n    --duration: 0;\n    --duration-fast: 0;\n    --duration-instant: 0;\n  }\n}\n\n#root[data-menu] button {\n  cursor: auto;\n}\n\n#root[data-menu] .menu button {\n  cursor: pointer;\n}\n\n:host, #root, input, button {\n  color: rgb(var(--em-rgb-color));\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  line-height: normal;\n}\n\n*, :before, :after {\n  box-sizing: border-box;\n  min-width: 0;\n  margin: 0;\n  padding: 0;\n}\n\n.relative {\n  position: relative;\n}\n\n.flex {\n  display: flex;\n}\n\n.flex-auto {\n  flex: none;\n}\n\n.flex-center {\n  justify-content: center;\n}\n\n.flex-column {\n  flex-direction: column;\n}\n\n.flex-grow {\n  flex: auto;\n}\n\n.flex-middle {\n  align-items: center;\n}\n\n.flex-wrap {\n  flex-wrap: wrap;\n}\n\n.padding {\n  padding: var(--padding);\n}\n\n.padding-t {\n  padding-top: var(--padding);\n}\n\n.padding-lr {\n  padding-left: var(--padding);\n  padding-right: var(--padding);\n}\n\n.padding-r {\n  padding-right: var(--padding);\n}\n\n.padding-small {\n  padding: var(--padding-small);\n}\n\n.padding-small-b {\n  padding-bottom: var(--padding-small);\n}\n\n.padding-small-lr {\n  padding-left: var(--padding-small);\n  padding-right: var(--padding-small);\n}\n\n.margin {\n  margin: var(--padding);\n}\n\n.margin-r {\n  margin-right: var(--padding);\n}\n\n.margin-l {\n  margin-left: var(--padding);\n}\n\n.margin-small-l {\n  margin-left: var(--padding-small);\n}\n\n.margin-small-lr {\n  margin-left: var(--padding-small);\n  margin-right: var(--padding-small);\n}\n\n.align-l {\n  text-align: left;\n}\n\n.align-r {\n  text-align: right;\n}\n\n.color-a {\n  color: var(--color-a);\n}\n\n.color-b {\n  color: var(--color-b);\n}\n\n.color-c {\n  color: var(--color-c);\n}\n\n.ellipsis {\n  white-space: nowrap;\n  max-width: 100%;\n  width: auto;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.sr-only {\n  width: 1px;\n  height: 1px;\n  position: absolute;\n  top: auto;\n  left: -10000px;\n  overflow: hidden;\n}\n\na {\n  cursor: pointer;\n  color: rgb(var(--em-rgb-accent));\n}\n\na:hover {\n  text-decoration: underline;\n}\n\n.spacer {\n  height: 10px;\n}\n\n[dir="rtl"] .scroll {\n  padding-left: 0;\n  padding-right: var(--padding);\n}\n\n.scroll {\n  padding-right: 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n\n.scroll::-webkit-scrollbar {\n  width: var(--sidebar-width);\n  height: var(--sidebar-width);\n}\n\n.scroll::-webkit-scrollbar-track {\n  border: 0;\n}\n\n.scroll::-webkit-scrollbar-button {\n  width: 0;\n  height: 0;\n  display: none;\n}\n\n.scroll::-webkit-scrollbar-corner {\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.scroll::-webkit-scrollbar-thumb {\n  min-height: 20%;\n  min-height: 65px;\n  border: 4px solid rgb(var(--em-rgb-background));\n  border-radius: 8px;\n}\n\n.scroll::-webkit-scrollbar-thumb:hover {\n  background-color: var(--em-color-border-over) !important;\n}\n\n.scroll:hover::-webkit-scrollbar-thumb {\n  background-color: var(--em-color-border);\n}\n\n.sticky {\n  z-index: 1;\n  background-color: rgba(var(--em-rgb-background), .9);\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  font-weight: 500;\n  position: sticky;\n  top: -1px;\n}\n\n[dir="rtl"] .search input[type="search"] {\n  padding: 10px 2.2em 10px 2em;\n}\n\n[dir="rtl"] .search .loupe {\n  left: auto;\n  right: .7em;\n}\n\n[dir="rtl"] .search .delete {\n  left: .7em;\n  right: auto;\n}\n\n.search {\n  z-index: 2;\n  position: relative;\n}\n\n.search input, .search button {\n  font-size: calc(var(--font-size)  - 1px);\n}\n\n.search input[type="search"] {\n  width: 100%;\n  background-color: var(--em-color-border);\n  transition-duration: var(--duration);\n  transition-property: background-color, box-shadow;\n  transition-timing-function: var(--easing);\n  border: 0;\n  border-radius: 10px;\n  outline: 0;\n  padding: 10px 2em 10px 2.2em;\n  display: block;\n}\n\n.search input[type="search"]::-ms-input-placeholder {\n  color: inherit;\n  opacity: .6;\n}\n\n.search input[type="search"]::placeholder {\n  color: inherit;\n  opacity: .6;\n}\n\n.search input[type="search"], .search input[type="search"]::-webkit-search-decoration, .search input[type="search"]::-webkit-search-cancel-button, .search input[type="search"]::-webkit-search-results-button, .search input[type="search"]::-webkit-search-results-decoration {\n  -webkit-appearance: none;\n  -ms-appearance: none;\n  appearance: none;\n}\n\n.search input[type="search"]:focus {\n  background-color: rgb(var(--em-rgb-input));\n  box-shadow: inset 0 0 0 1px rgb(var(--em-rgb-accent)), 0 1px 3px rgba(65, 69, 73, .2);\n}\n\n.search .icon {\n  z-index: 1;\n  color: rgba(var(--em-rgb-color), .7);\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.search .loupe {\n  pointer-events: none;\n  left: .7em;\n}\n\n.search .delete {\n  right: .7em;\n}\n\nsvg {\n  fill: currentColor;\n  width: 1em;\n  height: 1em;\n}\n\nbutton {\n  -webkit-appearance: none;\n  -ms-appearance: none;\n  appearance: none;\n  cursor: pointer;\n  color: currentColor;\n  background-color: rgba(0, 0, 0, 0);\n  border: 0;\n}\n\n#nav {\n  z-index: 2;\n  padding-top: 12px;\n  padding-bottom: 12px;\n  padding-right: var(--sidebar-width);\n  position: relative;\n}\n\n#nav button {\n  color: var(--color-b);\n  transition: color var(--duration) var(--easing);\n}\n\n#nav button:hover {\n  color: var(--color-a);\n}\n\n#nav svg, #nav img {\n  width: var(--category-icon-size);\n  height: var(--category-icon-size);\n}\n\n#nav[dir="rtl"] .bar {\n  left: auto;\n  right: 0;\n}\n\n#nav .bar {\n  width: 100%;\n  height: 3px;\n  background-color: rgb(var(--em-rgb-accent));\n  transition: transform var(--duration) var(--easing);\n  border-radius: 3px 3px 0 0;\n  position: absolute;\n  bottom: -12px;\n  left: 0;\n}\n\n#nav button[aria-selected] {\n  color: rgb(var(--em-rgb-accent));\n}\n\n#preview {\n  z-index: 2;\n  padding: calc(var(--padding)  + 4px) var(--padding);\n  padding-right: var(--sidebar-width);\n  position: relative;\n}\n\n#preview .preview-placeholder {\n  font-size: var(--preview-placeholder-size);\n}\n\n#preview .preview-title {\n  font-size: var(--preview-title-size);\n}\n\n#preview .preview-subtitle {\n  font-size: var(--preview-subtitle-size);\n}\n\n#nav:before, #preview:before {\n  content: "";\n  height: 2px;\n  position: absolute;\n  left: 0;\n  right: 0;\n}\n\n#nav[data-position="top"]:before, #preview[data-position="top"]:before {\n  background: linear-gradient(to bottom, var(--em-color-border), transparent);\n  top: 100%;\n}\n\n#nav[data-position="bottom"]:before, #preview[data-position="bottom"]:before {\n  background: linear-gradient(to top, var(--em-color-border), transparent);\n  bottom: 100%;\n}\n\n.category:last-child {\n  min-height: calc(100% + 1px);\n}\n\n.category button {\n  font-family: -apple-system, BlinkMacSystemFont, Helvetica Neue, sans-serif;\n  position: relative;\n}\n\n.category button > * {\n  position: relative;\n}\n\n.category button .background {\n  opacity: 0;\n  background-color: var(--em-color-border);\n  transition: opacity var(--duration-fast) var(--easing) var(--duration-instant);\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n\n.category button:hover .background {\n  transition-duration: var(--duration-instant);\n  transition-delay: 0s;\n}\n\n.category button[aria-selected] .background {\n  opacity: 1;\n}\n\n.category button[data-keyboard] .background {\n  transition: none;\n}\n\n.row {\n  width: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.skin-tone-button {\n  border: 1px solid rgba(0, 0, 0, 0);\n  border-radius: 100%;\n}\n\n.skin-tone-button:hover {\n  border-color: var(--em-color-border);\n}\n\n.skin-tone-button:active .skin-tone {\n  transform: scale(.85) !important;\n}\n\n.skin-tone-button .skin-tone {\n  transition: transform var(--duration) var(--easing);\n}\n\n.skin-tone-button[aria-selected] {\n  background-color: var(--em-color-border);\n  border-top-color: rgba(0, 0, 0, .05);\n  border-bottom-color: rgba(0, 0, 0, 0);\n  border-left-width: 0;\n  border-right-width: 0;\n}\n\n.skin-tone-button[aria-selected] .skin-tone {\n  transform: scale(.9);\n}\n\n.menu {\n  z-index: 2;\n  white-space: nowrap;\n  border: 1px solid var(--em-color-border);\n  background-color: rgba(var(--em-rgb-background), .9);\n  -webkit-backdrop-filter: blur(4px);\n  backdrop-filter: blur(4px);\n  transition-property: opacity, transform;\n  transition-duration: var(--duration);\n  transition-timing-function: var(--easing);\n  border-radius: 10px;\n  padding: 4px;\n  position: absolute;\n  box-shadow: 1px 1px 5px rgba(0, 0, 0, .05);\n}\n\n.menu.hidden {\n  opacity: 0;\n}\n\n.menu[data-position="bottom"] {\n  transform-origin: 100% 100%;\n}\n\n.menu[data-position="bottom"].hidden {\n  transform: scale(.9)rotate(-3deg)translateY(5%);\n}\n\n.menu[data-position="top"] {\n  transform-origin: 100% 0;\n}\n\n.menu[data-position="top"].hidden {\n  transform: scale(.9)rotate(3deg)translateY(-5%);\n}\n\n.menu input[type="radio"] {\n  clip: rect(0 0 0 0);\n  width: 1px;\n  height: 1px;\n  border: 0;\n  margin: 0;\n  padding: 0;\n  position: absolute;\n  overflow: hidden;\n}\n\n.menu input[type="radio"]:checked + .option {\n  box-shadow: 0 0 0 2px rgb(var(--em-rgb-accent));\n}\n\n.option {\n  width: 100%;\n  border-radius: 6px;\n  padding: 4px 6px;\n}\n\n.option:hover {\n  color: #fff;\n  background-color: rgb(var(--em-rgb-accent));\n}\n\n.skin-tone {\n  width: 16px;\n  height: 16px;\n  border-radius: 100%;\n  display: inline-block;\n  position: relative;\n  overflow: hidden;\n}\n\n.skin-tone:after {\n  content: "";\n  mix-blend-mode: overlay;\n  background: linear-gradient(rgba(255, 255, 255, .2), rgba(0, 0, 0, 0));\n  border: 1px solid rgba(0, 0, 0, .8);\n  border-radius: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  box-shadow: inset 0 -2px 3px #000, inset 0 1px 2px #fff;\n}\n\n.skin-tone-1 {\n  background-color: #ffc93a;\n}\n\n.skin-tone-2 {\n  background-color: #ffdab7;\n}\n\n.skin-tone-3 {\n  background-color: #e7b98f;\n}\n\n.skin-tone-4 {\n  background-color: #c88c61;\n}\n\n.skin-tone-5 {\n  background-color: #a46134;\n}\n\n.skin-tone-6 {\n  background-color: #5d4437;\n}\n\n[data-index] {\n  justify-content: space-between;\n}\n\n[data-emoji-set="twitter"] .skin-tone:after {\n  box-shadow: none;\n  border-color: rgba(0, 0, 0, .5);\n}\n\n[data-emoji-set="twitter"] .skin-tone-1 {\n  background-color: #fade72;\n}\n\n[data-emoji-set="twitter"] .skin-tone-2 {\n  background-color: #f3dfd0;\n}\n\n[data-emoji-set="twitter"] .skin-tone-3 {\n  background-color: #eed3a8;\n}\n\n[data-emoji-set="twitter"] .skin-tone-4 {\n  background-color: #cfad8d;\n}\n\n[data-emoji-set="twitter"] .skin-tone-5 {\n  background-color: #a8805d;\n}\n\n[data-emoji-set="twitter"] .skin-tone-6 {\n  background-color: #765542;\n}\n\n[data-emoji-set="google"] .skin-tone:after {\n  box-shadow: inset 0 0 2px 2px rgba(0, 0, 0, .4);\n}\n\n[data-emoji-set="google"] .skin-tone-1 {\n  background-color: #f5c748;\n}\n\n[data-emoji-set="google"] .skin-tone-2 {\n  background-color: #f1d5aa;\n}\n\n[data-emoji-set="google"] .skin-tone-3 {\n  background-color: #d4b48d;\n}\n\n[data-emoji-set="google"] .skin-tone-4 {\n  background-color: #aa876b;\n}\n\n[data-emoji-set="google"] .skin-tone-5 {\n  background-color: #916544;\n}\n\n[data-emoji-set="google"] .skin-tone-6 {\n  background-color: #61493f;\n}\n\n[data-emoji-set="facebook"] .skin-tone:after {\n  border-color: rgba(0, 0, 0, .4);\n  box-shadow: inset 0 -2px 3px #000, inset 0 1px 4px #fff;\n}\n\n[data-emoji-set="facebook"] .skin-tone-1 {\n  background-color: #f5c748;\n}\n\n[data-emoji-set="facebook"] .skin-tone-2 {\n  background-color: #f1d5aa;\n}\n\n[data-emoji-set="facebook"] .skin-tone-3 {\n  background-color: #d4b48d;\n}\n\n[data-emoji-set="facebook"] .skin-tone-4 {\n  background-color: #aa876b;\n}\n\n[data-emoji-set="facebook"] .skin-tone-5 {\n  background-color: #916544;\n}\n\n[data-emoji-set="facebook"] .skin-tone-6 {\n  background-color: #61493f;\n}\n\n';const ob=r.defineMessages({addReaction:{id:"ZpngiY",defaultMessage:"Add reaction"},copyLink:{id:"PQBR9x",defaultMessage:"Copy link"},copyLinkToCommentSuccess:{id:"GffGvU",defaultMessage:"Link copied to comment in <b>{fileName}</b>."},copyLinkToCommentFailure:{id:"hWt8Qb",defaultMessage:"Couldn’t copy the link to comment."}});n.injectInternalStyle("/static/js/comments2/components/comment/emoji_picker.module.out-vflS5FIs-.css",(e=>"em-emoji-picker{max-height:300px}._emoji-picker-button_d8peg_6,._emoji-reaction-button_d8peg_5{background-color:var(--dig-color__background__subtle);color:var(--dig-color__text__subtle);font-size:12px;margin-top:var(--dig-spacing__micro__xsmall)}._emoji-reaction-button_d8peg_5{padding:6px,8px,6px,8px;width:46px}._emoji-reaction-selected_d8peg_18{background-color:var(--dig-color__selection__on-base)!important;border:1px solid var(--dig-color__utility__focus-ring)!important}._emoji-picker-button_d8peg_6{width:40px}._emoji-reaction-grid_d8peg_27{display:grid;grid-template-columns:repeat(auto-fill,minmax(45px,1fr))}._emoji-reaction-emoji_d8peg_32{font-size:16px}._emoji-reaction-count_d8peg_38,._emoji-reaction-emoji_d8peg_32{display:inline-block;padding-left:var(--dig-spacing__micro__xsmall)}._emoji-reaction-count_d8peg_38{padding-right:var(--dig-spacing__micro__xsmall)}._emoji-picker-button-container_d8peg_44{display:inline-block}"));const ib="_emoji-picker-button_d8peg_6",ab="_emoji-reaction-button_d8peg_5",sb="_emoji-reaction-selected_d8peg_18",cb="_emoji-reaction-grid_d8peg_27",lb="_emoji-reaction-emoji_d8peg_32",ub="_emoji-reaction-count_d8peg_38",db="_emoji-picker-button-container_d8peg_44";function pb(e){const[t]=n.useAtom(n.reactionsAtom);return e in t?t[e]:[]}const fb=e=>e.id!==n.LOGGED_OUT_USER_ID,mb=r.defineMessage({id:"YlAowm",defaultMessage:"{tooltips}"}),gb=r.defineMessage({id:"mgy4zw",defaultMessage:"You (click to remove)"}),hb=r.defineMessages({addEmoji:{id:"mnn1/X",defaultMessage:"Add emoji reaction"},markAsUnread:{id:"z73pDg",defaultMessage:"Mark as unread"},markAsRead:{id:"T8mQUy",defaultMessage:"Mark as read"},resolve:{id:"I77RKR",defaultMessage:"Mark thread as resolved"},unresolve:{id:"qc8494",defaultMessage:"Mark thread as unresolved"},edit:{id:"ZeF6kJ",defaultMessage:"Edit"},delete:{id:"2WeS6D",defaultMessage:"Delete"},more:{id:"7QyApZ",defaultMessage:"More"}}),vb=({boundaryRef:e,shouldHaveReactionRowStyling:o=!0,className:i,commentId:a,handleHoverActionFocus:c,handleHoverActionBlur:l})=>{const[u,d]=t.useState(!1),{showAuthModal:p,user:f,apiV2Client:m,logEvent:g,fileName:h,fileId:v,emojiData:y,previewType:_,url:b}=n.useCommentsContext(),k=fb(f),w=n.useTheme(),C=t.useRef(null),S=r.useIntl(),E=S.formatMessage(hb.addEmoji),x=()=>{d(!1),l()},M=t.useRef(null),T=t.useRef(null);R.default.useLayoutEffect((()=>{M&&M.current&&setTimeout((()=>{var e;const t=null===(e=T.current)||void 0===e?void 0:e.getBoundingClientRect();M.current&&(e=>e&&(e.top<0||e.left<0||e.bottom>window.innerHeight||e.right>window.innerWidth))(t)&&M.current.update()}),0)}),[u]);const A={addedFromExistingReaction:"false",fileName:h,fileId:v,isSharedLink:String(Boolean(b)),previewType:_},[O,D]=j(m,g,A),N=pb(a),P=N.length<20,[B]=n.useAtom(n.currentUserPidAtom),I=S.formatMessage(ob.addReaction);return P?R.default.createElement(n.Tooltip,{title:E,shouldCloseOnClick:!0,placement:"top-end"},R.default.createElement("div",{className:db},u&&R.default.createElement(n.ClickOutside,{onClickOutside:x,isActive:u,shouldPropagateMouseEvents:!0},R.default.createElement(n.Overlay,{placement:"top",anchorRef:C,auto:!0,shouldHideOnAnchorHidden:!0,boundaryRef:e,isPortaled:!0,ref:M},y&&R.default.createElement("div",{ref:T},R.default.createElement(rb,{data:y,theme:"dark"===w.mode?w.mode:"bright",emojiSize:20,emojiButtonSize:30,onClickOutside:x,perLine:7,previewPosition:"none","data-testid":"comments-emoji-menu",onEmojiSelect:e=>{!function(e,t,n){const r=n.find((t=>t.reaction===e));return r&&t&&r.user_ids.includes(t)}(e.native,B,N)?O(e.native,a):D(e.native,a),x()}})))),R.default.createElement(n.IconButton,{variant:"borderless",size:"medium",className:n.cx(i,o?ib:void 0),ref:C,"data-testid":"comments-emoji-picker",onClick:()=>{g({event:n.CommentsEventName.ADD_COMMENT_REACTION_START,extra:A}),k?u?x():(d(!0),c(a)):null==p||p()},"aria-label":I},R.default.createElement(n.UIIcon,{src:s.EmojiAddLine})))):null};vb.displayName="CommentsEmojiPicker";const yb=({commentId:e,reaction:t})=>{const o=t.user_ids.length,{showAuthModal:i,user:a,apiV2Client:s,fileName:c,fileId:l,logEvent:u,previewType:d,url:p}=n.useCommentsContext(),[f]=n.useAtom(n.currentUserPidAtom),m=f&&t.user_ids.includes(f),g=fb(a),h={addedFromExistingReaction:"true",fileName:c,fileId:l,isSharedLink:String(Boolean(p)),previewType:d},[v,y]=j(s,u,h),_=(e=>{const t=[],[o]=n.useAtom(n.reactionsUsersAtom),[i]=n.useAtom(n.currentUserPidAtom);e.forEach((e=>{e in o&&e!==i&&t.push(o[e])}));const a=r.useIntl(),s=a.formatMessage(gb);return!!i&&e.includes(i)&&t.push(s),a.formatMessage(mb,{tooltips:a.formatList(t,{type:"conjunction",style:"long"})})})(t.user_ids);return o>0?R.default.createElement(n.Tooltip,{title:_},R.default.createElement(n.IconButton,{variant:"borderless",size:"standard","data-testid":"comments-emoji-reaction-button",className:n.cx([ab,m?sb:void 0]),onClick:()=>{g?m?y(t.reaction,e):v(t.reaction,e):(u({event:n.CommentsEventName.ADD_COMMENT_REACTION,extra:h}),null==i||i())}},R.default.createElement("div",{className:lb},t.reaction),R.default.createElement("div",{className:ub},o))):null};yb.displayName="CommentsEmojiReaction";const _b=({boundaryRef:e,commentId:t})=>{const n=pb(t);return n.length>0?R.default.createElement("div",{className:cb,id:"comments-emoji-reaction-grid",onClick:e=>{e.stopPropagation()},onKeyDown:e=>{e.stopPropagation()}},n.map((e=>R.default.createElement(yb,{reaction:e,commentId:t,key:e.reaction}))),R.default.createElement(vb,{boundaryRef:e,commentId:t,handleHoverActionFocus:()=>{},handleHoverActionBlur:()=>{}})):null};_b.displayName="CommentsEmojiReactionGrid";const bb={draft:_v,comment:bv};class kb extends xh{get scopeNames(){return bb}mapPropsToLayers(){return[hv,mv,zh,dv,Ph,yv]}createDefaultStatus(){return cv(this.scopeNames)}mapPropsToUpdates(e,t){let n={};return e.content!==t.comment.content&&(n={...n,comment:{...t.comment,content:e.content}}),n}}n.injectInternalStyle("/static/js/comments2/components/thread/index.module.out-vflFURBfe.css",(e=>'._sc-thread-controls_1s19c_1{display:flex;justify-content:space-between;position:relative}._sc-thread-controls_1s19c_1>:first-child{min-width:0}._sc-thread-controls_1s19c_1>:nth-child(2){margin-left:8px}._sc-thread-controls-resolved-note_1s19c_15{font-style:italic}._sc-thread-controls_1s19c_1 .mc-tertiary-link-button{border-radius:0}._sc-thread-inactive_1s19c_23 ._sc-thread-controls_1s19c_1 ._sc-thread-controls-resolved-note_1s19c_15{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}._sc-thread-comments_1s19c_29{list-style-type:none;padding:0}._sc-thread-comments_1s19c_29>*{position:relative}._sc-thread-comments_1s19c_29>:before{content:"";height:100%;position:absolute;width:1px}._sc-thread-comments_1s19c_29>:first-child:before{top:12px}._sc-thread-comments_1s19c_29>:last-child:before{height:4px}._sc-thread--right-rail_1s19c_54 ._sc-thread-comments_1s19c_29>:first-child:before{top:20px}._sc-comment-deleted_1s19c_58._sc-comment-deleted--right-rail_1s19c_58 ._sc-thread-comments_1s19c_29>:first-child:before{top:34px}._sc-thread--right-rail_1s19c_54 ._sc-thread-comments_1s19c_29>:last-child:before{height:2px}._sc-thread--right-rail_1s19c_54 ._sc-thread-comments_1s19c_29>:only-child:before{height:0}._sc-thread-read_1s19c_70._sc-thread-active_1s19c_70{background:var(--dig-color__background__raised);border-bottom:1px solid var(--dig-color__border__subtle);border-top:1px solid var(--dig-color__border__subtle)}._sc-thread-active_1s19c_70._sc-thread-focused_1s19c_76{box-shadow:var(--dig-utilities__boxshadow__focus-ring)}._sc-thread_1s19c_1._sc-thread--right-rail_1s19c_54._sc-thread-active_1s19c_70._sc-thread-focused_1s19c_76{box-shadow:inset var(--dig-utilities__boxshadow__focus-ring)}._sc-thread_1s19c_1._sc-thread--right-rail_1s19c_54._sc-thread-active_1s19c_70._sc-thread-focused_1s19c_76 ._sc-thread-editor_1s19c_86{box-shadow:inset 1.5px -1.5px 0 1.5px var(--dig-color__utility__focus-ring),inset -1.5px -1.5px 0 1.5px var(--dig-color__utility__focus-ring)}._sc-thread-collapsed_1s19c_92{cursor:pointer}._sc-thread-source_1s19c_96{color:var(--unified_color_text_subtext);font-size:var(--unified_font_size_small);padding:0 16px 8px 58px}._sc-third-party-reply-cta_1s19c_102{background-color:var(--color_ink_5);padding:10px 12px}._sc-third-party-reply-cta_1s19c_102 p{margin:0}._sc-third-party-reply-cta_1s19c_102 .mc-button-secondary{margin-top:8px}._sc-thread-editor-sticker-component-container_1s19c_115{height:32px}._sc-thread-editor-sticker-button-container_1s19c_119{float:right;height:fit-content;padding-right:4px;width:fit-content}._sc-thread_1s19c_1{font-size:var(--web_comment_font_size);margin:8px 12px 0;padding-top:8px}._sc-thread_1s19c_1._sc-thread--right-rail_1s19c_54{margin:0 0 -1px}._sc-thread_1s19c_1:last-child{margin-bottom:40px}._sc-comment-stream-small-margin-bottom_1s19c_145 ._sc-thread_1s19c_1:last-child{margin-bottom:8px}._sc-thread-resolved_1s19c_150{border-style:dashed}._sc-thread-inactive_1s19c_23{cursor:pointer;opacity:1;padding:8px 0}._sc-thread-resolved_1s19c_150._sc-thread-inactive_1s19c_23{opacity:.5}._sc-thread-focused_1s19c_76,._sc-thread-inactive_1s19c_23:focus,._sc-thread-read_1s19c_70._sc-thread-active_1s19c_70{opacity:1}._sc-thread-inactive_1s19c_23:hover{background-color:var(--dig-color__background__subtle)}._sc-thread-inactive_1s19c_23 ._sc-comment-read-only-editor-wrapper_1s19c_174{-webkit-line-clamp:3;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}._sc-thread-controls_1s19c_1{color:var(--color_stone);font-size:13px;line-height:var(--web_comment_line_height);margin:2px 12px 10px}._sc-thread-controls_1s19c_1 ._sc-thread-toggle_1s19c_190{color:var(--color_stone);padding:0}._sc-thread-controls_1s19c_1 ._sc-thread-toggle_1s19c_190 .mc-tertiary-icon-text{font-size:13px;line-height:var(--web_comment_line_height);padding:0}._sc-thread-comments_1s19c_29>:before{background:var(--dig-color__secondary__base);left:30px;top:20px}._sc-thread--right-rail_1s19c_54 ._sc-thread-comments_1s19c_29>:before{left:30px}._sc-thread-unread_1s19c_214 ._sc-thread-comments_1s19c_29>:before{background:var(--color_blue_forty)}._sc-thread-active_1s19c_70{cursor:inherit;margin-bottom:16px}._sc-thread-unread_1s19c_214{background:var(--color_blue_sixteen)}._sc-thread-comment-number_1s19c_229{color:var(--color_blue);font-size:13px;padding:8px 16px 8px 58px}._sc-thread-editor_1s19c_86{background-color:var(--dig-color__background__subtle);padding:var(--spacing__unit--2)}._sc-thread--right-rail_1s19c_54 ._sc-thread-comment-number_1s19c_229{color:var(--dig-color__text__base);font-family:var(--type__body__xsmall--fontfamily);font-size:var(--type__body__xsmall--fontsize);line-height:var(--type__body__xsmall--lineheight);padding:4px 8px 4px 50px;text-decoration:underline}._sc-thread--right-rail_1s19c_54 ._sc-thread-controls-resolved-note_1s19c_15{color:var(--dig-color__text__subtle);font-family:var(--type__body__small--fontfamily);font-size:var(--type__body__small--fontsize);font-style:normal;line-height:var(--type__body__small--lineheight)}._sc-thread--right-rail_1s19c_54 ._sc-thread-controls_1s19c_1{margin:8px 8px 0}._sc-thread--right-rail_1s19c_54._sc-thread-unread_1s19c_214{background-color:var(--dig-color__primary__on-base)}._sc-thread--right-rail_1s19c_54._sc-thread-unread_1s19c_214:hover{background-color:var(--dig-color__primary__surface)}'));const wb="_sc-thread-controls_1s19c_1",Cb="_sc-thread-controls-resolved-note_1s19c_15",Sb="_sc-thread-inactive_1s19c_23",Eb="_sc-thread-comments_1s19c_29",xb="_sc-thread--right-rail_1s19c_54",Mb="_sc-thread-read_1s19c_70",Tb="_sc-thread-active_1s19c_70",Ab="_sc-thread-focused_1s19c_76",Ob="_sc-thread_1s19c_1",Db="_sc-thread-editor_1s19c_86",Rb="_sc-thread-source_1s19c_96",Nb="_sc-third-party-reply-cta_1s19c_102",Pb="_sc-thread-resolved_1s19c_150",Bb="_sc-comment-read-only-editor-wrapper_1s19c_174",Ib="_sc-thread-unread_1s19c_214",Kb="_sc-thread-comment-number_1s19c_229";class Lb extends R.Component{render(){const{author:e,children:t,annotation:n}=this.props,r=R.createElement("div",{className:Bb},R.createElement(Dg,{readOnly:!0,annotation:n}));return R.createElement(kb,{...this.props},R.createElement("div",{className:i.classes$1.scCommentRendererInnerRightRail},R.createElement("div",{className:i.classes$1.scCommentRendererAvatar},R.createElement(i.DIGCommentAvatar,{user:e})),t&&"function"==typeof t?t(r):r))}}Lb.displayName="CommentRenderer";const Fb=e=>{const t=r.useIntl();return R.createElement(Qv,{...e,postLabel:t.formatMessage({id:"GM9O28",defaultMessage:"Save"}),cancelLabel:t.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})})};Fb.displayName="InlineCommentEditorPostBarImpl";const jb=R.memo(Fb);jb.displayName="InlineCommentEditorPostBar";const zb=e=>{const{comment:t}=e,{author:o,timestamp:a}=t,s=r.useIntl();return R.createElement("div",{className:i.classes$1.scCommentInfoRightRail},R.createElement("div",{className:i.classes$1.scCommentAuthor},R.createElement(n.Text,{size:"small",isBold:!0},null==o?void 0:o.name.display)),a.getTime()?R.createElement("div",null,R.createElement(n.Text,{size:"small",color:"subtle"},n.timeSince(s,a,{displayLocation:"comments"}))):null)};zb.displayName="RightRailCommentInfo";const Ub=R.forwardRef((({className:e,children:t},n)=>{const o=r.useIntl();return R.createElement("li",{className:e,ref:n},R.createElement(i.DeletedDIGCommentAvatar,null),R.createElement("div",{className:i.classes$1.scCommentContentContainer},R.createElement("div",{className:i.classes$1.scCommentContent},t,t&&R.createElement(Eg,null),R.createElement("span",{className:i.classes$1.scCommentText},o.formatMessage({id:"w9I0zq",defaultMessage:"This comment was deleted."})))))}));Ub.displayName="DeleteMode";const Hb=R.forwardRef((({comment:e,actions:t,onEndEdit:n,className:r},o)=>{const i=R.useCallback((e=>{t.onEdited(e),n()}),[t,n]);return R.createElement("li",{className:r,ref:o},R.createElement(Hv,{author:e.author,content:e.content,postSignalComponent:jb,onCancel:n,onPost:i,onMentionsQueryUpdated:t.onMentionsQueryUpdated,renderBare:!0,shouldFocus:!0,openUpward:!1}))}));Hb.displayName="EditMode";const Vb=R.forwardRef(((e,t)=>{const{children:r,comment:{content:o,author:a,id:s,threadId:c},className:l,commentsStreamRef:u,hoverMenu:d,isHeadComment:p,active:f}=e,[m,g]=R.useState(!1),[h]=n.useAtom(n.hoverActionFocusedCommentIdAtom),v=n.useAtomValue(n.focusedThreadIdAtom),y=f||m||c===v&&p||h&&h===s;return R.createElement("li",{className:l,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),ref:t},R.createElement(Lb,{content:o,author:a,annotation:r},(t=>R.createElement("div",{className:i.classes$1.scCommentRendererContentWrapper},R.createElement(zb,{...e}),t,R.createElement(_b,{boundaryRef:u,commentId:s}),R.createElement("div",{className:n.cx(i.classes$1.scHoverMenuWrapper,{[i.classes$1.scHoverMenuVisible]:y})},d)))))}));Vb.displayName="DisplayMode";const Wb=R.memo(R.forwardRef(((e,t)=>{const{comment:r,actions:o,isEditing:a=!1,onEndEdit:s,className:c,children:l,commentsStreamRef:u}=e,d={[i.classes$1.scCommentDeleted]:r.deleted};return r.deleted?R.createElement(Ub,{className:n.cx(c,i.classes$1.scCommentDeletedRightRail,d),ref:t},l):a?R.createElement(Hb,{comment:r,actions:o,onEndEdit:s,className:n.cx(c,i.classes.scCommentEditor,i.classes$1.scCommentInlineEditor,d),ref:t}):R.createElement(Vb,{...e,className:n.cx(c,i.classes$1.scCommentRendererRightRail,d),commentsStreamRef:u,ref:t},l)})));Wb.displayName="Comment";const qb=()=>{},$b=R.memo((({label:e,onClick:t=qb})=>R.createElement(n.Text,{className:i.classes$1.scAnnotationLabelRightRail,size:"small",color:"inherit"},R.createElement(n.Link,{href:t,hasNoUnderline:!0,variant:"monochromatic",className:i.classes$1.scAnnotationLabelLink,display:"inline"},e))));$b.displayName="AnnotationLabel";function Gb(e){return(e<10?"0":"")+e}function Qb(e,t,n,r){let o;return o=`${Gb(e)}:${Gb(t)}:${Gb(n)}`,void 0!==r&&(o+=`:${Gb(r)}`),o}function Jb(e,t,n,r){let o=0;if(o=t||e/100,r&&n&&Math.round(100*n)%2997==0)return function(e,t){const n=Math.round(100*t),r=Math.floor(e*n/100),o=2*n/2997,i=Math.floor(r/(36*n)),a=r%(36*n),s=Math.floor(a/(6*n)),c=a%(6*n);let l,u,d;if(0===c||1===c)l=0,u=0,d=c;else{const e=60*Math.ceil(t)-o;l=Math.floor((c-o)/e);const n=(c-o)%1798+o;u=Math.floor(n/Math.ceil(t)),d=n%Math.ceil(t)}return l=10*s+l,Qb(i,l,u,d)}(o,n);if(r&&n&&n!==Math.round(n)){const e=Math.floor(o*n),t=Math.round(n);return Qb(Math.floor(e/(3600*t)),Math.floor(e/(60*t))%60,Math.floor(e/t)%60,Math.floor(e%t))}{const e=Math.floor(o/3600),t=Math.floor(o/60)%60,i=Math.floor(o)%60;let a;if(r&&n){const e=o-Math.floor(o),t=1/n;a=Math.floor(e/t)}return Qb(e,t,i,a)}}const Xb=R.forwardRef(((e,t)=>{let r;const{active:o,annotation:i,framePreciseCommentsEnabled:a,frameRate:s}=e;if(i&&n.isTimecodeAnnotation(i)){const{time:t}=i;if(0!==t){let n;(function(e){return void 0!==e&&"video"===e.type})(i)&&(n=i.timeSec),r=R.createElement($b,{label:Jb(t,n,s,a),onClick:n=>e.actions.onClickAnnotation({annotationInfo:{type:"time",time:t},threadID:e.comment.threadId,e:n,active:o})})}}return R.createElement(Wb,{ref:t,...e},r)}));Xb.displayName="TimeCodedComment";const Yb=R.forwardRef(((e,t)=>{let n;const{annotation:o,actions:i,comment:a,active:s}=e,c=r.useIntl(),l=R.useCallback((e=>{i.onClickAnnotation({annotationInfo:{type:"numbered"},threadID:a.threadId,e:e,active:s})}),[i,a.threadId,s]),u=o&&"document"===o.type&&o.regions[0]&&o.regions[0].page;return u&&(n=R.createElement($b,{label:c.formatMessage({id:"rWnLvq",defaultMessage:"Page {page}"},{page:u}),onClick:l})),R.createElement(Wb,{ref:t,...e},n)}));Yb.displayName="NumberedComment";const Zb=(e,t)=>{const n=p.URI.parse(e),r="comment_id="+t;return n.setFragment(r),n.toString()},ek=({actions:e,boundaryRef:t,commentRef:r,intl:o,handleHoverActionFocus:i,handleHoverActionBlur:a,comment:c,onStartEdit:l,isThreadMenu:u=!1,thread:d,streamSettings:p})=>{const{commentsBladeId:f,fileId:m,url:g,fileName:h,showSnackbar:v,handleCopyLinkClick:y}=n.useCommentsContext(),_=n.useDispatch(),b=R.default.useCallback((()=>{g?(({text:e,onSuccess:t,onFailure:n})=>{const r=document.createElement("input");r.type="text",r.value=e,document.body.appendChild(r),r.select();let o=!1;try{o=document.execCommand("copy")}catch(e){}document.body.removeChild(r),o?null==t||t():null==n||n()})({text:Zb(g,c.id),onSuccess:()=>{const e=R.default.createElement(n.Truncate,{maxWidth:400,location:.5},h),t=R.default.createElement(n.Text,{className:ph},o.formatMessage(ob.copyLinkToCommentSuccess,{fileName:e,b:e=>R.default.createElement("b",null,e)}));null==v||v(t)},onFailure:()=>{const e=R.default.createElement(n.Text,{className:ph},o.formatMessage(ob.copyLinkToCommentFailure));null==v||v(e)}}):null==y||y(r,c.id)}),[h,g,c.id,v,o,y,r]),k=n.useSetAtom(n.focusedThreadIdAtom),w=R.default.useCallback((()=>{_(n.activateThread({fileId:m,sharedLinkURL:g,fileViewerId:f,threadId:d.id,isThirdParty:d.isThirdParty})),k(d.id),l(c)}),[c,f,_,m,l,k,d.id,d.isThirdParty,g]),C=u&&(null==p?void 0:p.canModifyThreads)&&!(null==d?void 0:d.isThirdParty),S=o.formatMessage(hb.resolve),E=o.formatMessage(hb.more),x=o.formatMessage((null==d?void 0:d.read)?hb.markAsUnread:hb.markAsRead);return R.default.createElement("div",{className:uh,onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),"data-testid":u?"thread-hover-menu":"comment-hover-menu",tabIndex:0,role:"menu"},R.default.createElement(n.Menu.Wrapper,{onSelection:e=>{e.handler()}},(({getContentProps:t,getTriggerProps:r,triggerRef:i})=>R.default.createElement(R.default.Fragment,null,R.default.createElement(n.IconButton,{...r(),variant:"borderless",size:"medium",className:dh,"aria-label":E},R.default.createElement(n.UIIcon,{src:s.MoreVerticalLine})),R.default.createElement(n.Menu.Content,{...t(),triggerRef:i,placement:"left-start"},R.default.createElement(n.Menu.Segment,null,C&&R.default.createElement(n.Menu.ActionItem,{key:x,disabled:Boolean(null==d?void 0:d.pending),withTitle:x,value:{handler:(null==d?void 0:d.read)?e.onMarkAsUnread:e.onMarkAsRead}}),R.default.createElement(n.Menu.ActionItem,{key:o.formatMessage(ob.copyLink),disabled:Boolean(null==d?void 0:d.pending)||Boolean(c.pending),withTitle:o.formatMessage(ob.copyLink),value:{handler:b}}),c.userPermissions.canEdit&&R.default.createElement(n.Menu.ActionItem,{key:o.formatMessage(hb.edit),disabled:Boolean(null==d?void 0:d.pending),withTitle:o.formatMessage(hb.edit),value:{handler:w}}),c.userPermissions.canDelete&&R.default.createElement(n.Menu.ActionItem,{key:o.formatMessage(hb.delete),disabled:Boolean(null==d?void 0:d.pending),withTitle:o.formatMessage(hb.delete),value:{handler:()=>e.onCommentDeleted(c.id)}})))))),C&&R.default.createElement(n.Tooltip,{title:S},R.default.createElement(n.IconButton,{variant:"borderless",size:"medium",onClick:e.onResolve,className:dh,"aria-label":S,disabled:Boolean(null==d?void 0:d.pending)},R.default.createElement(n.UIIcon,{src:n.CheckmarkCircleLine}))),R.default.createElement(vb,{shouldHaveReactionRowStyling:!1,className:dh,boundaryRef:t,commentId:c.id,handleHoverActionFocus:i,handleHoverActionBlur:a}))};ek.displayName="HoverMenu";const tk=({thirdPartySource:e})=>{const t=r.useIntl();return e?R.createElement("div",{className:Nb},R.createElement("p",null,t.formatMessage({id:"Vqx50y",defaultMessage:"To reply and view more detail, open this file."}))):null};function nk(e){const t=r.useIntl();if(e.isEmpty)return null;const{disabled:n,postEnabled:o,postLabel:i,cancelLabel:a,...s}=e;return R.createElement(Qv,{...s,postEnabled:o&&!n,postLabel:null!=i?i:t.formatMessage({id:"7Oex9C",defaultMessage:"Post"}),cancelLabel:null!=a?a:t.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})})}tk.displayName="ThirdPartyReplyCTA";const rk=({disabled:e,onPost:t,onCancel:o,postLabel:i,cancelLabel:a,author:s,shouldFocus:c,onEditorStateChange:l,onMentionsQueryUpdated:u,onFocus:d=(()=>({})),onBlur:p=(()=>({})),stickerPacks:f,placeholder:m,mentionsDisabled:g,onStickerStart:h,onMentionStart:v})=>{const[y,_]=R.useState((()=>qv())),b=r.useIntl(),{fileId:k,fileName:w,previewType:C,url:S}=n.useCommentsContext(),E=R.useRef(void 0),x=R.useCallback((()=>{_(qv())}),[]),M=R.useCallback((n=>{if(!e){x();const e={fileName:w,fileId:k,isSharedLink:String(Boolean(S)),previewType:C};t(n,e),window.setTimeout((()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.focus()}))}}),[e,x,w,k,S,C,t]),T=R.useCallback((()=>{x(),o()}),[x,o]),A=R.useCallback((t=>R.createElement(nk,{...t,disabled:e,postLabel:i,cancelLabel:a})),[i,a,e]);return R.createElement("div",{className:Db},R.createElement(Hv,{a11yEditorLabel:b.formatMessage({id:"1s2pn+",defaultMessage:"Reply"}),author:s,shouldFocus:c,content:y,onEditorStateChange:l,onMentionsQueryUpdated:u,onCancel:T,onPost:M,placeholder:null!=m?m:b.formatMessage({id:"1s2pn+",defaultMessage:"Reply"}),postSignalComponent:A,onFocus:d,onBlur:p,stickerPacks:f,mentionsDisabled:g,openUpward:!1,onStickerStart:h,onMentionStart:v,isThread:!0,setEditorRef:e=>{E.current=e}}))};rk.displayName="ThreadEditor";const ok=({thirdPartySource:e})=>{const t=function(e,t){switch(t){case"microsoft_word":return e.formatMessage({id:"tomAos",defaultMessage:"From Word"});case"microsoft_excel":return e.formatMessage({id:"ZDCfCa",defaultMessage:"From Excel"});case"microsoft_powerpoint":return e.formatMessage({id:"hDBFiJ",defaultMessage:"From PowerPoint"});default:return}}(r.useIntl(),e);return t?R.default.createElement("div",{className:Rb},t):null};ok.displayName="ThreadSourceMessage";const ik=()=>{},ak=e=>{const{count:t}=e,n=r.useIntl();n.formatMessage({id:"xj0qJi",defaultMessage:"{count, plural, one {# comment} other {# comments}}"},{count:t});const o=n.formatMessage({id:"NkhP8O",defaultMessage:"{count} comments"},{count:t});return R.createElement("div",{className:Kb},o)};ak.displayName="CollapsedCommentIndicator";const sk=({comment:e,active:t,commentFactory:r,annotation:o,hoverMenu:i,actions:a,onStartEdit:s,onEndEdit:c,commentsStreamRef:l,setCommentRef:u,isHeadComment:d})=>{const[p]=n.useAtom(zv),f=!!p&&e.id===p.id,m=R.useRef(null),g=R.useCallback((e=>{m.current=e,u(m)}),[u]),h={actions:fk(e,a),active:t,annotation:o,comment:e,isEditing:f,onStartEdit:s,onEndEdit:c,hoverMenu:i,commentsStreamRef:l,isHeadComment:d},v=r?r(h,g):R.createElement(Wb,{ref:g,...h});return R.createElement(R.Fragment,{key:e.id},v)};sk.displayName="ThreadComment";const ck=({resolvedInfo:e})=>{const t=r.useIntl(),o="with_details"===e.type&&e;let i,a;return o?(i=t.formatMessage({id:"seHweQ",defaultMessage:"Marked as resolved by {name}"},{name:o.resolver.name.display}),a=n.timeSince(t,o.resolvedTimestamp,{displayLocation:"comments"})):(i=t.formatMessage({id:"0FvFw6",defaultMessage:"Marked as resolved"}),a=t.formatMessage({id:"0FvFw6",defaultMessage:"Marked as resolved"})),R.createElement(n.Tooltip,{placement:"top",title:a},R.createElement("div",{className:Cb},i))};ck.displayName="MarkAsResolved";const lk=({streamSettings:e,actions:t,thread:o,active:i,isDisabled:a})=>{const c=r.useIntl(),l=i&&e.canModifyThreads&&!o.isThirdParty,u=mk(o);if(u){const e=c.formatMessage({id:"8bWrbN",defaultMessage:"Restore"});return R.createElement("div",{className:wb},R.createElement(ck,{resolvedInfo:u}),l&&R.createElement(n.Tooltip,{placement:"top",title:e},R.createElement(n.IconButton,{variant:"transparent",size:"small",onClick:t.onUnresolve,"aria-label":e,disabled:a},R.createElement(n.UIIcon,{src:s.RestoreLine,size:"small"}))))}return null};lk.displayName="ToplineControls";const uk=(e,t,n,r,o,i,a,s,c)=>R.createElement(ek,{actions:c,boundaryRef:e,commentRef:t,comment:n,thread:r,handleHoverActionFocus:o,handleHoverActionBlur:i,intl:a,onStartEdit:s}),dk=R.forwardRef((({actions:e,active:t,className:o,commentFactory:i,includeEditor:a,isDisabled:s,onBlurEditor:c,onCancel:l,onClick:u,onEditorStateChange:d,onEndEdit:p,onFocusEditor:f=(()=>{}),onStartEdit:m,shouldFocusThreadEditor:g,stickerPacks:h,streamSettings:v,thirdPartySource:y,thread:_,user:b,commentsStreamRef:k,handleHoverActionFocus:w,handleHoverActionBlur:C,filteredReplies:S,commentIdToRef:E,setCommentRef:x},M)=>{const T=r.useIntl(),A=mk(_),{onMentionsQueryUpdated:O,onReply:D,onStickerStart:N,onMentionStart:P}=e,B=n.useSetAtom(n.hoveredThreadIdAtom),I=R.useCallback((()=>{B(_.id)}),[B,_.id]),K=R.useCallback((()=>{B(void 0)}),[B]),L=A?void 0:R.createElement(ek,{isThreadMenu:!0,actions:e,boundaryRef:k,commentRef:E.current[_.comments[0].id],comment:_.comments[0],thread:_,streamSettings:v,intl:T,handleHoverActionFocus:w,handleHoverActionBlur:C,onStartEdit:m});return R.createElement("li",{onMouseEnter:I,onMouseLeave:K,className:o,tabIndex:0,role:"button","aria-expanded":!0,"aria-label":_.read?T.formatMessage({id:"/pyeDm",defaultMessage:"Comment thread"}):T.formatMessage({id:"vFb6Ur",defaultMessage:"Unread comment thread"}),ref:M,onClick:u},R.createElement(lk,{actions:e,streamSettings:v,thread:_,active:t,isDisabled:s}),R.createElement("ul",{className:Eb},R.createElement(sk,{comment:_.comments[0],active:!0,commentFactory:i,annotation:_.annotation,hoverMenu:L,actions:e,onStartEdit:m,onEndEdit:p,commentsStreamRef:k,setCommentRef:e=>x(_.comments[0].id,e),isHeadComment:!0}),S.map(((t,n)=>R.createElement(sk,{key:n,comment:t,active:!0,actions:e,onStartEdit:m,onEndEdit:p,commentsStreamRef:k,setCommentRef:e=>x(t.id,e),hoverMenu:uk(k,E.current[t.id],t,_,w,C,T,m,e),isHeadComment:!1})))),a&&R.createElement(rk,{author:b,disabled:s,shouldFocus:g,onCancel:l,onEditorStateChange:d,onMentionsQueryUpdated:O,onPost:D,onFocus:f,onBlur:c,stickerPacks:h,onStickerStart:N,onMentionStart:P}),R.createElement(tk,{thirdPartySource:_.isThirdParty?y:void 0}))}));dk.displayName="ActiveThread";const pk=R.forwardRef((({actions:e,active:t,className:o,commentFactory:i,isDisabled:a,commentsStreamRef:s,onClick:c,onEndEdit:l,onStartEdit:u,streamSettings:d,thirdPartySource:p,thread:f,handleHoverActionFocus:m,handleHoverActionBlur:g,filteredReplies:h,commentIdToRef:v,setCommentRef:y,logEvent:_},b)=>{const k=r.useIntl(),w=mk(f)?void 0:R.createElement(ek,{isThreadMenu:!0,actions:e,boundaryRef:s,commentRef:v.current[f.comments[0].id],comment:f.comments[0],thread:f,streamSettings:d,intl:k,handleHoverActionFocus:m,handleHoverActionBlur:g,onStartEdit:u}),C=h.length>0?uk(s,v.current[h[h.length-1].id],h[h.length-1],f,m,g,k,u,e):void 0,S=R.useCallback((e=>{13===e.keyCode&&c()}),[c]),E=n.useSetAtom(n.hoveredThreadIdAtom),x=R.useCallback((()=>{E(f.id)}),[E,f.id]),M=R.useCallback((()=>{E(void 0)}),[E]),T=n.useSetAtom(n.focusedThreadIdAtom),A=R.useCallback((()=>{T(f.id),_({event:n.CommentsEventName.REPLY_COMMENT_START})}),[_,T,f.id]),O=R.useCallback((()=>{T(void 0),_({event:n.CommentsEventName.REPLY_COMMENT_CANCEL})}),[_,T]);return R.createElement("li",{className:o,tabIndex:0,"aria-label":f.read?k.formatMessage({id:"/pyeDm",defaultMessage:"Comment thread"}):k.formatMessage({id:"vFb6Ur",defaultMessage:"Unread comment thread"}),role:"button","aria-expanded":!1,onClick:c,onKeyDown:S,onMouseEnter:x,onMouseLeave:M,onFocus:A,onBlur:O,ref:b},R.createElement(lk,{actions:e,streamSettings:d,thread:f,active:t,isDisabled:a}),R.createElement("ul",{className:Eb},R.createElement(sk,{comment:f.comments[0],active:t,commentFactory:i,annotation:f.annotation,actions:e,onStartEdit:u,onEndEdit:l,commentsStreamRef:s,hoverMenu:w,setCommentRef:e=>y(f.comments[0].id,e),isHeadComment:!0}),h.length>1&&R.createElement(ak,{count:h.length-1}),h.length>0&&R.createElement(sk,{comment:h[h.length-1],active:!1,actions:{onCommentDeleted:ik,onCommentEdited:ik,onClickAnnotation:ik,onMentionsQueryUpdated:ik},onStartEdit:ik,onEndEdit:ik,commentsStreamRef:s,hoverMenu:C,setCommentRef:e=>y(h[h.length-1].id,e),isHeadComment:!1})),R.createElement(ok,{thirdPartySource:f.isThirdParty?p:void 0}))}));function fk(e,t){return{onDeleted:()=>t.onCommentDeleted(e.id),onEdited:n=>t.onCommentEdited(e.id,n),onMentionsQueryUpdated:t.onMentionsQueryUpdated,onClickAnnotation:t.onClickAnnotation}}pk.displayName="InactiveThread";const mk=({resolvedInfo:e,resolved:t})=>e||(t?gk:void 0),gk={type:"no_details"},hk=R.memo((({className:e="",onEditorStateChange:t,onThreadInteractedWith:r,scrollToElem:o,thread:i,threadRef:a,commentFactory:s,commentsStreamRef:c})=>{const l=R.useRef(),u=R.useCallback((e=>{l.current=e,null==a||a(e)}),[a]),[d,p]=R.useState(!0),[f,m]=R.useState(!1),[,g]=n.useAtom(zv),[,h]=n.useAtom(n.hoverActionFocusedCommentIdAtom),{fileId:v,user:y,url:_,commentsBladeId:b,logEvent:k,stickerPacks:w,actionsAdapter:C}=n.useCommentsContext(),S=R.useMemo((()=>(e=>e.comments.slice(1).filter((e=>!e.deleted)))(i)),[i]),E=R.useRef({}),x=R.useCallback(((e,t)=>{E.current[e]=t}),[]),M=R.useMemo((()=>((e,t,r,o)=>{const{onCommentDeleted:i,onCommentEdited:a,onClickAnnotation:s,onEditorFocused:c,onMentionsQueryUpdated:l,onThreadMarkedAsRead:u,onThreadMarkedAsUnread:d,onThreadRepliedTo:p,onThreadResolved:f,onThreadUnresolved:m}=t;return{onClickAnnotation:s,onReply:(t,o={})=>{p(e,t),r({event:n.CommentsEventName.REPLY_COMMENT,extra:o})},onMarkAsRead:()=>{u(e),r({event:n.CommentsEventName.MARK_THREAD_READ})},onMarkAsUnread:()=>{d(e),r({event:n.CommentsEventName.MARK_THREAD_UNREAD})},onResolve:()=>{f(e),r({event:n.CommentsEventName.RESOLVE_COMMENT})},onUnresolve:()=>{m(e),r({event:n.CommentsEventName.UNRESOLVE_COMMENT})},onEditorFocused:()=>c(e),onCommentDeleted:t=>{i(t,e),r({event:n.CommentsEventName.DELETE_COMMENT})},onCommentEdited:(t,o)=>{a(t,o,e),r({event:n.CommentsEventName.EDIT_COMMENT})},onMentionsQueryUpdated:l,onEditorStateChange:o,onStickerStart:()=>{r({event:n.CommentsEventName.ADD_EMOJI})},onMentionStart:()=>{r({event:n.CommentsEventName.TAG_SOMEONE})}}})(i.id,C,k,t)),[i.id,C,k,t]),T=n.useSelector((e=>n.isActiveThread(e,i.id,b))),A=n.useAtomValue(n.focusedThreadIdAtom),O=i.id===A,D=n.useAtomValue(n.hoveredThreadIdAtom),N=i.id===D,P=n.useSelector((e=>e.thirdPartySource[b])),B=n.useSelector((e=>n.getStreamSettings(e,v,_))),I=R.useCallback((()=>{k({event:n.CommentsEventName.CANCEL_COMMENT}),C.onAllThreadsDeactivated()}),[C,k]),K=R.useCallback((e=>{k({event:n.CommentsEventName.START_EDIT_COMMENT}),g(e)}),[k]),L=R.useCallback((()=>{g(void 0)}),[]),F=R.useCallback((e=>{h(e)}),[h]),j=R.useCallback((()=>{h(void 0)}),[h]),z=R.useCallback((e=>(null==l?void 0:l.current)&&o?o(l.current).then((()=>{l.current&&m(e)})):Promise.resolve()),[o]);R.useEffect((()=>{if(T){const e=B.canComment;z(e)}else T||m(!1)}),[T,z,B.canComment]);const U=R.useCallback((()=>{r(i)}),[i,r]),H=R.useCallback((e=>{(function(e){return e.getSelection().getHasFocus()})(e)&&M.onEditorFocused(),M.onEditorStateChange(e),p(Pg(e))}),[M]),V=T||!d,W=i.resolved||i.resolvedInfo,q=n.cx(e,{[Ob]:!0,[xb]:!0,[Tb]:V,[Sb]:!V,[Mb]:i.read,[Ib]:!i.read,[Pb]:W,"sc-thread-unresolved":!W,[Ab]:O||N}),$=B.canShowEditor&&!i.isThirdParty,G=!!i.pending;return i.comments.every((e=>!!e.deleted))?null:V?R.createElement(dk,{actions:M,active:T,className:q,commentFactory:s,includeEditor:$,isDisabled:G,onBlurEditor:ik,onCancel:I,onClick:U,onEditorStateChange:H,onEndEdit:L,onStartEdit:K,ref:u,shouldFocusThreadEditor:f,stickerPacks:w,streamSettings:B,thirdPartySource:P,thread:i,user:y,commentsStreamRef:c,handleHoverActionFocus:F,handleHoverActionBlur:j,filteredReplies:S,commentIdToRef:E,setCommentRef:x,logEvent:k}):R.createElement(pk,{actions:M,active:T,className:q,commentFactory:s,includeEditor:$,isDisabled:G,onClick:U,onEndEdit:L,onStartEdit:K,ref:u,commentsStreamRef:c,streamSettings:B,thirdPartySource:P,thread:i,handleHoverActionFocus:F,handleHoverActionBlur:j,filteredReplies:S,commentIdToRef:E,setCommentRef:x,logEvent:k})}));hk.displayName="Thread";const vk={};let yk=0;var _k;function bk({timing:e,container:t,yPos:n,duration:r}){if(function(e,t){const n=e.dataset.scrollingId,r=n&&vk[n];return r&&r.yPos===t}(t,n)){const e=t.dataset.scrollingId,n=e&&vk[e];return n&&n.promise}let o;!function(e){const t=e.dataset.scrollingId;if(void 0!==t&&vk[t]){const{rafId:e,rej:n}=vk[t];cancelAnimationFrame(e),n()}}(t);const i=t.dataset.scrollingId=String(yk++),a=t.scrollTop,s=n-a;let c={};const l=new Promise(((e,t)=>{c={res:e,rej:t}}));return vk[i]={...c,rafId:requestAnimationFrame((function n(c){if(!t)return;o||(o=c);const l=c-o,u=function(e,t,n,r){switch(e){case _k.Linear:return t*n/r;case _k.QuadEaseIn:{const e=n/r;return t*e*e}case _k.QuadEaseOut:{const e=n/r;return-t*e*(e-2)}case _k.QuadEaseInOut:{const e=n/r;return e<.5?2*t*e*e:-t*e*(4-2*e)}}}(e,s,l,r);if(t.scrollTop=a+u,l<r)return vk[i]={...vk[i],rafId:requestAnimationFrame(n)};t.scrollTop=a+s,vk[i].res(),delete vk[i]})),yPos:n,promise:l},l}!function(e){e[e.Linear=0]="Linear",e[e.QuadEaseIn=1]="QuadEaseIn",e[e.QuadEaseOut=2]="QuadEaseOut",e[e.QuadEaseInOut=3]="QuadEaseInOut"}(_k||(_k={}));class kk extends R.Component{constructor(){super(...arguments),this.listRef=null,this.setRef=e=>{this.listRef=e},this.scrollToElem=e=>{const t=N.findDOMNode(this);if(!t)return;const n=t.getBoundingClientRect().top,r=e.getBoundingClientRect().top-n-16,o=t.scrollTop+r;return bk({timing:_k.QuadEaseOut,container:t,yPos:o,duration:600})}}componentDidMount(){this.props.onScroll&&this.listRef.addEventListener("scroll",this.props.onScroll),this.props.onWindowResize&&window.addEventListener("resize",this.props.onWindowResize)}componentWillUnmount(){this.props.onScroll&&this.listRef.removeEventListener("scroll",this.props.onScroll),this.props.onWindowResize&&window.removeEventListener("resize",this.props.onWindowResize)}render(){const{children:e,onWindowResize:t,...n}=this.props;return R.createElement("ul",{...n,ref:this.setRef},R.Children.map(e,(e=>R.cloneElement(e,{scrollToElem:this.scrollToElem}))))}}kk.displayName="ScrollList";class wk extends R.PureComponent{constructor(){super(...arguments),this.scrollListRef=null,this.lastVisibilityData={countAbove:0,countBelow:0,nearestAbove:null,nearestBelow:null},this.renewVisibilityData=()=>{const{onVisibilityDataChange:e,trackedItems:t}=this.props,n=function(e,t){const n={countAbove:0,countBelow:0,nearestAbove:null,nearestBelow:null};if(!e)return n;const{top:r,bottom:o}=e.getBoundingClientRect();for(let e=0;e<t.length;e++){const{item:i,ref:a}=t[e],s=a.getBoundingClientRect();if(s.bottom<r+10)n.countAbove++,n.nearestAbove=i;else if(s.top>o-10){n.countBelow=t.length-e,n.nearestBelow=i;break}}return n}(this.scrollListRef,t);Eh(n,this.lastVisibilityData)||e(n),this.lastVisibilityData=n},this.throttledRenewVisibilityData=n.throttle(this.renewVisibilityData,250)}componentDidMount(){this.renewVisibilityData()}componentDidUpdate(e){e.trackedItems!==this.props.trackedItems&&this.throttledRenewVisibilityData()}render(){const{className:e,children:t}=this.props;return R.createElement(kk,{ref:e=>{this.scrollListRef=e&&e.listRef},className:e,onScroll:this.throttledRenewVisibilityData,onWindowResize:this.throttledRenewVisibilityData},t)}}wk.displayName="VisibilityAwareScrollList";const Ck="PRIMARY",Sk=Jg,Ek="comments-sort-pref",xk=r.defineMessage({id:"XI84a1",defaultMessage:"Comments on this file will show up here."}),Mk=e=>{if(!e)return!1;if("document"===e.type&&"rectangle"===e.regionType&&1===e.regions.length){const t=e.regions[0];if(n.isPageLevelAnnotation(t))return!1}else if("image"===e.type){const t=e.region;if(n.isPageLevelAnnotation(t))return!1}return!0},Tk=e=>{if(e&&Mk(e))return"document"===e.type||"image"===e.type?e.regionType:"video"===e.type||"audio"===e.type?"timestamp":void 0},Ak=({threads:e,activeThreadID:i,className:a="",placeholderOverride:s,thirdPartySource:c,meatballMenu:l,showUnreadPill:u,commentFactory:d,editorFactory:p})=>{const f=t.useRef({}),m=t.useRef({}),g=t.useRef(void 0),h=t.useRef(null),v=r.useIntl(),y=n.useAtomValue(n.shouldShowResolvedCommentsAtom),[_,b]=t.useState(qv()),[k,w]=n.useAtom(zv),[C,S]=t.useState({countAbove:0,countBelow:0,nearestAbove:null,nearestBelow:null}),[E,x]=t.useState([]),{fileId:M,fileName:T,user:A,url:O,logEvent:D,stickerPacks:N,actionsAdapter:P,commentsBladeId:B,previewType:I}=n.useCommentsContext(),[K,L]=t.useState((()=>{const e=window.localStorage.getItem(Ek);return e&&n.AllSortTypes.includes(e)?e:n.SortType.newest})()),F=t.useCallback((e=>{i!==e.id&&P.onThreadActivated(e)}),[P,i]),j=t.useCallback((()=>{x(function(e,t){return e.map((e=>({item:e,ref:t[e.id]}))).filter((({item:e,ref:t})=>!e.read&&t))}(e,f.current))}),[e]),z=t.useCallback((t=>{if(m.current[Ck]||e.some((e=>m.current[e.id]||!!e.pending))||void 0!==k)return t.returnValue="",t.preventDefault(),""}),[k,e]);t.useEffect((()=>(window.addEventListener("beforeunload",z),()=>{window.removeEventListener("beforeunload",z)})),[z]),t.useEffect((()=>{j()}),[j]);const U=t.useMemo((()=>{let t;for(const r of e){if(r.annotation&&t&&!n.sameAnnotation(r.annotation,t))return;t=r.annotation||t}return t}),[e]),H=t.useMemo((()=>n.isDocumentAnnotation(U)?n.DocumentSortType:n.isTimecodeAnnotation(U)?n.TimeCodedSortType:n.DefaultSortType),[U]);t.useEffect((()=>{H.includes(K)||(n.isDocumentAnnotation(U)?L(n.SortType.page):n.isTimecodeAnnotation(U)?L(n.SortType.timestamp):L(n.SortType.newest))}),[H,U,K]);const V=t.useMemo((()=>{const t=((e,t)=>{switch(t){case n.SortType.newest:return e.slice().sort(((e,t)=>+t.timestamp-+e.timestamp));case n.SortType.oldest:return e.slice().sort(((e,t)=>+e.timestamp-+t.timestamp));case n.SortType.page:const[t,r]=o.lodashExports.partition(e,n.isThreadWithDocumentAnnotation);return t.sort(((e,t)=>e.annotation.regions[0].page-t.annotation.regions[0].page)).concat(r.sort(((e,t)=>+e.timestamp-+t.timestamp)));case n.SortType.timestamp:const[i,a]=o.lodashExports.partition(e,n.isThreadWithTimecodeAnnotation);return i.sort(((e,t)=>e.annotation.time-t.annotation.time)).concat(a.sort(((e,t)=>+e.timestamp-+t.timestamp)));case n.SortType.unread:const[s,c]=o.lodashExports.partition(e,"read");return c.sort(((e,t)=>+e.timestamp-+t.timestamp)).concat(s.sort(((e,t)=>+e.timestamp-+t.timestamp)))}})(e,K);return y?t:t.filter((e=>!(e.resolved||e.resolvedInfo)))}),[y,K,e]),W=t.useMemo((()=>V.filter((e=>e.comments.some((e=>!e.deleted))))),[V]),q=t.useCallback((e=>{g.current=e}),[]),$=t.useCallback(((e,t)=>{f.current[e]=t}),[]),G=t.useCallback((e=>{L(e),window.localStorage.setItem(Ek,e),D({event:n.CommentsEventName.SORT_COMMENTS,extra:{sortType:e}})}),[D]),Q=t.useCallback((e=>{e.target.classList.contains(Sk)&&(P.onAllThreadsDeactivated(),m.current[Ck]||P.onCommentDraftCancel())}),[P]),J=n.useSelector((e=>n.getDraftAnnotation(e,B))),[X]=n.useAtom(Uv),Y=t.useCallback(((e,t)=>{const r=Tk(J);D({event:e,extra:{hasDraftAnnotation:String(Mk(J)),isTimestampAnnotation:String(X),isSticker:t?n.hasSticker(t):"false",hasMention:t?n.hasMention(t):"false",...r&&{commentsAnnotationType:Tk(J)},fileName:T,fileId:M,isSharedLink:String(Boolean(O)),previewType:I}})}),[J,M,T,D,I,X,O]),Z=t.useCallback((()=>{var e;document.activeElement&&(e=>{let t;"function"==typeof Event?t=new FocusEvent("blur"):(t=document.createEvent("Event"),t.initEvent("blur",!0,!0)),e.dispatchEvent(t)})(document.activeElement),null===(e=g.current)||void 0===e||e.blur()}),[]),ee=t.useCallback((()=>{Z(),P.onCommentDraftCancel(),b(qv()),w(void 0),Y(n.CommentsEventName.CANCEL_COMMENT)}),[P,Z,Y,w]),te=t.useCallback((()=>{Y(n.CommentsEventName.ADD_COMMENT_CANCEL)}),[Y]),ne=t.useCallback((()=>{P.onAllThreadsDeactivated(),P.onEditorFocused(),Y(n.CommentsEventName.ADD_COMMENT_START)}),[P,Y]),re=t.useCallback((e=>t=>{m.current[e]=!Pg(t)}),[]),oe=t.useCallback((e=>{re(Ck)(e),P.onEditorStateChange(e)}),[P,re]),ie=n.useSelector((e=>n.getStreamSettings(e,M,O))),ae=ie.canShowEditor,se=ae&&ie.canShowEditorMeatball,{onMentionsQueryUpdated:ce,onThreadCreated:le}=P,ue=n.cx(a,{[$g]:!0,[Gg]:!0}),de=n.cx({[rh]:se}),pe=n.cx({[oh]:se});let fe=null;const me=s||v.formatMessage({id:"DkHo17",defaultMessage:"Enter your thoughts here"});if(ae){const e={a11yEditorLabel:me,author:A,className:sh,content:_,placeholder:me,postSignalComponent:Yv,onCancel:ee,setEditorRef:q,onPost:(e,t)=>{Z(),le(e,t),Y(n.CommentsEventName.ADD_COMMENT,e)},onMentionsQueryUpdated:ce,onFocus:ne,onEditorStateChange:oe,stickerPacks:N,tagline:R.default.createElement(Zv,{thirdPartySource:c,intl:v}),editorRef:g.current,openUpward:!0,isThread:!1,onlyShowReactionBar:!ae,onBlur:te};fe=p?p(e):R.default.createElement(Hv,{...e})}return R.default.createElement(r.Provider,{value:v},R.default.createElement("div",{className:ue,onClick:Q},R.default.createElement("div",{className:ah,ref:h},0===W.length?R.default.createElement("div",{className:ih},R.default.createElement(n.Text,{size:"small",color:"faint"},v.formatMessage(xk))):R.default.createElement(R.default.Fragment,null,R.default.createElement(ny,{currentSort:K,setSort:G,availableSortOpts:H}),R.default.createElement(iy,{showUnreadPill:u,visibilityData:C,countMsgFn:e=>v.formatMessage({id:"fkNHq+",defaultMessage:"{count} unread"},{count:e}),onItemActivated:F},R.default.createElement(wk,{className:Sk,trackedItems:E,onVisibilityDataChange:S},W.map((e=>R.default.createElement(hk,{key:e.id,onEditorStateChange:re(e.id),onThreadInteractedWith:F,thread:e,threadRef:t=>$(e.id,t),commentFactory:d,commentsStreamRef:h}))))))),R.default.createElement("div",{className:de},R.default.createElement("div",{className:pe},fe),se&&l)))};Ak.displayName="CommentStream";n.injectInternalStyle("/static/js/comments2/plugin/pane.module.out-vfli9fsUo.css",(e=>"._comment-stream-meatball-icon_10llz_1{align-self:center;padding:var(--spacing__unit--2) var(--spacing__unit--1) 0 0}._comments-blade-header-accessory-wrapper_10llz_6{align-items:center;display:flex;flex-grow:1}._comments-blade-header-menu_10llz_12{margin-left:auto}._comments-blade-loading-spinner-container_10llz_16{align-items:center;display:flex;height:100%;justify-content:center}._comments-blade-disabled-wrapper-redesign_10llz_23{padding:var(--spacing__unit--2)}"));const Ok="_comment-stream-meatball-icon_10llz_1",Dk="_comments-blade-loading-spinner-container_10llz_16",Rk="_comments-blade-disabled-wrapper-redesign_10llz_23",Nk=({children:e})=>{const o=t.useContext(r.Context);if(null==o)throw new Error("<DisabledTimeAnnotationTooltip must have an IntlContext provided>");const i=t.useRef(null),[a,s]=t.useState(!1);return R.default.createElement(n.LayerContext.Provider,{value:{zIndex:501}},R.default.createElement("span",{className:"annotation-tooltip-container",onMouseOver:()=>s(!0),onMouseLeave:()=>s(!1),onFocus:()=>s(!0),onBlur:()=>s(!1),ref:i},R.default.createElement(n.Tooltip.Control,{placement:"left",triggerRef:i,open:a},R.default.createElement("div",{className:"disabled-time-annotation-tooltip"},R.default.createElement("p",null,o.formatMessage({id:"uEuipz",defaultMessage:"Timestamp commenting is not available for basic users."})),R.default.createElement("a",{href:"/help/files-folders/comment-timestamp",rel:"noreferrer",target:"disabled-time-annotation-info",className:n.disabledAnnotationsShowMore},o.formatMessage({id:"hnvyoU",defaultMessage:"Learn more"})))),e))};n.injectInternalStyle("/static/js/comments2/plugin/index.module.out-vfl--RCAF.css",(e=>"._annotation-checkbox-container_ek3pr_5,._annotation-icon-button_ek3pr_1{margin-right:var(--dig-spacing__micro__small)}._annotation-checkbox-container_ek3pr_5{display:flex;margin-left:2px}"));const Pk=r.defineMessage({id:"y3gzp7",defaultMessage:"Commenting on page {page}"}),Bk=r.defineMessage({id:"6uagga",defaultMessage:"Commenting on a section"}),Ik=r.defineMessage({id:"dwGSp9",defaultMessage:"Commenting on text"}),Kk=({leftIconButton:e,page:t,isSectionCommenting:o,isSelectionCommenting:i})=>{const a=r.useIntl();let s;return o?s=Bk:i?s=Ik:t&&(s=Pk),R.createElement(R.Fragment,null,R.createElement("div",{className:"_annotation-icon-button_ek3pr_1"},e),s?R.createElement(n.Text,{color:"faint",size:"xsmall"},a.formatMessage(s,{page:t})):null)};Kk.displayName="AnnotationElement";const Lk=({pendingAnnotation:e,...t})=>{const{onPost:n,defaultAnnotation:r,rightAccessory:o}=t,i=e||r,a=i?"document"===i.type&&i.regions[0]&&i.regions[0].page:void 0,s=(e=>"image"===e.type?Fk(e.region):"document"===e.type&&"highlight"!==e.regionType&&e.regions[0]&&Fk(e.regions[0]))(i),c="document"===i.type&&"highlight"===i.regionType,l=R.useCallback((e=>{null==n||n(e,i)}),[i,n]);return R.createElement(Hv,{...t,hideRightAccessory:(e,t)=>e||!t,annotation:R.createElement(Kk,{leftIconButton:o,page:a,isSectionCommenting:s,isSelectionCommenting:c}),onPost:l,disabled:!1})};Lk.displayName="NumberedCommentEditor";const Fk=e=>e.height<1||e.width<1;const jk=({fileViewerId:e,isEditingAnnotation:t,pendingAnnotation:r,frameRate:o,framePreciseCommentsEnabled:i})=>{const a=n.useDispatch(),[s,c]=n.useAtom(Uv),[l,u]=R.useState(!1),d=((e,t,n)=>{return e?Jb(e.time,void 0!==(r=e)&&"video"===r.type?e.timeSec:void 0,t,n):void 0;var r})(r,o,i);if(!d)return null;const p=()=>{const t=!s;c(t),a(t?l?n.startAnnotating(e,!0):n.confirmDraftAnnotation(e):n.cancelAnnotating(e))};return R.createElement(R.Fragment,null,R.createElement("div",{className:"_annotation-checkbox-container_ek3pr_5"},R.createElement(n.Checkbox,{checked:s,onClick:e=>{const t=e.currentTarget===document.activeElement;u(t),p()},onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(u(!0),p(),e.preventDefault(),e.nativeEvent.stopImmediatePropagation())}})),R.createElement(n.Text,{color:t?"standard":"faint",size:"xsmall"},d))};jk.displayName="AnnotationElement";const zk=({playerIntegrationEnabled:e,tooltipComponent:t,pendingAnnotation:r,frameRate:o,framePreciseCommentsEnabled:i,onFocus:a,onPost:s,fileViewerId:c,isEditingAnnotation:l,timeAnnotationEnabled:u,...d})=>{const p=n.useStabilizedCallback((e=>{null==s||s(e,l?r:void 0)})),f=n.useDispatch(),[m]=n.useAtom(Uv),g=R.useCallback((e=>{m&&f(n.confirmDraftAnnotation(c)),null==a||a(e)}),[f,c,a,m]),h=R.createElement(jk,{isEditingAnnotation:l,fileViewerId:c,pendingAnnotation:r,frameRate:o,framePreciseCommentsEnabled:i});return R.createElement(Hv,{...d,hideRightAccessory:(e,t)=>!!u&&(e||!t),annotation:h,onPost:p,onFocus:g})};zk.displayName="TimeCodedCommentEditor";const Uk={type:"image",region:{x:0,y:0,width:1,height:1},regionType:"rectangle"},Hk=({draftNumberedAnnotation:e,annotationState:t,intl:n,placeholder:r,...o})=>R.default.createElement(Lk,{...o,placeholder:r,defaultAnnotation:Uk,pendingAnnotation:e});Hk.displayName="ImageCommentEditor";const Vk=({draftNumberedAnnotation:e,annotationState:t,intl:r,placeholder:o,...i})=>{const a=n.useCurrentDocPage(),s=R.default.useMemo((()=>({type:"document",regionType:"rectangle",regions:[{page:a+1,x:0,y:0,width:1,height:1}]})),[a]);return R.default.createElement(Lk,{...i,placeholder:o,defaultAnnotation:s,pendingAnnotation:e})};Vk.displayName="DocumentCommentEditor";const Wk=({intl:e,annotationState:t,fileViewerId:o,...i})=>{const{playerIntegrationEnabled:a,placeholder:s}=i,c=a,l=n.useAudioVideoCurrentTimestamp(),u=R.default.useMemo((()=>c?{type:"audio",time:c?Math.floor(100*l):0}:void 0),[l,c]),d=n.isAnnotatingAccessible(t);return R.default.createElement(r.Context.Provider,{value:e},R.default.createElement(zk,{...i,fileViewerId:o,pendingAnnotation:u,disabled:d,placeholder:d?e.formatMessage(Xk):s,isEditingAnnotation:n.isEditingTimestampAnnotation(t),timeAnnotationEnabled:a}))};function qk(e,t){return e&&void 0!==t?{framePreciseCommentsEnabled:!0,frameRate:t}:{framePreciseCommentsEnabled:!1}}Wk.displayName="AudioCommentEditor";const $k=({intl:e,annotationState:t,fileViewerId:o,...i})=>{const{framePreciseCommentsEnabled:a,playerIntegrationEnabled:s,placeholder:c}=i,l=n.useAudioVideoIsPlaying(),u=n.useAudioVideoCurrentTimestamp(),d=(({lastTimestampFromVideoPlayer:e,shouldApproximate:t})=>{const[n,r]=R.default.useState(e);return R.default.useEffect((()=>{if(!t)return;const n=performance.now();let o=!0;const i=()=>{if(o){const t=performance.now()-n;r(e+t/1e3),requestAnimationFrame(i)}};return i(),()=>{o=!1}}),[e,t]),t?n:e})({lastTimestampFromVideoPlayer:s?u:0,shouldApproximate:Boolean(l&&s&&a)}),p=s,f=R.default.useMemo((()=>p?{type:"video",time:Math.floor(100*d),timeSec:d}:void 0),[p,d]),m=n.isAnnotatingAccessible(t);return R.default.createElement("span",null,R.default.createElement(r.Context.Provider,{value:e},R.default.createElement(zk,{...i,fileViewerId:o,pendingAnnotation:f,disabled:m,placeholder:m?e.formatMessage(Xk):c,tooltipComponent:s?void 0:Nk,isEditingAnnotation:n.isEditingTimestampAnnotation(t),timeAnnotationEnabled:s})))};$k.displayName="VideoCommentEditor";const Gk=r.defineMessage({id:"ueIzgL",defaultMessage:"Click to comment on this timestamp"}),Qk=r.defineMessage({id:"HRP1D0",defaultMessage:"This file is not on a plan that includes time-based commenting."}),Jk=r.defineMessage({id:"HBiknQ",defaultMessage:"Cancel annotation"}),Xk=r.defineMessage({id:"0lv8IN",defaultMessage:"Select a timestamp to comment on"}),Yk=R.default.memo((({annotationState:e,previewType:t,fileViewerId:o,timestampAnnotationsEnabled:i,navigationCallbacks:a,logEvent:s})=>{const c=r.useIntl(),l=n.useDispatch(),u=e=>e.preventDefault();if(t===n.PreviewType.SsrDoc||t===n.PreviewType.Image||t===n.PreviewType.Other)return null;if(t===n.PreviewType.Video||t===n.PreviewType.Audio?n.isEditingTimestampAnnotation(e):n.isEditingAnnotation(e)){const e=()=>{l(n.cancelAnnotating(o))},t=e=>{" "!==e.key&&"Enter"!==e.key||(l(n.cancelAnnotating(o)),e.nativeEvent.stopImmediatePropagation())},r=c.formatMessage(Jk);return R.default.createElement(n.IconButton,{variant:"transparent",size:"small",onClick:e,onKeyDown:t,onMouseDown:u,"aria-label":r},R.default.createElement(n.UIIcon,{src:n.CloseLine}))}let d,p,f,m=!1;switch(t){case n.PreviewType.Audio:case n.PreviewType.Video:i?(d=c.formatMessage(Gk),f=e=>{a.pause(),e?(l(n.startAnnotating(o,!0,"timestamp")),s({event:n.CommentsEventName.START_ANNOTATION_TIMESTAMP})):(l(n.confirmDraftAnnotation(o,"timestamp")),s({event:n.CommentsEventName.START_ANNOTATION_TIMESTAMP}))}):(f=void 0,d=c.formatMessage(Qk),m=!0),p=R.default.createElement(n.UIIcon,{src:n.ClockLine});break;default:return null}return R.default.createElement(n.Tooltip,{title:d,maxWidth:300},R.default.createElement("span",{style:{display:"inline-block"},tabIndex:m?0:-1},R.default.createElement(n.IconButton,{"data-campaigns-element-id":i?"preview-time-based-annotations-button":"","data-testid":"comments_annotation_icon_button",variant:"transparent",size:"small",onClick:e=>{const t=e.currentTarget===document.activeElement;null==f||f(t)},onMouseDown:u,onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||f&&(f(!0),e.preventDefault(),e.nativeEvent.stopImmediatePropagation())},"aria-label":d,disabled:m},p)))}));Yk.displayName="RightAccessoryButton";const Zk=e=>{var t,r;const{draftNumberedAnnotation:o,editorFocusRequested:i,commentEditorProps:a,intl:s,file:c,navigationCallbacks:l}=e,u=n.useFrameRate(c),d=n.useSelector((e=>e.annotationSettings.state)),p=null!==(r=null===(t=e.supportedEnhancements)||void 0===t?void 0:t.time_based_annotations)&&void 0!==r&&r,{commentsBladeId:f}=n.useCommentsContext(),m=R.default.createElement(Yk,{file:e.file,annotationState:d,previewType:e.previewType,fileViewerId:f,timestampAnnotationsEnabled:p,navigationCallbacks:l,logEvent:e.logEvent});switch(e.previewType){case n.PreviewType.Image:return R.default.createElement(Hk,{...a,rightAccessory:m,draftNumberedAnnotation:o,shouldFocus:i,annotationState:d,intl:s});case n.PreviewType.SsrDoc:return R.default.createElement(Vk,{...a,rightAccessory:m,draftNumberedAnnotation:o,shouldFocus:i,annotationState:d,intl:s});case n.PreviewType.Audio:return R.default.createElement(Wk,{...a,fileViewerId:f,rightAccessory:m,intl:s,shouldFocus:i,playerIntegrationEnabled:p,annotationState:d});case n.PreviewType.Video:return R.default.createElement($k,{...a,fileViewerId:f,rightAccessory:m,intl:s,shouldFocus:i,playerIntegrationEnabled:p,annotationState:d,...qk(e.framePreciseCommentsEnabled,u)});case n.PreviewType.CloudDoc:return null}return R.default.createElement(Hv,{...a})};Zk.displayName="CommentEditorMultiplexor",Zk.displayName="CommentEditorMultiplexor";const ew=r.defineMessage({id:"iR2DM0",defaultMessage:"Join the conversation"}),tw=r.defineMessage({id:"eqe9mn",defaultMessage:"Comments have been disabled for this file."}),nw=e=>{const{className:t,file:o,navigationCallbacks:i,shouldFocusComment:a,commentId:s}=e,c=r.useIntl(),l=n.useDispatch(),{apiV2Client:u,url:d,fileId:p,logEvent:m,commentsBladeId:g,reactionsBoltIOClient:h,isLoggedOut:v,previewType:y}=n.useCommentsContext(),_=((e,t)=>{var r;const o=n.useFrameRate(e),{apiV2ClientShim:i}=n.useFileViewerContext(),a=!!(null===(r=n.useGetMediaAddonQuery(i.mediaAddonGetFeatures))||void 0===r?void 0:r.frame_precise_comments);return R.useCallback(((e,r)=>{switch(t){case n.PreviewType.Video:case n.PreviewType.Audio:return R.createElement(Xb,{ref:r,...e,...qk(a,o)});case n.PreviewType.Image:case n.PreviewType.SsrDoc:case n.PreviewType.CloudDoc:return R.createElement(Yb,{ref:r,...e});default:return R.createElement(Wb,{ref:r,...e})}}),[t,a,o])})(o,y),b=((e,t,o)=>{var i;const a=R.useRef(0),s=R.useRef(0),c=R.useRef(0),{apiV2ClientShim:l}=n.useFileViewerContext(),{commentsBladeId:u}=n.useCommentsContext(),d=r.useIntl(),{logEvent:p,isLoggedOut:f}=n.useCommentsContext(),m=e.url||e.fileId,g=n.useSelector((e=>e.supportedEnhancements[m])),h=n.useSelector((e=>e.draftAnnotation[u])),v=n.useSelector((e=>Boolean(e.editorFocusRequest[u]))),y=!!(null===(i=n.useGetMediaAddonQuery(l.mediaAddonGetFeatures))||void 0===i?void 0:i.frame_precise_comments),_=R.useCallback((r=>{const i={...r,onFocus:e=>{var t;null===(t=r.onFocus)||void 0===t||t.call(r,e)},onBlur:e=>{var t;null===(t=r.onBlur)||void 0===t||t.call(r,e),a.current>0&&a.current--},onPost:(e,t)=>{var n;null===(n=r.onPost)||void 0===n||n.call(r,e,t),a.current++},onStickerStart:()=>{var e;null===(e=r.onStickerStart)||void 0===e||e.call(r),p({event:n.CommentsEventName.STICKER_START})},onStickerSuccess:()=>{var e;null===(e=r.onStickerSuccess)||void 0===e||e.call(r),s.current++,p({event:n.CommentsEventName.STICKER_SUCCESS})},onStickerCanceled:()=>{var e;null===(e=r.onStickerCanceled)||void 0===e||e.call(r),s.current<=0?p({event:n.CommentsEventName.STICKER_CANCELED}):s.current--},onMentionStart:()=>{var e;null===(e=r.onMentionStart)||void 0===e||e.call(r),p({event:n.CommentsEventName.MENTION_START})},onMentionSuccess:()=>{var e;null===(e=r.onMentionSuccess)||void 0===e||e.call(r),p({event:n.CommentsEventName.MENTION_SUCCESS}),c.current++},onMentionCanceled:()=>{var e;null===(e=r.onMentionCanceled)||void 0===e||e.call(r),c.current<=0?p({event:n.CommentsEventName.MENTION_CANCELED}):c.current--},isLoggedOut:f};return R.createElement(Zk,{commentEditorProps:i,framePreciseCommentsEnabled:y,supportedEnhancements:g,draftNumberedAnnotation:h,editorFocusRequested:v,intl:d,fileViewerId:u,file:e,navigationCallbacks:o,previewType:t,logEvent:p})}),[h,v,e,u,y,d,p,o,t,g,f]);return _})(o,y,i),k=n.useSelector((e=>n.getFileIdentifier(e,p,d))),w=n.useSelector((e=>n.getActiveThreadID(e,g))),C=n.useSelector((e=>n.getStatus(e,k))),S=n.useSelector((e=>n.getThirdPartySource(e,g))),E=n.useSelector((e=>n.getThreads(e,k))),x=n.useSelector((e=>n.areCommentsEnabled(e,k))),M=n.useSelector((e=>n.getBoltInfo(e,k))),[T]=n.useAtom(n.reactionsAtom),A=Object.keys(T).length>0,O=R.useMemo((()=>n.sortThreads(E)),[E]),D=R.useRef(!1),N=n.useSetAtom(n.focusedThreadIdAtom);R.useEffect((()=>{if(!D.current&&void 0!==C){if(s){const e=O.filter((e=>!!e)),t=n.findCommentThread(e,s);if(t)return l(n.activateThread({fileId:o.fileId,sharedLinkURL:o.url,fileViewerId:g,threadId:t.thread.id,isThirdParty:t.thread.isThirdParty})),N(t.thread.id),void(D.current=!0)}a&&l(n.focusEditor(g))}}),[C,O,s,a,o,g,l,N]);R.useEffect((()=>(M&&l(n.boltSubscribe([M])),()=>{M&&l(n.boltUnsubscribe([M]))})),[M,l]);const P=R.useMemo((()=>(e=>{const t=[];return e.forEach((e=>{e.comments.forEach((e=>{t.push(e.id)}))})),t})(O)),[O]);if(z(h,u,P,v),R.useEffect((()=>{y&&y!==n.PreviewType.Error&&y!==n.PreviewType.Loading&&m({event:n.CommentsEventName.VIEW_COMMENTS,extra:{previewType:y,existingReactions:A.toString(),...s&&{commentId:s}}})}),[null==o?void 0:o.name,m,y,A,s]),void 0===C)return R.createElement("div",{className:Dk},R.createElement(n.Spinner,{className:"comments-blade-loading-spinner",size:"standard","aria-valuetext":c.formatMessage({id:"csFB2E",defaultMessage:"Loading"})}));const B=c.formatMessage(ew);return x?R.createElement("div",{className:t},R.createElement(Ak,{enabled:!0,id:p,threads:O,activeThreadID:w,thirdPartySource:S,showUnreadPill:!0,placeholderOverride:B,meatballMenu:R.createElement(f.CommentsMeatball,{fileId:p,sharedLinkURL:d,className:Ok,logEvent:m}),editorFactory:b,commentFactory:_})):R.createElement("div",{className:Rk},R.createElement(n.Text,{size:"small",color:"faint"},c.formatMessage(tw)))};nw.displayName="CommentsBladePane";const rw=R.memo((e=>R.createElement(n.CommentsContextProvider,{...e},R.createElement(nw,{className:n.commentsPaneBlade,...e}))));rw.displayName="CommentsPluginPane",e.CommentsPluginPane=rw}));
//# sourceMappingURL=c_comments2_plugin_plugin_pane.js-vflSSxCzs.map

//# debugId=25aae716-e886-37fb-8767-519b0ba30c0d