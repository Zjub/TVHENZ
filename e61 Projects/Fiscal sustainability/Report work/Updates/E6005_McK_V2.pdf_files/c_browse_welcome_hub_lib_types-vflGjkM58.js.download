!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="681cfa4d-c3fd-3d5f-80b5-1b231350df31")}catch(e){}}();
define(["exports","react","./c_core_i18n","./c_api-v2-client_src_dropbox","./e_file_viewer_static_scl_page_file","react-dom","./c_utils_dsx_dsx-react","./c_dotlottie_common_chunk-B7OIQIGJ","./c_api_v2_unauthed_client","./c_react_query_helpers_queries_login_and_register_constants"],(function(e,t,a,n,r,o,i,s,_,d){"use strict";function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var l=c(t),u=c(o);const E=(...e)=>{},A=r.SHARE_ACTION_ORIGIN_TYPE.SHARING_SDK_SANDBOX,S=(...e)=>(...t)=>{e.forEach((e=>{try{e(...t)}catch(e){}}))},m=l.createContext({sink:E,metadata:{},origin:A,actionInfo:void 0}),p=({sink:e,children:t,origin:a,actionInfo:n})=>{const r=l.useMemo((()=>({sink:e,metadata:{},origin:a,actionInfo:n})),[e,a,n]);return l.createElement(m.Provider,{value:r},t)};p.displayName="Provider";const g=()=>{const e=l.useContext(m);return l.useCallback(((t,a)=>{const n={type:t,payload:a};e.sink(n,e.metadata,e.origin,e.actionInfo)}),[e])},h=({children:e,...t})=>{const a=l.useContext(m),[n]=l.useState({sink:a.sink,metadata:{},origin:a.origin,actionInfo:a.actionInfo});return n.metadata={...a.metadata,...t},l.createElement(m.Provider,{value:n},e)};h.displayName="MetadataProvider";const v=l.createContext(new n.Dropbox({})),f=({sdk:e,children:t})=>l.createElement(v.Provider,{value:e},t);f.displayName="DropboxSdkProvider";a.createIntl({locale:"en"});const T=({children:e,intl:t})=>t?l.createElement(a.Provider,{value:t},e):e;var R;T.displayName="Provider",e.Platforms=void 0,(R=e.Platforms||(e.Platforms={})).SANDBOX="SANDBOX",R.METASERVER="METASERVER",R.PAPER="PAPER",R.DESKTOP="DESKTOP",R.MS_TEAMS="MS_TEAMS",R.MS_TEAMS_MOBILE="MS_TEAMS_MOBILE";const I=l.createContext(e.Platforms.SANDBOX),L=({platform:e,children:t})=>l.createElement(I.Provider,{value:e},t);L.displayName="Provider";const C=()=>l.useContext(I),b=l.createContext({redirectWindowToken:null}),M=({children:e,...t})=>{const a=l.useMemo((()=>({redirectWindowToken:t.redirectWindowToken})),[t.redirectWindowToken]);return l.createElement(b.Provider,{value:a},e)};function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},N.apply(this,arguments)}M.displayName="Provider";var O="data-focus-lock",y="data-focus-lock-disabled",k={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},D=r.createMedium({},(function(e){return{target:e.target,currentTarget:e.currentTarget}})),P=r.createMedium(),F=r.createMedium(),w=r.createSidecarMedium({async:!0}),H=[],x=l.forwardRef((function(e,a){var n,o=l.useState(),i=o[0],s=o[1],_=l.useRef(),d=l.useRef(!1),c=l.useRef(null),u=e.children,E=e.disabled,A=e.noFocusGuards,S=e.persistentFocus,m=e.crossFrame,p=e.autoFocus;e.allowTextSelection;var g=e.group,h=e.className,v=e.whiteList,f=e.hasPositiveIndices,T=e.shards,R=void 0===T?H:T,I=e.as,L=void 0===I?"div":I,C=e.lockProps,b=void 0===C?{}:C,M=e.sideCar,F=e.returnFocus,x=e.focusOptions,G=e.onActivation,U=e.onDeactivation,V=l.useState({})[0],B=l.useCallback((function(){c.current=c.current||document&&document.activeElement,_.current&&G&&G(_.current),d.current=!0}),[G]),K=l.useCallback((function(){d.current=!1,U&&U(_.current)}),[U]);t.useEffect((function(){E||(c.current=null)}),[]);var j=l.useCallback((function(e){var t=c.current;if(t&&t.focus){var a="function"==typeof F?F(t):F;if(a){var n="object"==typeof a?a:void 0;c.current=null,e?Promise.resolve().then((function(){return t.focus(n)})):t.focus(n)}}}),[F]),W=l.useCallback((function(e){d.current&&D.useMedium(e)}),[]),$=P.useMedium,q=l.useCallback((function(e){_.current!==e&&(_.current=e,s(e))}),[]),Y=N(((n={})[y]=E&&"disabled",n[O]=g,n),b),Q=!0!==A,z=Q&&"tail"!==A,X=r.useMergeRefs([a,q]);return l.createElement(l.Fragment,null,Q&&[l.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:E?-1:0,style:k}),f?l.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:E?-1:1,style:k}):null],!E&&l.createElement(M,{id:V,sideCar:w,observed:i,disabled:E,persistentFocus:S,crossFrame:m,autoFocus:p,whiteList:v,shards:R,onActivation:B,onDeactivation:K,returnFocus:j,focusOptions:x}),l.createElement(L,N({ref:X},Y,{className:h,onBlur:$,onFocus:W}),u),z&&l.createElement("div",{"data-focus-guard":!0,tabIndex:E?-1:0,style:k}))}));x.propTypes={},x.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var G=x;function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function B(e){var t=function(e,t){if("object"!==V(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===V(t)?t:String(t)}var K=function(e){for(var t=Array(e.length),a=0;a<e.length;++a)t[a]=e[a];return t},j=function(e){return Array.isArray(e)?e:[e]},W=function(e){return Array.isArray(e)?e[0]:e},$=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},q=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},Y=function(e,t){return!e||q(e)||!function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!(!t||!t.getPropertyValue||"none"!==t.getPropertyValue("display")&&"hidden"!==t.getPropertyValue("visibility"))}(e)&&t($(e))},Q=function e(t,a){var n=t.get(a);if(void 0!==n)return n;var r=Y(a,e.bind(void 0,t));return t.set(a,r),r},z=function e(t,a){var n=t.get(a);if(void 0!==n)return n;var r=function(e,t){return!(e&&!q(e))||!!ee(e)&&t($(e))}(a,e.bind(void 0,t));return t.set(a,r),r},X=function(e){return e.dataset},J=function(e){return"INPUT"===e.tagName},Z=function(e){return J(e)&&"radio"===e.type},ee=function(e){var t=e.getAttribute("data-no-autofocus");return![!0,"true",""].includes(t)},te=function(e){var t;return Boolean(e&&(null===(t=X(e))||void 0===t?void 0:t.focusGuard))},ae=function(e){return!te(e)},ne=function(e){return Boolean(e)},re=function(e,t){var a=e.tabIndex-t.tabIndex,n=e.index-t.index;if(a){if(!e.tabIndex)return 1;if(!t.tabIndex)return-1}return a||n},oe=function(e,t,a){return K(e).map((function(e,t){return{node:e,index:t,tabIndex:a&&-1===e.tabIndex?(e.dataset||{}).focusGuard?0:-1:e.tabIndex}})).filter((function(e){return!t||e.tabIndex>=0})).sort(re)},ie=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"].join(","),se="".concat(ie,", [data-focus-guard]"),_e=function e(t,a){return K((t.shadowRoot||t).children).reduce((function(t,n){return t.concat(n.matches(a?se:ie)?[n]:[],e(n))}),[])},de=function(e,t){var a;return e instanceof HTMLIFrameElement&&(null===(a=e.contentDocument)||void 0===a?void 0:a.body)?ce([e.contentDocument.body],t):[e]},ce=function(e,t){return e.reduce((function(e,a){var n,r=_e(a,t),o=(n=[]).concat.apply(n,r.map((function(e){return de(e,t)})));return e.concat(o,a.parentNode?K(a.parentNode.querySelectorAll(ie)).filter((function(e){return e===a})):[])}),[])},le=function(e,t){return K(e).filter((function(e){return Q(t,e)})).filter((function(e){return function(e){return!((J(e)||function(e){return"BUTTON"===e.tagName}(e))&&("hidden"===e.type||e.disabled))}(e)}))},ue=function(e,t){return void 0===t&&(t=new Map),K(e).filter((function(e){return z(t,e)}))},Ee=function(e,t,a){return oe(le(ce(e,a),t),!0,a)},Ae=function(e,t){return oe(le(ce(e),t),!1)},Se=function(e,t){return le((a=e.querySelectorAll("[".concat("data-autofocus-inside","]")),K(a).map((function(e){return ce([e])})).reduce((function(e,t){return e.concat(t)}),[])),t);var a},me=function e(t,a){return t.shadowRoot?e(t.shadowRoot,a):!(void 0===Object.getPrototypeOf(t).contains||!Object.getPrototypeOf(t).contains.call(t,a))||K(t.children).some((function(t){var n;if(t instanceof HTMLIFrameElement){var r=null===(n=t.contentDocument)||void 0===n?void 0:n.body;return!!r&&e(r,a)}return e(t,a)}))},pe=function e(t){return t.parentNode?e(t.parentNode):t},ge=function(e){return j(e).filter(Boolean).reduce((function(e,t){var a=t.getAttribute(O);return e.push.apply(e,a?function(e){for(var t=new Set,a=e.length,n=0;n<a;n+=1)for(var r=n+1;r<a;r+=1){var o=e[n].compareDocumentPosition(e[r]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(r),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(n)}return e.filter((function(e,a){return!t.has(a)}))}(K(pe(t).querySelectorAll("[".concat(O,'="').concat(a,'"]:not([').concat(y,'="disabled"])')))):[t]),e}),[])},he=function e(t){if(void 0===t&&(t=document),t&&t.activeElement){var a=t.activeElement;return a.shadowRoot?e(a.shadowRoot):a instanceof HTMLIFrameElement&&function(e){try{return e()}catch(e){return}}((function(){return a.contentWindow.document}))?e(a.contentWindow.document):a}},ve=function(e,t){return void 0===t&&(t=he(W(e).ownerDocument)),!(!t||t.dataset&&t.dataset.focusGuard)&&ge(e).some((function(e){return me(e,t)||function(e,t){return Boolean(K(e.querySelectorAll("iframe")).some((function(e){return function(e,t){return e===t}(e,t)})))}(e,t)}))},fe=function(e,t){return Z(e)&&e.name?function(e,t){return t.filter(Z).filter((function(t){return t.name===e.name})).filter((function(e){return e.checked}))[0]||e}(e,t):e},Te=function(e){return e[0]&&e.length>1?fe(e[0],e):e[0]},Re=function(e,t){return e.length>1?e.indexOf(fe(e[t],e)):t},Ie="NEW_FOCUS",Le=function(e,t,a,n){var r=e.length,o=e[0],i=e[r-1],s=te(a);if(!(a&&e.indexOf(a)>=0)){var _,d,c=void 0!==a?t.indexOf(a):-1,l=n?t.indexOf(n):c,u=n?e.indexOf(n):-1,E=c-l,A=t.indexOf(o),S=t.indexOf(i),m=(_=t,d=new Set,_.forEach((function(e){return d.add(fe(e,_))})),_.filter((function(e){return d.has(e)}))),p=(void 0!==a?m.indexOf(a):-1)-(n?m.indexOf(n):c),g=Re(e,0),h=Re(e,r-1);return-1===c||-1===u?Ie:!E&&u>=0?u:c<=A&&s&&Math.abs(E)>1?h:c>=S&&s&&Math.abs(E)>1?g:E&&Math.abs(p)>1?u:c<=A?h:c>S?g:E?Math.abs(E)>1?u:(r+u+E)%r:void 0}},Ce=function(e,t,a){var n,r=e.map((function(e){return e.node})),o=ue(r.filter((n=a,function(e){var t,a=null===(t=X(e))||void 0===t?void 0:t.autofocus;return e.autofocus||void 0!==a&&"false"!==a||n.indexOf(e)>=0})));return o&&o.length?Te(o):Te(ue(t))},be=function e(t,a){return void 0===a&&(a=[]),a.push(t),t.parentNode&&e(t.parentNode.host||t.parentNode,a),a},Me=function(e,t){for(var a=be(e),n=be(t),r=0;r<a.length;r+=1){var o=a[r];if(n.indexOf(o)>=0)return o}return!1},Ne=function(e,t,a){var n=j(e),r=j(t),o=n[0],i=!1;return r.filter(Boolean).forEach((function(e){i=Me(i||e,e)||i,a.filter(Boolean).forEach((function(e){var t=Me(o,e);t&&(i=!i||me(t,i)?t:Me(t,i))}))})),i},Oe=function(e,t){var a=he(j(e).length>0?document:W(e).ownerDocument),n=ge(e).filter(ae),r=Ne(a||e,e,n),o=new Map,i=Ae(n,o),s=Ee(n,o).filter((function(e){var t=e.node;return ae(t)}));if(s[0]||(s=i)[0]){var _,d,c,l=Ae([r],o).map((function(e){return e.node})),u=(_=l,d=s,c=new Map,d.forEach((function(e){return c.set(e.node,e)})),_.map((function(e){return c.get(e)})).filter(ne)),E=u.map((function(e){return e.node})),A=Le(E,l,a,t);if(A===Ie){var S=Ce(i,E,function(e,t){return e.reduce((function(e,a){return e.concat(Se(a,t))}),[])}(n,o));return S?{node:S}:void console.warn("focus-lock: cannot find any node to move focus into")}return void 0===A?A:u[A]}},ye=0,ke=!1,De=function(e,t,a){void 0===a&&(a={});var n,r,o=Oe(e,t);if(!ke&&o){if(ye>2)return console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),ke=!0,void setTimeout((function(){ke=!1}),1);ye++,n=o.node,r=a.focusOptions,"focus"in n&&n.focus(r),"contentWindow"in n&&n.contentWindow&&n.contentWindow.focus(),ye--}};function Pe(e){setTimeout(e,1)}var Fe=function(){return document&&document.activeElement===document.body||function(e){void 0===e&&(e=document);var t=he(e);return!!t&&K(e.querySelectorAll("[".concat("data-no-focus-lock","]"))).some((function(e){return me(e,t)}))}()},we=null,He=null,xe=null,Ge=!1,Ue=function(){return!0};function Ve(e,t,a,n){var r=null,o=e;do{var i=n[o];if(i.guard)i.node.dataset.focusAutoGuard&&(r=i);else{if(!i.lockItem)break;if(o!==e)return;r=null}}while((o+=a)!==t);r&&(r.node.tabIndex=0)}var Be=function(e){return e&&"current"in e?e.current:e},Ke=function e(t,a,n){return a&&(a.host===t&&(!a.activeElement||n.contains(a.activeElement))||a.parentNode&&e(t,a.parentNode,n))},je=function(){var e,t,a,n,r,o,i,s=!1;if(we){var _=we,d=_.observed,c=_.persistentFocus,l=_.autoFocus,u=_.shards,E=_.crossFrame,A=_.focusOptions,S=d||xe&&xe.portaledElement,m=document&&document.activeElement;if(S){var p=[S].concat(u.map(Be).filter(Boolean));if(m&&!function(e){return(we.whiteList||Ue)(e)}(m)||(c||(E?Boolean(Ge):"meanwhile"===Ge)||!Fe()||!He&&l)&&(S&&!(ve(p)||m&&function(e,t){return t.some((function(t){return Ke(e,t,t)}))}(m,p)||(i=m,xe&&xe.portaledElement===i))&&(document&&!He&&m&&!l?(m.blur&&m.blur(),document.body.focus()):(s=De(p,He,{focusOptions:A}),xe={})),Ge=!1,He=document&&document.activeElement),document){var g=document&&document.activeElement,h=(t=ge(e=p).filter(ae),a=Ne(e,e,t),n=new Map,r=Ee([a],n,!0),o=Ee(t,n).filter((function(e){var t=e.node;return ae(t)})).map((function(e){return e.node})),r.map((function(e){var t=e.node;return{node:t,index:e.index,lockItem:o.indexOf(t)>=0,guard:te(t)}}))),v=h.map((function(e){return e.node})).indexOf(g);v>-1&&(h.filter((function(e){var t=e.guard,a=e.node;return t&&a.dataset.focusAutoGuard})).forEach((function(e){return e.node.removeAttribute("tabIndex")})),Ve(v,h.length,1,h),Ve(v,-1,-1,h))}}}return s},We=function(e){je()&&e&&(e.stopPropagation(),e.preventDefault())},$e=function(){return Pe(je)},qe=function(){Ge="just",Pe((function(){Ge="meanwhile"}))};D.assignSyncMedium((function(e){var t=e.target,a=e.currentTarget;a.contains(t)||(xe={observerNode:a,portaledElement:t})})),P.assignMedium($e),F.assignMedium((function(e){return e({moveFocusInside:De,focusInside:ve})}));var Ye=function(e,a){return function(n){var r,o=[];function i(){r=e(o.map((function(e){return e.props}))),a(r)}var s,_,d,c=function(e){var t,a;function s(){return e.apply(this,arguments)||this}a=e,(t=s).prototype=Object.create(a.prototype),t.prototype.constructor=t,U(t,a),s.peek=function(){return r};var _=s.prototype;return _.componentDidMount=function(){o.push(this),i()},_.componentDidUpdate=function(){i()},_.componentWillUnmount=function(){var e=o.indexOf(this);o.splice(e,1),i()},_.render=function(){return l.default.createElement(n,this.props)},s}(t.PureComponent);return s=c,_="displayName",d="SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")",(_=B(_))in s?Object.defineProperty(s,_,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[_]=d,c}}((function(e){return e.filter((function(e){return!e.disabled}))}),(function(e){var t=e.slice(-1)[0];t&&!we&&(document.addEventListener("focusin",We),document.addEventListener("focusout",$e),window.addEventListener("blur",qe));var a=we,n=a&&t&&t.id===a.id;we=t,a&&!n&&(a.onDeactivation(),e.filter((function(e){return e.id===a.id})).length||a.returnFocus(!t)),t?(He=null,n&&a.observed===t.observed||t.onActivation(),je(),Pe(je)):(document.removeEventListener("focusin",We),document.removeEventListener("focusout",$e),window.removeEventListener("blur",qe),He=null)}))((function(){return null})),Qe=l.forwardRef((function(e,t){return l.createElement(G,N({sideCar:Ye,ref:t},e))})),ze=G.propTypes||{};ze.sideCar,function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a])}(ze,["sideCar"]),Qe.propTypes={};var Xe=Qe;function Je(e){const t=window.document.createElement("a");t.href=e;let a=t.protocol||window.location.protocol;":"===t.protocol&&(a=window.location.protocol);const n=t.hostname||window.location.hostname;let r=t.port||window.location.port;"443"===r&&"https:"===a&&(r="");let o=n;return r&&(o=o+":"+r),a+"//"+o+(0===t.pathname.indexOf("/")?t.pathname:`/${t.pathname}`)+t.search+t.hash}const Ze=e=>window.open(e,"_blank"),et=l.createContext(Ze),tt=({openUrl:e,children:t})=>l.createElement(et.Provider,{value:e},t);tt.displayName="Provider";const at=()=>{const e=l.useContext(et);return l.useCallback((t=>{e(t)}),[e])},nt=e=>e.formatMessage({id:"0NA7+K",defaultMessage:"Close"}),rt=l.createContext({store:{$item:i.store(null),$props:i.store({})}}),ot=()=>{const{store:e}=l.useContext(rt),t=l.useRef(null);return a=>{const n=Math.random().toString();return e.$item.set({key:n,Snackbar:a,snackbarRef:t}),requestAnimationFrame((()=>{var a,n;null===(n=(a=e.$props.get()).onSnackbarShownChange)||void 0===n||n.call(a,!0,t)})),()=>{const t=e.$item.get();t&&t.key===n&&e.$item.set(null)}}},it=()=>{const{store:e}=l.useContext(rt),t=i.useStore(e.$item),a=(e=>{const{store:t}=l.useContext(rt);return l.useCallback((()=>{const a=t.$item.get();a&&a.key===e&&(t.$item.set(null),requestAnimationFrame((()=>{var e,a;null===(a=(e=t.$props.get()).onSnackbarShownChange)||void 0===a||a.call(e,!1)})))}),[t,e])})(t?t.key:"");return t?u.createPortal(l.createElement("div",{ref:t.snackbarRef,key:t.key,style:{position:"fixed",display:"flex",zIndex:2e4,width:"100%",bottom:"1em",justifyContent:"center"},"data-sharing-sdk":"1"},l.createElement(t.Snackbar,{style:{flexGrow:1},key:t.key,open:!0,onRequestClose:a})),document.body):null},st=({children:e,onSnackbarShownChange:t})=>{const a=i.useInitStore({onSnackbarShownChange:t},(e=>({$item:i.store(null),$props:e}))),n=l.useMemo((()=>({store:a})),[a]);return l.createElement(rt.Provider,{value:n},l.createElement(l.Fragment,null,e,l.createElement(it,null)))};st.displayName="Provider";var _t;e.Status=void 0,(_t=e.Status||(e.Status={})).SUCCESS="SUCCESS",_t.ERROR="ERROR",_t.FATAL="FATAL";const dt=r.isObjectOf({status:r.isNumber,headers:r.isUnknown,error:r.isObjectOf({error:r.isObjectOf({".tag":r.isString})})}),ct=r.isObjectOf({status:r.isNumber}),lt=async t=>{try{const a=await t;return{status:e.Status.SUCCESS,output:a.result}}catch(t){const a=t;return dt(a)?{status:e.Status.ERROR,error:a.error.error,statusCode:a.status}:ct(t)?{status:e.Status.FATAL,statusCode:t.status,error:t}:{status:e.Status.FATAL,error:t}}},ut=(e,t)=>({name:e.name,fetch:t,type:"standard"}),Et=ut({name:"sharing_receiving.SharingTiburonLogger"},(e=>t=>{const a={...t,extras:St(mt(JSON.stringify(t.extras)))};return lt(e.sharingReceivingSharingTiburonLogger(a))})),At=e=>e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65,St=e=>{let t=2,a="";const n=e.length;let r=0;for(let o=0;o<n;o++)t=o%3,o>0&&4*o/3%76==0&&(a+="\r\n"),r|=e[o]<<(16>>>t&24),2!==t&&e.length-o!=1||(a+=String.fromCodePoint(At(r>>>18&63),At(r>>>12&63),At(r>>>6&63),At(63&r)),r=0);return a.substr(0,a.length-2+t)+(2===t?"":1===t?"=":"==")},mt=e=>{let t;const a=e.length;let n=0;for(let r=0;r<a;r++)t=e.codePointAt(r),t>65536&&r++,n+=t<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;const r=new Uint8Array(n);let o=0,i=0;for(;o<n;)t=e.codePointAt(i),t<128?r[o++]=t:t<2048?(r[o++]=192+(t>>>6),r[o++]=128+(63&t)):t<65536?(r[o++]=224+(t>>>12),r[o++]=128+(t>>>6&63),r[o++]=128+(63&t)):t<2097152?(r[o++]=240+(t>>>18),r[o++]=128+(t>>>12&63),r[o++]=128+(t>>>6&63),r[o++]=128+(63&t),i++):t<67108864?(r[o++]=248+(t>>>24),r[o++]=128+(t>>>18&63),r[o++]=128+(t>>>12&63),r[o++]=128+(t>>>6&63),r[o++]=128+(63&t),i++):(r[o++]=252+(t>>>30),r[o++]=128+(t>>>24&63),r[o++]=128+(t>>>18&63),r[o++]=128+(t>>>12&63),r[o++]=128+(t>>>6&63),r[o++]=128+(63&t),i++),i++;return r},pt=e=>{if(r.getAccessType(e))switch(r.getAccessType(e)){case"owner":return"owner";case"editor":return"writer";default:return"reader"}},gt=e=>({user_access_type:pt(e),is_folder:r.getIsFolder(e),fq_path:r.isNewApiMetadata(e)?e.common_metadata.path_lower:e.path_lower,content_id:r.isNewApiMetadata(e)?r.getIsFile(e)?e.common_metadata.file_id:r.getIsSharedFolder(e)?r.getSharedFolderId(e):r.getIsFolder(e)?e.common_metadata.path_lower:e.common_metadata.file_id:r.getIsFile(e)?e.id:r.getIsSharedFolder(e)?e.shared_folder_id:r.getIsFolder(e)?e.path_lower:r.getIsCollection(e)?e.collectionId:"",...{...r.getIsSharedFolder(e)||r.getIsCollection(e)?{ns_id:r.getSharedFolderId(e)}:{}},can_create_edit_link:r.getCanDoAction(e,r.CREATE_EDIT_LINK_TAG),can_create_view_link:r.getCanDoAction(e,r.CREATE_VIEW_LINK_TAG),can_edit_inband_invite:r.getCanDoAction(e,r.INVITE_EDITOR_TAG),can_view_inband_invite:r.getCanDoAction(e,r.INVITE_VIEWER_TAG),max_access:r.getCanDoAction(e,r.CREATE_EDIT_LINK_TAG)||r.getCanDoAction(e,r.INVITE_EDITOR_TAG)?"editor":"viewer"}),ht=e=>e&&"other"!==e[".tag"]?"viewer"===e[".tag"]?"reader":"writer":null,vt=e=>{const t={link_id:e.id,link_access_level:(a=e.link_permissions.link_access_level,a?a[".tag"]:r.VIEWER[".tag"]),audience:r.getCurrentAudience(e)[".tag"]};var a;const n=(e=>{const t=new URL(e);if(t.search.includes("rlkey"))return{kind:"rlkey",val:t.searchParams.get("rlkey"),link_type:"righteous"};if(t.pathname.includes("/s/")||t.pathname.includes("/sh/")){const e=e=>e.pathname.includes("/raw/")||e.pathname.includes("/dl/")||e.pathname.includes("/print/"),a=e(t)?3:2;return{kind:"tkey",val:t.pathname.split("/")[a],link_type:"shmodel"}}return null})(e.url);return n&&(t[n.kind]=n.val,t.link_type=n.link_type),t},ft=e=>{const t={tray_style:e.loggingExtras.tray_style,tray_variants:e.loggingExtras.variants};return{platform_name:e.platformName,platform_version:e.platformVersion,build_channel:e.buildChannel,build_number:e.buildNumber,...t}},Tt=(e,t,a,n)=>{const o=t.shareModalSessionId,i=t.sharingObjectMetadata,s=t.desktopMetadata;return o&&(n={...n,modal_session_id:o}),t.sharingObjectIdentifier&&("file"===t.sharingObjectIdentifier[".tag"]?n={...n,file_id:t.sharingObjectIdentifier.fileId}:"shared_folder"===t.sharingObjectIdentifier[".tag"]?n={...n,ns_id:t.sharingObjectIdentifier.sharedFolderId}:"file_folder"===t.sharingObjectIdentifier[".tag"]?n={...n,fq_path:t.sharingObjectIdentifier.path}:"collection"===t.sharingObjectIdentifier[".tag"]&&(n={...n,ns_id:t.sharingObjectIdentifier.nsId,collection_id:t.sharingObjectIdentifier.collectionId})),i&&!r.isNewApiMetadata(i)&&i.path_lower&&(n={...n,fq_path:i.path_lower}),i&&r.isNewApiMetadata(i)&&i.common_metadata.path_lower&&(n={...n,fq_path:i.common_metadata.path_lower}),i&&!r.isNewApiMetadata(i)&&r.getIsFile(i)&&(n={...n,file_id:i.id}),i&&r.isNewApiMetadata(i)&&r.getIsFile(i)&&(n={...n,file_id:i.common_metadata.file_id}),i&&!r.isNewApiMetadata(i)&&r.getIsSharedFolder(i)&&(n={...n,ns_id:i.shared_folder_id}),i&&r.isNewApiMetadata(i)&&r.getIsSharedFolder(i)&&(n={...n,ns_id:i.metadata_response&&"shared_folder_id"in i.metadata_response?i.metadata_response.shared_folder_id:""}),i&&r.getIsCollection(i)&&(n={...n,ns_id:i.shared_folder_id,collection_id:i.collectionId}),s&&(n={...n,...ft(s)}),{share_tiburon_event_type:e,share_tib_action_origin_type:a,extras:n}},Rt=(e,t,a,n)=>{const r=t.shareModalSessionId,o=t.sharingLinkMetadata,i=t.sharingObjectMetadata,s=t.desktopMetadata;return r&&(n={...n,modal_session_id:r}),o&&(n={...n,...vt(o)}),i&&(n={...n,...gt(i)}),s&&(n={...n,...ft(s)}),t.sharingObjectIdentifier&&("file"===t.sharingObjectIdentifier[".tag"]?n={...n,file_id:t.sharingObjectIdentifier.fileId}:"shared_folder"===t.sharingObjectIdentifier[".tag"]?n={...n,ns_id:t.sharingObjectIdentifier.sharedFolderId}:"file_folder"===t.sharingObjectIdentifier[".tag"]?n={...n,fq_path:t.sharingObjectIdentifier.path}:"collection"===t.sharingObjectIdentifier[".tag"]&&(n={...n,ns_id:t.sharingObjectIdentifier.nsId,collection_id:t.sharingObjectIdentifier.collectionId})),{share_tiburon_event_type:e,share_tib_action_origin_type:a,extras:n}},It=e=>{const t=l.useContext(v),a=g();if("standard"===e.type){const n=l.useMemo((()=>e.fetch(t)),[e,t]);return l.useCallback((async t=>{const r=Math.random().toString();a("ENDPOINT_FETCH_BEGIN",{name:e.name,input:t,id:r});const o=Date.now(),i=await n(t),s=Date.now();return a("ENDPOINT_FETCH_END",{name:e.name,id:r,latency:s-o,response:i}),i}),[n,e,a])}{const t=e.useFetch();return l.useCallback((async n=>{const r=Math.random().toString();a("ENDPOINT_FETCH_BEGIN",{name:e.name,input:n,id:r});const o=Date.now(),i=await t(n),s=Date.now();return a("ENDPOINT_FETCH_END",{name:e.name,id:r,latency:s-o,response:i}),i}),[t,e,a])}},Lt=(e,t)=>{let a={is_alpha:!0};return t.sharingAccessLevel&&(a={...a,access:t.sharingAccessLevel[".tag"]}),e.createSharedLinkStartTime&&(a={...a,timing:Date.now()-e.createSharedLinkStartTime}),a={...a,include_ns_creation:!1},a},Ct=e=>{if(e.shareMe24Metadata){if(e.shareMe24Metadata.shouldStyleForSM21)return r.ScreenName.ManageAccessScreen;if(e.shareMe24Metadata.isShareMe24)return r.ScreenName.ShareMe24ShareScreen}return r.ScreenName.ShareScreen},bt=()=>{const t=(()=>{const t=It(Et);return l.useMemo((()=>({SHARE_MODAL_SHARE__PREVALIDATION__API_START:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.AttemptTargetValidation,e,n,a))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_START:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.AttemptTargetValidation,e,n,a))},SHARE_MODAL_SHARE__PREVALIDATION__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedTargetValidation,e,n,a))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedTargetValidation,e,n,a))},SHARE_MODAL_SHARE__PREVALIDATION__API_ERROR:({event:e,metadata:a,extras:n,origin:o})=>{t(Tt(r.TiburonEventName.FailTargetValidation,a,o,{...n,error:e.payload.error[".tag"]}))},SHARE_MODAL_SHARE__PREVALIDATION__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.FailTargetValidation,e,n,{...a,error:"unknown server error"}))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_ERROR:({event:e,metadata:a,extras:n,origin:o})=>{t(Tt(r.TiburonEventName.FailTargetValidation,a,o,{...n,error:e.payload.error[".tag"]}))},SHARE_MODAL_SHARE__INVITE__VALIDATION_API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.FailTargetValidation,e,n,{...a,error:"unknown server error"}))},SHARE_MODAL_MANAGE_ACCESS__MANAGE_ACCESS__CLICK:({metadata:e,extras:a,origin:n})=>{e.sharingObjectMembership&&(a={...a,access_level:e.sharingObjectMembership.access_type[".tag"]}),t(Tt(r.TiburonEventName.ClickManageAccess,e,n,a))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_MEMBER_ACCESS__CLICK:({event:e,metadata:a,extras:n,origin:o})=>{t(Tt(r.TiburonEventName.SelectChangeMemberPermission,a,o,{...n,new_access:"editor"===e.payload.next[".tag"]?"writer":"reader",old_access:"editor"===e.payload.previous[".tag"]?"writer":"reader"}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedChangeMemberPermission,e,n,{...a,http_status_code:200,response_status:"success",is_alpha:!1}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedChangeMemberPermission,e,n,{...a,http_status_code:200,response_status:"success",is_alpha:!1}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.FailChangeMemberPermission,e,n,{...a,is_alpha:!1,http_status_code:0,error_tag:"undefined"}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FILE_MEMBER_ACCESS__API_ERROR:({event:e,metadata:a,extras:n,origin:o})=>{t(Tt(r.TiburonEventName.FailChangeMemberPermission,a,o,{...n,is_alpha:!1,http_status_code:e.payload.response.statusCode,error_tag:e.payload.response.error[".tag"]}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.FailChangeMemberPermission,e,n,{...a,is_alpha:!1,http_status_code:0,error_tag:"undefined"}))},SHARE_MODAL_MANAGE_ACCESS__UPDATE_FOLDER_MEMBER_ACCESS__API_ERROR:({event:e,metadata:a,extras:n,origin:o})=>{t(Tt(r.TiburonEventName.FailChangeMemberPermission,a,o,{...n,is_alpha:!1,http_status_code:e.payload.response.statusCode,error_tag:e.payload.response.error[".tag"]}))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_ERROR:({event:e,metadata:a,extras:n,origin:o})=>{t(Tt(r.TiburonEventName.FailTransferFolder,a,o,{...n,is_alpha:!1,http_status_code:e.payload.response.statusCode,error_tag:e.payload.response.error[".tag"]}))},SHARE_MODAL_SHARE__CREATE_LINK__API_START:({metadata:e,extras:a,origin:n,cache:o})=>{e.sharingAccessLevel&&(a={...a,access:e.sharingAccessLevel[".tag"]}),o.createSharedLinkStartTime=Date.now(),t(Tt(r.TiburonEventName.AttemptCreateSharedLinkWithSettings,e,n,a))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_START:({metadata:e,extras:a,origin:n,cache:o})=>{e.sharingAccessLevel&&(a={...a,access:e.sharingAccessLevel[".tag"]}),o.createSharedLinkStartTime=Date.now(),t(Tt(r.TiburonEventName.AttemptCreateSharedLinkWithSettings,e,n,a))},SHARE_MODAL_SHARE__CREATE_LINK__API_SUCCESS:({metadata:e,event:a,origin:n,extras:o,cache:i})=>{(e={...e,sharingLinkMetadata:a.payload.response.output}).sharingLinkMetadata&&(o={...o,...vt(e.sharingLinkMetadata)}),t(Tt(r.TiburonEventName.SucceedCreateSharedLinkWithSettings,e,n,{http_status_Code:200,response_status:"success",...Lt(i,e),...o}))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_SUCCESS:({metadata:e,event:a,origin:n,extras:o,cache:i})=>{(e={...e,sharingLinkMetadata:a.payload.response.output}).sharingLinkMetadata&&(o={...o,...vt(e.sharingLinkMetadata)}),t(Tt(r.TiburonEventName.SucceedCreateSharedLinkWithSettings,e,n,{http_status_Code:200,response_status:"success",...Lt(i,e),...o}))},SHARE_MODAL_SHARE__CREATE_LINK__API_ERROR:({metadata:e,event:a,extras:n,origin:o,cache:i})=>{"shared_link_already_exists"!==a.payload.response.error[".tag"]?t(Tt(r.TiburonEventName.FailCreateSharedLinkWithSettings,e,o,{error_tag:a.payload.response.error[".tag"],http_status_code:a.payload.response.statusCode,fail_at:"link_creation",...Lt(i,e),...n})):t(Tt(r.TiburonEventName.SucceedCreateSharedLinkWithSettings,e,o,{http_status_code:a.payload.response.statusCode,response_status:"success",...Lt(i,e),...n}))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_ERROR:({metadata:e,extras:a,cache:n,origin:o,event:i})=>{"shared_link_already_exists"!==i.payload.response.error[".tag"]?t(Tt(r.TiburonEventName.FailCreateSharedLinkWithSettings,e,o,{error_tag:i.payload.response.error[".tag"],http_status_code:i.payload.response.statusCode,fail_at:"link_creation",...Lt(n,e),...a})):t(Tt(r.TiburonEventName.SucceedCreateSharedLinkWithSettings,e,o,{http_status_code:i.payload.response.statusCode,response_status:"success",...Lt(n,e),...a}))},SHARE_MODAL_SHARE__CREATE_LINK__API_FATAL:({metadata:e,extras:a,origin:n,cache:o})=>{t(Tt(r.TiburonEventName.FailCreateSharedLinkWithSettings,e,n,{fail_at:"link_creation",...Lt(o,e),http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_SETTINGS__CREATE_LINK_API_FATAL:({metadata:e,extras:a,origin:n,cache:o})=>{t(Tt(r.TiburonEventName.FailCreateSharedLinkWithSettings,e,n,{fail_at:"link_creation",...Lt(o,e),http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_SHARE__CREATE_LINK__CLICK:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.ClickTibCreateLink,e,n,a))},SHARE_MODAL_SETTINGS__CREATE_LINK__CLICK:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.ClickTibCreateLink,e,n,a))},SHARE_MODAL_SHARE__INVITE__START:({metadata:e,extras:a,origin:n,cache:o})=>{o.inviteStartTime=Date.now(),t(Tt(r.TiburonEventName.ClickInbandShareButton,e,n,{in_progress:!1,access_level:ht(e.sharingAccessLevel),screen:Ct(e),...a}));const i=e.sharingLinkMetadata;i&&t(Rt(r.TiburonEventName.ClickShareButtonLinkSettingsStatus,e,n,{...a,isPasswordRequired:i.link_permissions.require_password||!1,isExpirationEnabled:!!i.expires,isDisabledDownloadEnabled:!i.link_permissions.allow_download}))},SHARE_MODAL_SHARE__COPY_LINK__CLICK:({metadata:e,extras:a,origin:n})=>{var o,i;t(Rt(r.TiburonEventName.CopySharedLink,e,n,{...a,tokenized_contact_count:null===(o=e.sharingInviteTargets)||void 0===o?void 0:o.length,sender_trackey:r.getSenderTrackeyFromURL(null===(i=e.sharingLinkMetadata)||void 0===i?void 0:i.url)}))},SHARE_MODAL_SHARE__COPY_LINK__COPY_SUCCESS:({metadata:e,event:a,extras:n,origin:o})=>{var i;e={...e,sharingLinkMetadata:a.payload.linkMetadata},t(Rt(r.TiburonEventName.CopySharedLink,e,o,{...n,sender_trackey:r.getSenderTrackeyFromURL(null===(i=e.sharingLinkMetadata)||void 0===i?void 0:i.url)}))},SHARE_MODAL_SETTINGS__COPY_LINK__COPY_SUCCESS:({metadata:e,event:a,extras:n,origin:o})=>{var i;e={...e,sharingLinkMetadata:a.payload.linkMetadata},t(Rt(r.TiburonEventName.CopySharedLink,e,o,{...n,sender_trackey:r.getSenderTrackeyFromURL(null===(i=e.sharingLinkMetadata)||void 0===i?void 0:i.url),screen:r.ScreenName.SettingsScreen}))},SHARE_MODAL_SHARE__COPY_LINK_LEGO__COPY_SUCCESS:({metadata:e,event:a,extras:n,origin:o})=>{var i;e={...e,sharingLinkMetadata:a.payload.linkMetadata},t(Rt(r.TiburonEventName.CopySharedLink,e,o,{...n,sender_trackey:r.getSenderTrackeyFromURL(null===(i=e.sharingLinkMetadata)||void 0===i?void 0:i.url)}))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_START:({metadata:e,event:a,origin:n,extras:o})=>{var i,s;e={...e,sharingLinkMetadata:a.payload.linkMetadata},t(Rt(r.TiburonEventName.CopySharedLink,e,n,{...o,tokenized_contact_count:null===(i=e.sharingInviteTargets)||void 0===i?void 0:i.length,sender_trackey:r.getSenderTrackeyFromURL(null===(s=e.sharingLinkMetadata)||void 0===s?void 0:s.url)}))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_ERROR:({metadata:e,extras:a,origin:n})=>{var o;t(Rt(r.TiburonEventName.CopySharedLinkFailure,e,n,{...a,tokenized_contact_count:null===(o=e.sharingInviteTargets)||void 0===o?void 0:o.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__COPY_LINK__COPY_ERROR:({metadata:e,extras:a,origin:n})=>{var o;t(Rt(r.TiburonEventName.CopySharedLinkFailure,e,n,{...a,tokenized_contact_count:null===(o=e.sharingInviteTargets)||void 0===o?void 0:o.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__CREATE_LINK__COPY_FORBIDDEN:({metadata:e,extras:a,origin:n})=>{var o;t(Rt(r.TiburonEventName.CopySharedLinkFailure,e,n,{...a,tokenized_contact_count:null===(o=e.sharingInviteTargets)||void 0===o?void 0:o.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__COPY_LINK_LEGO__CREATE_ERROR:({metadata:e,extras:a,origin:n})=>{var o;t(Rt(r.TiburonEventName.CopySharedLinkFailure,e,n,{...a,tokenized_contact_count:null===(o=e.sharingInviteTargets)||void 0===o?void 0:o.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__COPY_LINK_LEGO__COPY_ERROR:({metadata:e,extras:a,origin:n})=>{var o;t(Rt(r.TiburonEventName.CopySharedLinkFailure,e,n,{...a,tokenized_contact_count:null===(o=e.sharingInviteTargets)||void 0===o?void 0:o.length,error:"failed_copy_to_clipboard"}))},SHARE_MODAL_SHARE__INVITE__CANCELLED:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.FailInbandShare,e,n,{error_tag:"contacts_error",error_message:"contact validation error",num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,access_level:ht(e.sharingAccessLevel),screen:Ct(e),...a}))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_ERROR:({metadata:e,extras:a,origin:n,cache:o,event:i})=>{o.inviteStartTime&&(a.timing=Date.now()-o.inviteStartTime),t(Rt(r.TiburonEventName.FailInbandShare,e,n,{...a,error_tag:i.payload.response.error[".tag"],http_status_code:i.payload.response.statusCode,num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,screen:Ct(e)}))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_FATAL:({metadata:e,extras:a,origin:n,cache:o})=>{o.inviteStartTime&&(a.timing=Date.now()-o.inviteStartTime),t(Rt(r.TiburonEventName.FailInbandShare,e,n,{...a,error_tag:"undefined",http_status_code:0,num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,screen:Ct(e)}))},SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_ERROR:({event:e,metadata:a,extras:n,origin:o,cache:i})=>{i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),t(Rt(r.TiburonEventName.FailInbandShare,a,o,{...n,error_tag:e.payload.response.error[".tag"],http_status_code:e.payload.response.statusCode,num_recipients:a.sharingInviteTargets?a.sharingInviteTargets.length:0,screen:Ct(a)}))},SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_FATAL:({metadata:e,extras:a,origin:n,cache:o})=>{o.inviteStartTime&&(a={...a,timing:Date.now()-o.inviteStartTime}),t(Rt(r.TiburonEventName.FailInbandShare,e,n,{...a,error_tag:"undefined",http_status_code:0,num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,screen:Ct(e)}))},SHARE_MODAL_SHARE__INVITE__SHARE_FILE_FOLDER__FAILURE:({event:e,metadata:a,extras:n,origin:o,cache:i})=>{var s;i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),"ApiError"===e.payload.output.type||"PollingApiError"===e.payload.output.type?n={...n,error_tag:e.payload.output.value.response.error[".tag"],http_status_code:e.payload.output.value.response.statusCode}:"NetworkFailure"===e.payload.output.type||"PollingNetworkFailure"===e.payload.output.type?n={...n,error_tag:"network",http_status_code:null!==(s=e.payload.output.value.response.statusCode)&&void 0!==s?s:0}:"PollingFailed"===e.payload.output.type?n={...n,error_tag:"failed",http_status_code:0}:"PollingTimeout"===e.payload.output.type&&(n={...n,error_tag:"network",http_status_code:408}),t(Rt(r.TiburonEventName.FailInbandShare,a,o,{...n,num_recipients:a.sharingInviteTargets?a.sharingInviteTargets.length:0,screen:Ct(a)}))},SHARE_MODAL_SETTINGS__PAGE_VIEW:({metadata:e,extras:a,origin:n,event:o})=>{t(Tt(r.TiburonEventName.ViewSettingsScreen,e,n,{...a,settings_tab:o.payload.selected_tab})),t(Tt(r.TiburonEventName.ViewSettingsTab,e,n,{...a,settings_tab:o.payload.selected_tab}))},SHARE_MODAL_SETTINGS__TAB_CHANGE:({metadata:e,extras:a,origin:n,event:o})=>{t(Tt(r.TiburonEventName.ViewSettingsTab,e,n,{...a,settings_tab:o.payload.selected_tab}))},SHARE_MODAL_MANAGE_ACCESS__SETTINGS_GEAR__CLICK:({metadata:e,extras:a,origin:n})=>{t(Rt(r.TiburonEventName.ClickSettingsGear,e,n,{...a,screen:r.ScreenName.ManageAccessScreen}));const o=e.sharingObjectMetadata;o&&(r.getIsFile(o)?t(Tt(r.TiburonEventName.OpenFileSettingsModal,e,n,a)):r.getIsFolder(o)&&t(Tt(r.TiburonEventName.OpenFolderSettingsModal,e,n,a)))},SHARE_MODAL_MANAGE_ACCESS__SETTINGS_TEXT__CLICK:({metadata:e,extras:a,origin:n,event:o})=>{t(Rt(r.TiburonEventName.ClickManageAccessPageSettingsText,e,n,{...a,screen:r.ScreenName.ManageAccessScreen,settings_tab:o.payload.settings_tab,link_access_level:o.payload.link_access_level,link_type:o.payload.link_type}));const i=e.sharingObjectMetadata;i&&t(Tt(r.getIsFile(i)?r.TiburonEventName.OpenFileSettingsModal:r.TiburonEventName.OpenFolderSettingsModal,e,n,a))},SHARE_MODAL_SHARE__SETTINGS_GEAR__CLICK:({metadata:e,extras:a,origin:n})=>{t(Rt(r.TiburonEventName.ClickSettingsGear,e,n,{...a,screen:r.ScreenName.ShareScreen}));const o=e.sharingObjectMetadata;o&&(r.getIsFile(o)?t(Tt(r.TiburonEventName.OpenFileSettingsModal,e,n,a)):r.getIsFolder(o)&&t(Tt(r.TiburonEventName.OpenFolderSettingsModal,e,n,a)))},SHARE_MODAL_SHARE__SETTINGS_LINK__CLICK:({metadata:e,extras:a,origin:n})=>{a=e.sharingAccessLevel&&"editor"===e.sharingAccessLevel[".tag"]?{...a,settings_tab:"edit_link_settings"}:{...a,settings_tab:"view_link_settings"},t(Rt(r.TiburonEventName.ClickSettingsText,e,n,a))},SHARE_MODAL_SHARE__MODIFY_LINK__CLICK:({metadata:e,extras:a,origin:n})=>{a=e.sharingAccessLevel&&"editor"===e.sharingAccessLevel[".tag"]?{...a,settings_tab:"edit_link_settings"}:{...a,settings_tab:"view_link_settings"},t(Rt(r.TiburonEventName.OpenLinkSettingsModal,e,n,a))},SHARE_MODAL_SHARE__INVITE__ADD_FILE_MEMBER_API_SUCCESS:({metadata:e,extras:a,origin:n,cache:o})=>{o.inviteStartTime&&(a={...a,timing:Date.now()-o.inviteStartTime}),t(Tt(r.TiburonEventName.SucceedInbandShare,e,n,{...a,access_level:ht(e.sharingAccessLevel),num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,screen:Ct(e)}))},SHARE_MODAL_SHARE__INVITE__ADD_FOLDER_MEMBER__API_SUCCESS:({metadata:e,extras:a,cache:n,origin:o})=>{n.inviteStartTime&&(a={...a,timing:Date.now()-n.inviteStartTime}),t(Tt(r.TiburonEventName.SucceedInbandShare,e,o,{...a,num_recipients:e.sharingInviteTargets?e.sharingInviteTargets.length:0,screen:Ct(e)}))},SHARE_MODAL_SHARE__INVITE__NAVIGATE_ATTEMPT:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.AttemptNavigateAwayDuringShare,e,n,a))},SHARE_MODAL_SHARE__INVITE__NAVIGATE_AWAY:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedNavigateAwayDuringShare,e,n,a))},SHARE_MODAL_SETTINGS__UPSELL_LINK__CLICKED:({event:e,metadata:a,extras:n,origin:o})=>{n={...n,element_trackingId:"link_settings_pro_upsell",element_href:e.payload.href},t(Tt(r.TiburonEventName.ElementClick,a,o,n))},SHARE_MODAL_SETTINGS__UPSELL_LINK__EXPOSED:({event:e,metadata:a,extras:n,origin:o})=>{n={...n,element_trackingId:"link_settings_pro_upsell",element_href:e.payload.href},t(Tt(r.TiburonEventName.ElementView,a,o,n))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.AttemptRemoveAllMembers,e,n,a))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR:({metadata:e,event:a,origin:n,extras:o})=>{t(Tt(r.TiburonEventName.FailRemoveAllMembers,e,n,{http_status_code:a.payload.response.statusCode,error_message:a.payload.response.error[".tag"],...o}))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.FailRemoveAllMembers,e,n,{http_status_code:0,error_message:"undefined_error",...a}))},SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedRemoveAllMembers,e,n,{http_status_code:200,response_status:"success",...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_START:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.AttemptRemoveMember,e,n,a))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_START:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.AttemptRemoveMember,e,n,a))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_START:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.AttemptRemoveMember,e,n,{relinquish_membership:!0,...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_START:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.AttemptRemoveMember,e,n,{relinquish_membership:!0,...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_ERROR:({metadata:e,extras:a,origin:n,event:o})=>{t(Tt(r.TiburonEventName.FailRemoveMember,e,n,{http_status_code:o.payload.response.statusCode,error_tag:o.payload.response.error[".tag"],...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.FailRemoveMember,e,n,{http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_ERROR:({metadata:e,extras:a,origin:n,event:o})=>{t(Tt(r.TiburonEventName.FailRemoveMember,e,n,{relinquish_membership:!0,http_status_code:o.payload.response.statusCode,error_tag:o.payload.response.error[".tag"],...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.FailRemoveMember,e,n,{relinquish_membership:!0,http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_FAILURE:({event:e,metadata:a,extras:n,origin:o,cache:i})=>{i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),"ApiError"===e.payload.output.type||"PollingApiError"===e.payload.output.type?n={...n,error_tag:e.payload.output.value.response.error[".tag"],http_status_code:e.payload.output.value.response.statusCode}:"NetworkFailure"===e.payload.output.type||"PollingNetworkFailure"===e.payload.output.type?n={...n,error_tag:"unknown",http_status_code:0}:"PollingFailed"===e.payload.output.type?n={...n,error_tag:"failed",http_status_code:0}:"PollingTimeout"===e.payload.output.type&&(n={...n,error_tag:"timeout",http_status_code:0}),t(Rt(r.TiburonEventName.FailRemoveMember,a,o,n))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_FAILURE:({event:e,metadata:a,extras:n,origin:o,cache:i})=>{i.inviteStartTime&&(n={...n,timing:Date.now()-i.inviteStartTime}),"ApiError"===e.payload.output.type||"PollingApiError"===e.payload.output.type?n={...n,error_tag:e.payload.output.value.response.error[".tag"],http_status_code:e.payload.output.value.response.statusCode}:"NetworkFailure"===e.payload.output.type||"PollingNetworkFailure"===e.payload.output.type?n={...n,error_tag:"unknown",http_status_code:0}:"PollingFailed"===e.payload.output.type?n={...n,error_tag:"failed",http_status_code:0}:"PollingTimeout"===e.payload.output.type&&(n={...n,error_tag:"timeout",http_status_code:0}),t(Rt(r.TiburonEventName.FailRemoveMember,a,o,{relinquish_membership:!0,...n}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FILE_MEMBER__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedRemoveMember,e,n,{http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__REMOVE_FOLDER_MEMBER__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedRemoveMember,e,n,{http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FILE_MEMBERSHIP__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedRemoveMember,e,n,{relinquish_membership:!0,http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__RELINQUISH_FOLDER_MEMBERSHIP__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedRemoveMember,e,n,{relinquish_membership:!0,http_status_code:200,...a}))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_START:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.AttemptTransferFolder,e,n,a))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.FailTransferFolder,e,n,{http_status_code:0,error_tag:"undefined_error",...a}))},SHARE_MODAL_MANAGE_ACCESS__TRANSFER_FOLDER__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedTransferFolder,e,n,{http_status_code:200,...a}))},SHARE_MODAL_DATA_LOADER__INITIAL_LOADER__START:({metadata:e,extras:a,origin:n,cache:o})=>{o.shareModalDataLoadStartTime=Date.now(),o.inviteStartTime=void 0,o.createSharedLinkStartTime=void 0,t(Tt(r.TiburonEventName.BeginShareFlow,e,n,a))},SHARE_MODAL_DATA_LOADER__INITIAL_LOADER__SUCCESS:({metadata:e,extras:a,origin:n,cache:o})=>{o.shareModalDataLoadStartTime&&(a={...a,timing:Date.now()-o.shareModalDataLoadStartTime}),t(Tt(r.TiburonEventName.ViewShareModal,e,n,a))},SHARE_MODAL_RELINQUISHED_SCREEN__VIEW:({metadata:e,extras:a,origin:n,cache:o})=>{a={...a,is_relinquished_screen:!0},o.shareModalDataLoadStartTime&&(a={...a,timing:Date.now()-o.shareModalDataLoadStartTime}),t(Tt(r.TiburonEventName.ViewShareModal,e,n,a))},SHARE_MODAL_ERROR_SCREEN__VIEW:({metadata:a,extras:n,origin:o,event:i})=>{if("response"in i.payload.initialLoadError){const t=i.payload.initialLoadError.response;let a;t.status!==e.Status.FATAL&&(a=t.error[".tag"]);const r=t.error;n={...n,http_status_code:t.statusCode,error_summary:a,error_message:r,failing_endpoint:i.payload.initialLoadError.type}}else n={...n,event:i};t(Tt(r.TiburonEventName.ViewErrorScreen,a,o,n))},SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE:({metadata:e,extras:a,origin:n,event:o})=>{if(e.sharingLinksMetadata){const t=r.getByAccessLevel(e.sharingLinksMetadata,o.payload.link_access_level);t&&(a={...a,...vt(t)})}t(Tt(r.TiburonEventName.ChangeSharedLinkAudience,e,n,{old_audience:o.payload.previous[".tag"],new_audience:o.payload.next[".tag"],screen:r.ScreenName.SettingsScreen,...a}))},SHARE_MODAL_MANAGE_ACCESS__PARENT_FOLDER_CHANGE_ACCESS_MODAL__VIEW:({metadata:e,extras:a,event:n,origin:o})=>{t(Tt(r.TiburonEventName.OpenParentFolderAccessModal,e,o,{...a,num_parent_folders:n.payload.numParents}))},SHARE_MODAL_MANAGE_ACCESS__PARENT_FOLDER_REMOVE_ACCESS_MODAL__VIEW:({metadata:e,extras:a,event:n,origin:o})=>{t(Tt(r.TiburonEventName.OpenParentFolderAccessModal,e,o,{...a,num_parent_folders:n.payload.numParents}))},SHARE_MODAL_SHARE__VIEW:({metadata:e,extras:a,origin:n})=>{let o;e.sharingObjectMetadata&&(o=r.getCanDoAction(e.sharingObjectMetadata,r.INVITE_EDITOR_TAG)),e.sharingObjectMetadata&&r.getIsNonSharedFolder(e.sharingObjectMetadata)&&!o?a={...a,link_only_reason:"limited_permissions"}:e.sharingObjectMetadata&&r.getIsLinkOnlyMode(e.sharingObjectMetadata)?(a=e.sharingObjectMetadata.tooManyMountsError?{...a,link_only_reason:e.sharingObjectMetadata.tooManyMountsError[".tag"]}:{...a,link_only_reason:"is_family"},t(Rt(r.TiburonEventName.ViewLinkOnlyModal,e,n,{...a,share_tab:e.sharingAccessLevel&&"editor"===e.sharingAccessLevel[".tag"]?"edit_tab":"view_tab"}))):(t(Rt(r.TiburonEventName.ViewShareScreen,e,n,{...a,share_tab:e.sharingAccessLevel&&"editor"===e.sharingAccessLevel[".tag"]?"edit_tab":"view_tab"})),t(Rt(r.TiburonEventName.ViewShareTab,e,n,{...a,share_tab:e.sharingAccessLevel&&"editor"===e.sharingAccessLevel[".tag"]?"edit_tab":"view_tab"})))},SHARE_MODAL_SHARE__LINK_ACCESS_LEVEL__CHANGE:({metadata:e,extras:a,origin:n,event:o})=>{t(Rt(r.TiburonEventName.ViewShareTab,e,n,{...a,share_tab:"editor"===o.payload.next[".tag"]?"edit_tab":"view_tab"}))},SHARE_MODAL_MANAGE_ACCESS__VIEW:({metadata:e,extras:a,origin:n,event:o})=>{t(Rt(r.TiburonEventName.ViewManageAccessScreen,e,n,{...a,manage_tab:o.payload.manage_tab,share_modal_initial_screen:o.payload.share_modal_initial_screen}))},SHARE_MODAL_MANAGE_ACCESS_TAB__VIEW:({metadata:e,extras:a,origin:n,event:o})=>{t(Rt(r.TiburonEventName.ViewManageAccessTab,e,n,{...a,manage_tab:o.payload.manage_tab,share_modal_initial_screen:o.payload.share_modal_initial_screen}))},SHARE_MODAL_SHARE__MANAGE_ACCESS__CLICK:({metadata:e,extras:a,origin:n})=>{t(Rt(r.TiburonEventName.ClickWhoCanAccess,e,n,a))},SHARE_MODAL__REQUEST_CLOSE__CALLED:({metadata:e,extras:a,origin:n,event:o,cache:i})=>{e={...e,sharingObjectIdentifier:o.payload.objectIdentifier},e={...e,shareModalSessionId:o.payload.sessionId},i.inviteStartTime&&(a={...a,time_modal_opened:Date.now()-i.inviteStartTime}),t(Tt(r.TiburonEventName.CloseShareModal,e,n,a))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_START:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.AttemptTargetSearch,e,n,a))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedTargetSearch,e,n,a))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_ERROR:({metadata:e,extras:a,origin:n,event:o})=>{t(Tt(r.TiburonEventName.FailTargetSearch,e,n,{...a,error:o.payload.response.error[".tag"]}))},TARGETS_TOKENIZER__TARGETS_SEARCH__API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.FailTargetSearch,e,n,{...a,error:"unknown"}))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_START:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.AttemptDeleteSharedLink,e,n,a))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_ERROR:({metadata:e,event:a,origin:n,extras:o})=>{t(Tt(r.TiburonEventName.FailDeleteSharedLink,e,n,{http_status_code:a.payload.response.statusCode,error_message:a.payload.response.error[".tag"],...o}))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_FATAL:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.FailDeleteSharedLink,e,n,{http_status_code:0,error_message:"undefined_error",...a}))},SHARE_MODAL_SETTINGS__DELETE_LINK_API_SUCCESS:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.SucceedDeleteSharedLink,e,n,{http_status_code:200,response_status:"success",...a}))},SHARE_MODAL_SETTINGS__CREATE_LINK__NAMESPACE_CREATE_ERROR:({metadata:e,extras:a,event:n,origin:o})=>{var i,s;a={...a,http_status_code:0,error_tag:"undefined_error",access:(null===(i=e.sharingAccessLevel)||void 0===i?void 0:i[".tag"])||"unknown"},a="ApiError"===n.payload.output.type||"PollingApiError"===n.payload.output.type?{...a,http_status_code:200,error_tag:n.payload.output.value.response.error[".tag"],access:(null===(s=e.sharingAccessLevel)||void 0===s?void 0:s[".tag"])||"unknown"}:"NetworkFailure"===n.payload.output.type||"PollingNetworkFailure"===n.payload.output.type?{...a,http_status_code:n.payload.output.value.response.statusCode||0}:{...a,error_tag:n.payload.output.type},t(Tt(r.TiburonEventName.FailCreateNamespaceAfterLinkCreated,e,o,a))},SHARE_MODAL_SHARE__CREATE_LINK__NAMESPACE_CREATE_ERROR:({metadata:e,extras:a,event:n,origin:o})=>{var i,s;a={...a,http_status_code:0,error_tag:"undefined_error",access:(null===(i=e.sharingAccessLevel)||void 0===i?void 0:i[".tag"])||"unknown"},a="ApiError"===n.payload.output.type||"PollingApiError"===n.payload.output.type?{...a,http_status_code:200,error_tag:n.payload.output.value.response.error[".tag"],access:(null===(s=e.sharingAccessLevel)||void 0===s?void 0:s[".tag"])||"unknown"}:"NetworkFailure"===n.payload.output.type||"PollingNetworkFailure"===n.payload.output.type?{...a,http_status_code:n.payload.output.value.response.statusCode||0}:{...a,error_tag:n.payload.output.type},t(Tt(r.TiburonEventName.FailCreateNamespaceAfterLinkCreated,e,o,a))},SHARE_MODAL_SHARE__SOLVE_DEFAULT_AUDIENCE_CONFLICT__ATTEMPT:({metadata:e,extras:a,origin:n,event:o})=>{t(Tt(r.TiburonEventName.AttemptSolveDefaultAudienceConflict,e,n,{...a,user_default_link_audience:o.payload.user_default_link_audience,team_default_link_audience:o.payload.team_default_link_audience,final_audience:o.payload.final_audience,is_team_user:o.payload.is_team_user}))},SHARE_MODAL_SHARE__SOLVE_DEFAULT_AUDIENCE_CONFLICT__FAIL:({metadata:e,extras:a,origin:n,event:o})=>{t(Tt(r.TiburonEventName.FailSolveDefaultAudienceConflict,e,n,{...a,user_default_link_audience:o.payload.user_default_link_audience,team_default_link_audience:o.payload.team_default_link_audience,final_audience:o.payload.final_audience,is_team_user:o.payload.is_team_user}))},SHARE_MODAL_SHARE__SOLVE_DEFAULT_AUDIENCE_CONFLICT__SUCCEED:({metadata:e,extras:a,origin:n,event:o})=>{t(Tt(r.TiburonEventName.SucceedSolveDefaultAudienceConflict,e,n,{...a,user_default_link_audience:o.payload.user_default_link_audience,team_default_link_audience:o.payload.team_default_link_audience,final_audience:o.payload.final_audience,is_team_user:o.payload.is_team_user}))},SHARE_MODAL_VALIDATE_FOLDER_PATH_NO_PERMISSION:({metadata:e,extras:a,origin:n})=>{t(Tt(r.TiburonEventName.ValidateFolderPathNoPermission,e,n,a))}})),[t])})(),a=l.useMemo((()=>({})),[]);return l.useCallback(((e,n,r)=>{const o=t[e.type];if(o&&r)try{o({event:e,metadata:n,origin:r,cache:a,extras:{is_sdk:!0}})}catch(e){}}),[t,a])},Mt=({sink:t,children:a,origin:n,actionInfo:r})=>{const o=(()=>{const t=C();return l.useCallback(((a,n)=>{var r;("SANDBOX"===t||t===e.Platforms.DESKTOP&&"developer"===(null===(r=n.desktopMetadata)||void 0===r?void 0:r.buildChannel))&&window.console.log(a,n)}),[t])})(),i=bt(),s=l.useMemo((()=>S(t,o,i)),[t,o,i]);return l.createElement(p,{sink:s,origin:n,actionInfo:r},a)};Mt.displayName="LoggingProviderWithBuiltIns";const Nt=({loggingSink:t,sdk:a,children:n,redirectWindowToken:o=null,intl:i,platform:s=e.Platforms.SANDBOX,openUrl:_=null,origin:d,actionInfo:c,apiContext:u,onSnackbarShownChange:A})=>l.createElement(T,{intl:i},l.createElement(L,{platform:s},l.createElement(tt,{openUrl:_||Ze},l.createElement(f,{sdk:a},l.createElement(M,{redirectWindowToken:o},l.createElement(Mt,{sink:t||E,origin:d,actionInfo:c},l.createElement(st,{onSnackbarShownChange:A},l.createElement(r.Provider$1,{apiContext:u},n))))))));Nt.displayName="Provider";const Ot=/^www\.dropbox\.com$/,yt=/^meta-.*\.dev\.corp\.dropbox\.com$/,kt=["/2/sharing_receiving/sharing_tiburon_logger","/2/sharing/targets/search","/2/profile_services/list_linked_services"],Dt=(e,t)=>{if(!e.sharingObjectIdentifier)throw new Error("Missing objectIdentifier while trying to log to PAP");if(!e.sharingObjectMetadata)throw new Error("Missing objectMetadata while trying to log to PAP");if(!t)throw new Error("Missing actionInfo while trying to log to PAP")},Pt=async(e,t)=>{const a=r.PAP_Copy_SharedLink({...e,contentAction:e.contentAction?r.getContentActionFromString(e.contentAction):void 0}),n={isDir:e.isDir?"true":"false"};"start"===e.eventState?r.UDCL.logStart(a,{tags:n,key:t}):r.UDCL.logEnd(a,{tags:n,key:t})},Ft=async(e,t)=>{const a=r.PAP_Create_SharedLink({...e,contentAction:e.contentAction?r.getContentActionFromString(e.contentAction):void 0});"start"===e.eventState?r.UDCL.logStart(a,{key:t}):r.UDCL.logEnd(a,{key:t})},wt=()=>(({logCopyLinkEvent:e,logCreateLinkEvent:t})=>l.useCallback(((a,n,o,i)=>{switch(a.type){case"SHARE_MODAL_SHARE__COPY_LINK__CLICK":Dt(n,i),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata).then((t=>e({...r.getBaseCopySharedLinkProps("start",i,n,!0),...t},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__COPY_LINK__COPY_SUCCESS":Dt(n,i),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata).then((t=>e({...r.getBaseCopySharedLinkProps("success",i,n,!0),...t},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__COPY_LINK__COPY_ERROR":Dt(n,i),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata).then((t=>e({...r.getBaseCopySharedLinkProps("rejected",i,n,!0),...t},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__API_START":Dt(n,i),t(r.getBaseCreateSharedLinkProps("start",i,n),r.getFileIdOrPath(n)),e(r.getBaseCopySharedLinkProps("start",i,n,!1),r.getFileIdOrPath(n));break;case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_START":Dt(n,i),t(r.getBaseCreateSharedLinkProps("start",i,n),r.getFileIdOrPath(n));break;case"SHARE_MODAL_SHARE__CREATE_LINK__API_SUCCESS":case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_SUCCESS":Dt(n,i),r.getLinkMetadataSharedLinkProps(a.payload.response.output,200).then((e=>t({...r.getBaseCreateSharedLinkProps("success",i,n),...e},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__API_ERROR":case"SHARE_MODAL_SHARE__CREATE_LINK__API_FATAL":Dt(n,i);const o=r.getErrorState$1(a.payload.response);t({...r.getBaseCreateSharedLinkProps(o,i,n),...r.getCreateLinkExceptionProps(a.payload.response)},r.getFileIdOrPath(n)),e({...r.getBaseCopySharedLinkProps(o,i,n,!1),...r.getCreateLinkExceptionProps(a.payload.response)},r.getFileIdOrPath(n));break;case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_ERROR":case"SHARE_MODAL_SETTINGS__CREATE_LINK_API_FATAL":Dt(n,i);const s=r.getErrorState$1(a.payload.response);t({...r.getBaseCreateSharedLinkProps(s,i,n),...r.getCreateLinkExceptionProps(a.payload.response)},r.getFileIdOrPath(n));break;case"SHARE_MODAL_SHARE__CREATE_LINK__COPY_ERROR":Dt(n,i),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata,200).then((t=>e({...r.getBaseCopySharedLinkProps("rejected",i,n,!1),...t},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__COPY_FORBIDDEN":Dt(n,i),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata,200).then((t=>e({...r.getBaseCopySharedLinkProps("canceled",i,n,!1),...t},r.getFileIdOrPath(n))));break;case"SHARE_MODAL_SHARE__CREATE_LINK__COPY_SUCCESS":Dt(n,i),r.getLinkMetadataSharedLinkProps(a.payload.linkMetadata,200).then((t=>e({...r.getBaseCopySharedLinkProps("success",i,n,!1),...t},r.getFileIdOrPath(n))))}}),[t,e]))({logCopyLinkEvent:Pt,logCreateLinkEvent:Ft}),Ht=({userApiProps:t,origin:o,actionInfo:i,children:c,platform:u=e.Platforms.METASERVER,shouldDisableImportContacts:E,apiContext:A})=>{const{user:m,isLoading:p}=r.useActiveUser(),g=wt(),h=l.default.useCallback((e=>{"TEAMS_WEB"===e.type&&r.TeamsWebActionsLogger.log(e.payload.name,e.payload.extra)}),[]),v=l.default.useMemo((()=>S(g,h)),[g,h]),f=(null==A?void 0:A.isNonUserRelativeContext)&&!p?null==m?void 0:m.team_member_id:void 0,T=l.default.useMemo((()=>((e,t)=>{const a=window.location.hostname;if(!Ot.test(a)&&!yt.test(a))throw new Error("Cannot initialize the SDK on an unsupported domain.");const r=new n.DropboxAuth({domain:window.location.hostname,domainDelimiter:""});return new n.Dropbox({auth:r,fetch:(a,n)=>{const r=new Headers((null==n?void 0:n.headers)||[]),o=window.location.hostname,i=e.root_ns_id;(Ot.test(o)||yt.test(o))&&r.append("X-CSRF-Token",s.readCsrfToken()||""),r.append("X-Dropbox-Uid",e.id.toString());const d=new URL(a.toString()).pathname;t&&!kt.includes(d)?r.append(_.ApiV2HeaderNames.DropboxApiSelectAdmin,t):t&&kt.includes(d)?r.append("X-Dropbox-Path-Root",i.toString()):null!==i&&r.append("Dropbox-API-Path-Root",JSON.stringify({".tag":"namespace_id",namespace_id:i.toString()}));const c={...n||{},headers:r};return fetch(a,c)}})})(t,f)),[t,f]),{data:R,isLoading:I,isError:L}=(()=>{const{data:e,isLoading:t,isError:a,error:n}=d.loginAndRegisterConstantsPrefetchRequest.useQuery({apiArg:null,pkgArg:null});return{data:null==e?void 0:e.apiData,isLoading:t,isError:a,error:n}})();if(I||L)return null;const C=E||null==R?void 0:R.redirectWindowToken;return l.default.createElement(Nt,{intl:a.intl,sdk:T,loggingSink:v,redirectWindowToken:C,platform:u,origin:o,actionInfo:i,apiContext:A},c)};Ht.displayName="SharingSdkProviderInternal";var xt;!function(e){e.INSTALL_DESKTOP="install_desktop_module",e.INSTALL_MOBILE="install_mobile_module",e.UPLOAD_FILES="upload_content_module",e.SHARE_FILES="share_content_module"}(xt||(xt={})),e.ActivationTileMilestoneId=void 0,(e.ActivationTileMilestoneId||(e.ActivationTileMilestoneId={})).SHARE_CONTENT="share_content_milestone",e.FocusLock=Xe,e.MetadataProvider=h,e.SharingSdkProvider=e=>l.default.createElement(r.SafeQueryClientProviderWrapper,null,l.default.createElement(Ht,{...e})),e.define=ut,e.formatUrl=Je,e.handler=lt,e.useEndpoint=It,e.useLogger=g,e.useOpenUrl=at,e.usePlatform=C,e.useRedirectWindowToken=()=>l.useContext(b).redirectWindowToken,e.useShowGenericRequestFailureMessage=()=>{const e=a.useIntl(),t=(()=>{const e=a.useIntl(),t=ot();return l.useCallback((a=>t((t=>l.createElement(r.Snackbar$1,{...t},l.createElement(r.Snackbar$1.Message,null,a),l.createElement(r.Snackbar$1.Actions,null,l.createElement(r.Button,{variant:"transparent",inverse:!0},nt(e))))))),[e,t])})();return l.useCallback((()=>t(e.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."}))),[e,t])},e.useSnackbar=()=>{const t=a.useIntl(),n=ot(),o=at(),i=C()===e.Platforms.DESKTOP,s=i?{style:{position:"absolute",bottom:-16,left:0,right:0,borderRadius:0,minHeight:"unset"}}:{};return{showCompleted:e=>n((a=>l.createElement(Xe,{group:"share-modal"},l.createElement(r.Snackbar$1,{...a,...s,timeout:i?0:void 0,className:"sharingSdkSnackbar",preferComposition:!0},l.createElement(r.Snackbar$1.Accessory,null,l.createElement(r.UIIcon,{src:r.CheckmarkLine})),l.createElement(r.Snackbar$1.Content,null,l.createElement(r.Snackbar$1.Message,null,e.message),l.createElement(r.Snackbar$1.Actions,null,e.actionMessage&&e.actionOnClick&&l.createElement(r.Button,{variant:"transparent",onClick:e.actionOnClick},e.actionMessage),l.createElement(r.Button,{variant:"transparent",onClick:a.onRequestClose},nt(t)))))))),showInProgress:e=>n((t=>l.createElement(Xe,{group:"share-modal"},l.createElement(r.Snackbar$1,{...t,...s,timeout:0,className:"sharingSdkSnackbar",preferComposition:!0},l.createElement(r.Snackbar$1.Accessory,null,l.createElement(r.Spinner,{size:"small"})),l.createElement(r.Snackbar$1.Content,null,l.createElement(r.Snackbar$1.Message,null,e.message)))))),showFailure:e=>n((a=>{const n=Je(e.helpUrl||""),_=l.useCallback((()=>{o(n)}),[n]);return l.createElement(Xe,{group:"share-modal"},l.createElement(r.Snackbar$1,{...a,...s,timeout:i?0:void 0,className:"sharingSdkSnackbar",preferComposition:!0},l.createElement(r.Snackbar$1.Accessory,null,l.createElement(r.UIIcon,{src:r.FailLine})),l.createElement(r.Snackbar$1.Content,null,l.createElement(r.Snackbar$1.Message,null,e.message),l.createElement(r.Snackbar$1.Actions,null,e.helpMessage&&e.helpUrl?l.createElement(r.Button,{variant:"transparent",onClick:_},e.helpMessage):null,l.createElement(r.Button,{variant:"transparent",onClick:a.onRequestClose},nt(t))))))}))}}}));
//# sourceMappingURL=c_browse_welcome_hub_lib_types.js-vfl9Lbuod.map

//# debugId=681cfa4d-c3fd-3d5f-80b5-1b231350df31