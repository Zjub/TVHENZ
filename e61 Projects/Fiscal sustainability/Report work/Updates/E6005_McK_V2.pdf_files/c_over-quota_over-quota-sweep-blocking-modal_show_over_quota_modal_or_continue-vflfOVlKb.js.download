!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="cd43bcfa-63b8-3f6a-aa65-66b8933cec07")}catch(e){}}();
define(["exports","./e_file_viewer_static_scl_page_file","./e_data_modules_stormcrow","./e_core_exception","./c_over-quota_over-quota-sweep-blocking-modal_open_over_quota_restrictions_modal"],(function(o,e,t,n,r){"use strict";function i(o){return{class:"quota",action:"eng",object:"should_show_oq_restrictions_modal",properties:o}}var a;o.Show=void 0,(a=o.Show||(o.Show={})).WarningOnly="WARNING_ONLY",a.EnforceRestrictionsOnly="ENFORCE_RESTRICTIONS_ONLY",a.All="ALL";const s=async(r,a,s)=>{const c=Math.random().toString(36).substring(2,15);e.UDCL.logStart(i({overQuotaSweepBlockingModalAction:a}),{key:c,tags:{overQuotaSweepBlockingModalAction:a}});try{const n=await(async(n,r,i)=>{var a,s,c,l;const{variant:u,error:_}=await e.fetchExperimentVariant("end_state_web_overquota_restrictions");if(u===e.Variant.OFF||void 0===u||_)return!1;if(i&&i.is_team)return!1;const{apiData:d}=await e.getQuotaUpsellInfoPackage.fetchQuery(t.queryClient,{apiArg:{}},{refetchOnReconnect:!1,refetchOnWindowFocus:!0,staleTime:18e5,cacheTime:18e5,retry:1});return!(n===o.Show.WarningOnly&&!(null===(a=d.restrictions)||void 0===a?void 0:a.show_restrictions_warning)||n===o.Show.EnforceRestrictionsOnly&&!(null===(s=d.restrictions)||void 0===s?void 0:s.enforce_restrictions)||![e.Variant.V1,e.Variant.CONTROL,e.Variant.HOLDOUT].includes(u)||!(null===(c=d.restrictions)||void 0===c?void 0:c.enforce_restrictions)&&!(null===(l=d.restrictions)||void 0===l?void 0:l.show_restrictions_warning)||(e.logExposure({feature:"end_state_web_overquota_restrictions",variant:u}),e.logAdditionalExposureDetails(u,r,d),u!==e.Variant.V1))})(r,a,s);return e.UDCL.logEnd(i({overQuotaSweepBlockingModalAction:a,eventState:"success"}),{key:c,tags:{overQuotaSweepBlockingModalAction:a}}),n}catch(o){return n.reportStack(`Error in showOQModalOrContinue: ${JSON.stringify(o)}`,{severity:n.SEVERITY.NONCRITICAL,tags:["last-mile","over_quota_restrictions_modal"]}),e.UDCL.logEnd(i({overQuotaSweepBlockingModalAction:a,eventState:"failed"}),{key:c,tags:{overQuotaSweepBlockingModalAction:a}}),!1}};o.shouldShowOQModal=s,o.showOQModalOrContinue=async({beforeShowModal:e,user:t,show:n=o.Show.All,...i})=>{await s(n,i.action,t)?(null==e||e(),r.openOverQuotaRestrictionsModal(i)):i.continueCallback()}}));
//# sourceMappingURL=c_over-quota_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue.js-vfls0cehj.map

//# debugId=cd43bcfa-63b8-3f6a-aa65-66b8933cec07