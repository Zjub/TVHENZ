!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="57c8e92d-2908-3e6d-8257-7ea7dd22970c")}catch(e){}}();
define(["require","exports","react","./c_core_i18n","./e_file_viewer_static_scl_page_file","./c_trial-plan-card_components_header","./c_trial-cards_trial-plan-card","./c_spectrum_util_raf_throttle","./e_data_modules_stormcrow","./c_pap-events_navigation_select_create_folder_action"],(function(e,a,t,i,l,o,r,n,s,d){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}var c=u(t);const g=i.intl.formatMessage({id:"RwfIPM",defaultMessage:"Upgrade"}),v=i.intl.formatMessage({id:"Ts3pxe",defaultMessage:"Manage files"}),f=i.intl.formatMessage({id:"s+3YBE",defaultMessage:"Includes"}),m=e=>i.intl.formatMessage({id:"oZoBRB",defaultMessage:"Get {planSize}"},{planSize:e}),p=i.intl.formatMessage({id:"gAT+r8",defaultMessage:"View plans"}),_=i.intl.formatMessage({id:"fkOQG8",defaultMessage:"Download file"}),M=(e,a)=>i.intl.formatMessage({id:"Ju0e9k",defaultMessage:"You're using <b>{usedBytes} of {quotaBytes}</b> of your free Dropbox storage space. Upgrade to a plan that scales with your work—or your over-quota files may be deleted."},{usedBytes:e,quotaBytes:a,b:e=>c.default.createElement("strong",null,e)}),y=i.intl.formatMessage({id:"r5pMlA",defaultMessage:"Warning"}),C=i.intl.formatMessage({id:"gW6Dlh",defaultMessage:"Current plan"}),h=i.intl.formatMessage({id:"XHZW23",defaultMessage:"Upgrade to continue collaborating on shared files"}),b=e=>i.intl.formatMessage({id:"QRtV/H",defaultMessage:"<b>Sharing will be restricted on {restrictionsDate}</b> if you're still over your storage limit."},{restrictionsDate:e,b:e=>c.default.createElement("strong",null,e)}),w=i.intl.formatMessage({id:"ac6d5L",defaultMessage:"<b>Sharing will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),I=i.intl.formatMessage({id:"tELEKM",defaultMessage:"Sharing is restricted because you’re over your storage limit."}),S=e=>i.intl.formatMessage({id:"+CKpIi",defaultMessage:"Upgrade to view {fileName}"},{fileName:e}),P=e=>i.intl.formatMessage({id:"8t0sN4",defaultMessage:"<b>Preview will be restricted on {restrictionsDate}</b> if you're still over your storage limit."},{restrictionsDate:e,b:e=>c.default.createElement("strong",null,e)}),E=i.intl.formatMessage({id:"D9G/dF",defaultMessage:"<b>Preview will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),U=i.intl.formatMessage({id:"e3Hu53",defaultMessage:"Preview is restricted because you’re over your storage limit."}),T=i.intl.formatMessage({id:"cp1Kff",defaultMessage:"Upgrade to continue adding content"}),A=i.intl.formatMessage({id:"FMGZlv",defaultMessage:"You’ve exceeded your storage limit. Upgrade to get more storage."});i.intl.formatMessage({id:"RwfIPM",defaultMessage:"Upgrade"}),i.intl.formatMessage({id:"Ts3pxe",defaultMessage:"Manage files"}),i.intl.formatMessage({id:"s+3YBE",defaultMessage:"Includes"}),i.intl.formatMessage({id:"gAT+r8",defaultMessage:"View plans"});const L=i.intl.formatMessage({id:"Z6zJXZ",defaultMessage:"Show all plans"}),D=i.intl.formatMessage({id:"YvYJx0",defaultMessage:"Your special savings"}),V=i.intl.formatMessage({id:"5kkHg1",defaultMessage:"Redeem offer"});i.intl.formatMessage({id:"fkOQG8",defaultMessage:"Download file"}),i.intl.formatMessage({id:"r5pMlA",defaultMessage:"Warning"}),i.intl.formatMessage({id:"gW6Dlh",defaultMessage:"Current plan"}),i.intl.formatMessage({id:"XHZW23",defaultMessage:"Upgrade to continue collaborating on shared files"}),i.intl.formatMessage({id:"ac6d5L",defaultMessage:"<b>Sharing will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),i.intl.formatMessage({id:"tELEKM",defaultMessage:"Sharing is restricted because you’re over your storage limit."}),i.intl.formatMessage({id:"D9G/dF",defaultMessage:"<b>Preview will be restricted soon</b> if you’re still over your storage limit."},{b:e=>c.default.createElement("strong",null,e)}),i.intl.formatMessage({id:"e3Hu53",defaultMessage:"Preview is restricted because you’re over your storage limit."}),i.intl.formatMessage({id:"cp1Kff",defaultMessage:"Upgrade to continue adding content"}),i.intl.formatMessage({id:"FMGZlv",defaultMessage:"You’ve exceeded your storage limit. Upgrade to get more storage."});const x=i.intl.formatMessage({id:"aRx2b4",defaultMessage:"Get more storage to upload your file(s)"}),k=i.intl.formatMessage({id:"VPYpFU",defaultMessage:"Uploading the selected file(s) would put you over your storage limit."});i.intl.formatMessage({id:"EcxI0t",defaultMessage:"Compare plans"});const N="portable-checkout-modal";var O;a.ViewMode=void 0,(O=a.ViewMode||(a.ViewMode={})).Sharing="SHARING",O.Preview="PREVIEW",O.UploadOrCreate="UPLOAD_OR_CREATE",O.UploadNearQuota="UPLOAD_NEAR_QUOTA";const B=e=>{throw new Error(`Unhandled value: ${e}`)};function R(e){if(null==e)return"";const a=new Date(1e3*e);return i.intl.formatDate(a,{year:"numeric",month:"long",day:"numeric"})}const F=l.createDefaultApiv2QueryFn(d.GetSpaceUpsellsRoutes,"get_plans"),G=l.createApiv2Query({nsClient:d.GetSpaceUpsellsRoutes,rpc:"get_plans",queryFn:(...e)=>(...a)=>l.reportExceptionIfRequestFails((async()=>await F(...e)(...a)),["get_plans"])});a.DOWNLOAD_FILE=_,a.MANAGE_FILES=v,a.OVER_QUOTA_DELETION_WARNING=M,a.OVER_QUOTA_RESTRICTIONS_MODAL_MIN_WIDTH_DESKTOP=706,a.PORTABLE_CHECKOUT_MODAL_ID=N,a.PREVIEW_TITLE=S,a.SHARING_ENFORCE_RESTRICTIONS=I,a.SHARING_RESTRICTION_WARNING=b,a.SHARING_RESTRICTION_WARNING_NO_DATE=w,a.UPGRADE=g,a.VIEW_PLANS=p,a.WARNING_BADGE=y,a.getAutoLayoutModalProps=function({viewMode:e,isMobileView:t,fileName:s,quotaUpsellInfo:d,warningMode:u,usedLessThanPlusQuota:g,filePreview:y,planContent:N,quotaUsedBytes:O,quotaAllocatedBytes:F,shouldUseSmallSkus:G,onViewPlansClick:H,onCloseClick:q,onDownloadFileClick:W,onManageFilesClick:z,onGetPlanClick:Q}){const Y=function(e,t){switch(e){case a.ViewMode.Sharing:return h;case a.ViewMode.Preview:return S(t||"");case a.ViewMode.UploadOrCreate:return T;case a.ViewMode.UploadNearQuota:return x;default:return B(e)}}(e,s),K=function(e,t){var i;const l=null===(i=null==t?void 0:t.restrictions)||void 0===i?void 0:i.restrictions_start_time_utc_seconds;switch(e){case a.ViewMode.Sharing:return l?b(R(l)):w;case a.ViewMode.Preview:return l?P(R(l)):E;case a.ViewMode.UploadOrCreate:return A;case a.ViewMode.UploadNearQuota:return k;default:return B(e)}}(e,d),Z=function(e){switch(e){case a.ViewMode.Sharing:return I;case a.ViewMode.Preview:return U;case a.ViewMode.UploadOrCreate:return A;case a.ViewMode.UploadNearQuota:return k;default:return B(e)}}(e),J=void 0!==W&&e===a.ViewMode.Preview&&!u&&(!t||t&&!g),X={title:Y,bannerOptions:{type:u?"warning":"alert",text:u?K:Z,ctaText:J?_:void 0,ctaOnClick:J?W:void 0},firstChild:c.default.createElement(c.default.Fragment,null),primaryCtaText:G?L:p,primaryCtaOnClick:H,showCloseButton:u||t,onCloseButtonClick:e=>q(e),width:706,minWidth:706,maxWidth:1200};if(g&&N){const i=function(e,a,t,i,o,r,n){var s,d,u,c,g,m,p;const _={heading:null===(s=null==e?void 0:e.INDIVIDUAL)||void 0===s?void 0:s.advertised_space_short_gb_rounded,productFamily:(null===(d=null==e?void 0:e.INDIVIDUAL)||void 0===d?void 0:d.display_name)||"",eyebrow:n?(null===(u=null==e?void 0:e.INDIVIDUAL)||void 0===u?void 0:u.dropbox_brand_name)+" "+(null===(c=null==e?void 0:e.INDIVIDUAL)||void 0===c?void 0:c.display_name):null===(g=null==e?void 0:e.INDIVIDUAL)||void 0===g?void 0:g.display_name,eyebrowSubtle:!0,primaryCtaText:v,primaryOnClick:r,bulletsHeader:n||a?void 0:f,boldHeading:!0,fillMode:"outline",cardSizeVariant:"narrow-full-height",bullets:a?[]:[[l.CheckmarkLine,(null===(p=null===(m=null==e?void 0:e.INDIVIDUAL)||void 0===m?void 0:m.features)||void 0===p?void 0:p[0])||""]],alternativeToPricingSectionText:C,alternativeToPricingSectionTextSize:n?"medium":"large",stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,allowHorizontalExpansion:!a};return t||(_.quotaIndicatorInfo={usedBytes:i,quotaBytes:o,subtextVerbForm:"imperative",meterColor:"red",textSize:"small"}),_}(N,t,u,O,F,z,G),s=function(e,a,t,i,r,s){var d,u,c,g,v,p,_,M,y,C,h,b,w,I,S,P,E,U,T,A,L,x,k,N,O,B,R;let F;if(s){const s={planSelectorName:l.PlanTypes.basicPlus500GB,monthlyBillingByMonth:(null===(d=null==e?void 0:e.BASIC500)||void 0===d?void 0:d.monthly_billing_by_month)||"",annualBillingByMonth:(null===(u=null==e?void 0:e.BASIC500)||void 0===u?void 0:u.annual_billing_by_month)||"",advertisedYearlyPriceSavingsPercentage:(null===(c=null==e?void 0:e.BASIC500)||void 0===c?void 0:c.advertised_yearly_price_savings_percentage)||"",includedTaxString:(null===(g=null==e?void 0:e.BASIC500)||void 0===g?void 0:g.included_tax_string)||"",countryCode:n.getCountryCodeFromIP()||"US"};F={productFamily:(null===(v=null==e?void 0:e.BASIC500)||void 0===v?void 0:v.display_name)||"",heading:(null===(p=null==e?void 0:e.BASIC500)||void 0===p?void 0:p.advertised_space_short_gb_rounded)||"",eyebrow:(null===(_=null==e?void 0:e.BASIC500)||void 0===_?void 0:_.display_name)||"",eyebrowSubtle:!0,primaryCtaText:V,primaryOnClick:r,bulletsHeader:void 0,boldHeading:!0,cardSizeVariant:"narrow-full-height",pricingInfo:{...s,priceTextSize:"medium"},bullets:[[l.CheckmarkLine,(null===(y=null===(M=null==e?void 0:e.BASIC500)||void 0===M?void 0:M.features)||void 0===y?void 0:y[0])||""]],stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,isRecommended:!0,recommendationVariant:o.TrialCardRecommendationVariants.PILL,recommendationIcon:l.UpsellFill,recommendedText:D,allowHorizontalExpansion:!a},t||(F.quotaIndicatorInfo={usedBytes:i,quotaBytes:(null===(C=null==e?void 0:e.BASIC500)||void 0===C?void 0:C.quota_bytes)||0,subtextVerbForm:"present_participle",meterColor:"black",quotaString:(null===(h=null==e?void 0:e.BASIC500)||void 0===h?void 0:h.advertised_space_short_gb_rounded)||"",textSize:"small"})}else{const o={planSelectorName:l.PlanTypes.plus,monthlyBillingByMonth:(null===(b=null==e?void 0:e.PLUS)||void 0===b?void 0:b.monthly_billing_by_month)||"",annualBillingByMonth:(null===(w=null==e?void 0:e.PLUS)||void 0===w?void 0:w.annual_billing_by_month)||"",advertisedYearlyPriceSavingsPercentage:(null===(I=null==e?void 0:e.PLUS)||void 0===I?void 0:I.advertised_yearly_price_savings_percentage)||"",includedTaxString:(null===(S=null==e?void 0:e.PLUS)||void 0===S?void 0:S.included_tax_string)||"",countryCode:n.getCountryCodeFromIP()||"US"};F={productFamily:(null===(P=null==e?void 0:e.PLUS)||void 0===P?void 0:P.display_name)||"",heading:(null===(E=null==e?void 0:e.PLUS)||void 0===E?void 0:E.advertised_space_short_gb_rounded)||"",eyebrow:(null===(U=null==e?void 0:e.PLUS)||void 0===U?void 0:U.display_name)||"",eyebrowSubtle:!0,primaryCtaText:m((null===(T=null==e?void 0:e.PLUS)||void 0===T?void 0:T.advertised_space_short_gb_rounded)||""),primaryOnClick:r,bulletsHeader:f,boldHeading:!0,cardSizeVariant:"narrow-full-height",pricingInfo:o,bullets:[[l.CheckmarkLine,(null===(L=null===(A=null==e?void 0:e.PLUS)||void 0===A?void 0:A.features)||void 0===L?void 0:L[0])||""],[l.CheckmarkLine,(null===(k=null===(x=null==e?void 0:e.PLUS)||void 0===x?void 0:x.features)||void 0===k?void 0:k[1])||""],[l.CheckmarkLine,(null===(O=null===(N=null==e?void 0:e.PLUS)||void 0===N?void 0:N.features)||void 0===O?void 0:O[2])||""]],stretchToFillHeight:!0,centerInFlexContainer:!0,headingMarginTopSmall:!0,allowHorizontalExpansion:!a},t||(F.quotaIndicatorInfo={usedBytes:i,quotaBytes:(null===(B=null==e?void 0:e.PLUS)||void 0===B?void 0:B.quota_bytes)||0,subtextVerbForm:"present_participle",meterColor:"black",quotaString:(null===(R=null==e?void 0:e.PLUS)||void 0===R?void 0:R.advertised_space_short_gb_rounded)||"",textSize:"small"})}return F}(N,t,u,O,Q,G);t?(X.firstChild=c.default.createElement(r.TrialPlanCard,{...s}),X.secondChild=c.default.createElement(r.TrialPlanCard,{...i})):(X.firstChild=c.default.createElement(r.TrialPlanCard,{...i}),X.secondChild=c.default.createElement(r.TrialPlanCard,{...s})),X.centerMobileView=!0,e!==a.ViewMode.Preview||u?X.primaryCtaProps=t?{variant:"transparent"}:{variant:"outline"}:t?(X.primaryCtaProps={variant:"opacity",size:"xlarge",fullWidth:!0,style:{maxWidth:"384px"}},void 0!==W&&(X.secondaryCtaProps={variant:"transparent",size:"large"},X.secondaryCtaText=_,X.secondaryCtaOnClick=W)):(X.firstChild=y,X.secondChild=c.default.createElement(r.TrialPlanCard,{...s}),X.primaryCtaProps={variant:"outline"},X.secondaryCtaText=v,X.secondaryCtaOnClick=z,X.secondaryCtaProps={variant:"transparent"})}else X.firstChild=c.default.createElement(l.Text,null,M(l.format_bytes(i.intl,O),l.format_bytes(i.intl,F))),X.secondaryCtaText=v,X.secondaryCtaOnClick=z,X.primaryCtaProps={variant:"primary"};return X},a.getRestrictionsDateString=R,a.getViewMode=function(e){switch(e){case"share_modal":case"share_link":case"share_add_people":case"transfer":case"photos_copy_link":case"share_qr_code":case"shared_page_create_shared_folder":return a.ViewMode.Sharing;case"file_viewer":case"quick_view":case"standalone_preview":return a.ViewMode.Preview;case"upload":case"create":case"upload_menu_action_bar":return a.ViewMode.UploadOrCreate;default:return B(e)}},a.openPortableCheckoutModal=a=>{new Promise((function(a,t){e(["./c_checkout_components_portable_checkout_frame"],a,t)})).then((function(e){return e.portable_checkout_frame_esnext})).then((async({PortableCheckoutModal:e})=>{l.mountModal(c.default.createElement(i.Provider,{value:i.intl},c.default.createElement(s.QueryClientProvider,{client:l.queryClient},c.default.createElement(e,{...a}))),void 0,N)}))},a.useGetPlans=({planNames:e,revenueContentLocation:a,locale:t=n.getPageLocale(),countryOverride:i=n.getCountryOverride(),enabled:o=!0})=>{var r;const s=a,{isError:d,data:u,isLoading:g,error:v}=G.useQuery({apiArg:{plan_names:e,revenue_content_location:s,locale:t,country_override:i}},{enabled:o});return c.default.useEffect((()=>{var e,t;d?l.UDCL.logEvent("get_plans",{tags:{status:"failed",location:a,errorMessage:(null===(e=null==v?void 0:v.apiError)||void 0===e?void 0:e.summary)||"unknown error"}}):!g&&(null==u?void 0:u.apiData)&&(null===(t=u.apiData)||void 0===t?void 0:t.plans)&&Object.keys(u.apiData.plans).length&&l.UDCL.logEvent("get_plans",{tags:{status:"success",location:a}})}),[u,v,d,a,g]),{plansInfo:null===(r=null==u?void 0:u.apiData)||void 0===r?void 0:r.plans,isLoadingPlansInfo:g,plansInfoError:v}}}));
//# sourceMappingURL=c_over-quota_utils_use_get_plans.js-vflyTZRY8.map

//# debugId=57c8e92d-2908-3e6d-8257-7ea7dd22970c