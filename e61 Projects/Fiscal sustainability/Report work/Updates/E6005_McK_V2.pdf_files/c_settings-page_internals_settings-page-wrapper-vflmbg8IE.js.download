!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b8ec6e4a-af35-307f-8062-6b113fdeb6e2")}catch(e){}}();
define(["exports","react","./e_file_viewer_static_scl_page_file","./c_core_i18n","./c_browse_welcome_hub_lib_types","./c_src_utils_initials","./c_inband-screen_internals_share-modal-share","./c_common_components_buttons","./c_dig-icons_assets_ui-icon_line_share","./c_content-member-list_internals_content-member-list","./c_dig-components_tabs_index","./c_utils_dsx_dsx-react","./c_chat_chat_constants","./c_dig-components_card_index","./c_components_icons_icon_dropdown_selected","./c_api_v2_routes_team_insights_provider","./c_date-fns__lib_requiredArgs_index","./c_dig-components_combinations_index","./c_dig-icons_assets_ui-icon_line_settings","./c_over-quota_over-quota-sweep-blocking-modal_show_over_quota_modal_or_continue","./c_dig-icons_assets_ui-icon_line_upsell"],(function(e,t,a,n,r,i,o,s,l,c,d,u,m,g,f,p,h,y,v,w,b){"use strict";function _(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var k=_(t);function E(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var M={};function S(){return M}function T(e,t){h.requiredArgs(2,arguments);var a=h.startOfDay(e),n=h.startOfDay(t);return a.getTime()===n.getTime()}function D(e){return h.requiredArgs(1,arguments),e instanceof Date||"object"===h._typeof(e)&&"[object Date]"===Object.prototype.toString.call(e)}function C(e){if(h.requiredArgs(1,arguments),!D(e)&&"number"!=typeof e)return!1;var t=h.toDate(e);return!isNaN(Number(t))}function P(e,t){return h.requiredArgs(2,arguments),function(e,t){h.requiredArgs(2,arguments);var a=h.toDate(e).getTime(),n=E(t);return new Date(a+n)}(e,-E(t))}function L(e){h.requiredArgs(1,arguments);var t=h.toDate(e),a=t.getUTCDay(),n=(a<1?7:0)+a-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function x(e){h.requiredArgs(1,arguments);var t=h.toDate(e),a=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(a+1,0,4),n.setUTCHours(0,0,0,0);var r=L(n),i=new Date(0);i.setUTCFullYear(a,0,4),i.setUTCHours(0,0,0,0);var o=L(i);return t.getTime()>=r.getTime()?a+1:t.getTime()>=o.getTime()?a:a-1}var I=6048e5;function N(e){h.requiredArgs(1,arguments);var t=h.toDate(e),a=L(t).getTime()-function(e){h.requiredArgs(1,arguments);var t=x(e),a=new Date(0);return a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0),L(a)}(t).getTime();return Math.round(a/I)+1}function O(e,t){var a,n,r,i,o,s,l,c;h.requiredArgs(1,arguments);var d=S(),u=E(null!==(a=null!==(n=null!==(r=null!==(i=null==t?void 0:t.weekStartsOn)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==r?r:d.weekStartsOn)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==a?a:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=h.toDate(e),g=m.getUTCDay(),f=(g<u?7:0)+g-u;return m.setUTCDate(m.getUTCDate()-f),m.setUTCHours(0,0,0,0),m}function A(e,t){var a,n,r,i,o,s,l,c;h.requiredArgs(1,arguments);var d=h.toDate(e),u=d.getUTCFullYear(),m=S(),g=E(null!==(a=null!==(n=null!==(r=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:m.firstWeekContainsDate)&&void 0!==n?n:null===(l=m.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(u+1,0,g),f.setUTCHours(0,0,0,0);var p=O(f,t),y=new Date(0);y.setUTCFullYear(u,0,g),y.setUTCHours(0,0,0,0);var v=O(y,t);return d.getTime()>=p.getTime()?u+1:d.getTime()>=v.getTime()?u:u-1}var U=6048e5;function R(e,t){h.requiredArgs(1,arguments);var a=h.toDate(e),n=O(a,t).getTime()-function(e,t){var a,n,r,i,o,s,l,c;h.requiredArgs(1,arguments);var d=S(),u=E(null!==(a=null!==(n=null!==(r=null!==(i=null==t?void 0:t.firstWeekContainsDate)&&void 0!==i?i:null==t||null===(o=t.locale)||void 0===o||null===(s=o.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:d.firstWeekContainsDate)&&void 0!==n?n:null===(l=d.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==a?a:1),m=A(e,t),g=new Date(0);return g.setUTCFullYear(m,0,u),g.setUTCHours(0,0,0,0),O(g,t)}(a,t).getTime();return Math.round(n/U)+1}function $(e,t){for(var a=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return a+n}var F={y:function(e,t){var a=e.getUTCFullYear(),n=a>0?a:1-a;return $("yy"===t?n%100:n,t.length)},M:function(e,t){var a=e.getUTCMonth();return"M"===t?String(a+1):$(a+1,2)},d:function(e,t){return $(e.getUTCDate(),t.length)},a:function(e,t){var a=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return"am"===a?"a.m.":"p.m."}},h:function(e,t){return $(e.getUTCHours()%12||12,t.length)},H:function(e,t){return $(e.getUTCHours(),t.length)},m:function(e,t){return $(e.getUTCMinutes(),t.length)},s:function(e,t){return $(e.getUTCSeconds(),t.length)},S:function(e,t){var a=t.length,n=e.getUTCMilliseconds();return $(Math.floor(n*Math.pow(10,a-3)),t.length)}},B="midnight",j="noon",H="morning",W="afternoon",Y="evening",q="night",G={G:function(e,t,a){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if("yo"===t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return a.ordinalNumber(r,{unit:"year"})}return F.y(e,t)},Y:function(e,t,a,n){var r=A(e,n),i=r>0?r:1-r;return"YY"===t?$(i%100,2):"Yo"===t?a.ordinalNumber(i,{unit:"year"}):$(i,t.length)},R:function(e,t){return $(x(e),t.length)},u:function(e,t){return $(e.getUTCFullYear(),t.length)},Q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return $(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return $(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){var n=e.getUTCMonth();switch(t){case"M":case"MM":return F.M(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return $(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){var r=R(e,n);return"wo"===t?a.ordinalNumber(r,{unit:"week"}):$(r,t.length)},I:function(e,t,a){var n=N(e);return"Io"===t?a.ordinalNumber(n,{unit:"week"}):$(n,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getUTCDate(),{unit:"date"}):F.d(e,t)},D:function(e,t,a){var n=function(e){h.requiredArgs(1,arguments);var t=h.toDate(e),a=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=a-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?a.ordinalNumber(n,{unit:"dayOfYear"}):$(n,t.length)},E:function(e,t,a){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return $(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return $(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){var n=e.getUTCDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return $(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){var n,r=e.getUTCHours();switch(n=12===r?j:0===r?B:r/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,a){var n,r=e.getUTCHours();switch(n=r>=17?Y:r>=12?W:r>=4?H:q,t){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return F.h(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getUTCHours(),{unit:"hour"}):F.H(e,t)},K:function(e,t,a){var n=e.getUTCHours()%12;return"Ko"===t?a.ordinalNumber(n,{unit:"hour"}):$(n,t.length)},k:function(e,t,a){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?a.ordinalNumber(n,{unit:"hour"}):$(n,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):F.m(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):F.s(e,t)},S:function(e,t){return F.S(e,t)},X:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return z(r);case"XXXX":case"XX":return Q(r);default:return Q(r,":")}},x:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return z(r);case"xxxx":case"xx":return Q(r);default:return Q(r,":")}},O:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+V(r,":");default:return"GMT"+Q(r,":")}},z:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+V(r,":");default:return"GMT"+Q(r,":")}},t:function(e,t,a,n){var r=n._originalDate||e;return $(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,a,n){return $((n._originalDate||e).getTime(),t.length)}};function V(e,t){var a=e>0?"-":"+",n=Math.abs(e),r=Math.floor(n/60),i=n%60;if(0===i)return a+String(r);var o=t||"";return a+String(r)+o+$(i,2)}function z(e,t){return e%60==0?(e>0?"-":"+")+$(Math.abs(e)/60,2):Q(e,t)}function Q(e,t){var a=t||"",n=e>0?"-":"+",r=Math.abs(e);return n+$(Math.floor(r/60),2)+a+$(r%60,2)}var K=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},X=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},J={p:X,P:function(e,t){var a,n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return K(e,t);switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",K(r,t)).replace("{{time}}",X(i,t))}},Z=["D","DD"],ee=["YY","YYYY"];function te(e){return-1!==Z.indexOf(e)}function ae(e){return-1!==ee.indexOf(e)}function ne(e,t,a){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var re={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ie=function(e,t,a){var n,r=re[e];return n="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),null!=a&&a.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function oe(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}var se={date:oe({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:oe({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:oe({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},le={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ce=function(e,t,a,n){return le[e]};function de(e){return function(t,a){var n;if("formatting"===(null!=a&&a.context?String(a.context):"standalone")&&e.formattingValues){var r=e.defaultFormattingWidth||e.defaultWidth,i=null!=a&&a.width?String(a.width):r;n=e.formattingValues[i]||e.formattingValues[r]}else{var o=e.defaultWidth,s=null!=a&&a.width?String(a.width):e.defaultWidth;n=e.values[s]||e.values[o]}return n[e.argumentCallback?e.argumentCallback(t):t]}}var ue={ordinalNumber:function(e,t){var a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},era:de({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:de({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:de({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:de({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:de({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function me(e){return function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.width,r=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;var o,s=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?function(e,t){for(var a=0;a<e.length;a++)if(t(e[a]))return a;return}(l,(function(e){return e.test(s)})):function(e,t){for(var a in e)if(e.hasOwnProperty(a)&&t(e[a]))return a;return}(l,(function(e){return e.test(s)}));return o=e.valueCallback?e.valueCallback(c):c,{value:o=a.valueCallback?a.valueCallback(o):o,rest:t.slice(s.length)}}}var ge,fe={ordinalNumber:(ge={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.match(ge.matchPattern);if(!a)return null;var n=a[0],r=e.match(ge.parsePattern);if(!r)return null;var i=ge.valueCallback?ge.valueCallback(r[0]):r[0];return{value:i=t.valueCallback?t.valueCallback(i):i,rest:e.slice(n.length)}}),era:me({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:me({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:me({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:me({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:me({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},pe={code:"en-US",formatDistance:ie,formatLong:se,formatRelative:ce,localize:ue,match:fe,options:{weekStartsOn:0,firstWeekContainsDate:1}},he=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ye=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ve=/^'([^]*?)'?$/,we=/''/g,be=/[a-zA-Z]/;function _e(e,t,a){var n,r,i,o,s,l,c,d,u,m,g,f,p,y,v,w,b,_;h.requiredArgs(2,arguments);var k=String(t),M=S(),T=null!==(n=null!==(r=null==a?void 0:a.locale)&&void 0!==r?r:M.locale)&&void 0!==n?n:pe,D=E(null!==(i=null!==(o=null!==(s=null!==(l=null==a?void 0:a.firstWeekContainsDate)&&void 0!==l?l:null==a||null===(c=a.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==s?s:M.firstWeekContainsDate)&&void 0!==o?o:null===(u=M.locale)||void 0===u||null===(m=u.options)||void 0===m?void 0:m.firstWeekContainsDate)&&void 0!==i?i:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var L=E(null!==(g=null!==(f=null!==(p=null!==(y=null==a?void 0:a.weekStartsOn)&&void 0!==y?y:null==a||null===(v=a.locale)||void 0===v||null===(w=v.options)||void 0===w?void 0:w.weekStartsOn)&&void 0!==p?p:M.weekStartsOn)&&void 0!==f?f:null===(b=M.locale)||void 0===b||null===(_=b.options)||void 0===_?void 0:_.weekStartsOn)&&void 0!==g?g:0);if(!(L>=0&&L<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!T.localize)throw new RangeError("locale must contain localize property");if(!T.formatLong)throw new RangeError("locale must contain formatLong property");var x=h.toDate(e);if(!C(x))throw new RangeError("Invalid time value");var I=P(x,h.getTimezoneOffsetInMilliseconds(x)),N={firstWeekContainsDate:D,weekStartsOn:L,locale:T,_originalDate:x};return k.match(ye).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,J[t])(e,T.formatLong):e})).join("").match(he).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return function(e){var t=e.match(ve);if(!t)return e;return t[1].replace(we,"'")}(n);var i=G[r];if(i)return null!=a&&a.useAdditionalWeekYearTokens||!ae(n)||ne(n,t,String(e)),null!=a&&a.useAdditionalDayOfYearTokens||!te(n)||ne(n,t,String(e)),i(I,n,T.localize,N);if(r.match(be))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("")}function ke(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Me(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ee(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(s)throw i}}}}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t){return Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Te(e,t)}function De(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ce(e)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ce(e);if(t){var r=Ce(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return function(e,t){if(t&&("object"===h._typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Se(e)}(this,a)}}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e){var t=function(e,t){if("object"!==h._typeof(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==h._typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h._typeof(t)?t:String(t)}function Ie(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xe(n.key),n)}}function Ne(e,t,a){return t&&Ie(e.prototype,t),a&&Ie(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oe(e,t,a){return(t=xe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ae=function(){function e(){Le(this,e),Oe(this,"priority",void 0),Oe(this,"subPriority",0)}return Ne(e,[{key:"validate",value:function(e,t){return!0}}]),e}(),Ue=function(e){De(a,e);var t=Pe(a);function a(e,n,r,i,o){var s;return Le(this,a),(s=t.call(this)).value=e,s.validateValue=n,s.setValue=r,s.priority=i,o&&(s.subPriority=o),s}return Ne(a,[{key:"validate",value:function(e,t){return this.validateValue(e,this.value,t)}},{key:"set",value:function(e,t,a){return this.setValue(e,t,this.value,a)}}]),a}(Ae),Re=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",10),Oe(Se(e),"subPriority",-1),e}return Ne(a,[{key:"set",value:function(e,t){if(t.timestampIsSet)return e;var a=new Date(0);return a.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),a.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),a}}]),a}(Ae),$e=function(){function e(){Le(this,e),Oe(this,"incompatibleTokens",void 0),Oe(this,"priority",void 0),Oe(this,"subPriority",void 0)}return Ne(e,[{key:"run",value:function(e,t,a,n){var r=this.parse(e,t,a,n);return r?{setter:new Ue(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}},{key:"validate",value:function(e,t,a){return!0}}]),e}(),Fe=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",140),Oe(Se(e),"incompatibleTokens",["R","u","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"G":case"GG":case"GGG":return a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"});case"GGGGG":return a.era(e,{width:"narrow"});default:return a.era(e,{width:"wide"})||a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"})}}},{key:"set",value:function(e,t,a){return t.era=a,e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}}]),a}($e),Be=/^(1[0-2]|0?\d)/,je=/^(3[0-1]|[0-2]?\d)/,He=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,We=/^(5[0-3]|[0-4]?\d)/,Ye=/^(2[0-3]|[0-1]?\d)/,qe=/^(2[0-4]|[0-1]?\d)/,Ge=/^(1[0-1]|0?\d)/,Ve=/^(1[0-2]|0?\d)/,ze=/^[0-5]?\d/,Qe=/^[0-5]?\d/,Ke=/^\d/,Xe=/^\d{1,2}/,Je=/^\d{1,3}/,Ze=/^\d{1,4}/,et=/^-?\d+/,tt=/^-?\d/,at=/^-?\d{1,2}/,nt=/^-?\d{1,3}/,rt=/^-?\d{1,4}/,it=/^([+-])(\d{2})(\d{2})?|Z/,ot=/^([+-])(\d{2})(\d{2})|Z/,st=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,lt=/^([+-])(\d{2}):(\d{2})|Z/,ct=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function dt(e,t){return e?{value:t(e.value),rest:e.rest}:e}function ut(e,t){var a=t.match(e);return a?{value:parseInt(a[0],10),rest:t.slice(a[0].length)}:null}function mt(e,t){var a=t.match(e);return a?"Z"===a[0]?{value:0,rest:t.slice(1)}:{value:("+"===a[1]?1:-1)*(36e5*(a[2]?parseInt(a[2],10):0)+6e4*(a[3]?parseInt(a[3],10):0)+1e3*(a[5]?parseInt(a[5],10):0)),rest:t.slice(a[0].length)}:null}function gt(e){return ut(et,e)}function ft(e,t){switch(e){case 1:return ut(Ke,t);case 2:return ut(Xe,t);case 3:return ut(Je,t);case 4:return ut(Ze,t);default:return ut(new RegExp("^\\d{1,"+e+"}"),t)}}function pt(e,t){switch(e){case 1:return ut(tt,t);case 2:return ut(at,t);case 3:return ut(nt,t);case 4:return ut(rt,t);default:return ut(new RegExp("^-?\\d{1,"+e+"}"),t)}}function ht(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function yt(e,t){var a,n=t>0,r=n?t:1-t;if(r<=50)a=e||100;else{var i=r+50;a=e+100*Math.floor(i/100)-(e>=i%100?100:0)}return n?a:1-a}function vt(e){return e%400==0||e%4==0&&e%100!=0}var wt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",130),Oe(Se(e),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){var n=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return dt(ft(4,e),n);case"yo":return dt(a.ordinalNumber(e,{unit:"year"}),n);default:return dt(ft(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,a){var n=e.getUTCFullYear();if(a.isTwoDigitYear){var r=yt(a.year,n);return e.setUTCFullYear(r,0,1),e.setUTCHours(0,0,0,0),e}var i="era"in t&&1!==t.era?1-a.year:a.year;return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}}]),a}($e),bt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",130),Oe(Se(e),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){var n=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return dt(ft(4,e),n);case"Yo":return dt(a.ordinalNumber(e,{unit:"year"}),n);default:return dt(ft(t.length,e),n)}}},{key:"validate",value:function(e,t){return t.isTwoDigitYear||t.year>0}},{key:"set",value:function(e,t,a,n){var r=A(e,n);if(a.isTwoDigitYear){var i=yt(a.year,r);return e.setUTCFullYear(i,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),O(e,n)}var o="era"in t&&1!==t.era?1-a.year:a.year;return e.setUTCFullYear(o,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),O(e,n)}}]),a}($e),_t=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",130),Oe(Se(e),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t){return pt("R"===t?4:t.length,e)}},{key:"set",value:function(e,t,a){var n=new Date(0);return n.setUTCFullYear(a,0,4),n.setUTCHours(0,0,0,0),L(n)}}]),a}($e),kt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",130),Oe(Se(e),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t){return pt("u"===t?4:t.length,e)}},{key:"set",value:function(e,t,a){return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e}}]),a}($e),Et=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",120),Oe(Se(e),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"Q":case"QQ":return ft(t.length,e);case"Qo":return a.ordinalNumber(e,{unit:"quarter"});case"QQQ":return a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(e,{width:"narrow",context:"formatting"});default:return a.quarter(e,{width:"wide",context:"formatting"})||a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,a){return e.setUTCMonth(3*(a-1),1),e.setUTCHours(0,0,0,0),e}}]),a}($e),Mt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",120),Oe(Se(e),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"q":case"qq":return ft(t.length,e);case"qo":return a.ordinalNumber(e,{unit:"quarter"});case"qqq":return a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(e,{width:"narrow",context:"standalone"});default:return a.quarter(e,{width:"wide",context:"standalone"})||a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=1&&t<=4}},{key:"set",value:function(e,t,a){return e.setUTCMonth(3*(a-1),1),e.setUTCHours(0,0,0,0),e}}]),a}($e),St=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),Oe(Se(e),"priority",110),e}return Ne(a,[{key:"parse",value:function(e,t,a){var n=function(e){return e-1};switch(t){case"M":return dt(ut(Be,e),n);case"MM":return dt(ft(2,e),n);case"Mo":return dt(a.ordinalNumber(e,{unit:"month"}),n);case"MMM":return a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(e,{width:"narrow",context:"formatting"});default:return a.month(e,{width:"wide",context:"formatting"})||a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,a){return e.setUTCMonth(a,1),e.setUTCHours(0,0,0,0),e}}]),a}($e),Tt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",110),Oe(Se(e),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){var n=function(e){return e-1};switch(t){case"L":return dt(ut(Be,e),n);case"LL":return dt(ft(2,e),n);case"Lo":return dt(a.ordinalNumber(e,{unit:"month"}),n);case"LLL":return a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(e,{width:"narrow",context:"standalone"});default:return a.month(e,{width:"wide",context:"standalone"})||a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,a){return e.setUTCMonth(a,1),e.setUTCHours(0,0,0,0),e}}]),a}($e);var Dt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",100),Oe(Se(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"w":return ut(We,e);case"wo":return a.ordinalNumber(e,{unit:"week"});default:return ft(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,a,n){return O(function(e,t,a){h.requiredArgs(2,arguments);var n=h.toDate(e),r=E(t),i=R(n,a)-r;return n.setUTCDate(n.getUTCDate()-7*i),n}(e,a,n),n)}}]),a}($e);var Ct=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",100),Oe(Se(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"I":return ut(We,e);case"Io":return a.ordinalNumber(e,{unit:"week"});default:return ft(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=53}},{key:"set",value:function(e,t,a){return L(function(e,t){h.requiredArgs(2,arguments);var a=h.toDate(e),n=E(t),r=N(a)-n;return a.setUTCDate(a.getUTCDate()-7*r),a}(e,a))}}]),a}($e),Pt=[31,28,31,30,31,30,31,31,30,31,30,31],Lt=[31,29,31,30,31,30,31,31,30,31,30,31],xt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Se(e),"subPriority",1),Oe(Se(e),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"d":return ut(je,e);case"do":return a.ordinalNumber(e,{unit:"date"});default:return ft(t.length,e)}}},{key:"validate",value:function(e,t){var a=vt(e.getUTCFullYear()),n=e.getUTCMonth();return a?t>=1&&t<=Lt[n]:t>=1&&t<=Pt[n]}},{key:"set",value:function(e,t,a){return e.setUTCDate(a),e.setUTCHours(0,0,0,0),e}}]),a}($e),It=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Se(e),"subpriority",1),Oe(Se(e),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"D":case"DD":return ut(He,e);case"Do":return a.ordinalNumber(e,{unit:"date"});default:return ft(t.length,e)}}},{key:"validate",value:function(e,t){return vt(e.getUTCFullYear())?t>=1&&t<=366:t>=1&&t<=365}},{key:"set",value:function(e,t,a){return e.setUTCMonth(0,a),e.setUTCHours(0,0,0,0),e}}]),a}($e);function Nt(e,t,a){var n,r,i,o,s,l,c,d;h.requiredArgs(2,arguments);var u=S(),m=E(null!==(n=null!==(r=null!==(i=null!==(o=null==a?void 0:a.weekStartsOn)&&void 0!==o?o:null==a||null===(s=a.locale)||void 0===s||null===(l=s.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==i?i:u.weekStartsOn)&&void 0!==r?r:null===(c=u.locale)||void 0===c||null===(d=c.options)||void 0===d?void 0:d.weekStartsOn)&&void 0!==n?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=h.toDate(e),f=E(t),p=((f%7+7)%7<m?7:0)+f-g.getUTCDay();return g.setUTCDate(g.getUTCDate()+p),g}var Ot=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Se(e),"incompatibleTokens",["D","i","e","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"E":case"EE":case"EEE":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,a,n){return(e=Nt(e,a,n)).setUTCHours(0,0,0,0),e}}]),a}($e),At=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Se(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a,n){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return dt(ft(t.length,e),r);case"eo":return dt(a.ordinalNumber(e,{unit:"day"}),r);case"eee":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"eeeee":return a.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,a,n){return(e=Nt(e,a,n)).setUTCHours(0,0,0,0),e}}]),a}($e),Ut=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Se(e),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a,n){var r=function(e){var t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return dt(ft(t.length,e),r);case"co":return dt(a.ordinalNumber(e,{unit:"day"}),r);case"ccc":return a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});case"ccccc":return a.day(e,{width:"narrow",context:"standalone"});case"cccccc":return a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});default:return a.day(e,{width:"wide",context:"standalone"})||a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(e,t){return t>=0&&t<=6}},{key:"set",value:function(e,t,a,n){return(e=Nt(e,a,n)).setUTCHours(0,0,0,0),e}}]),a}($e);var Rt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",90),Oe(Se(e),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){var n=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return ft(t.length,e);case"io":return a.ordinalNumber(e,{unit:"day"});case"iii":return dt(a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return dt(a.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return dt(a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),n);default:return dt(a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"}),n)}}},{key:"validate",value:function(e,t){return t>=1&&t<=7}},{key:"set",value:function(e,t,a){return e=function(e,t){h.requiredArgs(2,arguments);var a=E(t);a%7==0&&(a-=7);var n=h.toDate(e),r=((a%7+7)%7<1?7:0)+a-n.getUTCDay();return n.setUTCDate(n.getUTCDate()+r),n}(e,a),e.setUTCHours(0,0,0,0),e}}]),a}($e),$t=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",80),Oe(Se(e),"incompatibleTokens",["b","B","H","k","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"a":case"aa":case"aaa":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(e,{width:"narrow",context:"formatting"});default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,a){return e.setUTCHours(ht(a),0,0,0),e}}]),a}($e),Ft=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",80),Oe(Se(e),"incompatibleTokens",["a","B","H","k","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"b":case"bb":case"bbb":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(e,{width:"narrow",context:"formatting"});default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,a){return e.setUTCHours(ht(a),0,0,0),e}}]),a}($e),Bt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",80),Oe(Se(e),"incompatibleTokens",["a","b","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"B":case"BB":case"BBB":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(e,{width:"narrow",context:"formatting"});default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(e,t,a){return e.setUTCHours(ht(a),0,0,0),e}}]),a}($e),jt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",70),Oe(Se(e),"incompatibleTokens",["H","K","k","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"h":return ut(Ve,e);case"ho":return a.ordinalNumber(e,{unit:"hour"});default:return ft(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=12}},{key:"set",value:function(e,t,a){var n=e.getUTCHours()>=12;return n&&a<12?e.setUTCHours(a+12,0,0,0):n||12!==a?e.setUTCHours(a,0,0,0):e.setUTCHours(0,0,0,0),e}}]),a}($e),Ht=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",70),Oe(Se(e),"incompatibleTokens",["a","b","h","K","k","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"H":return ut(Ye,e);case"Ho":return a.ordinalNumber(e,{unit:"hour"});default:return ft(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=23}},{key:"set",value:function(e,t,a){return e.setUTCHours(a,0,0,0),e}}]),a}($e),Wt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",70),Oe(Se(e),"incompatibleTokens",["h","H","k","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"K":return ut(Ge,e);case"Ko":return a.ordinalNumber(e,{unit:"hour"});default:return ft(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=11}},{key:"set",value:function(e,t,a){return e.getUTCHours()>=12&&a<12?e.setUTCHours(a+12,0,0,0):e.setUTCHours(a,0,0,0),e}}]),a}($e),Yt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",70),Oe(Se(e),"incompatibleTokens",["a","b","h","H","K","t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"k":return ut(qe,e);case"ko":return a.ordinalNumber(e,{unit:"hour"});default:return ft(t.length,e)}}},{key:"validate",value:function(e,t){return t>=1&&t<=24}},{key:"set",value:function(e,t,a){var n=a<=24?a%24:a;return e.setUTCHours(n,0,0,0),e}}]),a}($e),qt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",60),Oe(Se(e),"incompatibleTokens",["t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"m":return ut(ze,e);case"mo":return a.ordinalNumber(e,{unit:"minute"});default:return ft(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,a){return e.setUTCMinutes(a,0,0),e}}]),a}($e),Gt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",50),Oe(Se(e),"incompatibleTokens",["t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t,a){switch(t){case"s":return ut(Qe,e);case"so":return a.ordinalNumber(e,{unit:"second"});default:return ft(t.length,e)}}},{key:"validate",value:function(e,t){return t>=0&&t<=59}},{key:"set",value:function(e,t,a){return e.setUTCSeconds(a,0),e}}]),a}($e),Vt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",30),Oe(Se(e),"incompatibleTokens",["t","T"]),e}return Ne(a,[{key:"parse",value:function(e,t){return dt(ft(t.length,e),(function(e){return Math.floor(e*Math.pow(10,3-t.length))}))}},{key:"set",value:function(e,t,a){return e.setUTCMilliseconds(a),e}}]),a}($e),zt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",10),Oe(Se(e),"incompatibleTokens",["t","T","x"]),e}return Ne(a,[{key:"parse",value:function(e,t){switch(t){case"X":return mt(it,e);case"XX":return mt(ot,e);case"XXXX":return mt(st,e);case"XXXXX":return mt(ct,e);default:return mt(lt,e)}}},{key:"set",value:function(e,t,a){return t.timestampIsSet?e:new Date(e.getTime()-a)}}]),a}($e),Qt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",10),Oe(Se(e),"incompatibleTokens",["t","T","X"]),e}return Ne(a,[{key:"parse",value:function(e,t){switch(t){case"x":return mt(it,e);case"xx":return mt(ot,e);case"xxxx":return mt(st,e);case"xxxxx":return mt(ct,e);default:return mt(lt,e)}}},{key:"set",value:function(e,t,a){return t.timestampIsSet?e:new Date(e.getTime()-a)}}]),a}($e),Kt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",40),Oe(Se(e),"incompatibleTokens","*"),e}return Ne(a,[{key:"parse",value:function(e){return gt(e)}},{key:"set",value:function(e,t,a){return[new Date(1e3*a),{timestampIsSet:!0}]}}]),a}($e),Xt=function(e){De(a,e);var t=Pe(a);function a(){var e;Le(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Oe(Se(e=t.call.apply(t,[this].concat(r))),"priority",20),Oe(Se(e),"incompatibleTokens","*"),e}return Ne(a,[{key:"parse",value:function(e){return gt(e)}},{key:"set",value:function(e,t,a){return[new Date(a),{timestampIsSet:!0}]}}]),a}($e),Jt={G:new Fe,y:new wt,Y:new bt,R:new _t,u:new kt,Q:new Et,q:new Mt,M:new St,L:new Tt,w:new Dt,I:new Ct,d:new xt,D:new It,E:new Ot,e:new At,c:new Ut,i:new Rt,a:new $t,b:new Ft,B:new Bt,h:new jt,H:new Ht,K:new Wt,k:new Yt,m:new qt,s:new Gt,S:new Vt,X:new zt,x:new Qt,t:new Kt,T:new Xt},Zt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ea=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ta=/^'([^]*?)'?$/,aa=/''/g,na=/\S/,ra=/[a-zA-Z]/;function ia(e,t,a,n){var r,i,o,s,l,c,d,u,m,g,f,p,y,v,w,b,_,k;h.requiredArgs(3,arguments);var M=String(e),T=String(t),D=S(),C=null!==(r=null!==(i=null==n?void 0:n.locale)&&void 0!==i?i:D.locale)&&void 0!==r?r:pe;if(!C.match)throw new RangeError("locale must contain match property");var L=E(null!==(o=null!==(s=null!==(l=null!==(c=null==n?void 0:n.firstWeekContainsDate)&&void 0!==c?c:null==n||null===(d=n.locale)||void 0===d||null===(u=d.options)||void 0===u?void 0:u.firstWeekContainsDate)&&void 0!==l?l:D.firstWeekContainsDate)&&void 0!==s?s:null===(m=D.locale)||void 0===m||null===(g=m.options)||void 0===g?void 0:g.firstWeekContainsDate)&&void 0!==o?o:1);if(!(L>=1&&L<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var x=E(null!==(f=null!==(p=null!==(y=null!==(v=null==n?void 0:n.weekStartsOn)&&void 0!==v?v:null==n||null===(w=n.locale)||void 0===w||null===(b=w.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==y?y:D.weekStartsOn)&&void 0!==p?p:null===(_=D.locale)||void 0===_||null===(k=_.options)||void 0===k?void 0:k.weekStartsOn)&&void 0!==f?f:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===T)return""===M?h.toDate(a):new Date(NaN);var I,N={firstWeekContainsDate:L,weekStartsOn:x,locale:C},O=[new Re],A=T.match(ea).map((function(e){var t=e[0];return t in J?(0,J[t])(e,C.formatLong):e})).join("").match(Zt),U=[],R=Me(A);try{var $=function(){var t=I.value;null!=n&&n.useAdditionalWeekYearTokens||!ae(t)||ne(t,T,e),null!=n&&n.useAdditionalDayOfYearTokens||!te(t)||ne(t,T,e);var a=t[0],r=Jt[a];if(r){var i=r.incompatibleTokens;if(Array.isArray(i)){var o=U.find((function(e){return i.includes(e.token)||e.token===a}));if(o)throw new RangeError("The format string mustn't contain `".concat(o.fullToken,"` and `").concat(t,"` at the same time"))}else if("*"===r.incompatibleTokens&&U.length>0)throw new RangeError("The format string mustn't contain `".concat(t,"` and any other token at the same time"));U.push({token:a,fullToken:t});var s=r.run(M,t,C.match,N);if(!s)return{v:new Date(NaN)};O.push(s.setter),M=s.rest}else{if(a.match(ra))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");if("''"===t?t="'":"'"===a&&(t=t.match(ta)[1].replace(aa,"'")),0!==M.indexOf(t))return{v:new Date(NaN)};M=M.slice(t.length)}};for(R.s();!(I=R.n()).done;){var F=$();if("object"===h._typeof(F))return F.v}}catch(e){R.e(e)}finally{R.f()}if(M.length>0&&na.test(M))return new Date(NaN);var B=O.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,a){return a.indexOf(e)===t})).map((function(e){return O.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),j=h.toDate(a);if(isNaN(j.getTime()))return new Date(NaN);var H,W=P(j,h.getTimezoneOffsetInMilliseconds(j)),Y={},q=Me(B);try{for(q.s();!(H=q.n()).done;){var G=H.value;if(!G.validate(W,N))return new Date(NaN);var V=G.set(W,Y,N);Array.isArray(V)?(W=V[0],ke(Y,V[1])):W=V}}catch(e){q.e(e)}finally{q.f()}return W}const oa="require_password",sa="scl-sharing-modal-banner";class la extends k.PureComponent{typeClassName(){return`${sa}--${this.props.type}`}render(){const{borderHidden:e,className:t,message:n,descriptionLinkUrl:r,descriptionLinkText:i}=this.props,o=a.cx(sa,this.typeClassName(),t,{[`${sa}--bottom-border`]:!e}),s=r&&i?k.createElement("div",null,k.createElement(a.Link,{href:r,hasNoUnderline:!0,display:"inline"},i)):void 0;return k.createElement("div",{className:o,"data-testid":"sharing-modal-banner",role:"status"},n,s)}}la.defaultProps={type:"default"},la.displayName="SharingModalBanner";class ca extends k.Component{render(){const e=this.props.optionsDict[this.props.currentValue].label;return k.createElement(a.Menu.Wrapper,{className:"sharing-settings-dropdown",onSelection:e=>{e!==this.props.currentValue&&this.props.onValueSelected(e)}},(({getContentProps:t,getTriggerProps:n})=>k.createElement(k.Fragment,null,k.createElement(a.Button,{...n(),withDropdownIcon:!0,variant:"opacity",disabled:this.props.disabled,"aria-label":`${e}, ${this.props.ariaLabel}`,"data-testid":"sharing-settings-dropdown"},k.createElement(a.Truncate,{maxWidth:180},e)),k.createElement(a.Menu.Content,{"data-sharing-sdk":"1",...t()},k.createElement(a.Menu.Segment,null,this.props.valuesList.map((e=>k.createElement(a.Menu.ActionItem,{key:e,value:e,"aria-label":this.props.optionsDict[e].label,className:e===this.props.currentValue?"selected":""},k.createElement("div",{style:{width:"250px",marginBottom:"8px"}},k.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},e===this.props.currentValue?k.createElement(f.IconDropdownSelected,{className:"scl-sharing-dropdown-menu-item-dig__path-color"}):null,k.createElement(a.Text,{isBold:!0,className:e===this.props.currentValue?"scl-sharing-dropdown-menu-item-dig__selected-color":"",style:{marginLeft:e===this.props.currentValue?"12px":"24px"}},this.props.optionsDict[e].label)),k.createElement("div",{style:{marginLeft:"24px",marginTop:"4px"}},k.createElement(a.Text,{color:"faint",size:"small",tagName:"div",style:{lineHeight:"18px"}},this.props.optionsDict[e].description)))))))))))}}ca.displayName="SettingDropdown";class da extends k.PureComponent{constructor(){super(...arguments),this.handleLinkClicked=e=>{e.preventDefault(),this.props.descriptionLinkOnClicked&&this.props.descriptionLinkUrl&&this.props.descriptionLinkOnClicked(this.props.descriptionLinkUrl)}}render(){const{policyFieldName:e,className:t,rightSideElement:n,bottomElement:r}=this.props,i=a.cx("scl-sharing-modal-settings-row",t);return k.createElement("div",{className:i,"data-testid":e},k.createElement("div",{className:"scl-sharing-modal-settings-row-outer"},k.createElement("div",{className:"scl-sharing-modal-settings-row-info"},k.createElement("div",{className:"scl-sharing-modal-settings-row-display-name"},k.createElement("span",{className:"scl-sharing-modal-settings-row-info-display-name-title",title:this.props.displayNameTitle},this.props.displayName)),k.createElement("div",{className:"scl-sharing-modal-settings-row-details"},k.createElement("span",{className:"scl-sharing-modal-settings-row-details-span",title:this.props.description},this.props.description,this.props.descriptionLinkUrl&&this.props.descriptionLinkText&&k.createElement("span",null," ",k.createElement("a",{className:"scl-sharing-modal-settings-row-description-link",href:"#",onClick:this.handleLinkClicked},this.props.descriptionLinkText))))),n&&k.createElement("div",{className:"scl-sharing-modal-settings-right-element"},n)),r&&k.createElement("div",{className:"scl-sharing-modal-settings-bottom-element"},r))}}da.displayName="SharingModalSettingsRow";var ua={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ma(e){return function(t){var a=t||{},n=a.width?String(a.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var ga={date:ma({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ma({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ma({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},fa={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function pa(e){return function(t,a){var n,r=a||{};if("formatting"===(r.context?String(r.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r.width?String(r.width):i;n=e.formattingValues[o]||e.formattingValues[i]}else{var s=e.defaultWidth,l=r.width?String(r.width):e.defaultWidth;n=e.values[l]||e.values[s]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function ha(e){return function(t,a){var n=String(t),r=a||{},i=r.width,o=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],s=n.match(o);if(!s)return null;var l,c=s[0],d=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(d)?function(e,t){for(var a=0;a<e.length;a++)if(t(e[a]))return a}(d,(function(e){return e.test(c)})):function(e,t){for(var a in e)if(e.hasOwnProperty(a)&&t(e[a]))return a}(d,(function(e){return e.test(c)})),l=e.valueCallback?e.valueCallback(l):l,{value:l=r.valueCallback?r.valueCallback(l):l,rest:n.slice(c.length)}}}var ya,va={code:"en-US",formatDistance:function(e,t,a){var n;return a=a||{},n="string"==typeof ua[e]?ua[e]:1===t?ua[e].one:ua[e].other.replace("{{count}}",t),a.addSuffix?a.comparison>0?"in "+n:n+" ago":n},formatLong:ga,formatRelative:function(e,t,a,n){return fa[e]},localize:{ordinalNumber:function(e,t){var a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},era:pa({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:pa({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:pa({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:pa({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:pa({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(ya={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var a=String(e),n=t||{},r=a.match(ya.matchPattern);if(!r)return null;var i=r[0],o=a.match(ya.parsePattern);if(!o)return null;var s=ya.valueCallback?ya.valueCallback(o[0]):o[0];return{value:s=n.valueCallback?n.valueCallback(s):s,rest:a.slice(i.length)}}),era:ha({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ha({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ha({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ha({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ha({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function wa(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ba(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function _a(e){ba(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function ka(e,t){return ba(2,arguments),function(e,t){ba(2,arguments);var a=_a(e).getTime(),n=wa(t);return new Date(a+n)}(e,-wa(t))}function Ea(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function Ma(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var Sa={p:Ma,P:function(e,t){var a,n=e.match(/(P+)(p+)?/),r=n[1],i=n[2];if(!i)return Ea(e,t);switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",Ea(r,t)).replace("{{time}}",Ma(i,t))}};function Ta(e){return e.getTime()%6e4}function Da(e){var t=new Date(e.getTime()),a=Math.ceil(t.getTimezoneOffset());return t.setSeconds(0,0),6e4*a+(a>0?(6e4+Ta(t))%6e4:Ta(t))}var Ca=["D","DD"],Pa=["YY","YYYY"];function La(e){return-1!==Ca.indexOf(e)}function xa(e){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` for formatting years; see: https://git.io/fxCyr");if("YY"===e)throw new RangeError("Use `yy` instead of `YY` for formatting years; see: https://git.io/fxCyr");if("D"===e)throw new RangeError("Use `d` instead of `D` for formatting days of the month; see: https://git.io/fxCyr");if("DD"===e)throw new RangeError("Use `dd` instead of `DD` for formatting days of the month; see: https://git.io/fxCyr")}function Ia(e,t){ba(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.weekStartsOn,i=null==r?0:wa(r),o=null==a.weekStartsOn?i:wa(a.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=_a(e),l=s.getUTCDay(),c=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function Na(e,t){ba(1,arguments);var a=_a(e,t),n=a.getUTCFullYear(),r=t||{},i=r.locale,o=i&&i.options&&i.options.firstWeekContainsDate,s=null==o?1:wa(o),l=null==r.firstWeekContainsDate?s:wa(r.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(n+1,0,l),c.setUTCHours(0,0,0,0);var d=Ia(c,t),u=new Date(0);u.setUTCFullYear(n,0,l),u.setUTCHours(0,0,0,0);var m=Ia(u,t);return a.getTime()>=d.getTime()?n+1:a.getTime()>=m.getTime()?n:n-1}function Oa(e){ba(1,arguments);var t=_a(e),a=t.getUTCDay(),n=(a<1?7:0)+a-1;return t.setUTCDate(t.getUTCDate()-n),t.setUTCHours(0,0,0,0),t}function Aa(e){ba(1,arguments);var t=_a(e),a=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(a+1,0,4),n.setUTCHours(0,0,0,0);var r=Oa(n),i=new Date(0);i.setUTCFullYear(a,0,4),i.setUTCHours(0,0,0,0);var o=Oa(i);return t.getTime()>=r.getTime()?a+1:t.getTime()>=o.getTime()?a:a-1}function Ua(e){ba(1,arguments);var t=_a(e),a=Oa(t).getTime()-function(e){ba(1,arguments);var t=Aa(e),a=new Date(0);return a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0),Oa(a)}(t).getTime();return Math.round(a/6048e5)+1}function Ra(e,t){ba(1,arguments);var a=_a(e),n=Ia(a,t).getTime()-function(e,t){ba(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.firstWeekContainsDate,i=null==r?1:wa(r),o=null==a.firstWeekContainsDate?i:wa(a.firstWeekContainsDate),s=Na(e,t),l=new Date(0);return l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0),Ia(l,t)}(a,t).getTime();return Math.round(n/6048e5)+1}function $a(e,t){for(var a=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return a+n}var Fa={G:function(e,t,a){var n=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if("yo"===t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return a.ordinalNumber(r,{unit:"year"})}return function(e,t){var a=e.getUTCFullYear(),n=a>0?a:1-a;return $a("yy"===t?n%100:n,t.length)}(e,t)},Y:function(e,t,a,n){var r=Na(e,n),i=r>0?r:1-r;return"YY"===t?$a(i%100,2):"Yo"===t?a.ordinalNumber(i,{unit:"year"}):$a(i,t.length)},R:function(e,t){return $a(Aa(e),t.length)},u:function(e,t){return $a(e.getUTCFullYear(),t.length)},Q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return $a(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){var n=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return $a(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){var n=e.getUTCMonth();switch(t){case"M":case"MM":return function(e,t){var a=e.getUTCMonth();return"M"===t?String(a+1):$a(a+1,2)}(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){var n=e.getUTCMonth();switch(t){case"L":return String(n+1);case"LL":return $a(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){var r=Ra(e,n);return"wo"===t?a.ordinalNumber(r,{unit:"week"}):$a(r,t.length)},I:function(e,t,a){var n=Ua(e);return"Io"===t?a.ordinalNumber(n,{unit:"week"}):$a(n,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getUTCDate(),{unit:"date"}):function(e,t){return $a(e.getUTCDate(),t.length)}(e,t)},D:function(e,t,a){var n=function(e){ba(1,arguments);var t=_a(e),a=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=a-t.getTime();return Math.floor(n/864e5)+1}(e);return"Do"===t?a.ordinalNumber(n,{unit:"dayOfYear"}):$a(n,t.length)},E:function(e,t,a){var n=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return $a(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){var r=e.getUTCDay(),i=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return $a(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){var n=e.getUTCDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return $a(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){var n,r=e.getUTCHours();switch(n=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",t){case"b":case"bb":case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,a){var n,r=e.getUTCHours();switch(n=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",t){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){var n=e.getUTCHours()%12;return 0===n&&(n=12),a.ordinalNumber(n,{unit:"hour"})}return function(e,t){return $a(e.getUTCHours()%12||12,t.length)}(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getUTCHours(),{unit:"hour"}):function(e,t){return $a(e.getUTCHours(),t.length)}(e,t)},K:function(e,t,a){var n=e.getUTCHours()%12;return"Ko"===t?a.ordinalNumber(n,{unit:"hour"}):$a(n,t.length)},k:function(e,t,a){var n=e.getUTCHours();return 0===n&&(n=24),"ko"===t?a.ordinalNumber(n,{unit:"hour"}):$a(n,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):function(e,t){return $a(e.getUTCMinutes(),t.length)}(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):function(e,t){return $a(e.getUTCSeconds(),t.length)}(e,t)},S:function(e,t){return function(e,t){var a=t.length,n=e.getUTCMilliseconds();return $a(Math.floor(n*Math.pow(10,a-3)),t.length)}(e,t)},X:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return ja(r);case"XXXX":case"XX":return Ha(r);default:return Ha(r,":")}},x:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"x":return ja(r);case"xxxx":case"xx":return Ha(r);default:return Ha(r,":")}},O:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ba(r,":");default:return"GMT"+Ha(r,":")}},z:function(e,t,a,n){var r=(n._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ba(r,":");default:return"GMT"+Ha(r,":")}},t:function(e,t,a,n){var r=n._originalDate||e;return $a(Math.floor(r.getTime()/1e3),t.length)},T:function(e,t,a,n){return $a((n._originalDate||e).getTime(),t.length)}};function Ba(e,t){var a=e>0?"-":"+",n=Math.abs(e),r=Math.floor(n/60),i=n%60;if(0===i)return a+String(r);var o=t||"";return a+String(r)+o+$a(i,2)}function ja(e,t){return e%60==0?(e>0?"-":"+")+$a(Math.abs(e)/60,2):Ha(e,t)}function Ha(e,t){var a=t||"",n=e>0?"-":"+",r=Math.abs(e);return n+$a(Math.floor(r/60),2)+a+$a(r%60,2)}var Wa=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ya=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qa=/^'([^]*?)'?$/,Ga=/''/g,Va=/[a-zA-Z]/;function za(e,t,a){ba(2,arguments);var n=String(t),r=a||{},i=r.locale||va,o=i.options&&i.options.firstWeekContainsDate,s=null==o?1:wa(o),l=null==r.firstWeekContainsDate?s:wa(r.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=i.options&&i.options.weekStartsOn,d=null==c?0:wa(c),u=null==r.weekStartsOn?d:wa(r.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var m=_a(e);if(!function(e){ba(1,arguments);var t=_a(e);return!isNaN(t)}(m))throw new RangeError("Invalid time value");var g=ka(m,Da(m)),f={firstWeekContainsDate:l,weekStartsOn:u,locale:i,_originalDate:m},p=n.match(Ya).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Sa[t])(e,i.formatLong,f):e})).join("").match(Wa).map((function(e){if("''"===e)return"'";var t=e[0];if("'"===t)return function(e){return e.match(qa)[1].replace(Ga,"'")}(e);var a=Fa[t];if(a)return!r.useAdditionalWeekYearTokens&&function(e){return-1!==Pa.indexOf(e)}(e)&&xa(e),!r.useAdditionalDayOfYearTokens&&La(e)&&xa(e),a(g,e,i.localize,f);if(t.match(Va))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return e})).join("");return p}function Qa(e,t){ba(2,arguments);var a=_a(e),n=wa(t);return isNaN(n)?new Date(NaN):n?(a.setDate(a.getDate()+n),a):a}function Ka(e,t){ba(1,arguments);var a=e||{},n=_a(a.start),r=_a(a.end).getTime();if(!(n.getTime()<=r))throw new RangeError("Invalid interval");var i=[],o=n;o.setHours(0,0,0,0);var s=t&&"step"in t?Number(t.step):1;if(s<1||isNaN(s))throw new RangeError("`options.step` must be a number greater than 1");for(;o.getTime()<=r;)i.push(_a(o)),o.setDate(o.getDate()+s),o.setHours(0,0,0,0);return i}function Xa(e,t){ba(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.weekStartsOn,i=null==r?0:wa(r),o=null==a.weekStartsOn?i:wa(a.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=_a(e),l=s.getDay(),c=6+(l<o?-7:0)-(l-o);return s.setDate(s.getDate()+c),s.setHours(23,59,59,999),s}function Ja(e){ba(1,arguments);var t=_a(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Za(e,t){ba(1,arguments);var a=t||{},n=a.locale,r=n&&n.options&&n.options.weekStartsOn,i=null==r?0:wa(r),o=null==a.weekStartsOn?i:wa(a.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=_a(e),l=s.getDay(),c=(l<o?7:0)+l-o;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}var en=function(e){return za(e,"dd")},tn=function(e){return za(e,"eeeeee")},an=function(e){return za(e,"MMMM yyyy")};function nn(e){var a=e.year,n=e.month,r=e.firstDayOfWeek,i=void 0===r?1:r,o=e.dayLabelFormat,s=void 0===o?en:o,l=e.weekdayLabelFormat,c=void 0===l?tn:l,d=e.monthLabelFormat,u=void 0===d?an:d;return{days:t.useMemo((function(){return function(e){var t=e.year,a=e.month,n=e.firstDayOfWeek,r=void 0===n?1:n,i=e.dayLabelFormat,o=void 0===i?function(e){return za(e,"dd")}:i,s=new Date(t,a),l=Ja(s),c=function(e){return ba(1,arguments),_a(e).getDay()}(l),d=function(e){ba(1,arguments);var t=_a(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}(s);return function(){for(var e=0,t=0,a=arguments.length;t<a;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<a;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,r++)n[r]=i[o];return n}(Array.from(Array(c>=r?c-r:6-r+c+1).keys()).fill(0),Ka({start:l,end:d}).map((function(e){return{date:e,dayLabel:o(e)}})))}({year:a,month:n,firstDayOfWeek:i,dayLabelFormat:s})}),[a,n,i,s]),weekdayLabels:t.useMemo((function(){return function(e){var t=void 0===e?{}:e,a=t.firstDayOfWeek,n=void 0===a?1:a,r=t.weekdayLabelFormat,i=void 0===r?function(e){return za(e,"iiiiii")}:r,o=new Date;return Ka({start:Qa(Za(o),n),end:Qa(Xa(o),n)}).reduce((function(e,t){return e.push(i(t)),e}),[])}({firstDayOfWeek:i,weekdayLabelFormat:c})}),[i,c]),monthLabel:u(new Date(a,n))}}function rn(e,t){ba(2,arguments);var a=_a(e),n=_a(t);return a.getTime()<n.getTime()}function on(e,t){ba(2,arguments);var a=_a(e),n=_a(t);return a.getTime()>n.getTime()}function sn(e,t){ba(2,arguments);var a=t||{},n=_a(e).getTime(),r=_a(a.start).getTime(),i=_a(a.end).getTime();if(!(r<=i))throw new RangeError("Invalid interval");return n>=r&&n<=i}function ln(e){ba(1,arguments);var t=_a(e);return t.setHours(0,0,0,0),t}function cn(e,t){ba(2,arguments);var a=ln(e),n=ln(t);return a.getTime()===n.getTime()}function dn(e,t){ba(2,arguments);var a=_a(e),n=wa(t);if(isNaN(n))return new Date(NaN);if(!n)return a;var r=a.getDate(),i=new Date(a.getTime());return i.setMonth(a.getMonth()+n+1,0),r>=i.getDate()?i:(a.setFullYear(i.getFullYear(),i.getMonth(),r),a)}var un=function(e,t){return void 0===e&&(e=[]),e.some((function(e){return cn(t,e)}))};function mn(e){var t=Ja(e);return{year:function(e){return ba(1,arguments),_a(e).getFullYear()}(t),month:function(e){return ba(1,arguments),_a(e).getMonth()}(t),date:t}}function gn(e,t){var a=mn(t||ln(Date.now())),n=a.date,r=[a];return e>1&&(r=Array.from(Array(e-1).keys()).reduce((function(e){return n=dn(e[e.length-1].date,1),e.concat([mn(n)])}),r)),r}function fn(e,t,a,n){var r=e[n?a>0?0:e.length-n:a>0?e.length-1:0].date;return Array.from(Array(t).keys()).reduce((function(e){return r=0===e.length?dn(r,a):dn(r,a>=0?1:-1),a>0?e.concat([mn(r)]):[mn(r)].concat(e)}),[])}function pn(e){var t=e.startDate,a=e.endDate,n=e.isDateBlocked,r=e.minBookingDays,i=e.exactMinBookingDays,o=e.minBookingDate,s=e.maxBookingDate,l=!o||!rn(t,Qa(o,-1)),c=!s||!on(Qa(t,r-1),s);return!((!t||1!==r||a||n(t))&&(t&&r>1&&!a&&!i||t&&r>0&&i&&l&&c||t&&r>0&&i&&!o&&!s?Ka({start:t,end:Qa(t,r-1)}).some((function(e){return n(e)})):!t||!a||i||rn(a,Qa(t,r-1))||Ka({start:t,end:a}).some((function(e){return n(e)}))))}function hn(e){var a=e.startDate,n=e.endDate,r=e.focusedInput,i=e.minBookingDate,o=e.maxBookingDate,s=e.onDatesChange,l=e.initialVisibleMonth,c=e.exactMinBookingDays,d=void 0!==c&&c,u=e.minBookingDays,m=void 0===u?1:u,g=e.numberOfMonths,f=void 0===g?2:g,p=e.firstDayOfWeek,h=void 0===p?1:p,y=e.isDateBlocked,v=void 0===y?function(){return!1}:y,w=e.unavailableDates,b=void 0===w?[]:w,_=e.changeActiveMonthOnSelect,k=void 0===_||_,E=t.useState((function(){return gn(f,a||l||null)})),M=E[0],S=E[1],T=t.useState(null),D=T[0],C=T[1],P=t.useState(a),L=P[0],x=P[1];t.useEffect((function(){return"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("keydown",A),function(){window.removeEventListener&&window.removeEventListener("keydown",A)}}));var I=function(e){return un(b,e)||v(e)},N=function(e){x(e),(!L||L&&!cn(e,L))&&S(gn(f,e))},O=function(e){return function(e){var t=e.date,a=e.minBookingDate,n=e.maxBookingDate,r=e.isDateBlockedFn,i=e.startDate,o=e.endDate,s=e.minBookingDays,l=void 0===s?1:s,c=e.unavailableDates,d=void 0===c?[]:c,u=a?new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0):a,m=n?new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0):n;return!!(un(d,t)||u&&rn(t,u)||m&&on(t,m)||i&&!o&&l>1&&sn(t,{start:i,end:Qa(i,l-2)})||r&&r(t))}({date:e,minBookingDate:i,maxBookingDate:o,startDate:a,endDate:n,minBookingDays:m,isDateBlockedFn:I})};function A(e){if(("ArrowRight"===e.key||"ArrowLeft"===e.key||"ArrowDown"===e.key||"ArrowUp"===e.key)&&!L){var t=M[0];N(t.date),S(gn(f,t.date))}}var U=t.useCallback((function(){S(fn(M,f,-1)),x(null)}),[M,f]),R=t.useCallback((function(){S(fn(M,f,-1,1)),x(null)}),[M,f]),$=t.useCallback((function(){S(fn(M,f,1)),x(null)}),[M,f]),F=t.useCallback((function(){S(fn(M,f,1,1)),x(null)}),[M,f]),B=t.useCallback((function(e){S(gn(f,e)),x(null)}),[f]),j=t.useCallback((function(e){void 0===e&&(e=1),S(fn(M,f,-(12*e-f+1))),x(null)}),[M,f]),H=t.useCallback((function(e){void 0===e&&(e=1),S(fn(M,f,12*e-f+1)),x(null)}),[M,f]);return{firstDayOfWeek:h,activeMonths:M,isDateSelected:function(e){return function(e,t,a){return!(!t||!a)&&sn(e,{start:t,end:a})}(e,a,n)},isDateHovered:function(e){return function(e){var t=e.date,a=e.startDate,n=e.endDate,r=e.isDateBlocked,i=e.hoveredDate,o=e.minBookingDays;return i&&o>1&&e.exactMinBookingDays&&sn(t,{start:i,end:Qa(i,o-1)})?!Ka({start:i,end:Qa(i,o-1)}).some((function(e){return r(e)})):a&&!n&&i&&sn(t,{start:a,end:Qa(a,o-1)})&&cn(a,i)&&o>1?!Ka({start:a,end:Qa(a,o-1)}).some((function(e){return r(e)})):!(!a||n||!i||rn(i,a)||!sn(t,{start:a,end:i})||Ka({start:a,end:i}).some((function(e){return r(e)})))}({date:e,hoveredDate:D,startDate:a,endDate:n,minBookingDays:m,exactMinBookingDays:d,isDateBlocked:I})},isFirstOrLastSelectedDate:function(e){return function(e,t,a){return!!(t&&cn(e,t)||a&&cn(e,a))}(e,a,n)},isStartDate:function(e){return function(e,t){return!(!t||!cn(e,t))}(e,a)},isEndDate:function(e){return function(e,t){return!(!t||!cn(e,t))}(e,n)},isDateBlocked:O,numberOfMonths:f,isDateFocused:function(e){return!!L&&cn(e,L)},focusedDate:L,hoveredDate:D,onResetDates:function(){s({startDate:null,endDate:null,focusedInput:"startDate"})},onDateHover:function(e){if(e){if(e){var t=!O(e)||a&&cn(e,a),r=!i||!rn(e,Qa(i,-1)),s=!o||!on(e,o),l=Qa(e,m-1),c=!i||!rn(l,i),u=!o||!on(l,o),g=d&&m>1&&r&&s&&c&&u,f=a&&!n&&!d&&r&&s,p=!(m>1&&a)||sn(e,{start:a,end:Qa(a,m-2)}),h=a&&cn(e,a)&&p;t&&(g||f||h)?C(e):null!==D&&C(null)}}else C(null)},onDateSelect:function(e){("endDate"===r||"startDate"===r)&&m>0&&d&&pn({minBookingDays:m,exactMinBookingDays:d,minBookingDate:i,maxBookingDate:o,isDateBlocked:I,startDate:e,endDate:null})?s({startDate:e,endDate:Qa(e,m-1),focusedInput:null}):("endDate"===r&&a&&rn(e,a)||"startDate"===r&&n&&on(e,n))&&!d&&pn({minBookingDays:m,isDateBlocked:I,startDate:e,endDate:null})?s({endDate:null,startDate:e,focusedInput:"endDate"}):"startDate"===r&&!d&&pn({minBookingDays:m,isDateBlocked:I,endDate:n,startDate:e})?s({endDate:n,startDate:e,focusedInput:"endDate"}):"startDate"===r&&!d&&pn({minBookingDays:m,isDateBlocked:I,endDate:null,startDate:e})?s({endDate:null,startDate:e,focusedInput:"endDate"}):"endDate"===r&&a&&!rn(e,a)&&!d&&pn({minBookingDays:m,isDateBlocked:I,startDate:a,endDate:e})&&s({startDate:a,endDate:e,focusedInput:null}),"endDate"!==r&&(!L||L&&!cn(e,L))&&k&&S(gn(f,e))},onDateFocus:N,goToPreviousMonths:U,goToPreviousMonthsByOneMonth:R,goToNextMonths:$,goToNextMonthsByOneMonth:F,goToDate:B,goToPreviousYear:j,goToNextYear:H}}const yn=["onClick"],vn=["id","value","onChange","onSelection","format","disabled","inverse","isInvalid","isTransparent","size","data-testid","aria-label","aria-labelledby","isDateBlocked","autocomplete","autoFocus","placeholder","readonly"];var wn={previous:"Previous",next:"Next"},bn=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"]),_n="L/d/y",kn={datePickerId:"",triggerRef:void 0,close:()=>!1,open:()=>!1,toggle:()=>!1,closeOnSelection:!0,withPreviousLabel:wn.previous,withNextLabel:wn.next,focusedDate:null,isDateFocused:()=>!1,isDateSelected:()=>!1,isDateHovered:()=>!1,isDateBlocked:()=>!1,isFirstOrLastSelectedDate:()=>!1,onDateFocus:()=>!1,onDateHover:()=>!1,onDateSelect:()=>!1,goToPreviousMonths:()=>!1,goToNextMonths:()=>!1,goToDate:()=>!1,isStartDate:()=>!1,isEndDate:()=>!1},En=k.createContext(kn);var Mn=(e,t)=>D(e)&&D(t)?T(e,t):e===t,Sn=()=>new Date;var Tn=(e,t)=>e.focusedInput!==t.focusedInput?{focusedInput:e.focusedInput}:Mn(t.startDate,e.startDate)&&Mn(t.endDate,e.endDate)?void 0:e,Dn=" ",Cn=e=>{let{date:a}=e;const{close:n,triggerRef:r,closeOnSelection:i,focusedDate:o,isDateFocused:s,isDateSelected:l,isDateHovered:c,isDateBlocked:d,isFirstOrLastSelectedDate:u,onDateFocus:m,onDateSelect:g,onDateHover:f}=k.useContext(En),[p,h]=k.useState(!1),{onClick:y,onKeyDown:v,onMouseEnter:w,disabledDate:b,isSelected:_,isSelectedStartOrEnd:E,tabIndex:M}=function(e){var a=e.date,n=e.focusedDate,r=e.isDateSelected,i=e.isDateFocused,o=e.isFirstOrLastSelectedDate,s=e.isDateHovered,l=e.isDateBlocked,c=e.onDateSelect,d=e.onDateFocus,u=e.onDateHover,m=t.useCallback((function(){return c(a)}),[a,c]),g=t.useCallback((function(){return u(a)}),[a,u]),f=l(a)&&!s(a);return{tabIndex:null===n||i(a)?0:-1,isSelected:r(a),isSelectedStartOrEnd:o(a),isWithinHoverRange:s(a),disabledDate:f,onKeyDown:function(e){"ArrowRight"===e.key?d(Qa(a,1)):"ArrowLeft"===e.key?d(Qa(a,-1)):"ArrowUp"===e.key?d(Qa(a,-7)):"ArrowDown"===e.key&&d(Qa(a,7))},onClick:f?function(){}:m,onMouseEnter:g}}({date:a,focusedDate:o,isDateFocused:s,isDateSelected:l,isDateHovered:c,isDateBlocked:d,isFirstOrLastSelectedDate:u,onDateFocus:m,onDateSelect:g,onDateHover:f}),S=k.useCallback((e=>{p&&"Tab"===e.key?e.preventDefault():e.key===Dn?h(!0):p||v&&v(e)}),[v,p]),T=k.useCallback((e=>{e.key===Dn&&h(!1)}),[]),D=k.useCallback((e=>!_&&d(e)),[d,_]),C=k.useCallback((()=>{a&&D(a)||(y&&y(),i&&n({autoFocusRef:r}))}),[r,i,a,D,y,n]);return{getDayProps:k.useCallback((()=>({tabIndex:M,onClick:C,onKeyDown:S,onKeyUp:T,onMouseEnter:w})),[w,M,C,S,T]),isSelected:_,isSelectedStartOrEnd:E,isBlocked:D(a)||b,isFocused:s(a)}},Pn=e=>new Intl.DateTimeFormat("en-US",{month:"long",year:"numeric"}).format(e),Ln=e=>new Intl.DateTimeFormat("en-US",{weekday:"narrow"}).format(e),xn=e=>new Intl.DateTimeFormat("en-US",{day:"numeric"}).format(e),In=e=>{let{date:t,children:n}=e;const r=k.useRef(null),{getDayProps:i,isFocused:o,isBlocked:s,isSelected:l,isSelectedStartOrEnd:c}=Cn({date:t}),{isStartDate:d,isEndDate:u}=k.useContext(En);k.useEffect((()=>{r&&r.current&&o&&"focus"in r.current&&r.current.focus({preventScroll:!0})}),[r,o]);const m=T(t,Sn()),g=d(t),f=u(t),h=a.classNames6("dig-DatePicker-day dig-10x86n2b_23-1-0",{"dig-DatePicker-day--selected":l||c,"dig-10x86n2d_23-1-0":l||c,"dig-DatePicker-day--selectedEdge":c,"dig-10x86n2e_23-1-0":c,"dig-DatePicker-day--blocked":s,"dig-10x86n2f_23-1-0":s,"dig-DatePicker-day--today":m,"dig-10x86n2c_23-1-0":m,"dig-DatePicker-day--start":g,"dig-10x86n2g_23-1-0":g,"dig-DatePicker-day--end":f,"dig-10x86n2h_23-1-0":f});return k.createElement("button",p._objectSpread2({ref:r,className:h,type:"button",disabled:s,"aria-pressed":l},i()),n)};In.displayName="Day";var Nn=e=>{let{datePickerId:t,year:n,yearOptions:r,onYearChange:i,yearDropdownAriaLabel:o}=e;const s=k.useCallback((e=>{const t=e.target.value,a=parseInt(t,10);isNaN(a)||i(a)}),[i]);return 0===r.length?null:k.createElement("span",p._objectSpread2({},a.withShade({direction:"up",className:a.classNames6("dig-10x86n24_23-1-0")})),k.createElement("span",{className:"dig-10x86n26_23-1-0"},k.createElement(a.UIIcon,{size:"small",src:a.ChevronDownLine})),k.createElement("select",{id:`${t}-year-select`,value:n.toString(),onChange:s,"aria-label":o,"data-testid":"digDatePickerYearDropdown",className:"dig-10x86n25_23-1-0"},r.map((e=>k.createElement("option",{key:e,value:e.toString()},e.toString())))))},On=e=>{let{year:t,month:n,firstDayOfWeek:r,format:i,weekdayLabelFormat:o,dayLabelFormat:s,hasYearDropdown:l=!1,yearOptions:c=[],yearDropdownAriaLabel:d}=e;const u=k.useContext(En),{datePickerId:m,withPreviousLabel:g,withNextLabel:f,monthLabel:h,weekdayLabels:v,days:w,getPreviousMonthProps:b,getNextMonthProps:_}=(e=>{let{year:t,month:a,firstDayOfWeek:n,format:r=Pn,weekdayLabelFormat:i=Ln,dayLabelFormat:o=xn}=e;const{days:s,weekdayLabels:l,monthLabel:c}=nn({year:t,month:a,firstDayOfWeek:n,monthLabelFormat:r,weekdayLabelFormat:i,dayLabelFormat:o}),{datePickerId:d,withPreviousLabel:u,withNextLabel:m,goToPreviousMonths:g,goToNextMonths:f}=k.useContext(En);return{datePickerId:d,withPreviousLabel:u,withNextLabel:m,days:s,weekdayLabels:l,monthLabel:c,getPreviousMonthProps:k.useCallback((()=>({onClick:g})),[g]),getNextMonthProps:k.useCallback((()=>({onClick:f})),[f])}})({year:t,month:n,firstDayOfWeek:r,format:i,weekdayLabelFormat:o,dayLabelFormat:s}),E=k.useCallback((e=>{u.goToDate(new Date(e,n,1))}),[u,n]);return k.createElement(k.Fragment,null,k.createElement("div",{className:"dig-DatePicker-header dig-10x86n27_23-1-0"},k.createElement(a.Text,{className:"dig-DatePicker-title",size:"large",variant:"label",color:"standard"},h),l&&d&&k.createElement(Nn,{datePickerId:m,year:t,yearOptions:c,onYearChange:E,yearDropdownAriaLabel:d}),k.createElement(y.IconButtonGroup,{size:"small",className:"dig-10x86n23_23-1-0"},(e=>{let{getButtonProps:t}=e;return k.createElement(k.Fragment,null,k.createElement(a.Tooltip,{id:`${m}-previous`,title:g},k.createElement(a.IconButton,p._objectSpread2(p._objectSpread2({variant:"transparent",type:"button","data-testid":"digDatePickerPreviousMonth"},t()),b()),k.createElement(a.UIIcon,{size:"small",src:a.ChevronLeftLine}))),k.createElement(a.Tooltip,{id:`${m}-next`,title:f},k.createElement(a.IconButton,p._objectSpread2(p._objectSpread2({variant:"transparent",type:"button","data-testid":"digDatePickerNextMonth"},t()),_()),k.createElement(a.UIIcon,{size:"small",src:a.ChevronRightLine}))))}))),k.createElement("div",{className:"dig-DatePicker-weekdays dig-10x86n28_23-1-0"},v.map(((e,t)=>k.createElement(a.Text,{key:t,className:"dig-DatePicker-weekday dig-10x86n29_23-1-0",size:"xsmall",variant:"label",isBold:!0},e)))),k.createElement("div",{className:"dig-DatePicker-calendar-grid dig-10x86n2a_23-1-0"},w.map(((e,t)=>"object"==typeof e?k.createElement(In,{key:e.date.toString(),date:e.date},e.dayLabel):k.createElement("div",{key:t})))))};On.displayName="Month";var An=k.createContext(void 0);var Un=e=>{let{id:t,selectedDate:n,disabledDays:r=[],focusedInput:i="startDate",isDateBlocked:o,onSelection:s,onDateFocus:l,withPreviousLabel:c=wn.previous,withNextLabel:d=wn.next,monthLabelFormat:u,weekdayLabelFormat:m,dayLabelFormat:g,auto:f=!0,placement:h="bottom-start",positioningStrategy:y="absolute",closeOnBlur:v=!0,closeOnSelection:w=!0,shouldPropagateClickOutsideMouseEvents:b=!1,shouldHideDropShadow:_=!1,isBlock:E=!1,isPortaled:M=!0,onToggle:S,firstDayOfWeek:T=0,hasYearDropdown:D=!1,yearOptions:C,yearDropdownAriaLabel:P,children:L}=e;const x=k.useMemo((()=>void 0===n?Sn():n),[n]),I=k.useRef(null),N=k.useRef(null),O=k.useRef(null),[A,U]=k.useState(!1),R=a.useUniqueId({prefix:"dig-DatePicker-",idOverride:t}),$=k.useContext(An),[F,B]=k.useState(h),[j,H]=k.useState(h);j!==h&&(B(h),H(h));const W=e=>{f&&B(e)};D&&function(e,t){if(!e)throw new Error(`dig-components - Invariant: ${t}`)}(P,"When hasYearDropdown is true, yearDropdownAriaLabel must be provided for accessibility.");const[Y,q]=k.useState((()=>x));((e,t)=>{const a=k.useRef(!1);k.useEffect((()=>{a.current?e():a.current=!0}),t)})((()=>{"function"==typeof S&&S({isOpen:A})}),[A]),k.useEffect((()=>{q(x)}),[x]);const G=$?$.selectedRange[0]:Y,V=$?$.selectedRange[1]:Y,z=!!$,Q=k.useMemo((()=>z?((e,t,a)=>({type:1,focusedInput:a,createInitialState:()=>({startDate:e,endDate:t,focusedInput:a||"startDate"}),applyUpdates:Tn}))(G,V,i):(e=>({type:0,focusedInput:"startDate",createInitialState:()=>({startDate:e,endDate:e,focusedInput:"startDate"}),applyUpdates:Tn}))(G)),[z,G,V,i]),K=function(e){const[t,a]=k.useState(e.createInitialState()),n=k.useCallback((n=>{const r=e.applyUpdates(n,t);r&&a((e=>p._objectSpread2(p._objectSpread2({},e),r)))}),[t,e]),r=k.useCallback((e=>{let{startDate:t,endDate:a,focusedInput:r}=e;n({startDate:t,endDate:a,focusedInput:r||"startDate"})}),[n]),i=k.useCallback((t=>{let{startDate:a,endDate:r}=t;n({startDate:a,endDate:r,focusedInput:e.focusedInput})}),[n,e.focusedInput]);return{type:e.type,startDate:t.startDate,endDate:t.endDate,focusedInput:t.focusedInput,onDatesChange:r,sync:i}}(Q);k.useEffect((()=>{K.sync({startDate:G,endDate:V})}),[G,V,K]);const X=k.useCallback((e=>{s&&s(e),q(e.selectedDate)}),[s]),{activeMonths:J,goToPreviousMonths:Z,goToNextMonths:ee,focusedDate:te,isDateFocused:ae,isDateSelected:ne,isDateHovered:re,isDateBlocked:ie,isFirstOrLastSelectedDate:oe,onDateFocus:se,onDateSelect:le,onDateHover:ce,goToDate:de,isStartDate:ue,isEndDate:me}=function(e){let{picker:t,disabledDays:a,isDateBlocked:n,onSelection:r,onDateFocus:i}=e;const o=k.useCallback((e=>{if(t.onDatesChange(e),r){const{startDate:t,focusedInput:a}=e;let{endDate:n}=e;const i="endDate"===a;i&&!n&&(n=t),r({startDate:t,endDate:n,selectedDate:i?t:n})}}),[t,r]),{activeMonths:s,goToPreviousMonths:l,goToNextMonths:c,focusedDate:d,isDateFocused:u,isDateSelected:m,isDateHovered:g,isDateBlocked:f,isFirstOrLastSelectedDate:p,onDateFocus:h,onDateSelect:y,onDateHover:v,goToDate:w,isStartDate:b,isEndDate:_}=hn({startDate:t.startDate,endDate:t.endDate,minBookingDays:0===t.type?1:void 0,exactMinBookingDays:0===t.type,minBookingDate:1===t.type&&"endDate"===t.focusedInput&&t.startDate||void 0,maxBookingDate:1===t.type&&"startDate"===t.focusedInput&&t.endDate||void 0,unavailableDates:a,isDateBlocked:n,focusedInput:t.focusedInput,onDatesChange:o,numberOfMonths:1}),E=k.useCallback((e=>{h&&h(e),i&&i(e)}),[i,h]),M=k.useCallback((e=>{1!==t.type||"endDate"!==t.focusedInput||null!==t.startDate||f(e)?y(e):o({focusedInput:"endDate",startDate:null,endDate:e})}),[f,o,y,t.type,t.focusedInput,t.startDate]);return{activeMonths:s,goToPreviousMonths:l,goToNextMonths:c,focusedDate:d,isDateFocused:u,isDateSelected:m,isDateHovered:g,isDateBlocked:f,isFirstOrLastSelectedDate:p,onDateFocus:E,onDateSelect:M,onDateHover:v,goToDate:w,isStartDate:b,isEndDate:_}}({picker:K,disabledDays:r,isDateBlocked:o,onSelection:X,onDateFocus:l});k.useEffect((()=>{z&&!x&&(G&&!V&&de(G),V&&!G&&de(V),V||G||de(Sn()))}),[G,V]);const ge=1===J.length&&J[0],fe="object"==typeof ge&&ge.year,pe=k.useMemo((()=>{if(C)return C;if(!D||!fe)return[];const e=fe,t=[];for(let a=e-10;a<=e+10;a++)t.push(a);return t}),[C,D,fe]),he=k.useCallback((e=>{le(e),se(e)}),[le,se]),ye=k.useCallback((e=>{const t=e&&e.autoFocusRef;U(!1),t&&t.current&&"focus"in t.current&&t.current.focus()}),[]),ve=k.useCallback((e=>{const t=e&&e.autoFocusDate;U(!0);const a=t||("startDate"===K.focusedInput?K.startDate:K.endDate);a&&he(a)}),[K,he]),we=k.useCallback((e=>{const t=e&&e.autoFocusDate||("startDate"===K.focusedInput?K.startDate:K.endDate);t&&he(t)}),[K,he]),be=k.useCallback((()=>{U((e=>!e));const e="startDate"===K.focusedInput?K.startDate:K.endDate;e&&he(e)}),[K,he]),_e={datePickerId:R,triggerRef:N,closeOnSelection:w,close:ye,open:ve,toggle:be,withPreviousLabel:c,withNextLabel:d,monthLabelFormat:u,focusedDate:te,isDateFocused:ae,isDateSelected:ne,isDateHovered:re,isDateBlocked:ie,isFirstOrLastSelectedDate:oe,onDateFocus:se,onDateSelect:le,onDateHover:ce,goToPreviousMonths:Z,goToNextMonths:ee,goToDate:de,isStartDate:ue,isEndDate:me},ke=k.useCallback((()=>{v&&ye()}),[v,ye]),Ee=k.useCallback((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onClick:t}=e,a=p._objectWithoutProperties(e,yn);return p._objectSpread2({onClick:e=>{U((e=>!e));const a="startDate"===K.focusedInput?K.startDate:K.endDate;a&&se(a),t&&t(e)},ref:N},a)}),[N,K,se]),Me=k.useCallback((e=>{bn.has(e.key)?e.preventDefault():A&&"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),ye({autoFocusRef:N}))}),[ye,A,N]),Se=k.createElement(En.Provider,{value:_e},k.createElement("div",{className:a.classNames6("dig-DatePicker","dig-10x86n21_23-1-0",{"dig-DatePicker--shouldHideDropShadow":_,"dig-10x86n22_23-1-0":_}),onKeyDown:Me,"data-testid":"digDatePicker"},ge&&k.createElement(On,{key:`${ge.year}-${ge.month}`,year:ge.year,month:ge.month,firstDayOfWeek:T,format:u,weekdayLabelFormat:m,dayLabelFormat:g,hasYearDropdown:D,yearOptions:pe,yearDropdownAriaLabel:P}))),Te=(e=>{switch(e){case"top":case"top-start":case"top-end":default:return"up";case"bottom":case"bottom-start":case"bottom-end":return"down"}})(F),De=k.useMemo((()=>(e=>{const{direction:t}=e;return new Map([["open",{keyFrames:{transform:"up"===t?"translate(0, -4px)":"translate(0, 4px)",opacity:1},options:{duration:a.toSeconds(a.values.Motion.Duration.XXFast),ease:a.values.Motion.Easing.Enter}}],["close",{keyFrames:{opacity:0},options:{duration:a.toSeconds(a.values.Motion.Duration.XXFast),ease:a.values.Motion.Easing.Exit}}]])})({direction:Te})),[Te]),{isMotionRunning:Ce}=a.useMotion({states:De,currentState:A?"open":"close",elementRef:I});if("function"==typeof L){const e=L({getTriggerProps:Ee,triggerRef:N,close:ye,open:ve,toggle:be,forceUpdate:we});return k.createElement(a.ClickOutside,{className:"dig-DatePicker-backdrop dig-10x86n20_23-1-0",isBlock:E,onClickOutside:ke,shouldPropagateMouseEvents:b,isClickThroughPortaled:M,isActive:A},e,A||Ce?k.createElement(a.Overlay,{className:`pleskac-${Te}`,auto:f,onChangePlacement:W,isPortaled:M,placement:F,positioningStrategy:y,ref:O,anchorRef:N,"data-testid":"digDatePickerOverlay"},k.createElement("div",{ref:I},Se)):null)}return Se};Un.displayName="DatePicker";var Rn=(e,t)=>C(e)?"object"==typeof t?t.dateToString(e):_e(e,t||""):"",$n=e=>{let{id:t,value:n,onChange:r,onSelection:i,format:o=_n,disabled:s,inverse:l,isInvalid:c,isTransparent:d,size:u,"data-testid":m,"aria-label":g,"aria-labelledby":f,isDateBlocked:h,autocomplete:y,autoFocus:w,placeholder:b,readonly:_}=e,E=p._objectWithoutProperties(e,vn);const[M,S]=k.useState(Rn(n,o)),T=k.useCallback((()=>{let e=null;return M.length&&(e=((e,t)=>"object"==typeof t?t.stringToDate(e):ia(e,t,new Date))(M,o),!C(e)||h&&h(e))?(S(Rn(n,o)),n):(r&&!Mn(e,n)&&r(e),e)}),[M,r,n,o,h]),D=e=>()=>{const t=T();e({autoFocusDate:t})},P=k.useCallback((e=>{S(e.target.value)}),[]),L=k.useCallback((e=>{r&&!Mn(e.selectedDate,n)&&r(e.selectedDate),i&&i(e)}),[r,i,n]),x=k.useCallback((e=>t=>{switch(t.key){case Dn:return void t.preventDefault();case"Enter":if(t.preventDefault(),_)return;const a=T();return void e({autoFocusDate:a})}}),[T,_]),I=k.useCallback((e=>t=>{if(!_&&t.key===Dn){const t=T();e({autoFocusDate:t})}}),[T,_]),N=k.useCallback((e=>()=>{s||_||(T(),e())}),[s,T,_]);return k.useEffect((()=>{S(null===n?"":Rn(n,o))}),[o,n]),k.createElement(Un,p._objectSpread2({selectedDate:n,onSelection:L,isDateBlocked:h},E),(e=>{let{getTriggerProps:n,open:r,forceUpdate:i}=e;const o=n({onChange:P,onKeyDown:x(r),onKeyUp:I(r),onBlur:D(i)});return _&&(o.onClick=void 0),k.createElement(a.TextInput,p._objectSpread2(p._objectSpread2({id:t,value:M,disabled:s,inverse:l,isInvalid:c,isTransparent:d,size:u,"aria-label":g,"aria-labelledby":f,"data-testid":m},o),{},{withLeftAccessory:k.createElement(a.UIIcon,{src:v.CalendarLine,onClick:N(r)}),autoComplete:y,autoFocus:w,placeholder:b,readonly:_}))}))};const Fn=e=>{const{policyName:t,policyDict:a,selector:n,onLinkClicked:r,extra:i,className:o}=e;return k.createElement(da,{policyFieldName:t,key:a.title,displayName:a.title,displayNameTitle:a.title,description:a.description,descriptionLinkUrl:a.descriptionLinkUrl,descriptionLinkText:a.descriptionLinkText,descriptionLinkOnClicked:r,rightSideElement:n,bottomElement:i,className:o})};let Bn=0;const jn=e=>{const t=k.useMemo((()=>(Bn++,`settings-toggle-id-${Bn}`)),[]),{currentValue:n,optionsDict:r,disabled:i,ariaLabel:o}=e,s=r[n].label;return k.createElement(k.Fragment,null,k.createElement("p",{style:{display:"flex",justifyContent:"flex-end"}},k.createElement(a.Text,{tagName:"label",color:"faint",style:{marginRight:"8px"},htmlFor:t},s),k.createElement(a.Toggle,{id:t,"aria-label":o,className:"sharing-settings-modal__toggle",isToggled:r[n].value,disabled:i,onChange:t=>{i||e.onOptionChange(!r[n].value,t)}})))},Hn=(e,t)=>o.isPasswordPolicyEnforcedByAdmin(e)&&o.isExternalAudience(t);function Wn(e,t){return t.link_password||""===t.link_password?t.link_password:o.hasLinkPassword(e)?"123456":""}const Yn=e=>{const{intl:t,linkPolicy:n,linkPermissions:r,onPolicyUpdate:i}=e;return k.createElement("div",{className:"sharing-settings-modal__input_spacing"},k.createElement(a.TextInput,{role:"textbox",autoFocus:!0,className:"password-input__input",disabled:!o.canModifyPassword(r)||e.readOnlyPolicy,placeholder:t.formatMessage({id:"um5odk",defaultMessage:"Set password"}),name:"link_password",onChange:e=>{i({[e.target.name]:e.target.value})},type:"password",isInvalid:""===n.link_password,value:Wn(r,n)}))};class qn extends k.Component{render(){const e=this.props.linkPermissions.resolved_visibility,t=this.props.linkPermissions.audience_options[0].disallowed_reason;return t!==a.LinkAudienceDisallowedReason$1.RestrictedBySharedFolder&&t!==a.LinkAudienceDisallowedReason$1.DeleteAndRecreate?null:k.createElement(la,{className:"sharing-settings-modal__banner",type:"default",message:k.createElement("span",null,k.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-text"},this.audienceDisallowedText(e))," ",k.createElement("span",{className:"shared-link-settings-modal__audience-disallowed-advice u-font-meta"},this.audienceDisallowedAdviceText(t)))})}audienceDisallowedText(e){if(e===a.ResolvedVisibilityPolicy.shared_folder_only){let e=this.props.linkPermissions.restricting_shared_folder_path;return void 0!==e?(e=i.Emstring.em_snippet(e,a.SNIPPET_SIZES.FILENAME),this.props.intl.formatMessage({id:"Wzk4tW",defaultMessage:"Only members of the shared folder {shared_folder_name} can view this link."},{shared_folder_name:e})):void 0}return e===a.ResolvedVisibilityPolicy.only_you?this.props.intl.formatMessage({id:"kp9e20",defaultMessage:"Only you can view this link."}):void 0}audienceDisallowedAdviceText(e){return e===a.LinkAudienceDisallowedReason$1.RestrictedBySharedFolder?this.props.intl.formatMessage({id:"D2VN2I",defaultMessage:"To change who can access the link, go to the shared folder options."}):e===a.LinkAudienceDisallowedReason$1.DeleteAndRecreate?this.props.intl.formatMessage({id:"HbDkss",defaultMessage:"To change who can access the link, delete this link and create a new one."}):void 0}}qn.displayName="RestrictedVisibilityBanner";const Gn=({className:e,...t})=>k.createElement("div",{className:a.cx("scl-scooter-loader",e),...t},k.createElement("div",{className:"scl-scooter-loader-animation"}));Gn.displayName="ScooterLoader",Gn.displayName="ScooterLoader";const Vn="scl-sharing-modal-downgrade-banner",zn=e=>{const{subheader:t,header:r,onClickCloseButton:i,onClickOutlineButton:o,onClickTransparentButton:s,outlineButtonLabel:l,transparentButtonLabel:c,showCloseButton:d}=e,u=n.useIntl();return k.createElement("div",{className:`${Vn} dig-Theme---VIS`,"data-testid":"sharing-modal-downgrade-banner"},k.createElement("div",{className:`${Vn}__header`},k.createElement(a.Text,{isBold:!0,size:"large"},r),d&&k.createElement(a.IconButton,{variant:"transparent","aria-label":u.formatMessage({id:"hhAj2K",defaultMessage:"Close"}),className:`${Vn}__close`,onClick:i,size:"standard"},k.createElement(a.UIIcon,{src:a.CloseLine}))),k.createElement("div",{className:`${Vn}__subheader`},k.createElement(a.Text,null,t)),k.createElement("div",{className:`${Vn}__buttons`},k.createElement(a.Button,{variant:"outline",onClick:o},l),k.createElement(a.Button,{variant:"transparent",onClick:s},c)))};zn.displayName="SharingModalDowngradeBanner";const Qn=e=>e.formatMessage({id:"b0sjjf",defaultMessage:"Learn more"}),Kn=e=>e.formatMessage({id:"O1FxvA",defaultMessage:"This folder can only be shared as a link."}),Xn=e=>e.formatMessage({id:"QpEuIr",defaultMessage:"You can view this folder, but youll need to ask the folder owner to give you permission to share it."}),Jn=e=>e.formatMessage({id:"/8sefF",defaultMessage:"You can view this folder, but only the folder owner can share it."});function Zn(e){return{class:"sharing_sender",action:"hover",object:"flexible_sharing_entrypoint_action",properties:e}}function er(e){return{class:"sharing_sender",action:"log",object:"flexible_sharing_entrypoint_action_dwell_time",properties:e}}const tr=Symbol("ON_CLICK_PROGRESSIVE"),ar=Symbol("ON_MOUSE_ENTER_PROGRESSIVE"),nr=Symbol("ON_MOUSE_LEAVE_PROGRESSIVE"),{useEmitter:rr,defaultEmitter:ir}=a.defineLogger((async({event:e,getContextValue:t})=>{const n=t(a.Context$4),r=t(a.Context$5),i=t(a.Context$6),s=t(a.Context$7),l={...a.getTags$4(n),...a.getTags$5(r),...a.getTags$6(i),...a.getTags$7(s)},c={...a.getProperties$4(n),...a.getProperties$5(r),...a.getProperties$6(i),...a.getProperties$7(s)};if(e.key===tr)return a.UDCL.logEvent(o.PAP_Select_FlexibleSharingEntrypointAction({...c,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointTimeToAction:e.payload.timeSinceView}),{tags:{...l,action:"inband_progressive"}}),void a.UDCL.logEvent(er({...c,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!0}),{tags:{...l,action:"inband_progressive"}});if(e.key!==ar){if(e.key!==nr)return a.exhausts(e,void 0);a.UDCL.logEvent(er({...c,flexibleSharingEntryPointAction:"inband_progressive",flexibleSharingEntryPointDwellTime:e.payload.dwellTime,flexibleSharingEntryPointDwellActionSelected:!1}),{tags:{...l,action:"inband_progressive"}})}else a.UDCL.logEvent(Zn({...c,flexibleSharingEntryPointAction:"inband_progressive"}),{tags:{...l,action:"inband_progressive"}})})),or=({accountMetadata:e})=>{const t=n.useIntl(),o=r.useOpenUrl(),s=i.getIsTeamAdmin(e),l=s?(e=>e.formatMessage({id:"QV0fMP",defaultMessage:"To share this folder, manage access in the admin console."}))(t):(e=>e.formatMessage({id:"C87Oa/",defaultMessage:"Only admins can directly share this content. Reach out and ask them to share it."}))(t),c=s?(e=>e.formatMessage({id:"S839MU",defaultMessage:"Go to admin console"}))(t):(e=>e.formatMessage({id:"0KHhX0",defaultMessage:"Find admin"}))(t);return k.createElement(a.Box,null,k.createElement(a.Text,{size:"medium","data-testid":"tmr-team-folder-subtitle"},l),k.createElement(a.Box,{marginTop:"Micro Large"},k.createElement(a.Button,{variant:"transparent",onClick:()=>{o(s?"/team/admin/content/home":"/team?_tk=left_nav_team")}},c)))};or.displayName="TmrTeamFolder";const sr=e=>{var t;const{objectMetadata:c,accountMetadata:d,onInbandButtonClicked:u,componentViewTime:m}=e,g=a.isNewApiMetadata(c),[f,p]=k.useState(!1),[h,y]=k.useState(!1),[v,w]=k.useState(0),b=k.useRef(null),_=rr(),E=a.getCanInvite(c,o.VIEWER),M=a.getCanInvite(c,o.EDITOR)||E,S=a.getIsLinkOnlyMode(c),T=a.getIsNSLinkOnlyMode(c),D=a.getIsFolder(c),C=i.isUserOnSameTeamAsObject(d,c),P=i.isUserOnSameTeamAsTmrTeamFolder(d,c),L=!!a.getOwnerTeam(c),x=null!==(t=a.getOwnerTeamName(c))&&void 0!==t?t:"",I=a.getIsTeamSharedFolder(c),N="https://help.dropbox.com/files-folders/share/shared-folder-faq#cantcreate",O=r.useOpenUrl(),A=k.useCallback((e=>{O(e)}),[O]),U=()=>{switch(a.getInviteDeniedReason(c)){case"mount_exceeded":return k.createElement(a.Text,null,((e,t)=>{if(!t.metadata_response||!a.getIsFolder(t))return;const n=t.metadata_response;if(n.invite_viewer_folder_perm.invite_viewer_folder_denied_reason&&"mount_exceeded"===n.invite_viewer_folder_perm.invite_viewer_folder_denied_reason[".tag"]){const t=n.invite_viewer_folder_perm.invite_viewer_folder_denied_reason,a=t.limit,r=t.new_count-a;return e.formatMessage({id:"f3Mx9B",defaultMessage:"This folder can only be shared as a link because your Dropbox folder is {number, plural, one{1 shared folder} other {{number} shared folders}} over limit."},{number:r})}})(n.intl,c),k.createElement(a.Link,{style:{marginLeft:3},hasNoUnderline:!0,onClick:()=>A(N),href:"",isBold:!0,display:"inline"},Qn(n.intl)));case"contains_app_folder":case"inside_app_folder":case"is_app_folder":case"is_family_folder":return k.createElement(a.Text,null,Kn(n.intl));default:return k.createElement(a.Text,null,C?Xn(n.intl):Jn(n.intl))}},R=k.useCallback((()=>{const e=h?Date.now()-v:void 0,t=Date.now()-m;_.select(tr).emit({dwellTime:e,timeSinceView:t}),u()}),[m,_,h,u,v]),$=k.useCallback((()=>{w(Date.now()),y(!0),_.select(ar).emit(null),p(!0)}),[_]),F=k.useCallback((()=>{const e=h?Date.now()-v:void 0;y(!1),_.select(nr).emit({dwellTime:e}),p(!1)}),[_,h,v]),B=g?!M:S||!M;return k.createElement(k.Fragment,null,k.createElement(s.ButtonWrapper,{ref:b,onMouseEnter:$,onMouseLeave:F,"data-uxa-log":"sm24-inband-button."+(B?"disabled":"loaded"),"data-uxa-interactions":"shown click"},k.createElement(s.HorizontalButton,{onClick:R,disabled:B,"data-testid":"inband-sharing-entry-button"},k.createElement(s.ButtonIconContainer,null,k.createElement(a.UIIcon,{src:l.ShareLine,size:"medium"})),k.createElement(s.ButtonInnerColumn,null,k.createElement(s.ButtonTitle,{content:(j=n.intl,j.formatMessage({id:"SC4EWs",defaultMessage:"Add people"}))})))),(()=>{let e=null;return g?P&&!M?e=k.createElement(or,{accountMetadata:d}):M||(e=U()):S?e=(()=>{switch(S?T?"isNSLinkOnlyMode":"isFamily":"isLimitedPermissions"){case"isNSLinkOnlyMode":return k.createElement(a.Text,null,((e,t)=>{if(t.tooManyMountsError&&("total_mounts_exceeded"===t.tooManyMountsError[".tag"]||"home_mounts_exceeded"===t.tooManyMountsError[".tag"]||"tree_size_exceeded"===t.tooManyMountsError[".tag"])){const a=t.tooManyMountsError.limits_info;if(a){const t=a.limit,n=a.new_count-t;return e.formatMessage({id:"f3Mx9B",defaultMessage:"This folder can only be shared as a link because your Dropbox folder is {number, plural, one{1 shared folder} other {{number} shared folders}} over limit."},{number:n})}}})(n.intl,c),k.createElement(a.Link,{style:{marginLeft:3},hasNoUnderline:!0,onClick:()=>A(N),href:"",isBold:!0,display:"inline"},Qn(n.intl)));case"isLimitedPermissions":return L&&!C?I?k.createElement(a.Text,null,(e=n.intl,void 0!==(t=x)?e.formatMessage({id:"ToMYBy",defaultMessage:"This folder can only be managed by the {ownerTeamName} team."},{ownerTeamName:t}):e.formatMessage({id:"ReqZ5Y",defaultMessage:"This folder can only be managed by the owner team."}))):D?k.createElement(a.Text,null,(e=>e.formatMessage({id:"5iJXBE",defaultMessage:"You dont have permission to manage membership of this folder"}))(n.intl)):k.createElement(a.Text,null,(e=>e.formatMessage({id:"WVaUHn",defaultMessage:"You dont have permission to manage membership of this file"}))(n.intl)):k.createElement(a.Text,null,(e=>e.formatMessage({id:"TnTBTY",defaultMessage:"This can only be shared with the link."}))(n.intl));case"isFamily":return k.createElement(a.Text,null,Kn(n.intl))}var e,t})():P&&!M?e=k.createElement(or,{accountMetadata:d}):M||(e=k.createElement(a.Text,null,C?Xn(n.intl):Jn(n.intl))),e?k.createElement(a.Tooltip.Control,{open:f,placement:"top",auto:!0,triggerRef:b,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)},e):null})());var j};sr.displayName="InbandEntryButtonInner";const lr=e=>{const{oid:t,onInbandButtonClicked:n,componentViewTime:r}=e,o=i.useSharingObjectMetadata(t.fileId),l=i.useSharingAccountInfo(),c=o.isLoading,d=!o.isLoading&&o.isError,u=c||d?void 0:o.output,m=l.isLoading,g=!l.isLoading&&l.isError,f=m||g?void 0:l.output;return c||m?k.createElement(s.ButtonWrapper,{"data-uxa-log":"sm24-inband-button.loading","data-uxa-interactions":"shown click"},k.createElement(s.HorizontalButton,{disabled:!0},k.createElement(a.Skeleton.Avatar,{size:"medium",style:{marginRight:"var(--dig-spacing__dimension__12)"}}),k.createElement(a.Skeleton.Text,{size:"large",width:200}))):u&&f?k.createElement(sr,{accountMetadata:f,objectMetadata:u,onInbandButtonClicked:n,componentViewTime:r}):null};lr.displayName="InbandEntryButton";const cr=({objectMetadata:e,accountMetadata:t,canInvite:r,handleButtonClick:o,componentViewTime:c})=>{const[d,u]=k.useState(!1),[m,g]=k.useState(0),[f,p]=k.useState(!1),h=k.useRef(null),y=rr(),v=i.isUserOnSameTeamAsTmrTeamFolder(t,e),w=k.useCallback((()=>{const e=d?Date.now()-m:void 0,t=Date.now()-c;y.select(tr).emit({dwellTime:e,timeSinceView:t}),o()}),[c,y,o,d,m]),b=k.useCallback((()=>{g(Date.now()),u(!0),y.select(ar).emit(null),p(!0)}),[y]),_=k.useCallback((()=>{const e=d?Date.now()-m:void 0;u(!1),y.select(nr).emit({dwellTime:e}),p(!1)}),[y,d,m]),E=i.getIsTeam(t);return k.createElement(k.Fragment,null,k.createElement(s.ButtonWrapper,{ref:h,onMouseEnter:b,onMouseLeave:_},k.createElement(s.HorizontalFlatButton,{onClick:w,disabled:!r,"data-testid":"inband-sharing-entry-button",autoFocus:!0},k.createElement(s.ButtonIconContainer,null,k.createElement(a.UIIcon,{src:l.ShareLine,size:"small"})),k.createElement(s.ButtonInnerColumn,null,k.createElement(a.Text,{color:"subtle",style:{marginLeft:-3,marginTop:4}},k.createElement(a.Truncate,{lines:2},E?n.intl.formatMessage({id:"I1N8uC",defaultMessage:"Add an email, name, or group"}):(e=>e.formatMessage({id:"RynZbM",defaultMessage:"Add an email or name"}))(n.intl)))))),(()=>{let o=null;if(v&&!r)o=k.createElement(or,{accountMetadata:t});else if(!r){const r=i.isUserOnSameTeamAsObject(t,e);o=k.createElement(a.Text,null,r?Xn(n.intl):Jn(n.intl))}return o?k.createElement(a.Tooltip.Control,{open:f,placement:"top",auto:!0,triggerRef:h,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)},o):null})())};cr.displayName="Inner";const dr=({oid:e,onTokenizerButtonClick:t,componentViewTime:n})=>{const r=i.useSharingObjectMetadata(e.fileId),l=i.useSharingAccountInfo(),c=r.isLoading,d=!r.isLoading&&r.isError,u=c||d?void 0:r.output,m=l.isLoading,g=!l.isLoading&&l.isError,f=m||g?void 0:l.output,p=c||m,h=!p&&u&&f;if(p)return k.createElement(s.ButtonWrapper,null,k.createElement(s.HorizontalButton,{disabled:!0},k.createElement(a.Skeleton.Avatar,{size:"medium",style:{marginRight:"var(--dig-spacing__dimension__12)"}}),k.createElement(a.Skeleton.Text,{size:"large",width:200})));if(h){const e=a.getCanInvite(u,o.VIEWER)||a.getCanInvite(u,o.EDITOR);return k.createElement(cr,{accountMetadata:f,objectMetadata:u,canInvite:e,handleButtonClick:t,componentViewTime:n})}return null};dr.displayName="TokenizerButton";const ur=r.define({name:"sharing.modifySharedLinksettings"},(e=>t=>r.handler(e.sharingAlphaModifySharedLinkSettings(t)))),mr=e=>{switch(e){case"public":return a.PUBLIC;case"team":return a.TEAM;case"password":return a.PASSWORD;case"no_one":return a.NO_ONE;default:return a.OTHER$1}},gr=(e,t,a,n)=>{const r=o.SharingSettingsUtil(e).getModifiedSettings(t,n,a);return void 0===r?null:r},fr=e=>{var t,a,n,r,i,o,s,l;const c=null===(t=e.link_permissions.link_access_level)||void 0===t?void 0:t[".tag"],d=null===(a=e.link_permissions.resolved_visibility)||void 0===a?void 0:a[".tag"],u=null===(n=e.link_permissions.effective_audience)||void 0===n?void 0:n[".tag"];return{allow_comments:e.link_permissions.allow_comments,can_revoke:e.link_permissions.can_revoke,allow_download:e.link_permissions.allow_download,can_allow_download:e.link_permissions.can_allow_download,can_disallow_download:e.link_permissions.can_disallow_download,can_set_expiry:e.link_permissions.can_set_expiry,can_remove_expiry:e.link_permissions.can_remove_expiry,can_set_password:Boolean(e.link_permissions.can_set_password),can_remove_password:Boolean(e.link_permissions.can_remove_password),require_password:Boolean(e.link_permissions.require_password),link_access_level:"other"===c||void 0===c?"viewer":c,team_restricts_comments:e.link_permissions.team_restricts_comments,can_use_extended_sharing_controls:e.link_permissions.can_use_extended_sharing_controls,resolved_visibility:"other"===d||void 0===d?"no_one":d,effective_audience:"other"===u||"members"===u?void 0:u,requested_visibility:(null===(r=e.link_permissions.requested_visibility)||void 0===r?void 0:r[".tag"])||"public",revoke_failure_reason:null===(i=e.link_permissions.revoke_failure_reason)||void 0===i?void 0:i[".tag"],restricting_shared_folder_path:e.link_permissions.restricting_shared_folder_path,audience_options:(e.link_permissions.audience_options||[]).filter((e=>"other"!==e.audience[".tag"])).map((e=>{var t;return{audience:e.audience[".tag"],allowed:e.allowed,disallowed_reason:null===(t=e.disallowed_reason)||void 0===t?void 0:t[".tag"]}})),visibility_policies:e.link_permissions.visibility_policies.map((e=>({policy:e.policy[".tag"],resolved_policy:e.resolved_policy[".tag"],allowed:e.allowed,disallowed_reason:e.disallowed_reason}))),days_to_expire_policy:null===(o=e.link_permissions.days_to_expire_policy)||void 0===o?void 0:o[".tag"],change_shared_link_expiration_policy:null===(s=e.link_permissions.change_shared_link_expiration_policy)||void 0===s?void 0:s[".tag"],enforce_shared_link_password_policy:null===(l=e.link_permissions.enforce_shared_link_password_policy)||void 0===l?void 0:l[".tag"]}},pr=(e,t)=>null===t?null:{url:t.url,content_owner_team_info:t.content_owner_team_info,expires:t.expires?new Date(t.expires):void 0,require_password:t.link_permissions.require_password,file_type:a.getIsFile(e)?"file":a.getIsCollection(e)?"collection":"folder",id:t.id,link_permissions:fr(t),name:t.name,path_lower:t.path_lower,rev:void 0,server_modified:void 0,team_member_info:t.team_member_info?{...t.team_member_info,member_id:t.team_member_info.member_id||""}:void 0,preview_type:t.preview_type},hr=(e,t)=>null===t?null:o.SharingSettingsUtil(e).getLinkPolicy(t),yr=(e,t)=>"edit_link_settings"===e?a.SettingsTabName.EditLinkSettingsTab:"view_link_settings"===e?a.SettingsTabName.ViewLinkSettingsTab:t?a.SettingsTabName.FileSettingsTab:a.SettingsTabName.FolderSettingsTab,vr=e=>e.formatMessage({id:"pTINM6",defaultMessage:"Cancel"}),wr=e=>e.formatMessage({id:"qIDtpl",defaultMessage:"Saving..."}),br=e=>e.formatMessage({id:"rQzKcA",defaultMessage:"Save"}),_r=e=>e.formatMessage({id:"9P9QP9",defaultMessage:"Delete link"}),kr=e=>e.formatMessage({id:"98ues2",defaultMessage:"Create link"}),Er=e=>e.formatMessage({id:"5c/Fw9",defaultMessage:"There was a problem completing this request."}),Mr=e=>e.formatMessage({id:"thZih0",defaultMessage:"File settings updated."}),Sr=e=>e.formatMessage({id:"y/SwCN",defaultMessage:"Updating folder settings"}),Tr=e=>e.formatMessage({id:"9KbrAJ",defaultMessage:"You don`t have permission to perform this action."}),Dr=e=>e.formatMessage({id:"/KMAtq",defaultMessage:"Folder settings updated."}),Cr=e=>e.formatMessage({id:"xbSGM1",defaultMessage:"This setting is turned off for all files in this folder."}),Pr=e=>e.formatMessage({id:"BUD+SU",defaultMessage:"Your admin has disabled this setting."}),Lr=e=>e.formatMessage({id:"hIM/KB",defaultMessage:"You dont have permission to change the settings on this file."}),xr=e=>e.formatMessage({id:"PLkx47",defaultMessage:"Anyone with edit access can change these settings."}),Ir=(e,t,n)=>e.formatMessage({id:"7Lpr6B",defaultMessage:"Deleting link to <st>{name}</st>..."},{st:e=>k.createElement("strong",null,e),name:i.Emstring.em_snippet(t,n?a.SNIPPET_SIZES.DESKTOP_FILENAME:a.SNIPPET_SIZES.FILENAME)}),Nr=(e,t,n)=>e.formatMessage({id:"fghTgF",defaultMessage:"Deleted link to <st>{name}</st>."},{st:e=>k.createElement("strong",null,e),name:i.Emstring.em_snippet(t,n?a.SNIPPET_SIZES.DESKTOP_FILENAME:a.SNIPPET_SIZES.FILENAME)}),Or=e=>e.formatMessage({id:"oW3nlu",defaultMessage:"Link deletion failed. Please retry."}),Ar=e=>e.formatMessage({id:"eqpbc5",defaultMessage:"Who still has access?"}),Ur=(e,t)=>"editor"===t[".tag"]?e.formatMessage({id:"OvEApa",defaultMessage:"Creating edit link..."}):e.formatMessage({id:"8PPImn",defaultMessage:"Creating view link..."}),Rr=(e,t)=>t?e.formatMessage({id:"p1EB+W",defaultMessage:"You dont have permission to create a link to this file"}):e.formatMessage({id:"/ivxG2",defaultMessage:"You dont have permission to create a link to this folder"}),$r=e=>e.formatMessage({id:"+iNJRS",defaultMessage:"There was a problem completing this request."}),Fr=(e,t)=>"editor"===t[".tag"]?e.formatMessage({id:"1+z1aQ",defaultMessage:"Edit link created"}):e.formatMessage({id:"IalA6p",defaultMessage:"View link created"}),Br=e=>e.formatMessage({id:"V2Zurn",defaultMessage:"People who have used this link might still have access"}),jr=e=>e.formatMessage({id:"rqdCog",defaultMessage:"You can check the list of people with access and remove them."}),Hr=e=>e.formatMessage({id:"YCTkuR",defaultMessage:"Got It"}),Wr=e=>e.formatMessage({id:"UBFEXr",defaultMessage:"Who still has access?"}),Yr=e=>e.formatMessage({id:"OMkgF4",defaultMessage:"Settings saved."}),qr=(e,t)=>e.formatMessage({id:"SuyTXe",defaultMessage:"Unsharing <st>{name}</st>..."},{st:e=>k.createElement("strong",null,e),name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME)}),Gr=(e,t)=>e.formatMessage({id:"K7TiCS",defaultMessage:"Unshared <st>{name}</st>."},{st:e=>k.createElement("strong",null,e),name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME)}),Vr=e=>e.formatMessage({id:"sL/c0K",defaultMessage:"Unshare failed. Please retry."}),zr=(e,t)=>a.getIsFile(t)?(e=>e.formatMessage({id:"px+mde",defaultMessage:"Unshare file"}))(e):a.getIsInsideTeamFolderTree(t)?(e=>e.formatMessage({id:"11dNm1",defaultMessage:"Reset membership"}))(e):(e=>e.formatMessage({id:"qyAR1S",defaultMessage:"Unshare folder"}))(e),Qr=(e,t)=>e.formatMessage({id:"AvoJhZ",defaultMessage:"These settings will apply to all folders inside <st>{folder_name}.</st>"},{folder_name:t,st:e=>k.createElement("strong",null,e)}),Kr=(e,t)=>e.formatMessage({id:"W4bv7f",defaultMessage:"These settings will apply to all folders inside <st>{folder_name}.</st> You can change these settings or manage access in the Admin Console."},{folder_name:t,st:e=>k.createElement("strong",null,e)}),Xr=(e,t)=>e.formatMessage({id:"M+bKji",defaultMessage:"<adminLink>Go to admin console</adminLink>"},{adminLink:e=>k.createElement(a.Button,{variant:"transparent",size:"small",onClick:()=>t("/team/admin/content/home")},e)}),Jr=(e,t)=>e.formatMessage({id:"kBmOrE",defaultMessage:"These settings will apply to all folders inside <st>{folder_name}.</st> To edit, ask your admin."},{folder_name:t,st:e=>k.createElement("strong",null,e)}),Zr=(e,t)=>e.formatMessage({id:"FAe8j7",defaultMessage:"<findAdminLink>Find admin</findAdminLink>"},{findAdminLink:e=>k.createElement(a.Button,{variant:"transparent",size:"small",onClick:()=>t("/team?_tk=left_nav_team")},e)}),ei=e=>e.formatMessage({id:"CKlNWd",defaultMessage:"Well let the owner know whenever you change these settings"}),ti=(e,t)=>e.formatMessage({id:"5Aqtnn",defaultMessage:"Only the owner (you) can change these settings. Settings apply to all folders in <st>{folder_name}.</st>"},{folder_name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME),st:e=>k.createElement("strong",null,e)}),ai=(e,t)=>e.formatMessage({id:"o9IXBs",defaultMessage:"Only the owner can change these settings. Settings apply to all folders in <st>{folder_name}.</st>"},{folder_name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME),st:e=>k.createElement("strong",null,e)}),ni=e=>e.formatMessage({id:"iQBMyq",defaultMessage:"Only team admins can change these settings."}),ri=e=>e.formatMessage({id:"6K7VUR",defaultMessage:"Close"}),ii=e=>e.formatMessage({id:"RCQdy7",defaultMessage:"This file hasnt been shared yet"}),oi=e=>e.formatMessage({id:"+hXlVB",defaultMessage:"Cant unshare a folder that is within multiple shared folders."}),si="member_policy",li="viewer_info_policy",ci="shared_link_policy",di="expires",ui="allow_download",mi="audience",gi="require_password",fi="acl_update_policy",pi="dropdown",hi="toggle",yi=e=>{const{policyFieldName:t,rightSideElement:n,bottomElement:r}=e;return k.createElement("div",{"data-testid":t,style:{marginTop:"20px"}},k.createElement("div",{style:{display:"flex",paddingLeft:"8px",paddingRight:"8px",paddingTop:"4px",paddingBottom:"4px"}},k.createElement("div",{style:{marginRight:"16px"}},k.createElement("div",null,k.createElement("span",{title:e.displayNameTitle},k.createElement(a.Text,{size:"medium",isBold:!0},e.displayName))),k.createElement("div",null,k.createElement("span",{title:e.description},k.createElement(a.Text,{size:"small",color:"subtle"},e.description),e.descriptionLinkUrl&&e.descriptionLinkText&&k.createElement("span",null," ",k.createElement(a.Button,{variant:"transparent",hasNoUnderline:!0,onClick:t=>{t.preventDefault(),e.descriptionLinkOnClicked&&e.descriptionLinkUrl&&e.descriptionLinkOnClicked(e.descriptionLinkUrl)},size:"small"},e.descriptionLinkText))))),n&&k.createElement("div",{style:{display:"flex",alignItems:"center",marginLeft:"auto"}},n)),r&&k.createElement("div",null,r))},vi=e=>{const{policyName:t,policyDict:a,selector:n,onLinkClicked:r,extra:i,className:o}=e;return k.createElement(yi,{policyFieldName:t,key:a.title,displayName:a.title,displayNameTitle:a.title,description:a.description,descriptionLinkUrl:a.descriptionLinkUrl,descriptionLinkText:a.descriptionLinkText,descriptionLinkOnClicked:r,rightSideElement:n,bottomElement:i,className:o})};let wi=0;const bi=e=>{const t=k.useMemo((()=>(wi++,`settings-toggle-id-${wi}`)),[]),{currentValue:n,optionsDict:r,disabled:i,ariaLabel:o}=e,s=r[n].label;return k.createElement(k.Fragment,null,k.createElement("p",{style:{display:"flex",justifyContent:"flex-end"}},k.createElement(a.Text,{tagName:"label",color:"faint",style:{marginRight:"8px"},htmlFor:t},s),k.createElement(a.Toggle,{id:t,"aria-label":o,className:"sharing-settings-modal__toggle",isToggled:r[n].value,disabled:i,onChange:t=>{i||e.onOptionChange(!r[n].value,t)}})))};function _i({intl:e,linkPermissions:t,linkPolicy:n,getPolicyDict:r,onPolicyUpdate:i,readOnlyPolicy:s}){const l=t.audience_options.filter((e=>!((e,t)=>"public"===e&&o.isPasswordPolicyEnforcedByAdmin(t)&&!a.isRighteousLink(t))(e.audience,t)&&e.allowed)).map((e=>e.audience)),c=r(mi),d=n.audience||"",u=l.length>0,m="password"===n.audience;let g;u||(g=k.createElement(qn,{intl:e,linkPermissions:t}));const f=k.createElement("div",null,k.createElement(ca,{currentValue:d,valuesList:l,optionsDict:c.optionsDict,onValueSelected:e=>{const a={audience:e};!function(e,t,a,n){if(o.isExternalAudience(e)){if(o.isExpirationPolicySetByAdmin(t)){const e=new Date,r=new Date(e.getFullYear(),e.getMonth(),e.getDate()+o.daysExpirationPolicyToNumber[t.days_to_expire_policy]);(!a.expires||a.expires>r)&&(n.expires=r,n.display_expiration_warning=!0)}o.isPasswordPolicyEnforcedByAdmin(t)&&!a.require_password&&(n.require_password=!0,"public"===e&&(n.display_password_warning=!0))}else n.display_expiration_warning=!1,n.display_password_warning=!1}(e,t,n,a),i(a)},disabled:!u||s,ariaLabel:c.title}),m&&k.createElement(Yn,{intl:e,linkPermissions:t,linkPolicy:n,getPolicyDict:r,onPolicyUpdate:i,readOnlyPolicy:s}));return k.createElement(vi,{policyName:mi,policyDict:c,selector:f,extra:g})}const ki=({intl:e,getPolicyDict:t,linkMetadata:a,linkPolicy:n,onPolicyUpdate:r,readOnlyPolicy:i})=>{const s=t(di),l=e=>{e&&e.expires instanceof Date&&e.expires.setHours(23,59,59),r(e)},c=(e=>{const{linkMetadata:t,linkPolicy:a}=e,n=new Date;let r;if(o.isExternalAudience(a.audience)){const{days_to_expire_policy:e}=t.link_permissions;o.isExpirationPolicyEnforcedByAdmin(t.link_permissions)&&(r=new Date(n.getFullYear(),n.getMonth(),n.getDate()+o.daysExpirationPolicyToNumber[e]))}return{before:new Date(n.getFullYear(),n.getMonth(),n.getDate()+1),after:r}})({intl:e,getPolicyDict:t,linkMetadata:a,linkPolicy:n,onPolicyUpdate:r,readOnlyPolicy:i}),d=null!=n.expires,u=k.useCallback((t=>e.formatDate(t,{day:"2-digit"})),[e]),m=k.createElement("div",null,k.createElement(bi,{currentValue:null!=n.expires?"enabled":"disabled",optionsDict:s.optionsDict,onOptionChange:e=>{let t=null;e&&(t=n.expires||o.daysAfterToday(o.isExternalAudience(n.audience)&&o.isExpirationPolicySetByAdmin(a.link_permissions)?o.daysExpirationPolicyToNumber[a.link_permissions.days_to_expire_policy]:30)),l({expires:t||void 0,display_expiration_warning:!1})},disabled:!(o.isExternalAudience(n.audience)&&o.isExpirationPolicyEnforcedByAdmin(a.link_permissions))&&!o.canModifyExpire(a)||i,ariaLabel:s.title}),d&&k.createElement("div",{className:"sharing-settings-modal__input_spacing"},k.createElement($n,{value:n.expires||new Date,disabled:!o.canModifyExpire(a)||i,isDateBlocked:e=>e<c.before||!!(c.after&&e>c.after),onChange:e=>e&&l({expires:e,display_expiration_warning:!1}),dayLabelFormat:u,monthLabelFormat:t=>e.formatDate(t,{month:"long",year:"numeric"}),weekdayLabelFormat:t=>e.formatDate(t,{weekday:"narrow"}),placement:"left"})));return k.createElement(vi,{policyName:di,policyDict:s,selector:m})};ki.displayName="SettingsExpire";const Ei=(e,t)=>o.isPasswordPolicyEnforcedByAdmin(e)&&o.isExternalAudience(t),Mi=({linkPolicy:e,linkPermissions:t,getPolicyDict:a,onPolicyUpdate:n,readOnlyPolicy:r})=>{const i=a(gi),s=e.require_password?"enabled":"disabled";return k.createElement(bi,{currentValue:s,optionsDict:i.optionsDict,onOptionChange:e=>{n({require_password:e})},disabled:!o.canTogglePassword(t)||Ei(t,e.audience)||r,ariaLabel:i.title})};Mi.displayName="PasswordToggle";function Si(e,t){return t.link_password||""===t.link_password?t.link_password:o.hasLinkPassword(e)?"123456":""}const Ti=e=>{const{intl:t,linkPolicy:n,linkPermissions:r,onPolicyUpdate:i}=e;return k.createElement("div",{className:"sharing-settings-modal__input_spacing"},k.createElement(a.TextInput,{role:"textbox",className:"password-input__input",disabled:!o.canModifyPassword(r)||e.readOnlyPolicy,placeholder:t.formatMessage({id:"um5odk",defaultMessage:"Set password"}),name:"link_password",onChange:e=>{i({[e.target.name]:e.target.value})},type:"password",isInvalid:""===n.link_password,value:Si(r,n)}))},Di=e=>{const{getPolicyDict:t,linkPolicy:a,linkPermissions:n,readOnlyPolicy:r}=e,i=t(gi),o=a.require_password||Ei(n,a.audience)&&!r,s=k.createElement("div",null,k.createElement(Mi,{...e}),o&&k.createElement(Ti,{...e}));return k.createElement(vi,{policyName:gi,policyDict:i,selector:s})};Di.displayName="SettingsPassword";a.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/settings-page/internals/settings-row/settings-download.module.out-vflCxuipZ.css",(e=>"._banner_1ih4z_4{align-items:center;background-color:var(--dig-color__opacity__surface);gap:var(--dig-spacing__micro__medium)}"));function Ci(e){return Boolean(e&&e.allow_download?e.can_disallow_download:e.can_allow_download)}const Pi=e=>{const{intl:t,linkPolicy:n,linkPermissions:r}=e;return!n.allow_download&&r.can_disallow_download?k.createElement(a.Banner,{className:"_banner_1ih4z_4","data-testid":"sharing-settings-modal__banner",withLeftIcon:k.createElement(a.UIIcon,{src:a.InfoLine})},k.createElement(a.Banner.Message,null,k.createElement(a.Text,{size:"small",isBold:!0},(e=>e.formatMessage({id:"QdaCYw",defaultMessage:"This applies only within Dropbox."}))(t)))):null},Li=({linkPermissions:e,linkPolicy:t,getPolicyDict:a,onPolicyUpdate:n,onLinkClicked:r,banner:i,readOnlyPolicy:o,isEditFolderLink:s,isPaperDoc:l})=>{const c=a(ui),d=t.allow_download?"enabled":"disabled",u=s||l?void 0:k.createElement(bi,{currentValue:d,optionsDict:c.optionsDict,onOptionChange:e=>{n(ui,e)},disabled:!Ci(e)||o,ariaLabel:c.title}),m=s||l?"setting-disabled":"";return k.createElement(vi,{policyName:ui,policyDict:c,selector:u,onLinkClicked:r,extra:i,className:m})};Li.displayName="SettingsDownload";class xi extends k.Component{constructor(e){super(e),this.handleMultiplePolicyUpdate=e=>{const t={...this.props.linkPolicy,...e};this.props.onPolicyUpdate(this.props.linkMetadata,t)},this.handlePolicyUpdate=(e,t)=>{const a={...this.props.linkPolicy,[e]:t};this.props.onPolicyUpdate(this.props.linkMetadata,a)};const{getRLPolicyDict:t}=(a=this.props.intl,{getRLPolicyDict(e,t,n,r=!1){const i="editor"===t;switch(e){case mi:return{title:i?a.formatMessage({id:"nct28+",defaultMessage:"Who has access to edit"}):a.formatMessage({id:"UPYB+9",defaultMessage:"Who has access to view"}),optionsDict:{public:{label:a.formatMessage({id:"/zG9EQ",defaultMessage:"Anyone with link"}),description:i?n?a.formatMessage({id:"Zu3WQt",defaultMessage:"Anyone with this link can edit the folder."}):r?a.formatMessage({id:"w90q8W",defaultMessage:"Anyone with this link can edit the collection."}):a.formatMessage({id:"mFcDVj",defaultMessage:"Anyone with this link can edit the file."}):n?a.formatMessage({id:"ezaRwK",defaultMessage:"Anyone with this link can view the folder."}):r?a.formatMessage({id:"uINLfI",defaultMessage:"Anyone with this link can view the collection."}):a.formatMessage({id:"plWhaX",defaultMessage:"Anyone with this link can view the file."})},team:{label:a.formatMessage({id:"Abe4xf",defaultMessage:"Team members"}),description:i?n?a.formatMessage({id:"Mug0JF",defaultMessage:"Team members with this link can edit the folder."}):r?a.formatMessage({id:"6NeGPn",defaultMessage:"Team members with this link can edit the collection."}):a.formatMessage({id:"d0xPAZ",defaultMessage:"Team members with this link can edit the file."}):n?a.formatMessage({id:"XG/OYV",defaultMessage:"Team members with this link can view the folder."}):r?a.formatMessage({id:"+fXeLg",defaultMessage:"Team members with this link can view the collection."}):a.formatMessage({id:"ErXPpA",defaultMessage:"Team members with this link can view the file."})},no_one:{label:a.formatMessage({id:"70iNCa",defaultMessage:"Only people invited"}),description:a.formatMessage({id:"CyXDsT",defaultMessage:"The link is off and does not grant additional access to anyone."})}},type:pi};case gi:return{title:a.formatMessage({id:"LqPx8N",defaultMessage:"Require password"}),optionsDict:{enabled:{label:a.formatMessage({id:"oUP+qL",defaultMessage:"On"}),value:!0},disabled:{label:a.formatMessage({id:"h58mvf",defaultMessage:"Off"}),value:!1}},type:hi};case ui:return{title:a.formatMessage({id:"7V5NRy",defaultMessage:"Allow downloads on dropbox.com"}),optionsDict:{enabled:{label:a.formatMessage({id:"EeYSnq",defaultMessage:"On"}),value:!0},disabled:{label:a.formatMessage({id:"5pmKhs",defaultMessage:"Off"}),value:!1}},type:hi};case di:return{title:a.formatMessage({id:"hnzZgk",defaultMessage:"Set expiration"}),optionsDict:{enabled:{label:a.formatMessage({id:"J8zY2i",defaultMessage:"On"}),value:!0},disabled:{label:a.formatMessage({id:"w6dVgn",defaultMessage:"Off"}),value:!1}},type:hi};case"default":return{title:a.formatMessage({id:"LtXXzz",defaultMessage:"Default sharing settings"}),description:a.formatMessage({id:"dVXrDR",defaultMessage:"Go to account settings to set a default sharing permission"}),optionsDict:{},type:"button"};default:throw new Error("Policy name not found")}}});var a;const{link_permissions:n}=e.linkMetadata,r="folder"===e.linkMetadata.file_type,i="collection"===e.linkMetadata.file_type;this.getPolicyDict=e=>t(e,n.link_access_level,r,i)}render(){const{linkMetadata:e,linkPolicy:t,onPolicyUpdate:a,intl:n,readOnlyPolicy:r,onLinkClicked:i,...o}=this.props;return k.createElement("div",{...o},k.createElement(_i,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:r}),k.createElement(ki,{intl:this.props.intl,linkMetadata:this.props.linkMetadata,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:r}),k.createElement(Di,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handleMultiplePolicyUpdate,readOnlyPolicy:r}),k.createElement(Li,{linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy,getPolicyDict:this.getPolicyDict,onPolicyUpdate:this.handlePolicyUpdate,onLinkClicked:this.props.onLinkClicked,readOnlyPolicy:r,isPaperDoc:this.props.isPaperDoc,banner:k.createElement(Pi,{intl:this.props.intl,linkPermissions:this.props.linkMetadata.link_permissions,linkPolicy:this.props.linkPolicy})}))}}xi.displayName="SettingsRighteousLinkPolicyView";const Ii=r.define({name:"sharing.create_shared_link_with_settings"},(e=>t=>r.handler(e.sharingAlphaCreateSharedLinkWithSettings(t)))),Ni=r.define({name:"sharing.revokeSharedLink"},(e=>t=>r.handler(e.sharingRevokeSharedLink(t))));a.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/settings-page/internals/link-settings/link-settings.module.out-vflNvoD_1.css",(e=>"._bannerWithRightActions_9s35h_4{align-items:center;display:flex;gap:var(--dig-spacing__micro__medium)}._bannerWithRightActions_9s35h_4>span:last-child{align-items:center;display:flex!important;justify-content:space-between;width:100%}._bannerUpsell_9s35h_17{align-items:center;border:1px solid var(--dig-color__identity__green);gap:var(--dig-spacing__micro__medium);text-align:center}._bannerMessage_9s35h_24{flex:1;margin-right:auto}._bannerActions_9s35h_29{align-items:center;display:flex!important;margin-left:auto;padding-top:0}._bannerForWarning_9s35h_36{align-items:center;background-color:var(--dig-color__warning__surface);border-radius:8px;padding:8px 12px}"));const Oi=Symbol("ON_COPY_SHARED_LINK_START"),Ai=Symbol("ON_COPY_SHARED_LINK_SUCCESS"),Ui=Symbol("ON_COPY_SHARED_LINK_ERROR"),Ri=Symbol("ON_VIEW_SETTINGS_PAGE"),{useEmitter:$i,defaultEmitter:Fi}=a.defineLogger((async({event:e,getContextValue:t})=>{var n,r,i,o,s;const l=t(a.Context$4),c=t(a.Context$5),d=t(a.Context$6),u=a.getProperties$4(l),m=a.getProperties$5(c),g=a.getProperties$6(d),f=null!==(n=u.actionSurface)&&void 0!==n?n:"share_modal_settings",p=null!==(r=u.actionElement)&&void 0!==r?r:"copy_link_button",h=null!==(i=u.contentAction)&&void 0!==i?i:"copy_link",y="settings_screen",v={isDir:null!==(o=m.isDir)&&void 0!==o&&o,type:m.fileType,fileId:g.contentIdentifier,ext:m.fileExtension},w=null!==(s=g.contentIdentifier)&&void 0!==s?s:"unknown";if(e.key!==Oi)if(e.key!==Ai)if(e.key!==Ui)if(e.key!==Ri);else a.UDCL.logEvent({class:"share",action:"view",object:"share_modal_settings",properties:{actionSurface:f,actionElement:p}},{tags:{actionSurface:f,actionElement:p}});else await a.logPAPCopySharedLinkEvent({eventState:"failed",screen:y,actionSurface:f,actionElement:p,contentAction:h,requestedAccessLevel:e.payload.requestedAccessLevel,fileIdOrPath:w,content:v,hasCachedLink:e.payload.hasCachedLink,metadata:e.payload.linkMetadata,httpCode:e.payload.httpCode,exception:e.payload.exception});else await a.logPAPCopySharedLinkEvent({eventState:"success",screen:y,actionSurface:f,actionElement:p,contentAction:h,requestedAccessLevel:e.payload.requestedAccessLevel,fileIdOrPath:w,content:v,hasCachedLink:e.payload.hasCachedLink,metadata:e.payload.linkMetadata,httpCode:e.payload.httpCode});else await a.logPAPCopySharedLinkEvent({eventState:"start",screen:y,actionSurface:f,actionElement:p,contentAction:h,requestedAccessLevel:e.payload.requestedAccessLevel,fileIdOrPath:w,content:v,hasCachedLink:e.payload.hasCachedLink,metadata:e.payload.linkMetadata})})),Bi=r.define({name:"sharing.unshareFile"},(e=>t=>r.handler(e.sharingUnshareFile(t)))),ji=r.define({name:"sharing.unshareFolder"},(e=>t=>r.handler(e.sharingUnshareFolder(t)))),Hi=({objectMetadata:e,objectIdentifier:t,contentName:o,open:s,onCancel:l,onConfirm:d,onClose:u,onObjectIdentifierChanged:m,onConfirmationModalShownChange:g,onUnshareCompleted:f})=>{const p=n.useIntl(),h=r.useEndpoint(ji),y=r.useEndpoint(Bi),v=r.useEndpoint(c.sharingCheckJobStatus),w=r.useLogger(),[b,_]=k.useState(!1),E=r.usePlatform(),M=E!==r.Platforms.DESKTOP,S=i.useShowSharingNotifcation(),T=a.getIsFile(e)?(e=>e.formatMessage({id:"+HG1Rr",defaultMessage:"Everyone will be removed from this file. Youll still keep a copy of this file in your Dropbox."}))(p):(e=>e.formatMessage({id:"SO6vAJ",defaultMessage:"Everyone will be removed from this folder. Youll still keep a copy of this folder in your Dropbox."}))(p),D=k.useCallback((async n=>{var o,s;if(d(n),E!==r.Platforms.DESKTOP&&u(),S({type:i.SharingNotificationType.IN_PROGRESS,message:qr(p,a.getName(e))}),"file"===t[".tag"]){w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START",null);const n=await y({file:t.fileId});"SUCCESS"===n.status?(w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:n}),S({type:i.SharingNotificationType.COMPLETED,message:Gr(p,a.getName(e))})):("ERROR"===n.status?w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR",{response:n}):w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL",{response:n}),S({type:i.SharingNotificationType.FAILURE,message:Vr(p)}))}else if("shared_folder"===t[".tag"]){w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_START",null);const r=await h({shared_folder_id:t.sharedFolderId,leave_a_copy:n});if("SUCCESS"===r.status){if("complete"===r.output[".tag"])S({type:i.SharingNotificationType.COMPLETED,message:Gr(p,a.getName(e))}),w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:r}),await m({".tag":"file_folder",path:a.isNewApiMetadata(e)?"":null!==(o=e.path_lower)&&void 0!==o?o:"",name:a.getName(e)});else if("async_job_id"===r.output[".tag"]){const t=r.output.async_job_id;"COMPLETE"===(await i.poll((async()=>{const n={async_job_id:t},r=await v(n);return"SUCCESS"===r.status&&"in_progress"===r.output[".tag"]?{status:"RETRY"}:(S({type:i.SharingNotificationType.COMPLETED,message:Gr(p,a.getName(e))}),{status:"COMPLETE",output:r})}),{interval:1e3,timeout:18e4})).status&&(S({type:i.SharingNotificationType.COMPLETED,message:Gr(p,a.getName(e))}),w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_SUCCESS",{response:r}),await m({".tag":"file_folder",path:a.isNewApiMetadata(e)?"":null!==(s=e.path_lower)&&void 0!==s?s:"",name:a.getName(e)}))}}else"ERROR"===r.status?w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_ERROR",{response:r}):(S({type:i.SharingNotificationType.FAILURE,message:Vr(p)}),w("SHARE_MODAL_SETTINGS__UNSHARE_OBJECT_API_FATAL",{response:r}))}f(),await Promise.all([c.invalidateListSharedLinks(t),a.invalidateObjectMembers(t),i.invalidateSharingObjectMetadata(t),i.invalidateNewApiObjectMetadata(t)])}),[d,E,S,p,e,t,u,w,y,h,m,v,f]);return k.useEffect((()=>{g(s)}),[s,g]),k.createElement(a.Modal,{open:s,isCentered:!0,withCloseButton:M?ri(p):void 0,onRequestClose:l,overlayStyles:E===r.Platforms.DESKTOP?{maxHeight:"331px"}:void 0},k.createElement(a.Modal.Header,{"data-sharing-sdk":"1",hasBottomSpacing:"title-standard"},k.createElement(a.Modal.Title,null,((e,t)=>e.formatMessage({id:"C6YnHl",defaultMessage:"Unshare {content_name}?"},{content_name:i.Emstring.em_snippet(t,a.SNIPPET_SIZES.FILENAME)}))(p,o))),k.createElement(a.Modal.Body,{"data-sharing-sdk":"1",hasVerticalSpacing:!1},T,a.getIsSharedFolder(e)&&k.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:"24px"}},k.createElement(a.Checkbox,{checked:b,onChange:()=>_(!b),style:{marginRight:"8px"}}),(e=>e.formatMessage({id:"N3y1Hr",defaultMessage:"Let removed members keep a copy of this shared folder."}))(p))),k.createElement(a.Modal.Footer,{"data-sharing-sdk":"1"},k.createElement(a.Button,{variant:"opacity",onClick:l,autoFocus:!0},p.formatMessage({id:"nSbXzb",defaultMessage:"Cancel"})),k.createElement(a.Button,{variant:"primary",onClick:()=>D(b)},p.formatMessage({id:"obuuKH",defaultMessage:"Unshare"}))))};Hi.displayName="UnshareConfirmationModal";const Wi=e=>u.useInitStore(e,(e=>{const t=u.proxy((()=>e.get().accessLevel)),n=u.proxy((()=>e.get().accountMetadata)),r=u.proxy((()=>e.get().compatLinkMetadata)),s=u.proxy((()=>e.get().compatLinkPolicy)),l=u.proxy((()=>e.get().linkMetadata)),c=u.proxy((()=>e.get().objectIdentifier)),d=u.proxy((()=>e.get().objectMetadata)),m=u.proxy((()=>e.get().originalCompatLinkPolicy)),g=u.proxy((()=>e.get().sharingPrefs)),f=u.proxy((()=>e.get().isSavable)),p=u.proxy((()=>e.get().isSaving)),h=u.proxy((()=>{const e=d.get(),r=t.get();return a.getCanCreateLink(e,r,n.get().is_tmr_member)})),y=u.proxy((()=>a.getCanDeleteLink(l.get()))),v=u.proxy((()=>{const e=r.get(),t=m.get();return null!==e&&null!==t&&((e,t)=>o.isReadOnlyPolicy(t,e.link_permissions))(e,t)})),w=u.proxy((()=>{const e=r.get();return null===e?null:(t=e,a.isRighteousLink(t.link_permissions));var t})),b=u.proxy((()=>n.get().is_family_user||!1)),_=u.proxy((()=>i.getIsTeam(n.get()))),k=u.proxy((()=>{var e;return null!==(e=n.get().is_freemium_team_member)&&void 0!==e&&e})),E=u.store(!1),M=u.store(!1),S=u.store(!1),T=u.store(!1),D=u.store(!1),C=u.proxy((()=>{const e=d.get(),t=l.get(),n=a.getIsFolder(e),r=a.getIsSharedFolder(e),i=a.getIsCollection(e);return a.getCanUnshareObject(e)&&(!n||r)&&null!==t&&!i}));return{$accessLevel:t,$accountMetadata:n,$compatLinkPolicy:s,$compatLinkMetadata:r,$linkMetadata:l,$objectIdentifier:c,$objectMetadata:d,$originalCompatLinkPolicy:m,$sharingPrefs:g,$isSavable:f,$isSaving:p,$canCreateLink:h,$canDeleteLink:y,$isFamilyUser:b,$isReadOnlyPolicy:v,$isRighteousLink:w,$isTeamUser:_,$isFreemiumTeamMember:k,$isConfirmationModalOpen:E,$isCreatingLink:M,$isDeletingLink:S,$isDowngradeBannerVisible:T,$shouldShowUnshare:C,$isUnshareConfirmationModalOpen:D,$props:e}})),Yi=({store:e})=>{const t=n.useIntl(),r=u.useStore(e.$isSavable),i=u.useStore(e.$isSaving),o=u.useStore(e.$isReadOnlyPolicy),s=u.useStore(e.$shouldShowUnshare),l=u.useStore(e.$objectMetadata),c=(e=>k.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!0)}),[e]))(e),d=(e=>k.useCallback((()=>{e.$props.get().onSave()}),[e]))(e),m=(e=>k.useCallback((()=>{e.$props.get().onCancel()}),[e]))(e);return k.createElement(k.Fragment,null,s?k.createElement(k.Fragment,null,k.createElement(a.Button,{variant:"transparent",onClick:c,"data-uxa-log":"sm24_link_settings_unshare_button"},zr(t,l)),k.createElement("div",{style:{flex:1}})):null,k.createElement(a.Button,{variant:"opacity",onClick:m,"data-uxa-log":"sm24_link_settings_cancel_button"},vr(t)),k.createElement(a.Button,{variant:"primary",onClick:d,disabled:i||!r||o,"data-uxa-log":"sm24_link_settings_save_button"},i?wr(t):br(t)))};Yi.displayName="LinkSettingsActions";const qi=({store:e})=>{const t=u.useStore(e.$objectMetadata),n=u.useStore(e.$objectIdentifier),r=u.useStore(e.$isUnshareConfirmationModalOpen),i=(e=>k.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),o=(e=>k.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),s=(e=>k.useCallback((()=>{e.$props.get().onUnshareCompleted()}),[e]))(e),l=(e=>k.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),c=(e=>k.useCallback((async t=>{await e.$props.get().onObjectIdentifierChanged(t)}),[e]))(e),d=(e=>k.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]))(e);return k.createElement(Hi,{objectMetadata:t,objectIdentifier:n,contentName:a.getName(t),onConfirm:o,onCancel:i,open:r,onUnshareCompleted:s,onClose:l,onObjectIdentifierChanged:c,onConfirmationModalShownChange:d})};qi.displayName="UnshareConfirmationModalWrapper";const Gi=({store:e})=>{const t=n.useIntl(),o="editor"===u.useStore(e.$accessLevel)[".tag"]?(e=>e.formatMessage({id:"0daJiL",defaultMessage:"There isnt a link for editing."}))(t):(e=>e.formatMessage({id:"TEAu9g",defaultMessage:"There isnt a link for viewing."}))(t),s=u.useStore(e.$canCreateLink),l=(e=>{const t=r.useEndpoint(Ii),o=r.useLogger(),s=n.useIntl(),l=r.usePlatform()===r.Platforms.METASERVER,c=i.useShowSharingNotifcation();return k.useCallback((async()=>{const n=e.$accessLevel.get(),r=e.$linkMetadata.get(),d=e.$isCreatingLink.get(),u=e.$isDeletingLink.get();if(null!==r||d||u)return;o("SHARE_MODAL_SETTINGS__CREATE_LINK__CLICK",null);const m=async()=>{e.$isCreatingLink.set(!0),c({type:i.SharingNotificationType.IN_PROGRESS,message:Ur(s,n)}),o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_START",null);const r=e.$objectIdentifier.get(),l=a.getContentIdOrPathFromObjectIdentifier(r),d=await t({path:l,settings:{access:n}});return await e.$props.get().onRefreshLinksMetadata(),"ERROR"===d.status?(e.$isCreatingLink.set(!1),o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_ERROR",{response:d}),"shared_link_already_exists"===d.error[".tag"]?void a.close():"access_denied"===d.error[".tag"]?void c({type:i.SharingNotificationType.FAILURE,message:Rr(s,"file"===r[".tag"])}):void c({type:i.SharingNotificationType.FAILURE,message:$r(s)})):"FATAL"===d.status?(e.$isCreatingLink.set(!1),o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_FATAL",{response:d}),void c({type:i.SharingNotificationType.FAILURE,message:$r(s)})):(o("SHARE_MODAL_SETTINGS__CREATE_LINK_API_SUCCESS",{response:d}),c({type:i.SharingNotificationType.COMPLETED,message:Fr(s,n)}),void e.$isCreatingLink.set(!1))};l?w.showOQModalOrContinue({action:"share_link",continueCallback:m,abortCallback:()=>{e.$props.get().onClose()}}):await m()}),[e,t,s,o,l])})(e);return s?k.createElement("span",null,o," ",k.createElement(a.Link,{href:"#",onClick:l,"aria-label":kr(t),display:"inline"},kr(t))):k.createElement("span",null,(e=>e.formatMessage({id:"ZMB2hv",defaultMessage:"Link not available."}))(t))};Gi.displayName="CreateLinkSection";const Vi=({store:e})=>{const t=n.useIntl();return u.useStore(e.$isCreatingLink)?k.createElement("div",{style:{fontSize:"12px",textAlign:"center"}},(e=>e.formatMessage({id:"6WeHGE",defaultMessage:"Creating link"}))(t)," ",k.createElement("span",{style:{display:"inline-block"}},k.createElement(Gn,null))):k.createElement("div",{style:{fontSize:"12px",paddingTop:"20px",paddingBottom:"20px",lineHeight:"22px",textAlign:"center"}},k.createElement(Gi,{store:e}))};Vi.displayName="EmptyLinkPolicy";const zi=({store:e})=>{const t=n.useIntl(),o=u.useStore(e.$isConfirmationModalOpen),s=(e=>k.useCallback((()=>{e.$isConfirmationModalOpen.set(!1)}),[e]))(e),l=u.useStore(e.$objectMetadata),c=(e=>{const t=n.useIntl(),o=r.useEndpoint(Ni),s=r.useLogger(),l=r.usePlatform(),c=i.useShowSharingNotifcation(),d=k.useCallback((()=>{e.$props.get().onOpenManageAccess()}),[e]);return k.useCallback((async()=>{const n=e.$linkMetadata.get(),m=e.$objectMetadata.get(),g=e.$isDeletingLink.get(),f=l===r.Platforms.DESKTOP;if(g||null===n)return;u.batch((()=>{e.$isConfirmationModalOpen.set(!1),e.$isDeletingLink.set(!0)})),c({type:i.SharingNotificationType.IN_PROGRESS,message:Ir(t,a.getName(m),f)}),s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_START",null);const p=await o({url:n.url});await e.$props.get().onRefreshLinksMetadata(),"SUCCESS"===p.status?(s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_SUCCESS",{response:p}),c({type:i.SharingNotificationType.COMPLETED_WITH_ACTION,message:Nr(t,a.getName(m),f),actionMessage:Ar(t),actionOnClick:d})):("ERROR"===p.status?s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_ERROR",{response:p}):s("SHARE_MODAL_SETTINGS__DELETE_LINK_API_FATAL",{response:p}),c({type:i.SharingNotificationType.FAILURE,message:Or(t)})),e.$isDeletingLink.set(!1)}),[e,o,s,t,l,d,c])})(e),d=r.usePlatform(),m=d!==r.Platforms.DESKTOP;return k.useEffect((()=>{e.$props.get().onConfirmationModalShownChange(o)}),[o,e.$props]),k.createElement(a.Modal,{open:o,isCentered:!0,withCloseButton:m?ri(t):void 0,onRequestClose:s,"data-testid":"delete-confirmation-modal",overlayStyles:d===r.Platforms.DESKTOP?{maxHeight:"331px"}:void 0},k.createElement(a.Modal.Header,{"data-sharing-sdk":"1",hasBottomSpacing:"title-standard"},k.createElement(a.Modal.Title,null,t.formatMessage({id:"hAG2ph",defaultMessage:"Delete link to {object_name}?"},{object_name:i.Emstring.em_snippet(a.getName(l),a.SNIPPET_SIZES.FILENAME)}))),k.createElement(a.Modal.Body,{"data-sharing-sdk":"1",hasVerticalSpacing:!1},(e=>e.formatMessage({id:"poEviS",defaultMessage:"If you want to further restrict access, check the list of people who still have access."}))(t)),k.createElement(a.Modal.Footer,{"data-sharing-sdk":"1"},k.createElement(a.Button,{variant:"opacity",onClick:s,autoFocus:!0},vr(t)),k.createElement(a.Button,{variant:"primary",onClick:c},(e=>e.formatMessage({id:"2xr+8c",defaultMessage:"Delete"}))(t))))};zi.displayName="DeleteLinkConfirmationModal";const Qi=({store:e})=>{const t=n.useIntl(),i=(e=>{const t=u.useStore(e.$accountMetadata),a=u.useStore(e.$isFamilyUser),n=u.useStore(e.$isTeamUser);return t.can_use_extended_sharing_controls||a?null:n?"/team/upgrade":t.is_paid?"/buy/professional?_tk=sg_pro_bundle_header":"/pro/try?_tk=sg_pro_bundle_header"})(e),o=((e,t)=>{const a=r.useLogger(),n=r.useOpenUrl();return k.useCallback((()=>{null!==t&&(n(t),a("SHARE_MODAL_SETTINGS__UPSELL_LINK__CLICKED",{href:t}))}),[t,a,n])})(0,i),s=u.useStore(e.$isTeamUser),l=u.useStore(e.$sharingPrefs),c=u.useStore(e.$isFreemiumTeamMember),d=u.useStore(e.$compatLinkMetadata),m=u.useStore(e.$compatLinkPolicy),g=u.useStore(e.$isRighteousLink);if(((e,t)=>{const a=r.useLogger();k.useEffect((()=>{null!==t&&a("SHARE_MODAL_SETTINGS__UPSELL_LINK__EXPOSED",{href:t})}),[t,a])})(0,i),r.usePlatform()===r.Platforms.MS_TEAMS_MOBILE)return null;if(null===i&&!c)return null;if(null===d||null===m||null===g)return null;const f=c?(e=>e.formatMessage({id:"Ujf2E1",defaultMessage:"These settings arent available in your current plan."}))(t):k.createElement(a.Link,{onClick:o,href:i,target:"_blank",rel:"noopener noreferrer",display:"inline"},((e,t,a)=>{const r=t?a.product_standard:a.product_professional;if("string"==typeof r){const t=n.defineMessage({id:"gh2r5j",defaultMessage:"Upgrade to {product_name} to enable all link settings."});return e.formatMessage(t,{product_name:r})}return e.formatMessage({id:"QYqjgv",defaultMessage:"Upgrade to enable all link settings."})})(t,s,l));return k.createElement("div",{style:{margin:"24px 0px",overflow:"hidden"}},k.createElement(a.Banner,{className:"_bannerUpsell_9s35h_17",withLeftIcon:k.createElement(a.UIIcon,{src:b.UpsellLine})},k.createElement(a.Banner.Message,null,k.createElement(a.Text,{size:"small",isBold:!0},f))))};Qi.displayName="LinkSettingsUpsellBanner";const Ki=({store:e})=>{const t=n.useIntl(),r=u.useStore(e.$compatLinkMetadata),i=u.useStore(e.$compatLinkPolicy),o=(e=>k.useCallback(((t,n)=>{const r=e.$compatLinkPolicy.get();n.audience&&(null==r?void 0:r.audience)&&a.isLinkAudienceLowerAccess(n.audience,null==r?void 0:r.audience)&&e.$isDowngradeBannerVisible.set(!0),e.$props.get().onCompatLinkPolicyChange(n)}),[e]))(e),s=(e=>k.useCallback((t=>{e.$props.get().onLinkClicked(t)}),[e]))(e),l=u.useStore(e.$isReadOnlyPolicy),c=u.useStore(e.$isRighteousLink),d=a.getIsPaperDoc(e.$objectMetadata.get());return null===r||null===i||null===c?k.createElement(Vi,{store:e}):k.createElement(xi,{isPaperDoc:d,linkMetadata:r,linkPolicy:i,onPolicyUpdate:o,intl:t,onLinkClicked:s,readOnlyPolicy:l,"data-testid":"righteous-link-policy"})};Ki.displayName="LinkSettingsPolicies";const Xi=({store:e})=>{const t=n.useIntl(),a=u.useStore(e.$isDowngradeBannerVisible),r=(e=>k.useCallback((()=>{e.$isDowngradeBannerVisible.set(!1)}),[e]))(e),i=(e=>k.useCallback((()=>{e.$props.get().onOpenManageAccess()}),[e]))(e);return a?k.createElement("div",{style:{marginTop:"16px"}},k.createElement(zn,{header:Br(t),subheader:jr(t),outlineButtonLabel:Hr(t),transparentButtonLabel:Wr(t),onClickOutlineButton:r,onClickCloseButton:r,onClickTransparentButton:i,showCloseButton:!0})):null};Xi.displayName="DowngradeAudienceBanner";const Ji=({store:e})=>{const t=n.useIntl(),r=u.useStore(e.$compatLinkPolicy),i=u.useStore(e.$originalCompatLinkPolicy),s=u.useStore(e.$compatLinkMetadata);if(null===s||null===r||null===i)return null;const l=o.getLinkControlPolicyWarningText(i,r,s.link_permissions,t);return l?k.createElement("div",{style:{margin:"24px 0px",overflow:"hidden"}},k.createElement(a.Banner,{className:"_bannerForWarning_9s35h_36"},k.createElement(a.Banner.Message,null,l))):null};Ji.displayName="LinkControlPolicyWarning";const Zi=({store:e})=>{const t=u.useStore(e.$linkMetadata),o=u.useStore(e.$isSavable),{onClick:s,copySuccess:l}=(e=>{const[t,n]=k.useState(!1),o=r.useLogger(),s=$i(),l=r.usePlatform()===r.Platforms.METASERVER,c=u.useStore(e.$accessLevel),d=i.useShowSharingNotifcation(),m=k.useCallback((()=>{const t=e.$linkMetadata.get(),r=e.$compatLinkMetadata.get();t&&(n(!0),d({type:i.SharingNotificationType.COMPLETED,message:a.formatSuccessMessageForUrl(t.url,c[".tag"])}),a.trackUserLeapEvent(a.SharingUserLeapEvent.SHARE_LINK_COPY_SUCCESS,a.SHARE_ACTION_ORIGIN_TYPE.SHARE_LINK_MODAL),s.select(Ai).emit({requestedAccessLevel:c[".tag"],createdNewLink:!1,hasCachedLink:!0,linkMetadata:null!=r?r:void 0}),o("SHARE_MODAL_SETTINGS__COPY_LINK__COPY_SUCCESS",{linkMetadata:t}),setTimeout((()=>{n(!1)}),5e3))}),[e,s,o,c,d]),g=k.useCallback((()=>{const t=e.$linkMetadata.get(),n=e.$compatLinkMetadata.get();t&&(d({type:i.SharingNotificationType.FAILURE,message:a.formatFailErrorMessageForUrl(t.url)}),s.select(Ui).emit({requestedAccessLevel:c[".tag"],exception:a.CopyLinkException.FAILED_COPY_TO_CLIPBOARD,hasCachedLink:!0,linkMetadata:null!=n?n:void 0}))}),[e.$linkMetadata,e.$compatLinkMetadata,d,s,c]);return{onClick:k.useCallback((t=>{t.preventDefault();const a=e.$linkMetadata.get();if(!a)return;const n=()=>{const t=e.$compatLinkMetadata.get();s.select(Oi).emit({requestedAccessLevel:c[".tag"],hasCachedLink:!0,linkMetadata:null!=t?t:void 0}),navigator.clipboard.writeText(a.url).then(m,g)};l?w.showOQModalOrContinue({action:"share_link",continueCallback:n,abortCallback:()=>{e.$props.get().onClose()}}):n()}),[e,s,c,m,g,l]),copySuccess:t}})(e),c=n.useIntl(),d=m.is_mobile_or_tablet();if(!t)return null;if(l)return k.createElement("span",{style:{display:"flex",alignItems:"center"}},k.createElement(a.Text,{variant:"label",size:"small",isBold:!0},c.formatMessage({id:"KiS7vb",defaultMessage:"Link copied!"})));const g=k.createElement(a.Text,{size:"small"},k.createElement(a.Link,{href:"#",onClick:s,style:{fontSize:"12px",display:"flex",alignItems:"center",gap:"4px",margin:d?"8px":"0px"},"aria-label":c.formatMessage({id:"D/HxHm",defaultMessage:"Copy link"}),hasNoUnderline:!0,isBold:!0,display:"inline"},k.createElement(a.UIIcon,{src:a.LinkLine,size:"medium","aria-hidden":!0}),d?void 0:c.formatMessage({id:"D/HxHm",defaultMessage:"Copy link"})));return o?k.createElement(a.Tooltip,{title:c.formatMessage({id:"Nwdnda",defaultMessage:"Save your changes to copy a link with these settings."}),placement:"bottom"},k.createElement("span",{style:{fontSize:"12px"}},g)):g};Zi.displayName="CopyLinkAction";const eo=({store:e})=>{const t=u.useStore(e.$linkMetadata),r=(e=>k.useCallback((()=>{e.$isConfirmationModalOpen.set(!0),e.$props.get().onConfirmationModalShownChange(!0)}),[e]))(e),i=n.useIntl(),o=e.$canDeleteLink.get(),s=m.is_mobile_or_tablet();return t&&o?k.createElement(a.Button,{variant:"transparent",style:{margin:s?"8px":"0px",display:"flex",alignItems:"center",gap:"4px"},size:"small",onClick:r,"aria-label":_r(i),hasNoUnderline:s,"data-uxa-log":"sm24_link_settings_delete_link_button"},s?k.createElement(a.UIIcon,{src:a.DeleteLine,size:"medium","aria-hidden":!0,color:"var(--dig-color__alert__base)"}):_r(i)):null};eo.displayName="DeleteLinkAction";const to=({store:e})=>{const t=n.useIntl(),r=u.useStore(e.$accessLevel),i=u.useStore(e.$linkMetadata),o=m.is_mobile_or_tablet();return k.createElement("div",{style:{marginTop:"2em",marginBottom:"24px"}},k.createElement(g.CardNamespace,{hasBorders:!1},i?k.createElement(a.Banner,{className:"_bannerWithRightActions_9s35h_4",withLeftIcon:"editor"===r[".tag"]?k.createElement(a.UIIcon,{src:a.EditLine,"aria-label":"Edit link icon","aria-hidden":!0}):k.createElement(a.UIIcon,{src:a.ShowLine,"aria-label":"View link icon","aria-hidden":!0})},k.createElement(a.Banner.Message,{className:"_bannerMessage_9s35h_24"},k.createElement(a.Box,{display:"flex",alignItems:"center",style:{gap:"8px"}},k.createElement(a.Text,{size:"small",isBold:!0},"editor"===r[".tag"]?(e=>e.formatMessage({id:"s5wejr",defaultMessage:"People with this link can edit"}))(t):(e=>e.formatMessage({id:"OrDD0F",defaultMessage:"People with this link can view"}))(t)),o?void 0:k.createElement(Zi,{store:e}))),k.createElement(a.Banner.Actions,{className:"_bannerActions_9s35h_29"},o?k.createElement(Zi,{store:e}):void 0,k.createElement(eo,{store:e}))):void 0,k.createElement(Ki,{store:e})))};to.displayName="LinkSettingsBody";const ao=e=>{const t=Wi(e),n=r.usePlatform()===r.Platforms.DESKTOP;return k.createElement(k.Fragment,null,k.createElement(a.Modal.Body,null,k.createElement("div",{style:n?{minHeight:"130px"}:void 0},k.createElement(Qi,{store:t}),k.createElement(Ji,{store:t}),k.createElement(Xi,{store:t}),k.createElement(to,{store:t}),k.createElement(zi,{store:t}),k.createElement(qi,{store:t}))),k.createElement(a.Modal.Footer,null,k.createElement(Yi,{store:t})))};ao.displayName="LinkSettings";const no=r.define({name:"sharing.updateFilePolicy"},(e=>t=>r.handler(e.sharingAlphaUpdateFilePolicy(t)))),ro=r.define({name:"sharing.updateFolderPolicy"},(e=>t=>r.handler(e.sharingAlphaUpdateFolderPolicyV2(t)))),io=(e,t)=>t?e.formatMessage({id:"/YIKIw",defaultMessage:"Show who can view to team members and people who can edit."}):e.formatMessage({id:"gwtTsq",defaultMessage:"Show who can view to people who can edit."}),oo=e=>({getPolicyDict(t,n){switch(t){case si:return{title:e.formatMessage({id:"sqWIHr",defaultMessage:"Who can be added as a member"}),optionsDict:{anyone:{label:e.formatMessage({id:"fCoK4r",defaultMessage:"Anyone"})},team_and_approved:{label:e.formatMessage({id:"iUy29B",defaultMessage:"Team + approved"})},team:{label:e.formatMessage({id:"7OP28A",defaultMessage:"Only team members"})}},type:pi};case li:return{title:e.formatMessage({id:"FNEmDZ",defaultMessage:"Viewer info"}),description:io(e,a.getOwnerTeam(n)),optionsDict:{enabled:{label:e.formatMessage({id:"2QJJN/",defaultMessage:"On"}),value:!0},disabled:{label:e.formatMessage({id:"bxF53X",defaultMessage:"Off"}),value:!1}},type:hi};case fi:return{title:e.formatMessage({id:"eX+ViB",defaultMessage:"Manage who can add people"}),optionsDict:{editors:{label:a.getIsTeamFolderTree(n)||a.getIsTeamMemberFolder(n)?e.formatMessage({id:"FSMn0f",defaultMessage:"Team members who can edit"}):e.formatMessage({id:"Y/OGdX",defaultMessage:"Folder members"}),description:a.getIsTeamFolderTree(n)||a.getIsTeamMemberFolder(n)?e.formatMessage({id:"uIRufc",defaultMessage:"Team members with edit access can add people."}):e.formatMessage({id:"fFxXXV",defaultMessage:"Members with edit access can add people."})},owner:{label:a.getIsTeamFolderTree(n)?e.formatMessage({id:"WFlZYD",defaultMessage:"Only Team Admins"}):e.formatMessage({id:"S2dbUj",defaultMessage:"Only the owner"}),description:a.getIsTeamFolderTree(n)?e.formatMessage({id:"SQ8IGZ",defaultMessage:"Only Team Admins."}):e.formatMessage({id:"FXj04X",defaultMessage:"Only the owner can add people."})}},type:pi};case ci:if(!a.getOwnerTeam(n))throw new Error("Policy only valid for teams");return"team"===a.getLinkAudiencePolicy(n)?((e,t)=>{if(!t)throw new Error("Policy only valid for teams");return{title:e.formatMessage({id:"2/keN+",defaultMessage:"Link restrictions"}),description:e.formatMessage({id:"hQVplF",defaultMessage:"Limits who can access this folder via a link."}),optionsDict:{anyone:{label:e.formatMessage({id:"M2hohn",defaultMessage:"No restrictions"}),description:e.formatMessage({id:"VWGUB4",defaultMessage:"Show all access options for links."})},members:{label:e.formatMessage({id:"fJsIEz",defaultMessage:"Invite-only"}),description:e.formatMessage({id:"w/Er4c",defaultMessage:"Show Only invited members only."})},team:{label:e.formatMessage({id:"BhDP0/",defaultMessage:"Team only"}),description:e.formatMessage({id:"p/lywD",defaultMessage:"Show Only people at {team_name}."},{team_name:i.Emstring.em_snippet(t.name,12)})}},type:pi}})(e,a.getOwnerTeam(n)):{title:e.formatMessage({id:"rAsVLm",defaultMessage:"Link restrictions"}),description:e.formatMessage({id:"dto0Cn",defaultMessage:"Prevent non-members from accessing this folder by link."}),optionsDict:{members:{label:e.formatMessage({id:"Vz90Vu",defaultMessage:"On"}),value:!0},anyone:{label:e.formatMessage({id:"lcDiuF",defaultMessage:"Off"}),value:!1}},type:hi};default:throw new Error("Policy name not found")}}}),so=({intl:e,currentPolicy:t,resolvedMemberPolicy:a,onPolicyChange:n,disabled:r,objectMetadata:i})=>{const o=oo(e).getPolicyDict(ci,i),s=o.optionsDict,l="team"===a?k.createElement(ca,{currentValue:t,optionsDict:s,valuesList:Object.keys(s),onValueSelected:e=>{n(e)},disabled:r,ariaLabel:o.title}):k.createElement(bi,{currentValue:t,optionsDict:s,onOptionChange:e=>{n(e?"members":"anyone")},disabled:r,ariaLabel:o.title});return k.createElement(vi,{policyName:ci,policyDict:o,selector:l})};so.displayName="SettingsLinkAudiencePolicy";const lo=({intl:e,currentPolicy:t,onPolicyChange:n,objectMetadata:r,disabled:i})=>{let o=oo(e).getPolicyDict(si,r);const s=a.getOwnerTeamPolicies(r),l=null==s?void 0:s.shared_folder_member_policy,c=["anyone","team_and_approved","team"];o={...o,optionsDict:Object.fromEntries(Object.entries(o.optionsDict).filter((([e])=>(e=>{if(l){const t=l[".tag"];return c.indexOf(e)>=c.indexOf(t)}return!1})(e)&&(e=>"team_and_approved"!==e||"team_and_approved"===t||"team_and_approved"===(null==l?void 0:l[".tag"]))(e))))};let d=t;l&&l[".tag"]!==t&&c.indexOf(l[".tag"])>c.indexOf(t)&&(d=l[".tag"]);const u=1===Object.keys(o.optionsDict).length,m=i||u,g=k.createElement(ca,{currentValue:d,optionsDict:o.optionsDict,valuesList:Object.keys(o.optionsDict),onValueSelected:e=>{const t=a.create(e);n(t)},disabled:m,ariaLabel:o.title});return k.createElement(vi,{policyName:si,policyDict:o,selector:g})};lo.displayName="SettingsMemberPolicy";const co=({intl:e,currentPolicy:t,onPolicyChange:n,objectMetadata:r,disabled:i})=>{const o=oo(e).getPolicyDict(fi,r),s=k.createElement(ca,{currentValue:t,optionsDict:o.optionsDict,valuesList:Object.keys(o.optionsDict),onValueSelected:e=>{const t=a.create(e);n(t)},disabled:i,ariaLabel:o.title});return k.createElement(vi,{policyName:fi,policyDict:o,selector:s})};co.displayName="SettingsACLUpdatePolicy";const uo=({intl:e,isPolicyEnabled:t,canDisableViewerInfo:a,canEnableViewerInfo:n,onPolicyChange:r,objectMetadata:i})=>{const o=oo(e).getPolicyDict(li,i),s=t?"enabled":"disabled",l=t?a:n,c=k.createElement(bi,{currentValue:s,optionsDict:o.optionsDict,onOptionChange:e=>{r(e)},disabled:!l,ariaLabel:o.title});return k.createElement(vi,{policyName:li,policyDict:o,selector:c})};uo.displayName="SettingsViewerInfo";a.injectInternalStyle("/static/metaserver/static/js/sharing/sharing-sdk/legos/settings-page/internals/object-settings/object-settings.module.out-vfl-QU6B_.css",(e=>"._banner_wevur_4{align-items:center;background-color:var(--dig-color__opacity__surface);gap:var(--dig-spacing__micro__medium)}"));const mo="_banner_wevur_4",go=({store:e})=>{const{msg:t,bannerType:r}=(e=>{const t=n.useIntl(),r=u.useStore(e.$canChangeOptions),i=u.useStore(e.$viewerInfoPolicyEnabled),o=u.useStore(e.$objectMetadata);return k.useMemo((()=>{if(r)return{msg:xr(t),bannerType:"default"};let e;if(i){const t=a.getPermissionInfo(o,a.DISABLE_VIEWER_INFO_TAG);e=t?t.reason:""}else{const t=a.getPermissionInfo(o,a.ENABLE_VIEWER_INFO_TAG);e=t?t.reason:""}switch(e){case"restricted_by_parent_folder":return{msg:Cr(t),bannerType:"error"};case"restricted_by_team":return{msg:Pr(t),bannerType:"error"};default:return{msg:Lr(t),bannerType:"error"}}}),[r,i,o,t])})(e);return k.createElement("div",{style:{margin:"24px 0px",overflow:"hidden"}},k.createElement(a.Banner,{className:mo,"data-testid":"file-settings-banner",withLeftIcon:"error"===r?k.createElement(a.UIIcon,{src:a.FailLine}):k.createElement(a.UIIcon,{src:a.InfoLine})},k.createElement(a.Banner.Message,null,k.createElement(a.Text,{size:"small",isBold:!0},t))))};go.displayName="FileSettingsBanner";const fo=({store:e})=>{const t=(e=>{const t=n.useIntl(),o=u.useStore(e.$canChangeOptions),s=u.useStore(e.$objectMetadata),l=u.useStore(e.$accountMetadata),c=r.useOpenUrl(),{isNonUserRelativeContext:d}=a.useSharingApiContext();return k.useMemo((()=>{const e=l.team_id===a.getOwnerTeamId(s);return d&&a.getIsInsideTeamFolderTree(s)?{msg:Qr(t,a.getName(s))}:a.getIsTeamSharedFolder(s)&&e?i.getIsTeamAdmin(l)?{msg:Kr(t,a.getName(s)),actionMsg:Xr(t,c)}:{msg:Jr(t,a.getName(s)),actionMsg:Zr(t,c)}:a.getIsInsideTeamFolderTree(s)?i.getIsTeamAdmin(l)?{msg:Qr(t,a.getName(s))}:e?{msg:Jr(t,a.getName(s)),actionMsg:Zr(t,c)}:{msg:ai(t,a.getName(s))}:o?d&&!a.getIsInsideTeamFolderTree(s)?{msg:ei(t)}:void 0:{msg:ai(t,a.getName(s))}}),[l,s,d,o,t,c])})(e),o=(e=>{const t=n.useIntl(),r=u.useStore(e.$canChangeOptions),o=u.useStore(e.$objectMetadata),s=u.useStore(e.$accountMetadata),l=k.useMemo((()=>i.convertAccountMetadataToUser(s)),[s]);return k.useMemo((()=>{if(r&&!l.is_team_admin)return a.getIsInsideTeamFolderTree(o)?{msg:ni(t),bannerType:"error"}:a.getIsOwner(o)?{msg:ti(t,a.getName(o))}:{msg:ai(t,a.getName(o))}}),[r,l.is_team_admin,o,t])})(e);return k.createElement("div",{style:{margin:"24px 0px",borderRadius:"12px",overflow:"hidden"}},t&&k.createElement(a.Banner,{className:mo,"data-testid":"folder-settings-banner",withLeftIcon:k.createElement(a.UIIcon,{src:a.InfoLine})},k.createElement(a.Banner.Message,null,k.createElement(a.Text,{size:"small",isBold:!0},t.msg)),k.createElement(a.Banner.Actions,null,t.actionMsg)),o&&k.createElement(a.Banner,{className:mo,"data-testid":"folder-settings-banner",withLeftIcon:"error"===(null==o?void 0:o.bannerType)?k.createElement(a.UIIcon,{src:a.FailLine}):k.createElement(a.UIIcon,{src:a.InfoLine})},k.createElement(a.Banner.Message,null,k.createElement(a.Text,{size:"small",isBold:!0},o.msg))))};fo.displayName="FolderSettingsBanner";const po=e=>k.useCallback((t=>{e.$viewerInfoPolicyEnabledUpdated.set(t)}),[e]),ho=({store:e})=>{const t=n.useIntl(),r=u.useStore(e.$objectMetadata),i=u.useStore(e.$viewerInfoPolicyEnabledUpdated),o=u.useStore(e.$memberPolicyUpdated),s=u.useStore(e.$aclUpdatePolicyUpdated),l=u.useStore(e.$linkAudiencePolicyUpdated),c=u.useStore(e.$resolvedMemberPolicy),d=u.useStore(e.$canDisableViewerInfo),m=u.useStore(e.$canEnableViewerInfo),g=u.useStore(e.$canChangeOptions),f="members"===u.useStore(e.$blanketLinkRestrictionsPolicy),p=u.useStore(e.$isFreemiumTeamMember),h=po(e),y=(e=>k.useCallback((t=>{e.$memberPolicyUpdated.set(t[".tag"])}),[e]))(e),v=(e=>k.useCallback((t=>{e.$aclUpdatePolicyUpdated.set(t[".tag"])}),[e]))(e),w=(e=>k.useCallback((t=>{e.$linkAudiencePolicyUpdated.set(t)}),[e]))(e);return k.createElement("div",{style:{marginTop:"24px",marginBottom:"24px"}},a.getOwnerTeam(r)&&k.createElement(lo,{intl:t,currentPolicy:o,objectMetadata:r,onPolicyChange:y,disabled:!g}),k.createElement(co,{intl:t,currentPolicy:s,objectMetadata:r,onPolicyChange:v,disabled:!g}),a.getOwnerTeam(r)&&k.createElement(so,{intl:t,currentPolicy:l,resolvedMemberPolicy:c,onPolicyChange:w,disabled:!g||f||p,objectMetadata:r}),k.createElement(uo,{intl:t,isPolicyEnabled:i,canDisableViewerInfo:d,canEnableViewerInfo:m,onPolicyChange:h,objectMetadata:r}))};ho.displayName="FolderSettingsPolicies";const yo=({store:e})=>{const t=n.useIntl(),a=u.useStore(e.$objectMetadata),r=u.useStore(e.$viewerInfoPolicyEnabledUpdated),i=u.useStore(e.$canDisableViewerInfo),o=u.useStore(e.$canEnableViewerInfo),s=po(e);return k.createElement("div",{style:{marginTop:"24px",marginBottom:"24px"}},k.createElement(uo,{intl:t,isPolicyEnabled:r,canDisableViewerInfo:i,canEnableViewerInfo:o,objectMetadata:a,onPolicyChange:s}))};yo.displayName="FileSettingsPolicies";const vo=e=>k.useCallback((()=>e.$props.get().onRefreshModal()),[e]),wo=({store:e})=>{const t=n.useIntl(),o=(e=>k.useCallback((()=>{e.$props.get().onCancelled()}),[e]))(e),s=u.useStore(e.$isSubmitting),l=u.useStore(e.$hasAnyPolicyChanged),c=u.useStore(e.$shouldShowUnshare),d=u.useStore(e.$objectMetadata),m=u.useStore(e.$isUnshareDisabled),g=a.getIsFolder(d),f=(e=>k.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!0)}),[e]))(e),p=(e=>{const t=n.useIntl(),o=r.useEndpoint(no),s=r.useEndpoint(ro),l=r.useEndpoint(i.shareFolder),c=r.useEndpoint(i.checkShareInternalJobStatus),d=r.useLogger(),u=vo(e),m=i.useShowSharingNotifcation();return k.useCallback((async()=>{var n;if(e.$hasAnyPolicyChanged.get()){const r=e.$objectMetadata.get();let g=e.$objectIdentifier.get();if("file_folder"===g[".tag"]){e.$isSubmitting.set(!0);const a={path:g.path};m({type:i.SharingNotificationType.IN_PROGRESS,message:Sr(t)});const r=await l(a);let o=g;if("SUCCESS"===r.status){if("complete"===r.output[".tag"])o={".tag":"shared_folder",sharedFolderId:r.output.shared_folder_id},await e.$props.get().onObjectIdentifierChanged(o);else if("async_job_id"===r.output[".tag"]){const t=r.output.async_job_id,a=await i.poll((async()=>{const e={async_job_id:t},a=await c(e);return"SUCCESS"===a.status&&"in_progress"===a.output[".tag"]?{status:"RETRY"}:{status:"COMPLETE",output:a}}),{interval:1e3,timeout:3e4});"COMPLETE"===a.status&&"SUCCESS"===(null===(n=a.output)||void 0===n?void 0:n.status)&&"complete"===a.output.output[".tag"]&&(o={".tag":"shared_folder",sharedFolderId:a.output.output.shared_folder_id},await e.$props.get().onObjectIdentifierChanged(o))}}else"ERROR"===r.status&&("bad_path"===r.error[".tag"]&&"already_shared"===r.error.bad_path[".tag"]?(o={".tag":"shared_folder",sharedFolderId:r.error.bad_path.shared_folder_id},await e.$props.get().onObjectIdentifierChanged(o)):"no_permission"===r.error[".tag"]&&(e.$isSubmitting.set(!1),m({type:i.SharingNotificationType.FAILURE,message:Tr(t)})));await i.invalidateSharingObjectMetadata(o),await i.invalidateNewApiObjectMetadata(o),g=o}if(a.getIsFile(r)){e.$isSubmitting.set(!0),d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_START",null);const n=await o({file:a.isNewApiMetadata(r)?"":r.id,actions:[a.CHANGE_OPTIONS_TAG,a.CREATE_VIEW_LINK_TAG,a.CREATE_EDIT_LINK_TAG,a.DISABLE_VIEWER_INFO_TAG,a.ENABLE_VIEWER_INFO_TAG,a.INVITE_VIEWER_TAG,a.INVITE_EDITOR_TAG,a.INVITE_VIEWER_NO_COMMENT_TAG,a.RELINQUISH_MEMBERSHIP_TAG,a.REMOVE_DOWNLOAD_POLICY_TAG,a.SET_DOWNLOAD_POLICY_TAG,a.UNSHARE_TAG,a.SHARE_MESSAGE_AS_COMMENT_TAG],viewer_info_policy:e.$viewerInfoPolicyEnabledUpdated.get()?{".tag":"enabled"}:{".tag":"disabled"}});await Promise.resolve(e.$props.get().onRefreshObjectMetadata()),"SUCCESS"===n.status?(d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_SUCCESS",null),m({type:i.SharingNotificationType.COMPLETED,message:Mr(t)}),e.$isSubmitting.set(!1),e.$props.get().onSaved()):("ERROR"===n.status?d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_ERROR",{error:n.error}):d("SHARE_MODAL_SETTINGS__FILE_POLICY_UPDATE_API_FATAL",{error:n.error}),m({type:i.SharingNotificationType.FAILURE,message:Er(t)}),e.$isSubmitting.set(!1))}else if("shared_folder"===g[".tag"]){e.$isSubmitting.set(!0),d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_START",null);const n=e.$hasMemberPolicyChanged.get(),o=e.$hasViewerInfoPolicyChanged.get(),l=e.$hasLinkAudiencePolicyChanged.get(),c=e.$hasAclUpdatePolicyChanged.get(),f=await s({shared_folder_id:g.sharedFolderId,actions:[a.CHANGE_OPTIONS_TAG,a.DISABLE_VIEWER_INFO_TAG,a.ENABLE_VIEWER_INFO_TAG,a.INVITE_VIEWER_TAG,a.INVITE_EDITOR_TAG,a.INVITE_VIEWER_NO_COMMENT_TAG,a.RELINQUISH_MEMBERSHIP_TAG,a.REMOVE_DOWNLOAD_POLICY_TAG,a.SET_DOWNLOAD_POLICY_TAG,a.UNSHARE_TAG],viewer_info_policy:o?e.$viewerInfoPolicyEnabledUpdated.get()?{".tag":"enabled"}:{".tag":"disabled"}:void 0,member_policy:n&&a.getOwnerTeam(r)?{".tag":e.$memberPolicyUpdated.get()}:void 0,shared_link_policy:l?{".tag":e.$linkAudiencePolicyUpdated.get()}:void 0,acl_update_policy:c?{".tag":e.$aclUpdatePolicyUpdated.get()}:void 0});await i.invalidateSharingObjectMetadata(g),await i.invalidateNewApiObjectMetadata(g),"SUCCESS"===f.status?(d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_SUCCESS",null),m({type:i.SharingNotificationType.COMPLETED,message:Dr(t)}),e.$isSubmitting.set(!1),e.$props.get().onSaved(),await Promise.resolve(u())):("ERROR"===f.status?d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_ERROR",{error:f.error}):d("SHARE_MODAL_SETTINGS__FOLDER_POLICY_UPDATE_API_FATAL",{error:f.error}),m({type:i.SharingNotificationType.FAILURE,message:Er(t)}),e.$isSubmitting.set(!1))}}}),[e,o,s,d,t,u,l,c,m])})(e);return k.createElement(k.Fragment,null,c?k.createElement(k.Fragment,null,m?k.createElement(a.Tooltip,{title:g?oi(t):ii(t),placement:"right",maxWidth:125,"data-testid":"unshare-tooltip"},k.createElement(a.Box,{style:{marginLeft:0,marginRight:"auto"}},k.createElement(a.Button,{variant:"transparent",onClick:f,disabled:m,"data-uxa-log":"sm24_object_settings_unshare_button"},zr(t,d)))):k.createElement(a.Button,{variant:"transparent",onClick:f,disabled:m,"data-uxa-log":"sm24_object_settings_unshare_button"},zr(t,d)),k.createElement("div",{style:{flex:1}})):null,k.createElement(a.Button,{variant:"opacity",onClick:o,"data-uxa-log":"sm24_object_settings_cancel_button"},vr(t)),k.createElement(a.Button,{variant:"primary",disabled:!l||s,onClick:p,"data-uxa-log":"sm24_object_settings_save_button"},s?wr(t):br(t)))};wo.displayName="ObjectSettingsActions";const bo=({store:e})=>{const t=u.useStore(e.$objectMetadata),n=u.useStore(e.$objectIdentifier),r=u.useStore(e.$isUnshareConfirmationModalOpen),i=(e=>k.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),o=(e=>k.useCallback((()=>{e.$isUnshareConfirmationModalOpen.set(!1)}),[e]))(e),s=(e=>k.useCallback((()=>{e.$props.get().onUnshareCompleted()}),[e]))(e),l=(e=>k.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),c=(e=>k.useCallback((async t=>{await e.$props.get().onObjectIdentifierChanged(t)}),[e]))(e),d=(e=>k.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]))(e);return k.createElement(Hi,{objectMetadata:t,objectIdentifier:n,contentName:a.getName(t),onConfirm:o,onCancel:i,open:r,onUnshareCompleted:s,onClose:l,onObjectIdentifierChanged:c,onConfirmationModalShownChange:d})};bo.displayName="UnshareConfirmationModalWrapper";const _o=e=>{const t=(e=>u.useInitStore(e,(e=>{const t=u.proxy((()=>e.get().objectIdentifier)),n=u.proxy((()=>e.get().objectMetadata)),r=u.proxy((()=>e.get().accountMetadata)),i=u.proxy((()=>e.get().linksMetadata)),o=u.proxy((()=>e.get().members)),s=u.proxy((()=>a.getIsFolder(n.get()))),l=u.store(!1),c=u.proxy((()=>a.getCanChangeOptions(n.get()))),d=u.proxy((()=>a.getCanEnableViewerInfo(n.get()))),m=u.proxy((()=>a.getCanDisableViewerInfo(n.get()))),g=u.proxy((()=>a.getLinkAudiencePolicy(n.get()))),f=u.proxy((()=>a.getViewerInfoPolicyEnabled(n.get()))),p=u.store(f.get()),h=u.proxy((()=>a.getOwnerTeamPolicies(n.get()))),y=u.proxy((()=>{var e;return null===(e=h.get())||void 0===e?void 0:e.shared_folder_link_restriction_policy[".tag"]})),v=u.proxy((()=>"members"===y.get()?"members":a.getLinkAudiencePolicy(n.get()))),w=u.store(v.get()),b=u.proxy((()=>a.getMemberPolicy(n.get()))),_=u.store(b.get()),k=u.proxy((()=>a.getAclUpdatePolicy(n.get()))),E=u.store(k.get()),M=u.proxy((()=>b.get()!==_.get())),S=u.proxy((()=>f.get()!==p.get())),T=u.proxy((()=>v.get()!==w.get())),D=u.proxy((()=>k.get()!==E.get())),C=u.proxy((()=>S.get()||M.get()||D.get()||T.get())),P=u.proxy((()=>{var e;const t=n.get(),r=a.getPermissionInfo(t,a.UNSHARE_TAG),i=a.getIsFolder(t),o=a.getIsSharedFolder(t),s=a.getIsCollection(t),l=a.getCanUnshareObject(t),c=i&&!l&&"folder_is_inside_shared_folder"===(null===(e=null==r?void 0:r.reason)||void 0===e?void 0:e[".tag"]);return l&&(!i||o)&&!s||c})),L=u.proxy((()=>{var e;const t=i.get(),s=o.get(),l=n.get(),c=a.getIsFolder(l),d=0!==t.links.length;if(!c&&!d){const e=s.invitees.length+s.groups.length+s.users.length;if(!e)return!0;if(1===e&&1===s.users.length){const e=s.users[0],t=r.get();return e.user.account_id===t.account_id}return!1}if(c){const t=a.getPermissionInfo(l,a.UNSHARE_TAG);return"folder_is_inside_shared_folder"===(null===(e=null==t?void 0:t.reason)||void 0===e?void 0:e[".tag"])}return!1})),x=u.store(!1),I=u.proxy((()=>{var e;return null!==(e=r.get().is_freemium_team_member)&&void 0!==e&&e}));return{$objectIdentifier:t,$objectMetadata:n,$accountMetadata:r,$linksMetadata:i,$members:o,$canChangeOptions:c,$isSubmitting:l,$resolvedMemberPolicy:g,$viewerInfoPolicyEnabled:f,$isFolder:s,$viewerInfoPolicyEnabledUpdated:p,$memberPolicy:b,$memberPolicyUpdated:_,$aclUpdatePolicy:k,$aclUpdatePolicyUpdated:E,$linkAudiencePolicy:v,$linkAudiencePolicyUpdated:w,$canEnableViewerInfo:d,$canDisableViewerInfo:m,$hasAnyPolicyChanged:C,$hasViewerInfoPolicyChanged:S,$hasMemberPolicyChanged:M,$hasLinkAudiencePolicyChanged:T,$hasAclUpdatePolicyChanged:D,$isUnshareConfirmationModalOpen:x,$shouldShowUnshare:P,$blanketLinkRestrictionsPolicy:y,$isUnshareDisabled:L,$isFreemiumTeamMember:I,$props:e}})))(e),n=t.$isFolder.get(),i=r.usePlatform()===r.Platforms.DESKTOP;return k.createElement(k.Fragment,null,k.createElement(a.Modal.Body,null,k.createElement("div",{style:i?{minHeight:"130px"}:void 0},n?k.createElement(k.Fragment,null,k.createElement(fo,{store:t}),k.createElement(ho,{store:t})):k.createElement(k.Fragment,null,k.createElement(go,{store:t}),k.createElement(yo,{store:t})))),k.createElement(a.Modal.Footer,null,k.createElement(wo,{store:t})),k.createElement(bo,{store:t}))};_o.displayName="ObjectSettings";const ko={".tag":"editor"},Eo={".tag":"viewer"},Mo="object_settings",So="edit_link_settings",To="view_link_settings",Do=e=>{const t=n.useIntl(),a=r.useLogger(),o=r.useEndpoint(ur),s=i.useShowSharingNotifcation();return k.useCallback((async()=>{if(!e.$hasUnsavedLinkChanges.get())return!0;let n=null;const r=e.$viewLinkCompatMetadata.get(),l=e.$viewLinkCompatPolicy.get(),c=e.$viewLinkCompatPolicyDraft.get();null!==r&&null!==l&&null!==c&&(n=gr(t,r,l,c));let d=null;const u=e.$editLinkCompatMetadata.get(),m=e.$editLinkCompatPolicy.get(),g=e.$editLinkCompatPolicyDraft.get();if(null!==u&&null!==m&&null!==g&&(d=gr(t,u,m,g)),n&&"error"in n)return s({type:i.SharingNotificationType.FAILURE,message:n.error}),!1;if(d&&"error"in d)return s({type:i.SharingNotificationType.FAILURE,message:d.error}),!1;const f=[...null===n?[]:[n],...null===d?[]:[d]];if(0===f.length)return e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),!0;e.$isUpdatingLinkSettings.set(!0),n&&l&&c&&l.audience&&c.audience&&l.audience!==c.audience&&a("SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE",{link_access_level:Eo,previous:mr(l.audience),next:mr(c.audience)}),d&&m&&g&&m.audience&&g.audience&&m.audience!==g.audience&&a("SHARE_MODAL_SETTINGS__LINK_AUDIENCE_CHANGE",{link_access_level:ko,previous:mr(m.audience),next:mr(g.audience)});const p=await Promise.all([...f.map((e=>o((e=>{const t={url:e.url,remove_expiration:e.remove_expiration,settings:{}};return e.settings.access&&(t.settings.access={".tag":e.settings.access}),void 0!==e.settings.allow_download&&(t.settings.allow_download=e.settings.allow_download),e.settings.audience&&(t.settings.audience={".tag":e.settings.audience}),e.settings.expires&&(t.settings.expires=e.settings.expires),e.settings.link_password&&(t.settings.link_password=e.settings.link_password),void 0!==e.settings.require_password&&(t.settings.require_password=e.settings.require_password),t})(e))))]);return await e.$props.get().onRefreshLinksMetadata(),e.$isUpdatingLinkSettings.set(!1),p.every((e=>"SUCCESS"===e.status))?(e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),s({type:i.SharingNotificationType.COMPLETED,message:Yr(t)}),!0):(s({type:i.SharingNotificationType.FAILURE,message:$r(t)}),!1)}),[e,t,o,a,s])},Co=e=>k.useCallback((async()=>{await e.$props.get().onRefreshObjectMetadata()}),[e]),Po=e=>k.useCallback((async()=>{await e.$props.get().onRefreshModal()}),[e]),Lo=e=>k.useCallback((async t=>{await e.$props.get().onObjectIdentifierChanged(t)}),[e]),xo=e=>k.useCallback((async()=>{e.$editLinkCompatPolicyDraft.set(null),e.$viewLinkCompatPolicyDraft.set(null),await e.$props.get().onRefreshLinksMetadata()}),[e]),Io=e=>{const t=Do(e);return k.useCallback((async()=>{await t()&&e.$props.get().onManageLinkAccess()}),[e,t])},No=e=>{const t=Do(e);return k.useCallback((async()=>{await t()}),[t])},Oo=e=>k.useCallback((()=>{e.$props.get().onCancel(!0)}),[e]),Ao=e=>k.useCallback((t=>{e.$props.get().onConfirmationModalShownChange(t)}),[e]),Uo=e=>{const t=r.useOpenUrl();return k.useCallback((e=>{t(e)}),[t])},Ro=e=>k.useCallback((()=>{e.$props.get().onClose()}),[e]),$o=e=>k.useCallback((()=>{e.$props.get().onUnshareCompleted()}),[e]),Fo=(e,t)=>k.useCallback((a=>{"editor"===t[".tag"]?e.$editLinkCompatPolicyDraft.set(a):"viewer"===t[".tag"]&&e.$viewLinkCompatPolicyDraft.set(a)}),[e,t]),Bo=({store:e})=>{const t=u.useStore(e.$objectIdentifier),a=u.useStore(e.$objectMetadata),n=u.useStore(e.$accountMetadata),r=u.useStore(e.$linksMetadata),i=u.useStore(e.$members),o=$o(e),s=(e=>k.useCallback((()=>{e.$props.get().onCancel(!1)}),[e]))(e),l=(e=>k.useCallback((()=>{e.$props.get().onComplete(!1)}),[e]))(e),c=Co(e),d=Lo(e),m=(e=>k.useCallback((()=>{e.$props.get().onClose()}),[e]))(e),g=Po(e),f=Ao(e);return k.createElement(_o,{objectIdentifier:t,objectMetadata:a,accountMetadata:n,linksMetadata:r,members:i,onClose:m,onSaved:l,onCancelled:s,onRefreshObjectMetadata:c,onObjectIdentifierChanged:d,onRefreshModal:g,onConfirmationModalShownChange:f,onUnshareCompleted:o})};Bo.displayName="ObjectSettingsWrapper";const jo=({store:e})=>{const t=ko,a=u.useStore(e.$accountMetadata),n=u.useStore(e.$editLinkCompatMetadata),i=u.useStore(e.$editLinkCompatPolicy),o=u.useStore(e.$editLinkCompatPolicyDraft),s=u.useStore(e.$editLinkMetadata),l=u.useStore(e.$objectIdentifier),c=u.useStore(e.$objectMetadata),d=u.useStore(e.$sharingPrefs),m=u.useStore(e.$hasUnsavedLinkChanges),g=u.useStore(e.$isUpdatingLinkSettings),f=No(e),p=Oo(e),h=Uo(),y=xo(e),v=Fo(e,ko),w=Io(e),b=Co(e),_=Lo(e),E=Ao(e),M=Po(e),S=Ro(e),T=$o(e);return k.createElement(r.MetadataProvider,{sharingAccessLevel:ko},k.createElement(ao,{accountMetadata:a,accessLevel:t,compatLinkMetadata:n,compatLinkPolicy:o||i,originalCompatLinkPolicy:i,linkMetadata:s,objectIdentifier:l,objectMetadata:c,sharingPrefs:d,isSavable:m,isSaving:g,onSave:f,onCancel:p,onOpenManageAccess:w,onLinkClicked:h,onRefreshLinksMetadata:y,onCompatLinkPolicyChange:v,onObjectIdentifierChanged:_,onRefreshObjectMetadata:b,onRefreshModal:M,onClose:S,onConfirmationModalShownChange:E,onUnshareCompleted:T}))};jo.displayName="EditLinkSettingsWrapper";const Ho=({store:e})=>{const t=Eo,a=u.useStore(e.$accountMetadata),n=u.useStore(e.$viewLinkCompatMetadata),i=u.useStore(e.$viewLinkCompatPolicy),o=u.useStore(e.$viewLinkCompatPolicyDraft),s=u.useStore(e.$viewLinkMetadata),l=u.useStore(e.$objectMetadata),c=u.useStore(e.$objectIdentifier),d=u.useStore(e.$sharingPrefs),m=u.useStore(e.$hasUnsavedLinkChanges),g=u.useStore(e.$isUpdatingLinkSettings),f=No(e),p=Oo(e),h=Uo(),y=xo(e),v=Fo(e,Eo),w=Io(e),b=Co(e),_=Lo(e),E=Po(e),M=Ro(e),S=Ao(e),T=$o(e);return k.createElement(r.MetadataProvider,{sharingAccessLevel:Eo},k.createElement(ao,{accountMetadata:a,accessLevel:t,compatLinkMetadata:n,compatLinkPolicy:o||i,originalCompatLinkPolicy:i,linkMetadata:s,objectIdentifier:c,objectMetadata:l,sharingPrefs:d,isSavable:m,isSaving:g,onSave:f,onCancel:p,onLinkClicked:h,onOpenManageAccess:w,onRefreshLinksMetadata:y,onCompatLinkPolicyChange:v,onObjectIdentifierChanged:_,onRefreshObjectMetadata:b,onRefreshModal:E,onClose:M,onConfirmationModalShownChange:S,onUnshareCompleted:T}))};Ho.displayName="ViewLinkSettingsWrapper";const Wo=({store:e})=>{const t=n.useIntl(),i=u.useStore(e.$currentTab),o=u.useStore(e.$objectMetadata),s=u.useStore(e.$linksMetadata),l=u.useStore(e.$shouldShowViewLinkTab),c=u.useStore(e.$shouldShowEditLinkTab),m=u.useStore(e.$shouldShowObjectSettingsTab),g=(e=>{const t=r.useLogger();return k.useCallback((n=>{e.$currentTab.set(n),t("SHARE_MODAL_SETTINGS__TAB_CHANGE",{selected_tab:yr(n,a.getIsFile(e.$objectMetadata.get()))})}),[e,t])})(e),f=a.getIsFile(o),p=r.useLogger(),h=$i();return k.useEffect((()=>{const t=yr(i,a.getIsFile(e.$objectMetadata.get()));p("SHARE_MODAL_SETTINGS__PAGE_VIEW",{selected_tab:t}),h.select(Ri).emit(null)}),[]),k.createElement(r.MetadataProvider,{sharingLinksMetadata:s},k.createElement(d.Tabs,{selectedTab:i,onSelection:g},k.createElement(d.Tabs.Group,{variant:"justified"},m?k.createElement(d.Tabs.Tab,{id:Mo,key:Mo},f?t.formatMessage({id:"TdlC4Q",defaultMessage:"File settings"}):t.formatMessage({id:"jR9e/q",defaultMessage:"Folder settings"})):null,c?k.createElement(d.Tabs.Tab,{id:So,key:So},t.formatMessage({id:"DIbS2E",defaultMessage:"Link for editing"})):null,l?k.createElement(d.Tabs.Tab,{id:To,key:To},t.formatMessage({id:"rvYosE",defaultMessage:"Link for viewing"})):null),k.createElement(k.Fragment,null,m?k.createElement(d.Tabs.Panel,{tabId:Mo,key:Mo},k.createElement(Bo,{store:e})):null,c?k.createElement(d.Tabs.Panel,{tabId:So,key:So},k.createElement(jo,{store:e})):null,l?k.createElement(d.Tabs.Panel,{tabId:To,key:To},k.createElement(Ho,{store:e})):null)))};Wo.displayName="ShareModalSettingsInner";const Yo=e=>{const t=(e=>{const t=n.useIntl(),{isNonUserRelativeContext:r}=a.useSharingApiContext();return u.useInitStore(e,(e=>{const n=u.proxy((()=>e.get().accountMetadata)),i=u.proxy((()=>e.get().linksMetadata)),o=u.proxy((()=>e.get().objectMetadata)),s=u.proxy((()=>e.get().objectIdentifier)),l=u.proxy((()=>e.get().sharingPrefs)),c=u.proxy((()=>e.get().members)),d=u.atom(a.vendSenderTrackey$1()),m=u.proxy((()=>{const t=a.getByAccessLevel(e.get().linksMetadata,{".tag":"editor"});return t&&(t.url=a.appendTrackeyToSharedLinkAndSortParams$1(t.url,d.get())),t})),g=u.proxy((()=>pr(o.get(),m.get()))),f=u.proxy((()=>hr(t,g.get()))),p=u.store(null),h=u.proxy((()=>{const t=a.getByAccessLevel(e.get().linksMetadata,{".tag":"viewer"});return t&&(t.url=a.appendTrackeyToSharedLinkAndSortParams$1(t.url,d.get())),t})),y=u.proxy((()=>pr(o.get(),h.get()))),v=u.proxy((()=>hr(t,y.get()))),w=u.store(null),b=u.proxy((()=>null!==w.get()||null!==p.get())),_=e=>{let t;if(e===ko)t=m;else{if(e!==Eo)return!1;t=h}const r=null!==t.get(),i=a.getCanCreateLink(o.get(),e,n.get().is_tmr_member);return a.getIsConfidentialFolder(o.get())||r||i},k=a.getIsLinkOnlyMode(o.get()),E=u.proxy((()=>!k&&_(ko)&&!r)),M=u.proxy((()=>_(Eo)&&!r)),S=u.proxy((()=>!(a.getIsCollection(o.get())||a.getIsLinkOnlyMode(o.get())))),T=u.store(!1),D=u.store(Mo);return e.get().initialTab!==Mo||S.get()?e.get().initialTab===So&&E.get()?D.set(So):e.get().initialTab===To&&M.get()&&D.set(To):D.set(E.get()?So:To),{$accountMetadata:n,$linksMetadata:i,$objectMetadata:o,$objectIdentifier:s,$sharingPrefs:l,$members:c,$editLinkMetadata:m,$editLinkCompatMetadata:g,$editLinkCompatPolicy:f,$editLinkCompatPolicyDraft:p,$viewLinkMetadata:h,$viewLinkCompatMetadata:y,$viewLinkCompatPolicy:v,$viewLinkCompatPolicyDraft:w,$hasUnsavedLinkChanges:b,$shouldShowEditLinkTab:E,$shouldShowViewLinkTab:M,$shouldShowObjectSettingsTab:S,$isUpdatingLinkSettings:T,$currentTab:D,$props:e}}))})(e);return k.createElement(Wo,{store:t})};Yo.displayName="ShareModalSettings";const qo=()=>k.createElement("div",{style:{minHeight:"200px",padding:"64px 0px 64px 0px"}},k.createElement(a.Interstitial,{in:!0,isIndeterminate:!0,onComplete:()=>{}}));qo.displayName="LoadingState";const Go=({error:e,onFallback:t,onRetry:r})=>{const i=n.useIntl();return k.createElement("div",{style:{padding:"24px",textAlign:"center"}},k.createElement("div",{style:{marginBottom:"16px"}},i.formatMessage({id:"mR7o5t",defaultMessage:"We couldnt load the sharing settings."})),k.createElement("div",{style:{display:"flex",gap:"8px",justifyContent:"center"}},r&&k.createElement(a.Button,{onClick:r,variant:"primary"},i.formatMessage({id:"3T2tjL",defaultMessage:"Try again"})),t&&k.createElement(a.Button,{onClick:t,variant:"opacity"},i.formatMessage({id:"tcMLuN",defaultMessage:"Use classic version"}))),e&&k.createElement("details",{style:{marginTop:"16px",fontSize:"12px",color:"#666"}},k.createElement("summary",null,"Technical Details"),k.createElement("pre",null,e.message)))};Go.displayName="ErrorState";const Vo=e=>{const t=i.useLegacySharingObjectMetadata(e.objectIdentifier),r=a.useObjectMembers(e.objectIdentifier),s=c.useListSharedLinks(e.objectIdentifier,!0),l=o.useSharingPrefs(),d=i.useSharingAccountInfo(),u=n.useIntl(),m=!t.isLoading&&!t.isError,g=m?t.output:null,f=e.objectIdentifier,p=e.onObjectIdentifierChanged;k.useEffect((()=>{var e;if(g&&!a.isNewApiMetadata(g)&&"file_folder"===g[".tag"]&&g.folder_id!==f.fileId){const t={".tag":"file_folder",name:g.name,path:null!==(e=g.path_lower)&&void 0!==e?e:"",fileId:g.folder_id};p(t)}}),[m,f,g,p]);const h=k.useCallback((async()=>{await i.invalidateSharingObjectMetadata(e.objectIdentifier),await i.invalidateNewApiObjectMetadata(e.objectIdentifier)}),[e.objectIdentifier]),y=k.useCallback((()=>c.invalidateListSharedLinks(e.objectIdentifier)),[e.objectIdentifier]),v=k.useCallback((async()=>{await Promise.all([i.invalidateSharingObjectMetadata(e.objectIdentifier),i.invalidateNewApiObjectMetadata(e.objectIdentifier),c.invalidateListSharedLinks(e.objectIdentifier),a.invalidateObjectMembers(e.objectIdentifier),o.invalidateSharingPrefs(),i.invalidateSharingAccountInfo()])}),[e.objectIdentifier]);if(t.isLoading||!r.isFirstPageLoaded||!r.isFirstPageOnly&&r.isLoading||s.isLoading||l.isLoading||d.isLoading)return k.createElement(qo,null);let w=null;if(t.isError?w=u.formatMessage({id:"Tym5Ts",defaultMessage:"We had trouble loading the sharing object metadata."}):r.hadContinuationError?w=u.formatMessage({id:"rTptgd",defaultMessage:"We couldnt fetch the members of the sharing object."}):!s.isLoading&&s.isError?w=u.formatMessage({id:"AQ3NNq",defaultMessage:"We couldnt fetch the shared links."}):!l.isLoading&&l.isError&&!("output"in l)||!l.output?w=u.formatMessage({id:"grfK5U",defaultMessage:"We couldnt fetch the sharing preferences."}):!d.isLoading&&d.isError&&(w=u.formatMessage({id:"I6Q3Cy",defaultMessage:"We had trouble loading the sharing account information."})),w)return k.createElement(Go,{onFallback:e.onFallback,onRetry:v,error:{message:w}});if(!t.isError&&!s.isLoading&&!s.isError&&!d.isLoading&&!d.isError&&!l.isError&&"output"in l&&l.output){const a=t.output,n=r.isFirstPageOnly?r.firstPage:r.allMembers,i=s.output,o=l.output,c=d.output;return k.createElement(Yo,{accountMetadata:c,linksMetadata:i,objectMetadata:a,sharingPrefs:o,members:n,onRefreshObjectMetadata:h,onRefreshLinksMetadata:y,...e})}return k.createElement(Go,{onFallback:e.onFallback,onRetry:v})};Vo.displayName="SettingsPageWithoutCss";const zo=a.requireCssWithComponent(Vo,["/static/typescript/component_libraries/spectrum-sharing/src/index.web-vflz7dTtC.css","/static/metaserver/static/css/dig-components/index.web-vflaJWt-u.css","/static/metaserver/static/css/dig-illustrations/index.web-vflye-46V.css","/static/metaserver/static/css/maestro_layout-vflCdpQrA.css","/static/metaserver/static/css/foundation-vflH6wwwv.css"]);zo.displayName="SettingsPage",e.ACL_UPDATE_POLICY="acl_update_policy",e.ALLOW_DOWNLOAD="allow_download",e.AUDIENCE="audience",e.BUTTON="button",e.DEFAULT="default",e.DROPDOWN="dropdown",e.DatePickerInput=$n,e.EDIT_LINK_SETTINGS="edit_link_settings",e.EXPIRES="expires",e.FILE_SETTINGS="file_settings",e.FOLDER_LINK_AUDIENCE_POLICY="shared_link_policy",e.FOLDER_SETTINGS="folder_settings",e.InbandEntryButton=lr,e.MEMBER_POLICY="member_policy",e.PAP_Hover_FlexibleSharingEntrypointAction=Zn,e.PAP_Log_FlexibleSharingEntrypointActionDwellTime=er,e.PasswordInput=Yn,e.REQUIRE_PASSWORD=oa,e.RestrictedVisibilityBanner=qn,e.ScooterLoader=Gn,e.SettingDropdown=ca,e.SettingPolicyRow=Fn,e.SettingsPage=zo,e.SettingsToggle=jn,e.SharingModalBanner=la,e.SharingModalDowngradeBanner=zn,e.SharingModalSettingsRow=da,e.SharingSettingsPassword=e=>{const{getPolicyDict:t,linkPolicy:a}=e,n=t(oa),r=k.createElement("div",null,(e=>{const{linkPolicy:t,linkPermissions:a,getPolicyDict:n,onPolicyUpdate:r}=e,i=n(oa),s=i.optionsDict,l=t.require_password?"enabled":"disabled";return k.createElement(jn,{currentValue:l,optionsDict:s,onOptionChange:(e,t)=>{r({require_password:e})},disabled:!o.canTogglePassword(a)||Hn(a,t.audience)||e.readOnlyPolicy,ariaLabel:i.title})})(e),(a.require_password||Hn(e.linkPermissions,a.audience)&&!e.readOnlyPolicy)&&k.createElement(Yn,{...e}));return k.createElement(Fn,{policyName:oa,policyDict:n,selector:r})},e.TOGGLE="toggle",e.TokenizerButton=dr,e.VIEWER_INFO_POLICY="viewer_info_policy",e.VIEW_LINK_SETTINGS="view_link_settings"}));
//# sourceMappingURL=c_settings-page_internals_settings-page-wrapper.js-vfl7nC-U7.map

//# debugId=b8ec6e4a-af35-307f-8062-6b113fdeb6e2